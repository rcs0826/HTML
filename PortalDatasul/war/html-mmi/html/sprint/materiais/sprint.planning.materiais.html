
<div class="row" style="margin-left:2px;padding-right: 3px;
  margin-right: 2px; border: 1px solid lightgray; border-radius: 4px;
  padding-top: 2px;padding-bottom: 2px;">

    <div class="row col-lg-12" style="margin-left:2px;padding-right: 3px; padding-left: 4px;
            margin-right: 2px; border: 1px solid lightgray; border-radius: 4px;
            padding-top: 2px;padding-bottom: 2px;background-color: #e3eff9">
        <label  class="col-lg-8 col-md-12 col-sm-12 col-xs-12" 
                style=" padding-top: 7px; padding-left: 0px; padding-right: 0px;">
        {{'l-period'| i18n }}: {{planningCtrl.model.ttSprint["0"].dataInicial | date:'dd/MM/yyyy'}} - {{planningCtrl.model.ttSprint["0"].dataFinal | date:'dd/MM/yyyy'}} </label>
        <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12" style="padding-right: 0px;">
            <div style="padding-right: 0px;float:right;padding-left: 2px;">
                <button
                    type="button"
                    class="btn btn-warning"
                    data-ng-click="planningCtrl.openDepositos()"
                    >{{'l-whouses' | i18n}}
                </button> 
            </div>
            <div class="dropdown" style="float:right">
                    <button class="btn btn-default dropdown-toggle"
                                    type="button"
                                    ng-if="planningCtrl.gridMateriais.length > 0"
                                    id="dropdownMenu1" 
                                    data-toggle="dropdown" 
                                    aria-haspopup="true" 
                                    aria-expanded="true">
                                {{ 'l-export-csv' | i18n }}
                        <span class="caret"></span>
                    </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                <li><a href="#" ng-click="planningCtrl.exportaMateriaisResumidoCsv()">{{'summary-list-materials' | i18n}}</a></li>
                <li><a href="#" ng-click="planningCtrl.exportaMateriaisTodosPeriodosResumidoCsv()">{{'l-periods-summarized' | i18n}}</a></li>
                </ul>
            </div>

            <div style="padding-right: 2px;float:right;padding-left: 0px;">
                <button
                    type="button"
                    class="btn btn-default btn sm"
                    ng-if="planningCtrl.gridMateriais.length > 0"
                    data-ng-click="planningCtrl.atualizaMateriais()"> 
                    <span class="glyphicon glyphicon-refresh" 
                          style="padding-right: 3px">
                    </span>{{'l-refresh' | i18n}}
                </button> 
            </div>
           
        </div>     
    </div>    
    <div class="row col-md-12" style="margin-right: 0px; margin-left: 0px; padding-left: 2px; padding-right: 2px;border-left-width: 1px;
             padding-top: 2px;">

            <totvs-grid grid-data="planningCtrl.gridMateriais"
                        grid-height="{{planningCtrl.obterAlturaMaterias()}}"
                        auto-resize-content="true"
                        auto-resize-column="true"
                        resizable="true"
                        grid="planningCtrl.myGrid"
                        class="k-header">
                <totvs-grid-column field="codItem" width="200">
                    {{'l-item' | i18n }}
                </totvs-grid-column>
                <totvs-grid-column field="descItem" width="300">
                    {{'l-description' | i18n}}
                </totvs-grid-column>
                <totvs-grid-column field="unidadeMedida" width="50" class="text-left">
                    {{'l-un' | i18n}}
                </totvs-grid-column>
                <totvs-grid-column field="necessidade" width="100" class="text-right" filter="number: 4">
                    {{'l-necessity' | i18n}}
                </totvs-grid-column>
                <totvs-grid-column field="saldoAtual" width="100" class="text-right" filter="number: 4">
                    {{'l-current-balance' | i18n}}
                </totvs-grid-column>
                <totvs-grid-column field="saldoDisponivel" width="100" class="text-right" filter="number: 4">
                    {{'l-available' | i18n}}
                </totvs-grid-column>

                <totvs-grid-detail  size="table">
                    <totvs-grid grid-data="dataItem.ttOmsMateriais" grid-height="200">
                        <totvs-grid-column field="nrOrdem" width="100" class="text-right" filter="number">
                            {{'l-requisitions' | i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="estabel" width="100" class="text-right" filter="number">
                            {{'l-site-short' | i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="equipamento" width="100"  class="text-left">
                            {{'l-equipment'| i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="previstoPlano" width="100"  class="text-right" filter="number: 2">
                            {{'l-forecasted-plan' | i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="solicReq" width="100"  class="text-right" filter="number: 4">
                            {{'l-requesting-request' | i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="qtdAtendida" width="100"  class="text-right" filter="number: 4" >
                            {{'l-qt-atend' | i18n}}
                        </totvs-grid-column>
                        <totvs-grid-column field="necessidade" width="100"  class="text-right" filter="number: 4">
                            {{'l-necessity' | i18n}}
                        </totvs-grid-column>
                    </totvs-grid>
                </totvs-grid-detail>
            </totvs-grid>
        </div> 
    </div>
</div>

<style>
    .k-header {
        background-color: #b6c8d8 !important }

</style>