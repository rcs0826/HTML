"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[703],{24156:function(t,e,i){i.r(e),i.d(e,{NotificationsPageModule:function(){return vt}});var s=i(38583),o=i(61466),n=i(95987),a=i(51110),l=i(5156),r=i(30343),c=i(68014),h=(()=>((h||(h={})).TypeEnum={Vacation:"vacation",Allowance:"allowance",Clocking:"clocking",Overtime:"overtime",OnCall:"onCall"},h))();class p{constructor(){this.init()}countToolBar(t){t&&t.total?(this.total=t.total,t.subtotals.forEach(t=>{t.type===h.TypeEnum.Vacation?this.vacation=t.total:t.type===h.TypeEnum.Allowance?this.allowance=t.total:t.type===h.TypeEnum.Overtime?this.overtime=t.total:t.type===h.TypeEnum.OnCall?this.onCall=t.total:this.clocking=t.total,this.timesheet=this.allowance+this.clocking})):this.init()}init(){this.total=0,this.vacation=0,this.allowance=0,this.clocking=0,this.timesheet=0,this.overtime=0,this.onCall=0}}var d=i(37716),g=i(44956);const u="hide-arrows";let m=(()=>{class t{constructor(t,e,i,s){this.renderer=e,this.document=i,this.ngZone=s,this.element=t.nativeElement,this.wrapper=this.createWrapper(),this.createArrows()}get poTabsContainer(){return this.element.querySelector(".po-tabs-container")}get poTabsHeader(){return this.element.querySelector(".po-tabs-header")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.checkIfArrowsIsNeededTimeoutId=setInterval(()=>{this.hideArrowsIfNotNeeded()},500)})}ngOnDestroy(){this.checkIfArrowsIsNeededTimeoutId&&clearInterval(this.checkIfArrowsIsNeededTimeoutId)}createWrapper(){const t=this.document.createElement("div");return t.className=`tabs-wrapper-with-arrows ${u}`,this.renderer.insertBefore(this.element.parentElement,t,this.element),this.renderer.appendChild(t,this.element),t}createArrows(t=this.wrapper){const e=this.document.createElement("div"),i=this.document.createElement("div");e.className="arrow arrow-left",i.className="arrow arrow-right",this.renderer.insertBefore(t,e,t.firstChild),this.renderer.appendChild(t,i);const s=this.document.createElement("span");s.className="sort po-icon po-icon-arrow-left",s.onclick=this.scrollTabs.bind(this,!1),this.renderer.appendChild(e,s);const o=this.document.createElement("span");o.className="sort po-icon po-icon-arrow-right",o.onclick=this.scrollTabs.bind(this,!0),this.renderer.appendChild(i,o)}scrollTabs(t){const e=this.poTabsContainer.clientWidth,i=this.poTabsContainer.scrollLeft+(t?40:-40);this.poTabsContainer.scrollLeft=i>0&&i<e?i:t?e:0}hideArrowsIfNotNeeded(){const t=this.wrapper.className.includes(u),e=this.poTabsHeader.clientWidth>this.poTabsContainer.clientWidth+50;t&&e?this.wrapper.className=this.wrapper.className.replace(u,""):!t&&!e&&(this.wrapper.className+=` ${u}`)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(s.K0),d.Y36(d.R0b))},t.\u0275dir=d.lG2({type:t,selectors:[["","appTabArrows",""]]}),t})();var f=i(29790);function v(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"po-tab",3),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().timesheetClicked()}),d.ALo(1,"translate"),d.qZA()}if(2&t){const t=d.oxw();d.hYB("p-label","",d.lcZ(1,3,"l-timesheet")," (",t.notificationsToolBar.timesheet,")"),d.Q6J("p-active",t.currentTab===t.tabsEnum.Timesheet)}}function w(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"po-tab",3),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().overtimeClicked()}),d.ALo(1,"translate"),d.qZA()}if(2&t){const t=d.oxw();d.hYB("p-label","",d.lcZ(1,3,"l-overtime")," (",t.notificationsToolBar.overtime,")"),d.Q6J("p-active",t.currentTab===t.tabsEnum.Overtime)}}function b(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"po-tab",3),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().vacationClicked()}),d.ALo(1,"translate"),d.qZA()}if(2&t){const t=d.oxw();d.hYB("p-label","",d.lcZ(1,3,"l-vacation")," (",t.notificationsToolBar.vacation,")"),d.Q6J("p-active",t.currentTab===t.tabsEnum.Vacation)}}function y(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"po-tab",3),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().onCallClicked()}),d.ALo(1,"translate"),d.qZA()}if(2&t){const t=d.oxw();d.hYB("p-label","",d.lcZ(1,3,"l-on-call")," (",t.notificationsToolBar.onCall,")"),d.Q6J("p-active",t.currentTab===t.tabsEnum.OnCall)}}var Z=(()=>{return(t=Z||(Z={}))[t.Timesheet=1]="Timesheet",t[t.Overtime=2]="Overtime",t[t.Vacation=3]="Vacation",t[t.OnCall=4]="OnCall",Z;var t})();let x=(()=>{class t{constructor(t,e,i,s,o){this.router=t,this.permissionSelector=e,this.notificationsCountSelectors=i,this.spinnerService=s,this.notificationsPageStore=o,this.showOvertime=!1,this.showTimesheet=!1,this.showVacation=!1,this.showOnCall=!1,this.setCurrentTabFromUrl()}get tabsEnum(){return Z}ngOnInit(){this.notificationsToolBar={},this.getPermissions(),this.countNotifications()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe(),this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.notificationsCountSubscription&&this.notificationsCountSubscription.unsubscribe(),this.notificationsPageStore.reset()}countNotifications(){this.notificationsCountSubscription=this.notificationsCountSelectors.state$.subscribe(t=>{t.loading?this.spinnerService.show():this.spinnerService.hide(),this.notificationsToolBar=new p,this.notificationsToolBar.countToolBar(t.model)})}timesheetClicked(){this.currentTab=Z.Timesheet,this.router.navigateByUrl("request/notifications/timesheet")}overtimeClicked(){this.currentTab=Z.Overtime,this.router.navigateByUrl("request/notifications/overtime/pending")}onCallClicked(){this.currentTab=Z.OnCall,this.router.navigateByUrl("request/notifications/oncall")}vacationClicked(){this.currentTab=Z.Vacation,this.router.navigateByUrl("request/notifications/vacation")}getPermissions(){this.permissionSubscription=this.permissionSelector.permissions$.subscribe(t=>{t?(this.showTimesheet=void 0===t.notificationClocking&&void 0===t.notificationAllowance||t.notificationClocking||t.notificationAllowance,this.showVacation=void 0===t.notificationVacation||t.notificationVacation,this.showOvertime=!!t.overtime,this.showOnCall=!!t.notificationOnCall,null==this.currentTab&&this.redirectBasedOnPermission()):this.showOvertime=!1})}redirectBasedOnPermission(){this.showTimesheet?this.timesheetClicked():this.showOvertime?this.overtimeClicked():this.showVacation?this.vacationClicked():this.showOnCall&&this.onCallClicked()}setCurrentTabFromUrl(){this.routerEventsSubscription=this.router.events.subscribe(t=>{if(t instanceof n.m2)switch(t.urlAfterRedirects){case"/request/notifications/timesheet":this.currentTab=Z.Timesheet;break;case"/request/notifications/vacation":this.currentTab=Z.Vacation;break;case"/request/notifications/overtime/pending":this.currentTab=Z.Overtime;break;case"/request/notifications/oncall":this.currentTab=Z.OnCall;break;default:this.currentTab=null,this.redirectBasedOnPermission()}})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(n.F0),d.Y36(c.eL),d.Y36(c.S2),d.Y36(r.V),d.Y36(o.P))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-notifications"]],decls:7,vars:4,consts:[[1,"panel-body","no-padding"],["appTabArrows","",1,"po-xl-12","po-lg-12","po-md-12","po-sm-12"],[3,"p-active","p-label","p-click",4,"ngIf"],[3,"p-active","p-label","p-click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"po-tabs",1),d.YNc(2,v,2,5,"po-tab",2),d.YNc(3,w,2,5,"po-tab",2),d.YNc(4,b,2,5,"po-tab",2),d.YNc(5,y,2,5,"po-tab",2),d.qZA(),d._UZ(6,"router-outlet"),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",e.showTimesheet),d.xp6(1),d.Q6J("ngIf",e.showOvertime),d.xp6(1),d.Q6J("ngIf",e.showVacation),d.xp6(1),d.Q6J("ngIf",e.showOnCall))},directives:[g.Gv4,m,s.O5,n.lC,g.w8F],pipes:[f.X$],styles:["[_nghost-%COMP%]     .po-wrapper .po-page{display:inline-block;height:100%!important}"]}),t})();var A=i(64762),S=i(92340),M=i(81483),T=i(33490),C=i(63114),q=i(97983),L=i(98348),V=i(36227),O=i(49512),P=i(12994),k=i(54683),_=i(84479),N=i(65241),D=i(39075),F=i(96054),U=i(32114),J=i(3679),I=i(10690),R=i(13235),E=i(32268);function Y(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"span",10),d.NdJ("click",function(){d.CHM(t);const e=d.oxw().$implicit;return d.oxw(2).getAttachedFile(e)}),d.qZA()}}function B(t,e){if(1&t&&d.YNc(0,Y,1,0,"span",9),2&t){const t=e.$implicit;d.Q6J("ngIf",t&&""!==t)}}function H(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",6),d.TgZ(1,"po-table",7),d.NdJ("p-all-selected",function(){return d.CHM(t),d.oxw().countSelected()})("p-all-unselected",function(){return d.CHM(t),d.oxw().countSelected()})("p-selected",function(){return d.CHM(t),d.oxw().countSelected()})("p-unselected",function(){return d.CHM(t),d.oxw().countSelected()})("p-show-more",function(){return d.CHM(t),d.oxw().showMore()}),d.YNc(2,B,1,1,"ng-template",8),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(1),d.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",t.columns)("p-items",t.items)("p-actions",t.tableActions)("p-loading",t.loading)("p-show-more-disabled",t.showMoreDisable),d.xp6(1),d.Q6J("p-property",t.collumnName)}}function G(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.ALo(7,"utcDate"),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-date")),d.xp6(3),d.Oqu(d.xi3(7,4,t.date,"shortDate"))}}function Q(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.ALo(7,"utcDate"),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-initial-date")),d.xp6(3),d.Oqu(d.xi3(7,4,t.date,"shortDate"))}}function z(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.ALo(7,"utcDate"),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-end-date")),d.xp6(3),d.Oqu(d.xi3(7,4,t.endDate,"shortDate"))}}function j(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-hour")),d.xp6(3),d.Oqu(t.hour)}}function $(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-initial-hour")),d.xp6(3),d.Oqu(t.hour)}}function X(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",27),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-final-hour")),d.xp6(3),d.Oqu(t.endHour)}}function W(t,e){1&t&&(d.TgZ(0,"label",35),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&t&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"l-justification")))}function K(t,e){1&t&&(d.TgZ(0,"label",35),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&t&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"l-reason")))}function tt(t,e){if(1&t&&(d.TgZ(0,"div",25),d._UZ(1,"hr",26),d.TgZ(2,"label",35),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"strong",28),d._uU(6),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(d.lcZ(4,2,"l-reason")),d.xp6(3),d.Oqu(t.reason)}}function et(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"po-button",36),d.NdJ("p-click",function(){d.CHM(t);const e=d.oxw().$implicit;return d.oxw(2).getAttachedFile(e.requestId)}),d.ALo(2,"translate"),d.qZA(),d.qZA()}2&t&&(d.xp6(1),d.s9C("p-label",d.lcZ(2,1,"l-view-medical-certificate")))}function it(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",16),d.TgZ(1,"app-expansion-card"),d.TgZ(2,"div",17),d.TgZ(3,"div",18),d.TgZ(4,"po-checkbox",19),d.NdJ("ngModelChange",function(e){return d.CHM(t).$implicit.checked=e})("p-change",function(){const e=d.CHM(t).$implicit;return d.oxw(2).selectMobile(e)}),d.qZA(),d.qZA(),d.TgZ(5,"div",20),d._UZ(6,"div",21),d.TgZ(7,"div",22),d.TgZ(8,"strong"),d._uU(9),d.ALo(10,"titleCase"),d.qZA(),d.qZA(),d.TgZ(11,"div",23),d._uU(12),d.ALo(13,"titleCase"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",24),d.TgZ(15,"div",25),d._UZ(16,"hr",26),d.TgZ(17,"label",27),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.TgZ(20,"strong",28),d._uU(21),d.qZA(),d.qZA(),d.YNc(22,G,8,7,"div",29),d.YNc(23,Q,8,7,"div",29),d.YNc(24,z,8,7,"div",29),d.YNc(25,j,7,4,"div",29),d.YNc(26,$,7,4,"div",29),d.YNc(27,X,7,4,"div",29),d.TgZ(28,"div",25),d._UZ(29,"hr",26),d.YNc(30,W,3,3,"label",30),d.YNc(31,K,3,3,"label",30),d.TgZ(32,"strong",28),d._uU(33),d.qZA(),d.qZA(),d.YNc(34,tt,7,4,"div",29),d.YNc(35,et,3,3,"div",31),d.TgZ(36,"div",32),d.TgZ(37,"po-button",33),d.NdJ("p-click",function(){const e=d.CHM(t).$implicit;return d.oxw(2).reprove(e)}),d.ALo(38,"translate"),d.qZA(),d.TgZ(39,"po-button",34),d.NdJ("p-click",function(){const e=d.CHM(t).$implicit;return d.oxw(2).approve(e)}),d.ALo(40,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit,i=e.index,s=d.oxw(2);d.xp6(4),d.MGl("id","card-",i,""),d.Q6J("ngModel",t.checked),d.xp6(2),d.Udp("background-image",s.getAvatar(t.object.employeeSummary.id)),d.xp6(3),d.Oqu(d.lcZ(10,21,t.object.employeeSummary.name)),d.xp6(3),d.Oqu(d.lcZ(13,23,t.object.employeeSummary.roleDescription)),d.xp6(6),d.Oqu(d.lcZ(19,25,"l-type")),d.xp6(3),d.Oqu(t.type),d.xp6(1),d.Q6J("ngIf","clocking"===t.originalType),d.xp6(1),d.Q6J("ngIf","allowance"===t.originalType),d.xp6(1),d.Q6J("ngIf","allowance"===t.originalType),d.xp6(1),d.Q6J("ngIf","clocking"===t.originalType),d.xp6(1),d.Q6J("ngIf","allowance"===t.originalType),d.xp6(1),d.Q6J("ngIf","allowance"===t.originalType),d.xp6(3),d.Q6J("ngIf",!t.isDatasul),d.xp6(1),d.Q6J("ngIf",t.isDatasul),d.xp6(2),d.Oqu(t.justify),d.xp6(1),d.Q6J("ngIf",t.isProtheus),d.xp6(1),d.Q6J("ngIf",s.canViewAttachFile&&t.attachment&&""!==t.attachment),d.xp6(2),d.s9C("p-label",d.lcZ(38,27,"l-decline")),d.xp6(2),d.s9C("p-label",d.lcZ(40,29,"l-accept"))}}function st(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",11),d.TgZ(1,"div"),d.TgZ(2,"po-checkbox",12),d.NdJ("p-change",function(){d.CHM(t);const e=d.oxw();return e.selectAllMobile(e.items)})("ngModelChange",function(e){return d.CHM(t),d.oxw().checkAll=e}),d.ALo(3,"translate"),d.qZA(),d.qZA(),d.YNc(4,it,41,31,"div",13),d.TgZ(5,"div",14),d.TgZ(6,"po-button",15),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().showMore()}),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(2),d.s9C("p-label",d.lcZ(3,6,"l-select-all")),d.Q6J("ngModel",t.checkAll),d.xp6(2),d.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByFunction),d.xp6(2),d.s9C("p-label",d.lcZ(7,8,"l-load-more")),d.Q6J("p-disabled",t.showMoreDisable)}}function ot(t,e){if(1&t&&(d.TgZ(0,"span",37),d._uU(1),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Oqu(t.modalText)}}function nt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"po-textarea",38),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().reprovedReason=e}),d.ALo(1,"translate"),d.qZA()}if(2&t){const t=d.oxw();d.s9C("p-label",d.lcZ(1,2,"l-reason")),d.Q6J("ngModel",t.reprovedReason)}}let at=(()=>{class t{constructor(t,e,i,s,o,n,a,l,r,c){this.notificationService=t,this.windowUtilService=e,this.appTranslateService=i,this.profileService=s,this.sanitizationService=o,this.router=n,this.permissionSelectors=a,this.allowanceService=l,this.fieldPropertiesService=r,this.notificationServiceManager=c,this.timesheetListView=new T.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.selectedLines=[],this.canViewAttachFile=!1,this.collumnName="attachment",this.reasonRequired=!1,this.isReprove=!1}onResize(){this.isMobileCheck()}ngOnInit(){this.initializeComponent()}initializeComponent(){return(0,A.mG)(this,void 0,void 0,function*(){this.timesheetListView.actualPage=1,this.timesheetListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.disableVerify=!0,this.tab="timesheet",this.countLines="",this.verifyModal=[!1,!1,!1,{}],yield this.getPermissions(),this.isMobileCheck(),this.getLabelsSearch(),this.getTypeFilterOptions(),this.getColumns(),this.getPageActions(),this.getTableActions(),this.getModalActions(),this.getData(!0),this.getFieldProps()})}isMobileCheck(){this.isMobile=this.windowUtilService.isMobileDevice()}getAttachedFile(t){return(0,A.mG)(this,void 0,void 0,function*(){try{const e=yield this.allowanceService.getAttachedFile(t);e&&this.initializeFilePreviewDialog("timesheet/allowances/file/download",e,t)}catch(e){console.error(e)}})}getData(t){return(0,A.mG)(this,void 0,void 0,function*(){yield this.getTimesheetNotificationsList(this.timesheetListView.actualPage,this.timesheetListView.pageSize,t,this.employeeName,this.dateFilter,this.typeFilter)})}showMore(){this.getTimesheetNotificationsList(this.timesheetListView.getNextPage(),this.timesheetListView.pageSize,!1,this.employeeName,this.dateFilter,this.typeFilter)}countSelected(){let t;t=this.getLines(t),t&&t>0?(this.countLines=" ("+t.toString()+")",this.getPageActions()):(this.countLines="",this.getPageActions())}selectAllMobile(t){this.selectedLines=[],t.forEach(t=>{t.checked=this.checkAll,this.selectedLines.push(t)}),this.selectedLines=this.checkAll?this.selectedLines:[],this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}selectMobile(t){if(this.selectedLines.length>0)if(this.selectedLines.find(e=>e===t)){const e=this.selectedLines.indexOf(t);e>-1&&this.selectedLines.splice(e,1),this.checkAll&&this.items.length!==this.selectedLines.length&&(this.checkAll=!1)}else this.selectedLines.push(t),!this.checkAll&&this.items.length===this.selectedLines.length&&(this.checkAll=!0);else this.selectedLines.push(t);this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}onAdvancedSearch(t){t?this.searchItems(t):this.resetFilters()}onChangeDisclaimers(t){const e={};t.forEach(t=>{e[t.property]=t.value}),this.searchItems(e)}onQuickSearch(t){t?this.searchItems({name:t}):this.resetFilters()}translateString(t){return this.appTranslateService.getI18n(t)}getAvatar(t){return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(e=>{e&&e.content&&(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle(`url(${"data:image/"+(e.type||"png")+";base64,"+e.content})`))})),this.avatar[t]}resetFilters(){this.timesheetListView.actualPage>1&&(this.timesheetListView.actualPage=1),this.getData(!0)}getTimesheetNotificationsList(t,e,i,s,o,n){return(0,A.mG)(this,void 0,void 0,function*(){try{const a=yield this.notificationService.getNotificationsQP(S.N.loggedUser,n,t,e,s,o,this.tab);if(a)return this.updateItemsForTable(a,i)}catch(a){}this.timesheetListView.hasMoreRecords=!1})}updateItemsForTable(t,e){var i,s,o;return(0,A.mG)(this,void 0,void 0,function*(){this.clearData(e),this.timesheetListView.records=this.timesheetListView.records.concat(t.items),this.timesheetListView.hasMoreRecords=t.hasNext,this.notificationsView=[],this.timesheetListView.records.forEach(t=>{this.notificationsView.push(new k.B(t))});for(let t=0;t<this.timesheetListView.records.length;t++){const e={id:this.notificationsView[t].id,isDatasul:L.ZP.isErpDatasul(),isProtheus:L.ZP.isErpProtheus(),checked:!1,avatar:this.getAvatar(this.notificationsView[t].employeeSummary.id),name:this.notificationsView[t].employeeSummary.name,date:M.Em.formatUTCDate(new Date(this.notificationsView[t].fieldsView.initDate.value)),endDate:this.notificationsView[t].fieldsView.endDate&&this.notificationsView[t].fieldsView.endDate.value?M.Em.formatUTCDate(new Date(this.notificationsView[t].fieldsView.endDate.value)):"",type:yield this.returnTypeLabel(this.notificationsView[t]),originalType:this.notificationsView[t].type,hour:this.notificationsView[t].fieldsView.initHour&&"-1"!==this.notificationsView[t].fieldsView.initHour.value?M.Em.getHoursByMilliseconds(this.notificationsView[t].fieldsView.initHour.value):"00:00",endHour:this.notificationsView[t].fieldsView.endHour&&"-1"!==this.notificationsView[t].fieldsView.endHour.value?M.Em.getHoursByMilliseconds(this.notificationsView[t].fieldsView.endHour.value):"00:00",justify:L.ZP.isErpDatasul()?this.notificationsView[t].fieldsView.reason?this.notificationsView[t].fieldsView.reason.value:"":this.notificationsView[t].fieldsView.justify.value,reason:L.ZP.isErpProtheus()&&this.notificationsView[t].fieldsView.reason?this.notificationsView[t].fieldsView.reason.value:"",object:this.notificationsView[t],attachment:/true/i.test(null===(i=this.notificationsView[t].fieldsView.hasAttachment)||void 0===i?void 0:i.value)?null===(s=this.notificationsView[t].fieldsView.requestId)||void 0===s?void 0:s.value:"",requestId:null===(o=this.notificationsView[t].fieldsView.requestId)||void 0===o?void 0:o.value};this.items[t]=e}this.items.length<this.timesheetListView.actualPage*this.timesheetListView.pageSize&&(this.showMoreDisable=!0)})}clearData(t){(!this.timesheetListView.records||t)&&(this.timesheetListView.records=[],t&&(this.selectedLines=[],this.items=[]))}getLines(t){return this.isMobile?this.selectedLines.length:this.poTable.getSelectedRows().length}disableButtons(){return this.isMobile?this.disableVerify:!this.items.find(t=>t.$selected)}searchItems(t){this.employeeName=t.name?t.name:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.typeFilter=t.type?t.type:void 0,this.timesheetListView.actualPage>1&&(this.timesheetListView.actualPage=1),this.getData(!0)}approveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-approve-notifications")).toString(),this.poModal.open(),this.reasonRequired=!1,this.isReprove=!1,this.verifyModal=[!0,!0,!0,{}]})}reproveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-reprove-notifications")).toString(),this.poModal.open(),this.isReprove=!0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!0,{}]})}approve(t){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-approve-notification")).toString(),this.poModal.open(),this.isReprove=!1,this.reasonRequired=!1,this.verifyModal=[!0,!0,!1,t]})}reprove(t){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-reprove-notification")).toString(),this.poModal.open(),this.isReprove=!0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!1,t]})}sendData(t,e,i){return(0,A.mG)(this,void 0,void 0,function*(){let s,o=t?"m-approved-request":"m-reprove-request";s=this.isMobile?e?this.selectedLines:[i]:e?this.poTable.getSelectedRows():[i],yield this.notificationService.createRequisitionsResponse(s,t,o,this.reprovedReason),yield this.initializeComponent()})}detail(t){P.T.notification=t.object,this.router.navigate(["request/notificationDetails"])}returnTypeLabel(t){return(0,A.mG)(this,void 0,void 0,function*(){return"clocking"===t.type?L.ZP.isErpDatasul()?(yield this.translateString("l-clocking-hour")).toString():(yield this.translateString("l-clocking-hour")).toString()+" ("+t.fieldsView.direction.value+")":(yield this.translateString("l-allowance")).toString()})}getModalActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.closeAction={action:()=>{this.closeModal()},label:(yield this.translateString("l-cancel-title")).toString(),danger:!0},this.confirmAction={action:()=>{this.confirmModal()},label:(yield this.translateString("l-yes")).toString()}})}getTypeFilterOptions(){return(0,A.mG)(this,void 0,void 0,function*(){this.typeFilterOptions=[{value:"allowance",label:(yield this.translateString("l-allowance")).toString()},{value:"clocking",label:(yield this.translateString("l-clocking-hour")).toString()}]})}getLabelsSearch(){return(0,A.mG)(this,void 0,void 0,function*(){this.literals={disclaimerGroupTitle:(yield this.translateString("l-filter-applied")).toString(),filterTitle:(yield this.translateString("l-filter-title")).toString(),filterCancelLabel:(yield this.translateString("l-cancel-title")).toString(),filterConfirmLabel:(yield this.translateString("l-apply")).toString(),quickSearchLabel:(yield this.translateString("l-researched-value")).toString(),searchPlaceholder:(yield this.translateString("l-search-collaborator-placeholder")).toString()},this.filters=[{property:"name",label:(yield this.translateString("l-name-collaborator")).toString(),gridColumns:6},{property:"date",label:(yield this.translateString("l-date")).toString(),type:"date",gridColumns:6},{property:"type",label:"Tipo de solicita\xe7\xe3o",options:this.typeFilterOptions,gridColumns:6}]})}getColumns(){return(0,A.mG)(this,void 0,void 0,function*(){this.columns=[{property:"name",label:(yield this.translateString("l-name")).toString(),width:this.canViewAttachFile?"16,6%":"20%"},{property:"type",label:(yield this.translateString("l-type")).toString(),width:this.canViewAttachFile?"16,6%":"20%"},{property:"date",label:(yield this.translateString("l-date")).toString(),type:"date",width:this.canViewAttachFile?"16,6%":"20%"},{property:"hour",label:(yield this.translateString("l-hour")).toString(),width:this.canViewAttachFile?"16,6%":"20%"},{property:"justify",label:L.ZP.isErpDatasul()?(yield this.translateString("l-reason")).toString():(yield this.translateString("l-justification")).toString(),width:this.canViewAttachFile?"16,6%":"20%"}],this.canViewAttachFile&&this.columns.push({property:this.collumnName,label:(yield this.translateString("l-attachments")).toString(),type:"columnTemplate",width:"16,6%"})})}getPageActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.pageActions=[{label:(yield this.translateString("l-approve-selected")).toString()+this.countLines,action:this.approveMany.bind(this),disabled:this.disableButtons.bind(this)},{label:(yield this.translateString("l-reprove-selected")).toString()+this.countLines,action:this.reproveMany.bind(this),disabled:this.disableButtons.bind(this)}]})}getTableActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.tableActions=[{action:this.approve.bind(this),label:(yield this.translateString("l-approve")).toString()},{action:this.reprove.bind(this),label:(yield this.translateString("l-decline")).toString()},{action:this.detail.bind(this),label:(yield this.translateString("l-see-details")).toString()}]})}getFieldProps(){return(0,A.mG)(this,void 0,void 0,function*(){(yield this.fieldPropertiesService.getFieldProperties("notification")).map(t=>{"reasonTimesheet"===t.field&&(this.reasoFieldProps=t)})})}closeModal(){this.closePoModal(),this.verifyModal=[!1,!1,!1,{}]}confirmModal(){var t;return(0,A.mG)(this,void 0,void 0,function*(){if(this.isReprove&&(null===(t=this.reasoFieldProps)||void 0===t?void 0:t.required)&&!this.reprovedReason){const t=yield this.appTranslateService.getI18n("l-reason-required");this.notificationServiceManager.showNotification(t,g.ik9.Error)}else this.poModal.close(),this.verifyModal[0]&&(this.verifyModal[2]?yield this.sendData(this.verifyModal[1],this.verifyModal[2]):yield this.sendData(this.verifyModal[1],this.verifyModal[2],this.verifyModal[3]))})}closePoModal(){this.poModal.close()}getPermissions(){return(0,A.mG)(this,void 0,void 0,function*(){const t=yield this.permissionSelectors.nextPermissionsNotNull();this.canViewAttachFile=t.viewAttachmentAllowance})}initializeFilePreviewDialog(t,e,i){this.previewFileDialog.initializeComponent(t,e,i)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(P.T),d.Y36(_.g),d.Y36(N.g),d.Y36(q.H),d.Y36(D.H7),d.Y36(n.F0),d.Y36(c.eL),d.Y36(O.n),d.Y36(V.c),d.Y36(F.g))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-tab-timesheet"]],viewQuery:function(t,e){if(1&t&&(d.Gf(g._w3,5),d.Gf(g.hmF,7),d.Gf(C.K,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.poTable=t.first),d.iGM(t=d.CRH())&&(e.poModal=t.first),d.iGM(t=d.CRH())&&(e.previewFileDialog=t.first)}},hostBindings:function(t,e){1&t&&d.NdJ("resize",function(t){return e.onResize(t)},!1,d.Jf7)},decls:8,vars:12,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],["p-size","md",3,"p-title","p-primary-action","p-secondary-action"],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12",4,"ngIf"],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12","name","textarea",3,"ngModel","p-label","ngModelChange",4,"ngIf"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",1,"po-table-custom-hide-text-overflow",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],["p-table-column-template","",3,"p-property"],["class","ico-download icon-color-totvs mouse-pointer download-icon waves-effect waves-base icon-size",3,"click",4,"ngIf"],[1,"ico-download","icon-color-totvs","mouse-pointer","download-icon","waves-effect","waves-base","icon-size",3,"click"],[1,"mobile"],["name","select-all",3,"ngModel","p-label","p-change","ngModelChange"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],[1,"po-sm-6","po-md-6"],[1,"pull-right"],["class","card-line",4,"ngIf"],["class","po-sm-4 po-md-5",4,"ngIf"],[4,"ngIf"],[1,"po-sm-12","po-md-12","no-padding"],["p-type","danger",1,"po-mt-2","po-mb-2","po-sm-6","po-md-6",3,"p-label","p-click"],[1,"po-mt-2","po-mb-2","po-sm-6","po-md-6",3,"p-label","p-click"],[1,"po-sm-4","po-md-5"],["p-icon","po-icon-attach",1,"po-mt-2","po-sm-12","po-md-12",3,"p-label","p-click"],[1,"po-lg-12","po-xl-12","po-md-12","po-sm-12"],["name","textarea",1,"po-lg-12","po-xl-12","po-md-12","po-sm-12",3,"ngModel","p-label","ngModelChange"]],template:function(t,e){1&t&&(d.TgZ(0,"po-page-dynamic-search",0),d.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),d.YNc(1,H,3,9,"div",1),d.YNc(2,st,8,10,"div",2),d.qZA(),d.TgZ(3,"po-modal",3),d.ALo(4,"translate"),d.YNc(5,ot,2,1,"span",4),d.YNc(6,nt,2,4,"po-textarea",5),d.qZA(),d._UZ(7,"app-preview-file")),2&t&&(d.Q6J("p-actions",e.pageActions)("p-filters",e.filters)("p-literals",e.literals),d.xp6(1),d.Q6J("ngIf",!e.isMobile),d.xp6(1),d.Q6J("ngIf",e.isMobile),d.xp6(1),d.Q6J("p-title",d.lcZ(4,10,e.isReprove?"l-reprove-timesheet-requisition":"l-confirmation"))("p-primary-action",e.confirmAction)("p-secondary-action",e.closeAction),d.xp6(2),d.Q6J("ngIf",e.modalText),d.xp6(1),d.Q6J("ngIf",e.reasonRequired&&(null==e.reasoFieldProps?null:e.reasoFieldProps.visible)))},directives:[U.O6,s.O5,g.hmF,C.K,g._w3,g.UDu,g.ejx,J.JJ,J.On,s.sg,g.bOz,I.c,g.gJm],pipes:[f.X$,R.r,E.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.icon-size[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}"]}),t})();var lt=i(2673),rt=i(85385),ct=i(70385);function ht(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"po-table",5),d.NdJ("p-all-selected",function(){return d.CHM(t),d.oxw().countSelected()})("p-all-unselected",function(){return d.CHM(t),d.oxw().countSelected()})("p-selected",function(){return d.CHM(t),d.oxw().countSelected()})("p-unselected",function(){return d.CHM(t),d.oxw().countSelected()})("p-show-more",function(){return d.CHM(t),d.oxw().showMore()}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(1),d.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",t.columns)("p-items",t.items)("p-actions",t.tableActions)("p-loading",t.loading)("p-show-more-disabled",t.showMoreDisable)}}function pt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",11),d.TgZ(1,"app-expansion-card"),d.TgZ(2,"div",12),d.TgZ(3,"div",13),d.TgZ(4,"po-checkbox",14),d.NdJ("ngModelChange",function(e){return d.CHM(t).$implicit.checked=e})("p-change",function(){const e=d.CHM(t).$implicit;return d.oxw(2).selectMobile(e)}),d.qZA(),d.qZA(),d.TgZ(5,"div",15),d._UZ(6,"div",16),d.TgZ(7,"div",17),d.TgZ(8,"strong"),d._uU(9),d.ALo(10,"titleCase"),d.qZA(),d.qZA(),d.TgZ(11,"div",18),d._uU(12),d.ALo(13,"titleCase"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",19),d.TgZ(15,"div",20),d._UZ(16,"hr",21),d.TgZ(17,"label",22),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.TgZ(20,"strong",23),d._uU(21),d.qZA(),d.qZA(),d.TgZ(22,"div",24),d._UZ(23,"hr",21),d.TgZ(24,"label",22),d._uU(25),d.ALo(26,"translate"),d.qZA(),d.TgZ(27,"strong",23),d._uU(28),d.ALo(29,"utcDate"),d.qZA(),d.TgZ(30,"strong",23),d._uU(31),d.ALo(32,"utcDate"),d.qZA(),d.qZA(),d.TgZ(33,"div",20),d._UZ(34,"hr",21),d.TgZ(35,"label",22),d._uU(36),d.ALo(37,"translate"),d.qZA(),d.TgZ(38,"strong",23),d._uU(39),d.ALo(40,"utcDate"),d.qZA(),d.qZA(),d.TgZ(41,"div",20),d._UZ(42,"hr",21),d.TgZ(43,"label",22),d._uU(44),d.ALo(45,"translate"),d.qZA(),d.TgZ(46,"strong",23),d._uU(47),d.ALo(48,"utcDate"),d.qZA(),d.qZA(),d.TgZ(49,"div",20),d._UZ(50,"hr",21),d.TgZ(51,"label",22),d._uU(52),d.ALo(53,"translate"),d.qZA(),d.TgZ(54,"strong",23),d._uU(55),d.qZA(),d.qZA(),d.TgZ(56,"div",20),d._UZ(57,"hr",21),d.TgZ(58,"label",22),d._uU(59),d.ALo(60,"translate"),d.qZA(),d.TgZ(61,"strong",23),d._uU(62),d.qZA(),d.qZA(),d.TgZ(63,"app-yes-or-no-buttons",25),d.NdJ("yes",function(){const e=d.CHM(t).$implicit;return d.oxw(2).approve(e)})("no",function(){const e=d.CHM(t).$implicit;return d.oxw(2).reprove(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit,i=e.index,s=d.oxw(2);d.xp6(4),d.MGl("id","card-",i,""),d.Q6J("ngModel",t.checked),d.xp6(2),d.Udp("background-image",s.getAvatar(t.object.employeeSummary.id)),d.xp6(3),d.Oqu(d.lcZ(10,20,t.object.employeeSummary.name)),d.xp6(3),d.Oqu(d.lcZ(13,22,t.object.employeeSummary.roleDescription)),d.xp6(6),d.Oqu(d.lcZ(19,24,"l-type")),d.xp6(3),d.Oqu(t.type),d.xp6(4),d.Oqu(d.lcZ(26,26,"l-absence-type-vacationLimit")),d.xp6(3),d.Oqu(d.xi3(29,28,t.object.fieldsView.initVacationLimit.value,"shortDate")),d.xp6(3),d.Oqu(d.xi3(32,31,t.object.fieldsView.endVacationLimit.value,"shortDate")),d.xp6(5),d.Oqu(d.lcZ(37,34,"l-vacation-init-period")),d.xp6(3),d.Oqu(d.xi3(40,36,t.initialDate,"shortDate")),d.xp6(5),d.Oqu(d.lcZ(45,39,"l-vacation-end-period")),d.xp6(3),d.Oqu(d.xi3(48,41,t.endDate,"shortDate")),d.xp6(5),d.Oqu(d.lcZ(53,44,"l-vacation-numofdays")),d.xp6(3),d.Oqu(t.daysVacation),d.xp6(4),d.Oqu(d.lcZ(60,46,"l-absence-type-vacationBonus")),d.xp6(3),d.Oqu(t.daysAllowance),d.xp6(1),d.Q6J("id",t.id)}}function dt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",6),d.TgZ(1,"div"),d.TgZ(2,"po-checkbox",7),d.NdJ("p-change",function(){d.CHM(t);const e=d.oxw();return e.selectAllMobile(e.items)})("ngModelChange",function(e){return d.CHM(t),d.oxw().checkAll=e}),d.ALo(3,"translate"),d.qZA(),d.qZA(),d.YNc(4,pt,64,48,"div",8),d.TgZ(5,"div",9),d.TgZ(6,"po-button",10),d.NdJ("p-click",function(){return d.CHM(t),d.oxw().showMore()}),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(2),d.s9C("p-label",d.lcZ(3,6,"l-select-all")),d.Q6J("ngModel",t.checkAll),d.xp6(2),d.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByFunction),d.xp6(2),d.s9C("p-label",d.lcZ(7,8,"l-load-more")),d.Q6J("p-disabled",t.showMoreDisable)}}const gt=[{path:"",component:x,children:[{path:"overtime",canActivate:[a.P],loadChildren:()=>i.e(99).then(i.bind(i,47099)).then(t=>t.OvertimeModule)},{path:"oncall",canActivate:[a.P],loadChildren:()=>Promise.all([i.e(965),i.e(963)]).then(i.bind(i,94963)).then(t=>t.TabOnCallModule)},{path:"timesheet",canActivate:[a.P],component:at},{path:"vacation",canActivate:[a.P],component:(()=>{class t{constructor(t,e,i,s,o,n,a,l){this.windowUtilService=t,this.appTranslateService=e,this.profileService=i,this.sanitizationService=s,this.router=o,this.fieldPropertiesService=n,this.notificationServiceManager=a,this.notificationService=l,this.vacationsListView=new T.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.selectedLines=[],this.reasonRequired=!1,this.isReprove=!1}onResize(){this.isMobileCheck()}ngOnInit(){this.vacationsListView.actualPage=1,this.vacationsListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.disableVerify=!0,this.countLines="",this.verifyModal=[!1,!1,!1,{}],this.initializeComponent()}isMobileCheck(){this.isMobile=this.windowUtilService.isMobileDevice()}translateString(t){return this.appTranslateService.getI18n(t)}getAvatar(t){return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(e=>{e&&e.content&&(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle(`url(${"data:image/"+(e.type||"png")+";base64,"+e.content})`))})),this.avatar[t]}getData(t){return(0,A.mG)(this,void 0,void 0,function*(){yield this.getVacationsNotificationsList(this.vacationsListView.actualPage,this.vacationsListView.pageSize,t,this.employeeName,this.dateFilter)})}showMore(){this.getVacationsNotificationsList(this.vacationsListView.getNextPage(),this.vacationsListView.pageSize,!1,this.employeeName,this.dateFilter)}countSelected(){let t;t=this.getLines(t),t&&t>0?(this.countLines=" ("+t.toString()+")",this.getPageActions()):(this.countLines="",this.getPageActions())}selectAllMobile(t){this.selectedLines=[],t.forEach(t=>{t.checked=this.checkAll,this.selectedLines.push(t)}),this.selectedLines=this.checkAll?this.selectedLines:[],this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}selectMobile(t){if(this.selectedLines.length>0)if(this.selectedLines.find(e=>e===t)){let e=this.selectedLines.indexOf(t);e>-1&&this.selectedLines.splice(e,1),this.checkAll&&this.items.length!==this.selectedLines.length&&(this.checkAll=!1)}else this.selectedLines.push(t),!this.checkAll&&this.items.length===this.selectedLines.length&&(this.checkAll=!0);else this.selectedLines.push(t);this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}onAdvancedSearch(t){t?this.searchItems(t):this.resetFilters()}onChangeDisclaimers(t){const e={};t.forEach(t=>{e[t.property]=t.value}),this.searchItems(e)}onQuickSearch(t){t?this.searchItems({name:t}):this.resetFilters()}reprovedReasonResponse(t){t?this.confirmModal():this.closeModal()}initializeComponent(){this.isMobileCheck(),this.getLabelsSearch(),this.getColumns(),this.getPageActions(),this.getTableActions(),this.getModalActions(),this.getData(!0),this.getFieldProps()}getFieldProps(){var t;return(0,A.mG)(this,void 0,void 0,function*(){(yield null===(t=this.fieldPropertiesService)||void 0===t?void 0:t.getFieldProperties("notification")).forEach(t=>{"reason"===(null==t?void 0:t.field)&&(this.reasonFieldProps=t)})})}resetFilters(){this.vacationsListView.actualPage>1&&(this.vacationsListView.actualPage=1),this.getData(!0)}searchItems(t){this.employeeName=t.name?t.name:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.vacationsListView.actualPage>1&&(this.vacationsListView.actualPage=1),this.getData(!0)}approveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.isReprove=!1,this.justifyNotification.isReprove=!1,this.modalText=(yield this.translateString("l-approve-notifications")).toString(),this.reasonRequired=!1,this.verifyModal=[!0,!0,!0,{}],this.openModal()})}reproveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.isReprove=!0,this.justifyNotification.isReprove=!0,this.modalText=void 0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!0,{}],this.openModal()})}approve(t){return(0,A.mG)(this,void 0,void 0,function*(){this.isReprove=!1,this.justifyNotification.isReprove=!1,this.modalText=(yield this.translateString("l-approve-notification")).toString(),this.reasonRequired=!1,this.verifyModal=[!0,!0,!1,t],this.openModal()})}reprove(t){return(0,A.mG)(this,void 0,void 0,function*(){this.isReprove=!0,this.justifyNotification.isReprove=!0,this.modalText=void 0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!1,t],this.openModal()})}sendData(t,e,i){return(0,A.mG)(this,void 0,void 0,function*(){let s,o=t?"m-approved-request":"m-reprove-request";s=this.isMobile?e?this.selectedLines:[i]:e?this.poTable.getSelectedRows():[i],yield this.notificationService.createRequisitionsResponse(s,t,o,this.justifyNotification.justifyReprovedReason),this.initializeComponent()})}detail(t){P.T.notification=t.object,this.router.navigate(["request/notificationDetails"])}closeModal(){this.verifyModal=[!1,!1,!1,{}],this.justifyNotification.closeModal()}openModal(){this.justifyNotification.openModal()}confirmModal(){var t;return(0,A.mG)(this,void 0,void 0,function*(){if(this.isReprove&&(null===(t=this.justifyNotification.reasonFieldProps)||void 0===t?void 0:t.required)&&0===this.justifyNotification.justifyReprovedReason.length){const t=yield this.appTranslateService.getI18n("l-reason-required");this.notificationServiceManager.showNotification(t,g.ik9.Error)}else this.verifyModal[0]&&(this.verifyModal[2]?yield this.sendData(this.verifyModal[1],this.verifyModal[2]):yield this.sendData(this.verifyModal[1],this.verifyModal[2],this.verifyModal[3])),this.closeModal()})}getLines(t){return this.isMobile?this.selectedLines.length:this.poTable.getSelectedRows().length}getVacationsNotificationsList(t,e,i,s,o){return(0,A.mG)(this,void 0,void 0,function*(){const n=yield this.notificationService.getNotificationsQP(S.N.loggedUser,lt.P.TypeEnum.Vacation,t,e,s,o,lt.P.TypeEnum.Vacation);if(n)return this.updateItemsForTable(n,i);this.vacationsListView.hasMoreRecords=!1})}updateItemsForTable(t,e){return(0,A.mG)(this,void 0,void 0,function*(){this.clearData(e),this.vacationsListView.records=this.vacationsListView.records.concat(t.items),this.vacationsListView.hasMoreRecords=t.hasNext,this.notificationsView=[],this.vacationsListView.records.forEach(t=>{this.notificationsView.push(new k.B(t))});for(let t=0;t<this.vacationsListView.records.length;t++)this.items[t]={id:this.notificationsView[t].id,ckecked:!1,avatar:this.getAvatar(this.notificationsView[t].employeeSummary.id),name:this.notificationsView[t].employeeSummary.name,type:(yield this.translateString("l-vacation")).toString(),periodDate:new Date(this.notificationsView[t].fieldsView.initVacationLimit.value).toLocaleDateString()+" - "+new Date(this.notificationsView[t].fieldsView.endVacationLimit.value).toLocaleDateString(),initialDate:M.Em.formatUTCDate(new Date(this.notificationsView[t].fieldsView.initDate.value)),endDate:M.Em.formatUTCDate(new Date(this.notificationsView[t].fieldsView.endDate.value)),daysVacation:this.notificationsView[t].fieldsView.totalDays.value,daysAllowance:this.notificationsView[t].fieldsView.vacationBonus.value,object:this.notificationsView[t]};this.items.length<this.vacationsListView.actualPage*this.vacationsListView.pageSize&&(this.showMoreDisable=!0)})}clearData(t){(!this.vacationsListView.records||t)&&(this.vacationsListView.records=[],t&&(this.selectedLines=[],this.items=[]))}getModalActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.closeAction={action:()=>{this.closeModal()},label:(yield this.translateString("l-cancel-title")).toString(),danger:!0},this.confirmAction={action:()=>{this.confirmModal()},label:(yield this.translateString("l-confirm")).toString()}})}getLabelsSearch(){return(0,A.mG)(this,void 0,void 0,function*(){this.literals={disclaimerGroupTitle:(yield this.translateString("l-filter-applied")).toString(),filterTitle:(yield this.translateString("l-filter-title")).toString(),filterCancelLabel:(yield this.translateString("l-cancel-title")).toString(),filterConfirmLabel:(yield this.translateString("l-apply")).toString(),quickSearchLabel:(yield this.translateString("l-researched-value")).toString(),searchPlaceholder:(yield this.translateString("l-search-collaborator-placeholder")).toString()},this.filters=[{property:"name",label:(yield this.translateString("l-name-collaborator")).toString(),gridColumns:6},{property:"date",label:(yield this.translateString("l-date")).toString(),type:"date",gridColumns:6}]})}getColumns(){return(0,A.mG)(this,void 0,void 0,function*(){this.columns=[{property:"name",label:(yield this.translateString("l-name")).toString(),width:"25%"},{property:"type",label:(yield this.translateString("l-type")).toString(),width:"8%"},{property:"periodDate",label:(yield this.translateString("l-absence-type-vacationLimit")).toString(),width:"18%"},{property:"initialDate",label:(yield this.translateString("l-vacation-init-period")).toString(),type:"date",width:"15%"},{property:"endDate",label:(yield this.translateString("l-vacation-end-period")).toString(),type:"date",width:"15%"},{property:"daysVacation",label:(yield this.translateString("l-vacation-numofdays")).toString(),width:"15%"},{property:"daysAllowance",label:(yield this.translateString("l-absence-type-vacationBonus")).toString(),width:"12%"}]})}getPageActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.pageActions=[{label:(yield this.translateString("l-approve-selected")).toString()+this.countLines,action:this.approveMany.bind(this),disabled:this.disableButtons.bind(this)},{label:(yield this.translateString("l-reprove-selected")).toString()+this.countLines,action:this.reproveMany.bind(this),disabled:this.disableButtons.bind(this)}]})}getTableActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.tableActions=[{action:this.approve.bind(this),label:(yield this.translateString("l-approve")).toString()},{action:this.reprove.bind(this),label:(yield this.translateString("l-decline")).toString()},{action:this.detail.bind(this),label:(yield this.translateString("l-see-details")).toString()}]})}disableButtons(){return this.isMobile?this.disableVerify:!this.items.find(t=>t.$selected)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(_.g),d.Y36(N.g),d.Y36(q.H),d.Y36(D.H7),d.Y36(n.F0),d.Y36(V.c),d.Y36(F.g),d.Y36(P.T))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-tab-vacation"]],viewQuery:function(t,e){if(1&t&&(d.Gf(g._w3,5),d.Gf(rt.j,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.poTable=t.first),d.iGM(t=d.CRH())&&(e.justifyNotification=t.first)}},hostBindings:function(t,e){1&t&&d.NdJ("resize",function(t){return e.onResize(t)},!1,d.Jf7)},decls:5,vars:13,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],[3,"title","primaryAction","secondaryAction","modalText","reasonRequired","reasonFieldProps","reprovedReason"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],[1,"mobile"],["name","select-all",3,"ngModel","p-label","p-change","ngModelChange"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],["for","date",1,"po-sm-6","po-md-6"],[1,"pull-right"],[1,"card-line","period-vacation"],[1,"po-sm-12","po-md-12","buttons-mobile",3,"id","yes","no"]],template:function(t,e){1&t&&(d.TgZ(0,"po-page-dynamic-search",0),d.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),d.YNc(1,ht,2,8,"div",1),d.YNc(2,dt,8,10,"div",2),d.qZA(),d.TgZ(3,"app-justify-notification",3),d.NdJ("reprovedReason",function(t){return e.reprovedReasonResponse(t)}),d.ALo(4,"translate"),d.qZA()),2&t&&(d.Q6J("p-actions",e.pageActions)("p-filters",e.filters)("p-literals",e.literals),d.xp6(1),d.Q6J("ngIf",!e.isMobile),d.xp6(1),d.Q6J("ngIf",e.isMobile),d.xp6(1),d.Q6J("title",d.lcZ(4,11,e.isReprove?"l-reprove-vacation-requisition":"l-confirmation"))("primaryAction",e.confirmAction)("secondaryAction",e.closeAction)("modalText",e.modalText)("reasonRequired",e.reasonRequired)("reasonFieldProps",e.reasonFieldProps))},directives:[U.O6,s.O5,rt.j,g._w3,g.ejx,J.JJ,J.On,s.sg,g.bOz,I.c,ct.o],pipes:[f.X$,R.r,E.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.period-vacation[_ngcontent-%COMP%]{height:25px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}"]}),t})()}]},{path:"onCall/visualize/:isApprove",component:l.e,canActivate:[a.P]}];let ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[n.Bz.forChild(gt)],n.Bz]}),t})();var mt=i(43743),ft=i(56365);let vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[o.P],imports:[[s.ez,ft.q,ut,U.Pu,mt.Y]]}),t})()}}]);