"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[768],{97768:function(t,e,i){i.r(e),i.d(e,{SubstitutionModule:function(){return lt}});var n=i(38583),o=i(3679),s=i(90171),a=i(95987),l=i(29790),r=i(44956),p=i(32114),u=i(44677),c=i(43743),d=i(56365),g=i(51110),h=i(64762),m=i(37716),b=i(89019),x=i(81483),f=i(81059),Z=i(98348),q=i(21360),C=i(65241),v=i(37503),M=i(49344),w=i(84479),y=i(57706),_=i(36812);function O(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",2),m.TgZ(1,"app-page-header",3),m.NdJ("backFunction",function(){return m.CHM(t),m.oxw().back()}),m.qZA(),m.TgZ(2,"div",4),m.TgZ(3,"h2",5),m._uU(4),m.ALo(5,"translate"),m.ALo(6,"translate"),m.ALo(7,"translate"),m.qZA(),m.TgZ(8,"po-textarea",6),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().substitutionJustify=e}),m.qZA(),m.TgZ(9,"div",7),m.TgZ(10,"po-button",8),m.NdJ("click",function(){return m.CHM(t),m.oxw().back()}),m.ALo(11,"translate"),m.qZA(),m.TgZ(12,"po-button",9),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.updateSubstitution(e.substitutionJustify)}),m.ALo(13,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("pageTitle",t.pageTitle)("backIsVisible",t.viewIsMobile),m.xp6(3),m.lnq(" ",m.lcZ(5,8,"l-requisition-details-before"),"",m.lcZ(6,10,t.isApproving?"l-requisition-approve":"l-requisition-reproved"),"",m.lcZ(7,12,"l-requisition-ending")," "),m.xp6(4),m.Q6J("ngModel",t.substitutionJustify),m.xp6(2),m.s9C("p-label",m.lcZ(11,14,"l-cancel")),m.xp6(2),m.s9C("p-label",m.lcZ(13,16,"l-save"))}}function A(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",2),m.TgZ(1,"app-page-header",10),m.NdJ("backFunction",function(){return m.CHM(t),m.oxw().back()}),m.qZA(),m.TgZ(2,"div",4),m.TgZ(3,"span"),m.TgZ(4,"po-select",11),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().type=e}),m.ALo(5,"translate"),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.TgZ(7,"div",4),m.TgZ(8,"po-textarea",12),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().substitutionJustify=e}),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"div",7),m.TgZ(11,"po-button",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().back()}),m.ALo(12,"translate"),m.qZA(),m.TgZ(13,"po-button",14),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.updateSubstitution(e.substitutionJustify,e.type)}),m.ALo(14,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("backIsVisible",t.viewIsMobile),m.xp6(3),m.s9C("p-label",m.lcZ(5,11,"l-define-next-step")),m.s9C("p-placeholder",m.lcZ(6,13,"l-select-option")),m.Q6J("ngModel",t.type)("p-options",t.steps),m.xp6(4),m.s9C("p-label",m.lcZ(9,15,"l-request-justification")),m.Q6J("ngModel",t.substitutionJustify),m.xp6(3),m.s9C("p-label",m.lcZ(12,17,"l-cancel")),m.Q6J("ngClass",t.isMobile()?"mobile":""),m.xp6(2),m.s9C("p-label",m.lcZ(14,19,"l-confirm")),m.Q6J("ngClass",t.isMobile()?"mobile":"")}}let P=(()=>{class t extends f.R{constructor(t,e,i,n,o){super(),this.requisitionsService=t,this.translateService=e,this.globals=i,this.toastr=n,this.windowUtilService=o,this.employee=void 0,this.substitutionJustify="",this.pageTitle="",this.steps=[],this.getBackEvent=new m.vpe,this.getRequisitions=new m.vpe,this.cleanFinishedRequisitions=new m.vpe}ngOnInit(){this.pageTitle=this.isApproving?"l-approve-substitution":"l-reprove-substitution"}back(){this.getBackEvent.emit()}updateSubstitution(t,e=null){return(0,h.mG)(this,void 0,void 0,function*(){const i=yield this.getEmployeeSummary();this.substitutionResponse={approved:this.isApproving,date:x.Em.formatUTCDate(new Date),justify:t,requisitions:[]},this.substitutionRequisition={id:this.requisition.id,status:this.requisition.status},this.substitutionResponse.requisitions.push(this.substitutionRequisition),this.requisitionsService.updateRequisitions(i,this.substitutionResponse,e).then(t=>{this.cleanFinishedRequisitions.emit(),this.showMessageSuccess("l-msg-save-success"),this.getRequisitions.emit(),this.back()})})}isRM(){return Z.ZP.isErpRM()}isMobile(){return this.windowUtilService.isMobileDevice()}showMessageSuccess(t){this.translateService.getI18n(t).then(t=>{this.toastr.success(t)})}getEmployeeSummary(){return(0,h.mG)(this,void 0,void 0,function*(){let t=b.N.loggedUser;return this.globals.getEmployeeSummary().then(e=>{this.employee=e,this.employee&&(t=this.employee.id)}),yield Z.ZP.checkIfEncode(t)})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(q._),m.Y36(C.g),m.Y36(v.O),m.Y36(M._W),m.Y36(w.g))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-substitution-confirm"]],inputs:{isApproving:"isApproving",steps:"steps",requisition:"requisition",finishedRequisitions:"finishedRequisitions"},outputs:{getBackEvent:"getBackEvent",getRequisitions:"getRequisitions",cleanFinishedRequisitions:"cleanFinishedRequisitions"},features:[m.qOj],decls:3,vars:3,consts:[["id","filter","isVisible","true",1,"dialog",3,"closeDialogButtonEnable","closeDialogEvent"],["dialog-content","",4,"ngIf"],["dialog-content",""],[3,"pageTitle","backIsVisible","backFunction"],[1,"container-content"],[1,"justify-title"],["p-rows","5",1,"justify-area","width100percent",3,"ngModel","ngModelChange"],[1,"holder"],[1,"button",3,"p-label","click"],["p-type","primary",1,"button",3,"p-label","click"],["pageTitle","l-next-step",3,"backIsVisible","backFunction"],["name","typeSelect",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mt-5","justify-area","width100percent",3,"ngModel","p-label","p-placeholder","p-options","ngModelChange"],["p-rows","5",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mt-5","justify-area","width100percent",3,"ngModel","p-label","ngModelChange"],[1,"button","button-cancel",3,"ngClass","p-label","click"],["p-type","primary",1,"button",3,"ngClass","p-label","click"]],template:function(t,e){1&t&&(m.TgZ(0,"app-dialog",0),m.NdJ("closeDialogEvent",function(){return e.back()}),m.YNc(1,O,14,18,"div",1),m.YNc(2,A,15,21,"div",1),m.qZA()),2&t&&(m.Q6J("closeDialogButtonEnable",!0),m.xp6(1),m.Q6J("ngIf",!e.isRM()),m.xp6(1),m.Q6J("ngIf",e.isRM()))},directives:[y.a,n.O5,_.q,r.gJm,o.JJ,o.On,r.bOz,r.C9q,n.mk],pipes:[l.X$],styles:['@media screen and (min-width: 768px){.button[_ngcontent-%COMP%]{width:5rem}}@media screen and (min-width: 991px){.button[_ngcontent-%COMP%]{margin-left:15px}}@media screen and (min-width: 991px){.holder[_ngcontent-%COMP%]{text-align:right}}.justify-area[_ngcontent-%COMP%]{margin:10px 0;padding:0!important}.justify-label[_ngcontent-%COMP%]{margin:10px 0;font-size:14px}.holder[_ngcontent-%COMP%]{margin-top:15px}@media screen and (max-width: 475px){[_nghost-%COMP%]     .dialog .overlay{padding:15px}}@media screen and (min-width: 961px){[_nghost-%COMP%]     .dialog .overlay{padding:0 35px 15px}}[_nghost-%COMP%]     .dialog .justify-title{margin:25px 0 15px;padding-left:0;font-family:"NunitoSans";font-weight:300;white-space:normal;white-space:initial}@media screen and (max-width: 480px){[_nghost-%COMP%]     .dialog .po-button{display:block;width:100%}}@media screen and (min-width: 961px){[_nghost-%COMP%]     .dialog .max-width-page-title{padding-left:0}[_nghost-%COMP%]     .dialog .container-content{margin-bottom:15px}}@media screen and (min-width: 768px){[_nghost-%COMP%]     .dialog button{width:10rem}}[_nghost-%COMP%]     .button-cancel .po-button{color:#d13f43;border-color:#d13f43}[_nghost-%COMP%]     po-select .po-select-content{margin-top:7px!important}@media only screen and (max-width: 477px){.container-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.holder[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:space-between}.mobile[_ngcontent-%COMP%]{display:block!important;padding:0!important;width:48%}[_nghost-%COMP%]     .po-button{height:44px}}[_nghost-%COMP%]     #dialogCloseBtn{color:#1ea2c3}@media (min-width: 525px){[_nghost-%COMP%]     #dialogCloseBtn{top:43px!important}}@media (min-width: 475px) and (max-width: 525px){[_nghost-%COMP%]     #dialogCloseBtn{top:32px}}@media (max-width: 474px){[_nghost-%COMP%]     #dialogCloseBtn{top:43px}}']}),t})();var k=i(97983),T=i(24764),S=i(36227),I=i(32268);function N(t,e){if(1&t&&(m.TgZ(0,"span",24),m._uU(1),m.qZA()),2&t){const t=m.oxw();m.Q6J("ngClass",null==t.currentSubstitution?null:t.currentSubstitution.status),m.xp6(1),m.Oqu(null==t.currentSubstitution?null:t.currentSubstitution.statusLabel)}}function R(t,e){if(1&t&&(m.TgZ(0,"span",24),m._uU(1),m.qZA()),2&t){const t=m.oxw();m.Q6J("ngClass",null==t.currentSubstitution?null:t.currentSubstitution.status),m.xp6(1),m.Oqu(null==t.currentSubstitution?null:t.currentSubstitution.statusLabel)}}function L(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",25),m.TgZ(1,"po-button",26),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.emitOpenRequestSubstitution(e.requisition,!1)}),m.ALo(2,"translate"),m.qZA(),m.TgZ(3,"po-button",27),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.emitOpenRequestSubstitution(e.requisition,!0)}),m.ALo(4,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("ngClass",t.isMobile?"pt-0":"po-pt-5 po-mt-2"),m.xp6(1),m.s9C("p-label",m.lcZ(2,5,"l-reprove")),m.Q6J("ngClass",t.isMobile?"po-sm-6 po-md-6":""),m.xp6(2),m.s9C("p-label",m.lcZ(4,7,"l-approve")),m.Q6J("ngClass",t.isMobile?"po-sm-6 po-md-6":"")}}const J=function(t){return{"background-image":t}};let U=(()=>{class t extends f.R{constructor(t,e,i,n){super(),this.profileService=t,this.fieldPropertiesService=e,this.windowUtilService=i,this.globals=n,this.currentSubstitution={employeeId:"{current}",id:"",requestId:"",requestType:T.O.RequestTypeEnum.Substitution,employeeName:"",startDate:new Date,status:T.O.StatusEnum.Empty},this.currentSubstitutionDetails={id:"",date:null,deadline:null,hiringRole:"",justify:""},this.getBackEvent=new m.vpe,this.openRequestSubstitutionInVisualize=new m.vpe}ngOnInit(){this.initializeComponent()}getImage(t=b.N.loggedUser){this.avatarImage="./assets/img/empty_user.png",this.profileService.getImageBase64(Z.ZP.checkIfEncode(t)).then(t=>{t&&t.content&&(this.avatarImage="data:image/"+(t.type||"png")+";base64,"+t.content)})}isActionsAvailable(){return!!this.currentSubstitution&&(this.currentSubstitution.status!==T.O.StatusEnum.Approving||""!==this.currentSubstitution.responsableName)&&this.currentSubstitution.status.toLowerCase()===T.O.StatusEnum.Approving.toLowerCase()&&this.currentSubstitution.responsableId===Z.ZP.checkIfDecode(this.loggedUser.id)}back(){this.getBackEvent.emit()}emitOpenRequestSubstitution(t,e){this.openRequestSubstitutionInVisualize.emit({requisition:t,approve:e})}loadFieldProperties(){return(0,h.mG)(this,void 0,void 0,function*(){this.fieldProperties=yield this.fieldPropertiesService.getFieldProperties("substitution"),this.fieldProperties&&this.fieldProperties.forEach(t=>{})})}isRM(){return Z.ZP.isErpRM()}initializeComponent(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.loadFieldProperties(),this.loggedUser=yield this.globals.getEmployeeSummary(),this.isMobile=this.windowUtilService.isMobileDevice(),this.currentSubstitution=this.requisition,this.currentSubstitutionDetails=this.substitutionDetails,this.getImage(this.currentSubstitution.employeeId)})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(k.H),m.Y36(S.c),m.Y36(w.g),m.Y36(v.O))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-substitution-visualize"]],inputs:{requisition:"requisition",substitutionDetails:"substitutionDetails"},outputs:{getBackEvent:"getBackEvent",openRequestSubstitutionInVisualize:"openRequestSubstitutionInVisualize"},features:[m.qOj],decls:55,vars:44,consts:[["id","filter","isVisible","true",1,"dialog",3,"closeDialogButtonEnable","closeDialogEvent"],["dialog-content",""],["pageTitle","l-substitution-details-confirm"],[1,"holder",3,"ngClass"],[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","subtitulo-modal"],[1,"justify-title"],["class","badge",3,"ngClass",4,"ngIf"],[1,"line"],[1,"holder"],[1,"item-avatar","avatar","avatar-medium","mouse-pointer",3,"ngStyle"],[1,"info"],[1,"justify-mainName"],[1,"justify-id"],[1,"po-row","po-mb-3"],[1,"po-sm-6","po-md-3","po-xl-3","po-lg-3","pt-0"],[1,"justify-subtitle"],[1,"justify-text"],[1,"po-sm-12","po-md-6","po-xl-6","po-lg-6","pt-0"],[1,"po-sm-6","po-md-3","po-xl-3","po-lg-3",3,"ngClass"],[1,"po-sm-12","po-md-8","po-lg-8","po-xl-8",3,"ngClass"],[1,"justify-text","demission-justify"],[1,"po-row","marginTop15px","alignRight","actions-visualize","actions-visualize-others-resolutions"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12",3,"ngClass",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"ngClass"],[1,"button-reprove",3,"ngClass","p-label","click"],["p-type","primary",1,"button-aprove",3,"ngClass","p-label","click"]],template:function(t,e){1&t&&(m.TgZ(0,"app-dialog",0),m.NdJ("closeDialogEvent",function(){return e.back()}),m.TgZ(1,"div",1),m._UZ(2,"app-page-header",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"div",5),m.TgZ(6,"h2",6),m._uU(7),m.ALo(8,"translate"),m.YNc(9,N,2,2,"span",7),m.qZA(),m._UZ(10,"hr",8),m.qZA(),m.qZA(),m.TgZ(11,"div",9),m._UZ(12,"div",10),m.TgZ(13,"div",11),m.TgZ(14,"h3",12),m._uU(15),m.qZA(),m.TgZ(16,"div",13),m._uU(17),m.ALo(18,"translate"),m.YNc(19,R,2,2,"span",7),m.qZA(),m.qZA(),m.qZA(),m.TgZ(20,"div",14),m.TgZ(21,"div",15),m.TgZ(22,"h3",16),m._uU(23),m.ALo(24,"translate"),m.qZA(),m.TgZ(25,"span",17),m._uU(26),m.ALo(27,"utcDate"),m.qZA(),m.qZA(),m.TgZ(28,"div",15),m.TgZ(29,"h3",16),m._uU(30),m.ALo(31,"translate"),m.qZA(),m.TgZ(32,"span",17),m._uU(33),m.ALo(34,"utcDate"),m.qZA(),m.qZA(),m.TgZ(35,"div",18),m.TgZ(36,"h3",16),m._uU(37),m.ALo(38,"translate"),m.qZA(),m.TgZ(39,"span",17),m._uU(40),m.qZA(),m.qZA(),m.TgZ(41,"div",19),m.TgZ(42,"h3",16),m._uU(43),m.ALo(44,"translate"),m.qZA(),m.TgZ(45,"span",17),m._uU(46),m.qZA(),m.qZA(),m.TgZ(47,"div",20),m.TgZ(48,"h3",16),m._uU(49),m.ALo(50,"translate"),m.qZA(),m.TgZ(51,"div",21),m._uU(52),m.qZA(),m.qZA(),m.qZA(),m.TgZ(53,"div",22),m.YNc(54,L,5,9,"div",23),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.Q6J("closeDialogButtonEnable",!0),m.xp6(3),m.Q6J("ngClass",e.isMobile?"panel-body header-divider":""),m.xp6(4),m.hij(" ",m.lcZ(8,22,"l-substitution-details-title")," "),m.xp6(2),m.Q6J("ngIf",!e.isMobile),m.xp6(3),m.Q6J("ngStyle",m.VKq(42,J,"url("+e.avatarImage+")")),m.xp6(3),m.Oqu(null==e.currentSubstitution?null:e.currentSubstitution.employeeName),m.xp6(2),m.AsE(" ",m.lcZ(18,24,"l-identification")," ",null==e.currentSubstitution?null:e.currentSubstitution.requestId," "),m.xp6(2),m.Q6J("ngIf",e.isMobile),m.xp6(4),m.Oqu(m.lcZ(24,26,"l-date")),m.xp6(3),m.Oqu(m.xi3(27,28,null==e.currentSubstitutionDetails?null:e.currentSubstitutionDetails.date,"dd/MM/yyyy")),m.xp6(4),m.Oqu(m.lcZ(31,31,"l-deadline")),m.xp6(3),m.Oqu(m.xi3(34,33,null==e.currentSubstitutionDetails?null:e.currentSubstitutionDetails.deadline,"dd/MM/yyyy")),m.xp6(4),m.Oqu(m.lcZ(38,36,"l-requisition-responsible")),m.xp6(3),m.Oqu(null==e.currentSubstitution?null:e.currentSubstitution.responsableName),m.xp6(1),m.Q6J("ngClass",e.isMobile?"pt-0":"po-pt-2"),m.xp6(2),m.Oqu(m.lcZ(44,38,"l-role")),m.xp6(3),m.Oqu(null==e.currentSubstitutionDetails?null:e.currentSubstitutionDetails.hiringRole),m.xp6(1),m.Q6J("ngClass",e.isMobile?"pt-0":"po-pt-2"),m.xp6(2),m.Oqu(m.lcZ(50,40,"l-justification")),m.xp6(3),m.hij(" ",null==e.currentSubstitutionDetails?null:e.currentSubstitutionDetails.justify," "),m.xp6(2),m.Q6J("ngIf",e.isActionsAvailable()&&!e.isRM()))},directives:[y.a,_.q,n.mk,n.O5,n.PC,r.bOz],pipes:[l.X$,I.$],styles:['@media screen and (max-width: 480px){[_nghost-%COMP%]     .dialog .overlay{padding:15px}}@media screen and (min-width: 961px){[_nghost-%COMP%]     .dialog .overlay{padding:0 35px 15px}}@media screen and (min-width: 768px){[_nghost-%COMP%]     .dialog button{width:10rem}}@media screen and (min-width: 961px){[_nghost-%COMP%]     .dialog .max-width-page-title{padding-left:0}}@media screen and (max-width: 480px){[_nghost-%COMP%]     .dialog .thf-button{display:block;width:100%}}.justify-mainName[_ngcontent-%COMP%]{margin:0;font-family:"NunitoSans-bold";font-size:16px;font-weight:bold}.justify-title[_ngcontent-%COMP%]{margin:25px 0 15px;font-family:"NunitoSans";font-weight:300}.justify-subtitle[_ngcontent-%COMP%]{margin:0;font-family:"NunitoSans-bold";font-size:14px;font-weight:bold}.holder[_ngcontent-%COMP%]{position:relative;margin:0 0 30px}@media screen and (min-width: 480px){.holder[_ngcontent-%COMP%]{margin-bottom:15px!important}}.subtitulo-modal[_ngcontent-%COMP%]{padding-left:0;padding-right:0}@media screen and (max-width: 480px){.subtitulo-modal[_ngcontent-%COMP%]{padding-top:0!important}.justify-subtitle[_ngcontent-%COMP%]{padding-top:10px!important}.justify-text[_ngcontent-%COMP%]{padding-top:0!important}.pt-0[_ngcontent-%COMP%]{padding-top:0!important}}.info[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:60px;top:8px}.marginTop15px[_ngcontent-%COMP%]{margin-top:15px}.avatar[_ngcontent-%COMP%]{display:inline-block}.badge[_ngcontent-%COMP%]{display:inline-block;height:20px;min-width:20px;overflow-y:hidden;padding:2px 8px;border-radius:3px;color:#fff;font-size:10px;line-height:16px;text-align:left;text-transform:uppercase;vertical-align:middle}.badge.pending[_ngcontent-%COMP%]{background-color:#e8850a}.badge.approved[_ngcontent-%COMP%], .badge.closed[_ngcontent-%COMP%]{background:#00b28e}.badge.rejected[_ngcontent-%COMP%], .badge.reject[_ngcontent-%COMP%], .badge.reproved[_ngcontent-%COMP%]{background:#c64840}.badge.empty[_ngcontent-%COMP%]{background:#e8850a}.badge.approving[_ngcontent-%COMP%]{background:#e8850a}@media (min-width: 961px) and (max-height: 620px){.demission-justify[_ngcontent-%COMP%]{max-height:50px;overflow-y:visible}}@media (min-width: 961px) and (min-height: 621px) and (max-height: 700px){.demission-justify[_ngcontent-%COMP%]{max-height:70px;overflow-y:auto}}@media (min-width: 961px) and (min-height: 700px){.demission-justify[_ngcontent-%COMP%]{max-height:90px;overflow-y:auto}}po-button[_ngcontent-%COMP%]{margin-left:15px}@media screen and (max-width: 480px){po-button[_ngcontent-%COMP%]{margin:0;width:100%}}.po-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:10px}@media screen and (min-width: 991px){.alignRight[_ngcontent-%COMP%]{text-align:right}}[_nghost-%COMP%]     .button-reprove .po-button{color:#d13f43;border-color:#d13f43;height:44px}[_nghost-%COMP%]     .button-aprove .po-button{height:44px}@media (max-width: 480px){[_nghost-%COMP%]     .actions-visualize po-button{display:block;width:50%}}[_nghost-%COMP%]     #dialogCloseBtn{color:#1ea2c3}@media (min-width: 441px) and (max-width: 480px){[_nghost-%COMP%]     #dialogCloseBtn{position:absolute;top:44px;right:25px;cursor:pointer}}@media (min-width: 481px) and (max-width: 960px){[_nghost-%COMP%]     .actions-visualize-others-resolutions po-button{width:50%;margin:0}}.panel-body[_ngcontent-%COMP%]{padding:0 8px}']}),t})();var E=i(78662),D=i(76857),z=i(39075),F=i(10690);let j=(()=>{class t{transform(t,e){return t?e?(e=e.toLowerCase(),t.filter(t=>t.status.toLowerCase().includes(e)||t.requestId.toLowerCase().includes(e)||t.employeeName.toLowerCase().includes(e))):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Yjl({name:"substitutionFilterSearch",type:t,pure:!0}),t})();function Q(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",31),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openRequestSubstitution(e,!0)}),m._uU(1),m.ALo(2,"translate"),m.qZA()}2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"l-approve")," "))}function H(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",31),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openRequestSubstitution(e,!1)}),m._uU(1),m.ALo(2,"translate"),m.qZA()}2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"l-reprove")," "))}function Y(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"li",32),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openNextStepSubstitution(e)}),m._uU(1),m.ALo(2,"translate"),m.qZA()}2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"l-next-step")," "))}function B(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",19),m.TgZ(1,"td",20),m._UZ(2,"div",21),m.qZA(),m.TgZ(3,"td",22),m._uU(4),m.ALo(5,"titlecase"),m.qZA(),m.TgZ(6,"td",23),m._uU(7),m.qZA(),m.TgZ(8,"td",23),m._uU(9),m.qZA(),m.TgZ(10,"td",23),m._uU(11),m.ALo(12,"date"),m.qZA(),m.TgZ(13,"td",23),m._uU(14),m.qZA(),m.TgZ(15,"td",23),m.TgZ(16,"span",24),m.ALo(17,"lowercase"),m._uU(18),m.qZA(),m.qZA(),m.TgZ(19,"td",25),m.TgZ(20,"div",26),m._UZ(21,"span",27),m.TgZ(22,"ul",28),m.YNc(23,Q,3,3,"li",29),m.YNc(24,H,3,3,"li",29),m.YNc(25,Y,3,3,"li",30),m.TgZ(26,"li",31),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw(2).openSubstitution(e)}),m._uU(27),m.ALo(28,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(2),m.Udp("background-image",i.getImageAvatar(null==t?null:t.employeeId)),m.xp6(1),m.MGl("id","profile-",t.id,""),m.xp6(1),m.hij(" ",m.lcZ(5,14,null==t?null:t.employeeName)," "),m.xp6(3),m.hij(" ",null==t?null:t.requestId," "),m.xp6(2),m.hij(" ",null==t?null:t.employeeId," "),m.xp6(2),m.hij(" ",m.xi3(12,16,null==t?null:t.startDate,"dd/MM/yyyy")," "),m.xp6(3),m.hij(" ",null==t?null:t.responsableName," "),m.xp6(2),m.Q6J("ngClass",m.lcZ(17,19,null==t?null:t.status)),m.xp6(2),m.hij(" ",null==t?null:t.statusLabel," "),m.xp6(5),m.Q6J("ngIf",!i.isRM()&&i.canApproveReprove(t)),m.xp6(1),m.Q6J("ngIf",!i.isRM()&&i.canApproveReprove(t)),m.xp6(1),m.Q6J("ngIf",i.isRM()&&i.canApproveReprove(t)),m.xp6(2),m.hij(" ",m.lcZ(28,21,"l-visualize")," ")}}function V(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",33),m.TgZ(1,"po-button",34),m.NdJ("p-click",function(){return m.CHM(t),m.oxw(2).loadMoreEvents()}),m.ALo(2,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.s9C("p-label",m.lcZ(2,2,"l-load-more")),m.Q6J("p-disabled",!t.hasNext)}}function G(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",6),m.TgZ(1,"table",7),m.TgZ(2,"thead",8),m.TgZ(3,"tr",9),m._UZ(4,"th",10),m.TgZ(5,"th",10),m.TgZ(6,"span",11),m._uU(7),m.ALo(8,"titlecase"),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"div",12),m.TgZ(11,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("employeeName","up")}),m.qZA(),m.TgZ(12,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("employeeName","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"th",15),m.TgZ(14,"span",11),m._uU(15),m.ALo(16,"titlecase"),m.ALo(17,"translate"),m.qZA(),m.TgZ(18,"div",12),m.TgZ(19,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("requestId","up")}),m.qZA(),m.TgZ(20,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("requestId","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"th",15),m.TgZ(22,"span",11),m._uU(23),m.ALo(24,"titlecase"),m.ALo(25,"translate"),m.qZA(),m.TgZ(26,"div",12),m.TgZ(27,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("employeeId","up")}),m.qZA(),m.TgZ(28,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("employeeId","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(29,"th",10),m.TgZ(30,"span",11),m._uU(31),m.ALo(32,"titlecase"),m.ALo(33,"translate"),m.qZA(),m.TgZ(34,"div",12),m.TgZ(35,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("startDate","up")}),m.qZA(),m.TgZ(36,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("startDate","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(37,"th",15),m.TgZ(38,"span",11),m._uU(39),m.ALo(40,"titlecase"),m.ALo(41,"translate"),m.qZA(),m.TgZ(42,"div",12),m.TgZ(43,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("responsableName","up")}),m.qZA(),m.TgZ(44,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("responsableName","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(45,"th",15),m.TgZ(46,"span",11),m._uU(47),m.ALo(48,"titlecase"),m.ALo(49,"translate"),m.qZA(),m.TgZ(50,"div",12),m.TgZ(51,"span",13),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("status","up")}),m.qZA(),m.TgZ(52,"span",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().order("status","down")}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(53,"th",16),m._uU(54),m.ALo(55,"titlecase"),m.ALo(56,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(57,"tbody"),m.YNc(58,B,29,23,"tr",17),m.ALo(59,"substitutionFilterSearch"),m.qZA(),m.qZA(),m.YNc(60,V,3,4,"div",18),m.qZA()}if(2&t){const t=m.oxw();m.xp6(7),m.Oqu(m.lcZ(8,9,m.lcZ(9,11,"l-name"))),m.xp6(8),m.Oqu(m.lcZ(16,13,m.lcZ(17,15,"l-requisition-id"))),m.xp6(8),m.Oqu(m.lcZ(24,17,m.lcZ(25,19,"l-requisition-matricula"))),m.xp6(8),m.Oqu(m.lcZ(32,21,m.lcZ(33,23,"l-date"))),m.xp6(8),m.Oqu(m.lcZ(40,25,m.lcZ(41,27,"l-requisition-responsible"))),m.xp6(8),m.Oqu(m.lcZ(48,29,m.lcZ(49,31,"l-status"))),m.xp6(7),m.Oqu(m.lcZ(55,33,m.lcZ(56,35,"l-actions"))),m.xp6(4),m.Q6J("ngForOf",m.xi3(59,37,t.finishedRequisitions,t.searchText)),m.xp6(2),m.Q6J("ngIf",t.hasNext)}}function $(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"po-button",51),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openRequestSubstitution(e,!1)}),m.ALo(1,"translate"),m.qZA()}2&t&&m.s9C("p-label",m.lcZ(1,1,"l-reprove"))}function X(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"po-button",52),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openRequestSubstitution(e,!0)}),m.ALo(1,"translate"),m.qZA()}2&t&&m.s9C("p-label",m.lcZ(1,1,"l-approve"))}function K(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"po-button",50),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openNextStepSubstitution(e)}),m.ALo(1,"translate"),m.qZA()}2&t&&m.s9C("p-label",m.lcZ(1,1,"l-next-step"))}function W(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",38),m.TgZ(1,"app-expansion-card"),m.TgZ(2,"div",39),m._UZ(3,"span",40),m.ALo(4,"lowercase"),m.TgZ(5,"strong"),m._uU(6),m.qZA(),m.qZA(),m.TgZ(7,"div",41),m.TgZ(8,"div",42),m.TgZ(9,"label",43),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.TgZ(12,"strong",44),m._uU(13),m.qZA(),m.qZA(),m.TgZ(14,"div",45),m.TgZ(15,"label",43),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.TgZ(18,"strong",44),m._uU(19),m.qZA(),m.qZA(),m.TgZ(20,"div",45),m.TgZ(21,"label",43),m._uU(22),m.ALo(23,"translate"),m.qZA(),m.TgZ(24,"strong",44),m._uU(25),m.qZA(),m.qZA(),m.TgZ(26,"div",45),m.TgZ(27,"label",43),m._uU(28),m.ALo(29,"translate"),m.qZA(),m.TgZ(30,"strong",44),m._uU(31),m.ALo(32,"date"),m.qZA(),m.qZA(),m.TgZ(33,"div",45),m.TgZ(34,"label",43),m._uU(35),m.ALo(36,"translate"),m.qZA(),m.TgZ(37,"strong",44),m._uU(38),m.qZA(),m.qZA(),m.TgZ(39,"div",46),m.YNc(40,$,2,3,"po-button",47),m.YNc(41,X,2,3,"po-button",48),m.YNc(42,K,2,3,"po-button",49),m.TgZ(43,"po-button",50),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw(2).openSubstitution(e)}),m.ALo(44,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(3),m.Q6J("ngClass",m.lcZ(4,16,null==t?null:t.status)),m.xp6(3),m.Oqu(t.employeeName),m.xp6(4),m.Oqu(m.lcZ(11,18,"l-status")),m.xp6(3),m.Oqu(null==t?null:t.statusLabel),m.xp6(3),m.Oqu(m.lcZ(17,20,"l-requisition-id")),m.xp6(3),m.Oqu(null==t?null:t.requestId),m.xp6(3),m.Oqu(m.lcZ(23,22,"l-requisition-matricula")),m.xp6(3),m.Oqu(null==t?null:t.employeeId),m.xp6(3),m.Oqu(m.lcZ(29,24,"l-requisition-dataInicio")),m.xp6(3),m.Oqu(m.xi3(32,26,null==t?null:t.startDate,"dd/MM/yyyy")),m.xp6(4),m.Oqu(m.lcZ(36,29,"l-requisition-responsible")),m.xp6(3),m.Oqu(null==t?null:t.responsableName),m.xp6(2),m.Q6J("ngIf",i.canApproveReprove(t)&&!i.isRM()),m.xp6(1),m.Q6J("ngIf",i.canApproveReprove(t)&&!i.isRM()),m.xp6(1),m.Q6J("ngIf",i.canApproveReprove(t)&&i.isRM()),m.xp6(1),m.s9C("p-label",m.lcZ(44,31,"l-visualize"))}}function tt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",53),m.TgZ(1,"po-button",54),m.NdJ("p-click",function(){return m.CHM(t),m.oxw(2).loadMoreEvents()}),m.ALo(2,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.s9C("p-label",m.lcZ(2,2,"l-load-more")),m.Q6J("p-disabled",!t.hasNext)}}function et(t,e){if(1&t&&(m.TgZ(0,"div",35),m.YNc(1,W,45,33,"div",36),m.YNc(2,tt,3,4,"div",37),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.finishedRequisitions),m.xp6(1),m.Q6J("ngIf",t.hasNext)}}function it(t,e){1&t&&(m.TgZ(0,"div",55),m._UZ(1,"img",56),m.TgZ(2,"div",57),m.TgZ(3,"p",58),m._uU(4),m.ALo(5,"translate"),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(4),m.Oqu(m.lcZ(5,1,"l-team-balance-empty")))}function nt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"app-substitution-confirm",59),m.NdJ("getBackEvent",function(e){return m.CHM(t),m.oxw().getBackEvent(e)})("getRequisitions",function(){return m.CHM(t),m.oxw().getRequisitions()})("cleanFinishedRequisitions",function(){return m.CHM(t),m.oxw().cleanFinishedRequisitions()}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("requisition",t.selectedRequisition)("isApproving",t.isApproving)("finishedRequisitions",t.finishedRequisitions)("steps",t.steps)}}function ot(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"app-substitution-visualize",60),m.NdJ("openRequestSubstitutionInVisualize",function(e){return m.CHM(t),m.oxw().openRequestSubstitutionInVisualize(e)})("getBackEvent",function(e){return m.CHM(t),m.oxw().getBackEvent(e)}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("requisition",t.selectedRequisition)("substitutionDetails",t.substitutionDetails)}}const st=[{path:"substitution/visualize",component:U,canActivate:[g.P]},{path:"substitution/confirm",component:P,canActivate:[g.P]},{path:"",component:(()=>{class t extends f.R{constructor(t,e,i,n,o,s,a,l){super(),this.lastAccessItem=t,this.requisitionsService=e,this.windowUtilService=i,this.profileService=n,this.sanitization=o,this.permissionService=s,this.globals=a,this.appTranslateService=l,this.finishedRequisitions=[],this.hasSubstitutionHistory=!0,this.avatarImage=[],this.buttonActionName="",this.page=1,this.pageSize=6,this.pageTitle="",this.quickSearchLabel="",this.hasDisclaimers=!1,this.requestSubstitutionIsVisible=!1,this.visualizeSubstitutionIsVisible=!1,this.isEmpty=!0,this.employee=void 0,this.substitutionConfirm=!1,this.steps=[],this.searchActions=[{label:"action"}],this.customLiterals={disclaimerGroupTitle:"",filterTitle:"",filterCancelLabel:"",filterConfirmLabel:"",quickSearchLabel:"",searchPlaceholder:""},this.paramsFilters={employeeName:null,requestId:null,startDate:null,status:null,types:"substitution"}}onResize(t){this.checkIfMobile()}ngOnInit(){super.ngOnInit(),this.initializeComponents()}initVariables(){return(0,h.mG)(this,void 0,void 0,function*(){this.loggedUser=yield this.globals.getEmployeeSummary(),this.permissions=yield this.getPermissions()})}initializePoComponent(){return(0,h.mG)(this,void 0,void 0,function*(){this.pageTitle=yield this.translateLabel("im-desmissal"),this.filters=[{property:"employeeName",label:yield this.translateLabel("l-name"),gridColumns:6},{property:"status",label:"status",options:[{value:"approving",label:yield this.translateLabel("l-requisition-approving")},{value:"approved",label:yield this.translateLabel("l-requisition-approved")},{value:"rejected",label:yield this.translateLabel("l-requisition-rejected")},{value:"empty",label:yield this.translateLabel("l-requisition-empty")},{value:"closed",label:yield this.translateLabel("l-requisition-closed")}],gridColumns:6},{property:"startDate",label:yield this.translateLabel("l-date"),gridColumns:6,type:"date"},{property:"requestId",label:yield this.translateLabel("l-requisition-id"),gridColumns:6}]})}initializeSearch(){return(0,h.mG)(this,void 0,void 0,function*(){this.customLiterals={disclaimerGroupTitle:yield this.translateLabel("l-disclaimer-group-title"),filterTitle:yield this.translateLabel("l-filter-title"),filterCancelLabel:yield this.translateLabel("l-cancel-title"),filterConfirmLabel:yield this.translateLabel("l-confirm"),quickSearchLabel:yield this.translateLabel("l-quick-search"),searchPlaceholder:yield this.translateLabel("l-search-placeholder")},this.quickSearchLabel=yield this.translateLabel("l-substitution-search-name")})}onChangeDisclaimers(t){const e={};this.finishedRequisitions=[],0===t.length&&(this.hasDisclaimers=!1),t&&(t.forEach(t=>{e[t.property]=t.value}),this.page=1,this.getRequisitions(e))}onQuickSearch(t){t&&this.resetFilters(),this.hasDisclaimers=!0,this.getRequisitions({employeeName:t})}onAdvancedSearch(t){t&&this.resetFilters(),this.hasDisclaimers=!0,this.getRequisitions(t)}resetFilters(){this.page=1,this.hasDisclaimers=!1,this.paramsFilters={employeeName:null,requestId:null,startDate:null,status:null,types:"substitution"},this.finishedRequisitions=[]}getPermissions(){return this.permissionService.getPermissions(this.loggedUser.id)}checkIfMobile(){this.isMobile=this.windowUtilService.isMobileDevice()}setCountLastAccess(){this.lastAccessItem.setLastAccess(E.Pz,this.loggedUser.id)}loadMoreEvents(){this.page++,this.getRequisitions()}getBackEvent(){this.visualizeSubstitutionIsVisible=this.requestSubstitutionIsVisible=!1}getSubstitutionDetails(t){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.requisitionsService.getSubstitutionDetails(this.loggedUser.id,t);this.substitutionDetails=e})}cleanFinishedRequisitions(){return(0,h.mG)(this,void 0,void 0,function*(){this.finishedRequisitions=[]})}getImageAvatar(t){return this.avatarImage[t]||(this.avatarImage[t]=this.sanitization.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(Z.ZP.checkIfEncode(t)).then(e=>{e&&e.content&&(this.avatarImage[t]=this.sanitization.bypassSecurityTrustStyle(`url(${"data:image/"+(e.type||"png")+";base64,"+e.content})`))})),this.avatarImage[t]}translateLabel(t){return this.appTranslateService.getI18n(t)}back(){this.windowUtilService.back()}openRequestSubstitution(t,e){this.selectedRequisition=t,this.isApproving=e,this.requestSubstitutionIsVisible=!0}openRequestSubstitutionInVisualize(t){this.selectedRequisition=t.requisition,this.isApproving=t.approve,this.visualizeSubstitutionIsVisible=!1,this.requestSubstitutionIsVisible=!0}openSubstitution(t){return(0,h.mG)(this,void 0,void 0,function*(){this.selectedRequisition=t,yield this.getSubstitutionDetails(t.id),this.visualizeSubstitutionIsVisible=!0})}canApproveReprove(t){return t.status.toLowerCase()===T.O.StatusEnum.Approving.toLowerCase()&&""!==t.responsableName&&Z.ZP.checkIfDecode(this.loggedUser.id)===t.responsableId}order(t,e){if("down"===e)switch(t){case"employeeName":this.finishedRequisitions.sort((t,e)=>t.employeeName<e.employeeName?-1:1);break;case"requestId":this.finishedRequisitions.sort((t,e)=>t.requestId<e.requestId?-1:1);break;case"employeeId":this.finishedRequisitions.sort((t,e)=>t.employeeId<e.employeeId?-1:1);break;case"startDate":this.finishedRequisitions.sort((t,e)=>t.startDate<e.startDate?-1:1);break;case"responsableName":this.finishedRequisitions.sort((t,e)=>t.responsableName<e.responsableName?-1:1);break;case"status":this.finishedRequisitions.sort((t,e)=>t.status<e.status?-1:1)}else switch(t){case"employeeName":this.finishedRequisitions.sort((t,e)=>t.employeeName>e.employeeName?-1:1);break;case"requestId":this.finishedRequisitions.sort((t,e)=>t.requestId>e.requestId?-1:1);break;case"employeeId":this.finishedRequisitions.sort((t,e)=>t.employeeId>e.employeeId?-1:1);break;case"startDate":this.finishedRequisitions.sort((t,e)=>t.startDate>e.startDate?-1:1);break;case"responsableName":this.finishedRequisitions.sort((t,e)=>t.responsableName>e.responsableName?-1:1);break;case"status":this.finishedRequisitions.sort((t,e)=>t.status>e.status?-1:1)}}openNextStepSubstitution(t){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.getEmployeeSummary();this.substitutionResponse={approved:!1,date:x.Em.formatUTCDate(new Date),justify:"",requisitions:[]},this.substitutionRequisition={id:t.id,status:t.status},this.substitutionResponse.requisitions.push(this.substitutionRequisition),this.requisitionsService.getNextStepRequisitions(e,this.substitutionResponse).then(e=>{this.steps=e.items.map(t=>({label:t.description,value:t.id})),this.selectedRequisition=t,this.requestSubstitutionIsVisible=!0})})}isRM(){return Z.ZP.isErpRM()}initializeComponents(){return(0,h.mG)(this,void 0,void 0,function*(){yield this.initVariables(),yield this.getRequisitions(),this.initializePoComponent(),this.initializeSearch(),this.checkIfMobile(),this.setCountLastAccess()})}updateParams(t){this.paramsFilters.employeeName=void 0!==t.employeeName?t.employeeName:null,this.paramsFilters.status=void 0!==t.status?t.status:null,this.paramsFilters.startDate=null!=t.startDate?new Date(t.startDate):null,this.paramsFilters.requestId=void 0!==t.requestId?t.requestId:null}getRequisitions(t=this.paramsFilters){return(0,h.mG)(this,void 0,void 0,function*(){this.updateParams(t);const e=yield this.requisitionsService.getAllRequisitions(this.loggedUser.id,this.page,this.pageSize,this.paramsFilters.employeeName,this.paramsFilters.requestId,this.paramsFilters.startDate,this.paramsFilters.status,"substitution");e.items&&(this.hasNext=e.hasNext,this.finishedRequisitions=this.finishedRequisitions.concat(e.items)),this.isEmpty=this.finishedRequisitions.length<=0})}getEmployeeSummary(){return(0,h.mG)(this,void 0,void 0,function*(){let t=b.N.loggedUser;return this.globals.getEmployeeSummary().then(e=>{this.employee=e,this.employee&&(t=this.employee.id)}),yield Z.ZP.checkIfEncode(t)})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(E.g5),m.Y36(q._),m.Y36(w.g),m.Y36(k.H),m.Y36(z.H7),m.Y36(D.$),m.Y36(v.O),m.Y36(C.g))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-substitution"]],hostBindings:function(t,e){1&t&&m.NdJ("resize",function(t){return e.onResize(t)},!1,m.Jf7)},inputs:{requisition:"requisition"},features:[m.qOj],decls:7,vars:8,consts:[["backIsVisible","viewIsMobile","pageTitle","l-substitution",3,"backFunction"],["p-title"," ",3,"ngClass","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","holder mobile",4,"ngIf"],["class","empty-center",4,"ngIf"],[4,"ngIf"],[1,"desktop"],[1,"history-panel","table"],[1,"column-header"],[1,"custom-tr"],[1,"employee-label-column"],[1,"table-header"],[1,"sort-icons"],[1,"sort","po-icon","po-icon-arrow-up",3,"click"],[1,"sort","po-icon","po-icon-arrow-down",3,"click"],[1,"employee-label-column","column-dates"],[1,"employee-label-column","column-icons"],["class","custom-tr hover-design",4,"ngFor","ngForOf"],["class","alignCenter",4,"ngIf"],[1,"custom-tr","hover-design"],[1,"column","text-center","inline-block"],[1,"avatar-small"],[1,"column",3,"id"],[1,"column"],[1,"flag",3,"ngClass"],[1,"column","column-icons"],[1,"dropdown","mouse-pointer"],["data-toggle","dropdown",1,"po-icon","po-icon-more","see-more"],["name","ul-dropdown-options",1,"dropdown-menu","no-padding"],["class","dropdown-menu-itens",3,"click",4,"ngIf"],["class","dropdown-menu-itens dropdown-menu-itens-next",3,"click",4,"ngIf"],[1,"dropdown-menu-itens",3,"click"],[1,"dropdown-menu-itens","dropdown-menu-itens-next",3,"click"],[1,"alignCenter"],["p-small","false","p-type","default","classq","linkViewMore next-periods",3,"p-disabled","p-label","p-click"],[1,"holder","mobile"],["class","margin-card",4,"ngFor","ngForOf"],["class","alignCenter load-container",4,"ngIf"],[1,"margin-card"],["card-header","",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"bullet",3,"ngClass"],["card-body",""],[1,"po-row","line","card-line","po-mt-5","po-pt-1"],["for","date",1,"po-sm-6","po-md-6"],[1,"pull-right","po-sm-6","po-md-6"],[1,"po-row","line","card-line","po-pt-1"],[1,"button-actions"],["class","po-sm-6 po-md-6 pull-left button-reprove",3,"p-label","click",4,"ngIf"],["class","po-sm-6 po-md-6","p-type","primary",3,"p-label","click",4,"ngIf"],["class","button",3,"p-label","click",4,"ngIf"],[1,"button",3,"p-label","click"],[1,"po-sm-6","po-md-6","pull-left","button-reprove",3,"p-label","click"],["p-type","primary",1,"po-sm-6","po-md-6",3,"p-label","click"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"empty-center"],["src","assets/img/empty-state.svg",1,"img-empty"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12"],["id","empty"],[3,"requisition","isApproving","finishedRequisitions","steps","getBackEvent","getRequisitions","cleanFinishedRequisitions"],[3,"requisition","substitutionDetails","openRequestSubstitutionInVisualize","getBackEvent"]],template:function(t,e){1&t&&(m.TgZ(0,"app-page-header",0),m.NdJ("backFunction",function(){return e.back()}),m.qZA(),m.TgZ(1,"po-page-dynamic-search",1),m.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),m.qZA(),m.YNc(2,G,61,40,"div",2),m.YNc(3,et,3,2,"div",3),m.YNc(4,it,6,3,"div",4),m.YNc(5,nt,2,4,"div",5),m.YNc(6,ot,2,2,"div",5)),2&t&&(m.xp6(1),m.Q6J("ngClass",e.hasDisclaimers?"disclaimer":"")("p-filters",e.filters)("p-literals",e.customLiterals),m.xp6(1),m.Q6J("ngIf",!e.isMobile&&!e.isEmpty),m.xp6(1),m.Q6J("ngIf",e.isMobile&&!e.isEmpty),m.xp6(1),m.Q6J("ngIf",e.isEmpty),m.xp6(1),m.Q6J("ngIf",e.requestSubstitutionIsVisible),m.xp6(1),m.Q6J("ngIf",e.visualizeSubstitutionIsVisible))},directives:[_.q,p.O6,n.mk,n.O5,n.sg,r.bOz,F.c,P,U],pipes:[n.rS,l.X$,j,n.uU,n.i8],styles:[".demission-label[_ngcontent-%COMP%]{margin-top:0}.mobile[_ngcontent-%COMP%]{overflow-y:visible;padding:0 8px}.desktop[_ngcontent-%COMP%]{margin:0 15px;padding-bottom:100px}.latest-requests[_ngcontent-%COMP%]{margin-top:0}.demission-history-header[_ngcontent-%COMP%]{font-weight:bold;font-size:16px;color:#2b3639}.historic-value[_ngcontent-%COMP%]{float:right;font-weight:normal;color:#2b3639}@media screen and (max-width: 375px){.historic-value[_ngcontent-%COMP%]{display:block;width:100%}}.historic-label[_ngcontent-%COMP%]{font-weight:bold;color:#4a5c60}@media screen and (max-width: 375px){.historic-label[_ngcontent-%COMP%]{display:block;width:100%}}.next-records[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;font-weight:bold;line-height:3;color:#0c9abe;padding-bottom:20px;cursor:pointer}[_nghost-%COMP%]     .mat-expansion-indicator:after{padding:5px;margin-top:-9px}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:0 2px 8px #e3e6f1!important;border-radius:6px;position:relative;background:#ffffff;display:flow-root;padding:0;margin-bottom:16px}.historic-content[_ngcontent-%COMP%]{padding:0 15px}@media (max-width: 375px){.historic-content[_ngcontent-%COMP%]{min-height:48px}}@media (max-width: 480px){.historic-content[_ngcontent-%COMP%]   po-button[_ngcontent-%COMP%]{display:block;width:100%}}@media (min-width: 480px) and (max-width: 1024px){.historic-content[_ngcontent-%COMP%]   po-button[_ngcontent-%COMP%]{margin-right:5px}}@media (max-width: 480px){[_nghost-%COMP%]     po-button .po-button{display:block;width:100%;margin-bottom:10px}}[_nghost-%COMP%]     .po-page-list-filter-wrapper{float:left}.requested-value[_ngcontent-%COMP%]{color:#fff;font-weight:bold}.requested-label[_ngcontent-%COMP%]{color:#fff;opacity:.7}.requested-title[_ngcontent-%COMP%]{display:inline-block;margin:0 0 8px;padding-left:8px;color:#fff}.to-request-value[_ngcontent-%COMP%]{color:#fff;font-weight:bold}.to-request-label[_ngcontent-%COMP%]{color:#fff}.dropdown[_ngcontent-%COMP%]{float:none;float:initial;text-align:center}.dropdown-menu-itens[_ngcontent-%COMP%]{cursor:default;text-align:left;font-weight:400;background-color:#fff;line-height:44px;width:100%;padding:0 16px;margin-top:-4px;cursor:pointer!important;border-radius:3px}.dropdown-menu-itens[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.dropdown-menu-itens-next[_ngcontent-%COMP%]{white-space:nowrap}.dropdown-menu[_ngcontent-%COMP%]{top:100%;right:5px;min-width:90px;left:auto!important}.see-more[_ngcontent-%COMP%]{color:#4a5c60;font-size:20px}[_nghost-%COMP%]     po-advanced-filter .po-field-title{text-transform:capitalize}.demission[_ngcontent-%COMP%]{position:relative;padding:10px}@media screen and (min-width: 992px) and (max-width: 1199px){.demission-holder[_ngcontent-%COMP%]{position:absolute;bottom:22px;right:15px}}@media screen and (min-width: 1200px){.demission-holder[_ngcontent-%COMP%]{position:absolute;bottom:22px;right:15px}}@media (max-width: 960px) and (min-width: 481px){.demission-holder[_ngcontent-%COMP%]{position:absolute;bottom:22px;right:15px}}.demission-link[_ngcontent-%COMP%]{width:100%}@media screen and (min-width: 992px){.actions-holder[_ngcontent-%COMP%]{margin:30px 0 20px}.actions-holder[_ngcontent-%COMP%]   .search-holder[_ngcontent-%COMP%]{display:inline-block;max-width:450px;width:250px;float:right}}@media (max-width: 480px){.actions-holder[_ngcontent-%COMP%]{margin:0 0 15px}.actions-holder[_ngcontent-%COMP%]   .po-button[_ngcontent-%COMP%]{height:44px;width:100%;margin-bottom:15px}.actions-holder[_ngcontent-%COMP%]   .po-button[_ngcontent-%COMP%]   po-button[_ngcontent-%COMP%]{height:44px;width:100%;padding:0}}@media (max-width: 480px){[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media (max-width: 480px){[_nghost-%COMP%]     .po-page-list-actions{margin-bottom:55px}}[_nghost-%COMP%]     .general .max-width-page-title{padding-left:0}[_nghost-%COMP%]     .demission .card-well{background:linear-gradient(to top right,#0c7cbe 0%,#0cb8be 100%)}.displayBlock[_ngcontent-%COMP%]{width:100%;display:block}.bullet[_ngcontent-%COMP%]{display:inline-block;height:15px;width:15px;margin-right:10px;padding:8px;border-radius:20px;background:#e8850a}.flag[_ngcontent-%COMP%]{display:inline-block;height:20px;min-width:20px;overflow-y:hidden;padding:2px 8px;background:#e8850a;border-radius:3px;color:#fff;font-size:10px;line-height:16px;text-align:left;text-transform:uppercase;vertical-align:middle}.employee-label-column[_ngcontent-%COMP%]{font-size:12px;font-weight:bold;color:#0c9abe;border-bottom:2px solid #ceebf2!important;background-color:#fff;padding:0;margin:0}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle!important;font-size:14px;line-height:1;word-wrap:break-word;overflow:auto;max-width:200px}.column-icons[_ngcontent-%COMP%]{text-align:center}.custom-tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important;font-size:14px;height:20px!important;white-space:nowrap;padding:10px}tr.hover-design[_ngcontent-%COMP%]:hover{background-color:#fafbfb}tr.hover-design[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ebeded}.sort-icons[_ngcontent-%COMP%]{display:inline-block}.desktop[_ngcontent-%COMP%]{padding-bottom:100px}.text-center[_ngcontent-%COMP%]{text-align:center!important}.avatar-small[_ngcontent-%COMP%]{display:inline-block}.column-see[_ngcontent-%COMP%]{vertical-align:middle!important}.column-icons[_ngcontent-%COMP%]{overflow:visible!important;overflow:initial!important}.pending[_ngcontent-%COMP%]{background-color:#e8850a}.approved[_ngcontent-%COMP%], .aprovado[_ngcontent-%COMP%], .fechado[_ngcontent-%COMP%], .closed[_ngcontent-%COMP%]{background:#00b28e}.rejected[_ngcontent-%COMP%], .rejeitado[_ngcontent-%COMP%], .reprovado[_ngcontent-%COMP%], .reproved[_ngcontent-%COMP%]{background:#c64840}.empty[_ngcontent-%COMP%], .vazio[_ngcontent-%COMP%]{background:#cacaca}.approving[_ngcontent-%COMP%]{background:#e8850a}[_nghost-%COMP%]     .po-page-content{position:absolute;left:-100vw;top:-100vh}[_nghost-%COMP%]     .po-page{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:block;width:100%;margin-left:0}@media screen and (max-width: 576px){[_nghost-%COMP%]     .po-modal-footer{padding:15px}}@media screen and (min-width: 576px){[_nghost-%COMP%]     .po-modal-footer{margin-bottom:15px;padding:15px 15px 0}}[_nghost-%COMP%]     .po-modal-footer .po-button{margin:0 0 5px}@media screen and (max-width: 480px){[_nghost-%COMP%]     .po-modal-footer .po-button{margin-bottom:10px}}@media screen and (min-width: 576px){[_nghost-%COMP%]     .po-modal-footer .po-button{margin-left:12px;width:23%}}@media screen and (min-width: 576px){[_nghost-%COMP%]     .po-modal-footer po-button{margin-left:0}}[_nghost-%COMP%]     .po-page-list-actions .po-button{padding:0 50px}@media (max-width: 480px){[_nghost-%COMP%]     .po-page-filter-content{width:calc(100% - 80px)}}@media (min-width: 768px){[_nghost-%COMP%]     .po-page-filter-content{width:300px}}[_nghost-%COMP%]     .po-table-subtitle-footer-container{display:none}.alignCenter[_ngcontent-%COMP%]{text-align:center}.mat-accordion[_ngcontent-%COMP%] > .mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]     .mat-content{align-items:center;overflow:auto}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 20px}.sort[_ngcontent-%COMP%]{display:block;width:100%;cursor:pointer;font-size:9px;margin-left:15px}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.history-panel[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .custom-tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}[_nghost-%COMP%]     .button-reprove .po-button{color:#d13f43;border-color:#d13f43}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important;text-align:right}.card-line[_ngcontent-%COMP%]{font-size:14px;border-top:1px solid #eceeee}[_nghost-%COMP%]     .button-actions{width:100%;padding-top:10px}.margin-card[_ngcontent-%COMP%]{margin-bottom:16px}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-actions .po-button{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}[_nghost-%COMP%]     .po-icon{padding-right:8px}[_nghost-%COMP%]     .po-disclaimer-group{margin-top:70px}}@media screen and (min-width: 720px){[_nghost-%COMP%]     .po-page-header{padding-top:35px}}@media screen and (min-width: 480px){[_nghost-%COMP%]     div.po-modal-footer{padding-top:15px}}.empty-center[_ngcontent-%COMP%]{text-align:center;margin-top:30px}"]}),t})(),canActivate:[g.P]}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[a.Bz.forChild(st)],a.Bz]}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[n.ez,d.q,l.aw,a.Bz,o.u5,s.To,r.JBz,c.Y,u.d,p.Pu,at]]}),t})()}}]);