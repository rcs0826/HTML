!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[850],{850:function(e,n,s){s.r(n),s.d(n,{DataChangeModule:function(){return F}});var r=s(38583),a=s(3679),o=s(90171),l=s(95987),c=s(29790),p=s(44956),u=s(32114),h=s(44677),d=s(43743),g=s(56365),m=s(51110),f=s(64762),v=s(97983),w=s(81483),b=s(33490),x=s(68014),q=s(21360),y=s(37716),C=s(84479),k=s(65241),Z=s(37503),M=s(39075),_=s(36812),O=s(10690),S=s(13235),P=s(32268);function L(t,e){if(1&t&&(y.TgZ(0,"div"),y.TgZ(1,"span",8),y.ALo(2,"lowercase"),y._uU(3),y.qZA(),y.qZA()),2&t){var i=y.oxw().row;y.xp6(1),y.Q6J("ngClass",y.lcZ(2,2,i.status)),y.xp6(2),y.hij(" ",i.statusLabel," ")}}function A(t,e){1&t&&y.YNc(0,L,4,4,"div",7),2&t&&y.Q6J("ngIf","status"===e.column.property)}function T(t,e){if(1&t){var i=y.EpF();y.TgZ(0,"div",4),y.TgZ(1,"po-table",5),y.NdJ("p-show-more",function(){return y.CHM(i),y.oxw().showMore()}),y.YNc(2,A,1,1,"ng-template",6),y.qZA(),y.qZA()}if(2&t){var n=y.oxw();y.xp6(1),y.Q6J("p-columns",n.columns)("p-items",n.items)("p-actions",n.tableActions)("p-loading",n.loading)("p-show-more-disabled",n.showMoreDisable)}}function V(t,e){if(1&t&&(y.TgZ(0,"div",13),y.TgZ(1,"app-expansion-card"),y.TgZ(2,"div",14),y._UZ(3,"div",15),y.TgZ(4,"div",16),y._UZ(5,"div",17),y.TgZ(6,"div",18),y.TgZ(7,"strong"),y._uU(8),y.ALo(9,"titleCase"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(10,"div",19),y.TgZ(11,"div",20),y.TgZ(12,"label",21),y._uU(13),y.ALo(14,"translate"),y.qZA(),y.TgZ(15,"strong",22),y._uU(16),y.qZA(),y.qZA(),y.TgZ(17,"div",20),y.TgZ(18,"label",21),y._uU(19),y.ALo(20,"translate"),y.qZA(),y.TgZ(21,"strong",22),y._uU(22),y.ALo(23,"utcDate"),y.qZA(),y.qZA(),y.TgZ(24,"div",20),y.TgZ(25,"label",21),y._uU(26),y.ALo(27,"translate"),y.qZA(),y.TgZ(28,"strong",22),y._uU(29),y.qZA(),y.qZA(),y.TgZ(30,"div",20),y.TgZ(31,"label",21),y._uU(32),y.ALo(33,"translate"),y.qZA(),y.TgZ(34,"div",22),y.TgZ(35,"span",8),y.ALo(36,"lowercase"),y._uU(37),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&t){var i=e.$implicit,n=y.oxw(2);y.xp6(5),y.Udp("background-image",n.getAvatar(i.employeeId)),y.xp6(3),y.Oqu(y.lcZ(9,12,i.employeeName)),y.xp6(5),y.Oqu(y.lcZ(14,14,"l-requisition-id")),y.xp6(3),y.Oqu(i.requestId),y.xp6(3),y.Oqu(y.lcZ(20,16,"l-date")),y.xp6(3),y.Oqu(y.xi3(23,18,i.date,"shortDate")),y.xp6(4),y.Oqu(y.lcZ(27,21,"l-requisition-responsible")),y.xp6(3),y.Oqu(i.responsableName),y.xp6(3),y.Oqu(y.lcZ(33,23,"l-status")),y.xp6(3),y.Q6J("ngClass",y.lcZ(36,25,i.status)),y.xp6(2),y.hij(" ",i.statusLabel," ")}}function I(t,e){if(1&t){var i=y.EpF();y.TgZ(0,"div",9),y.YNc(1,V,38,27,"div",10),y.TgZ(2,"div",11),y.TgZ(3,"po-button",12),y.NdJ("p-click",function(){return y.CHM(i),y.oxw().showMore()}),y.ALo(4,"translate"),y.qZA(),y.qZA(),y.qZA()}if(2&t){var n=y.oxw();y.xp6(1),y.Q6J("ngForOf",n.items)("ngForTrackBy",n.trackByFunction),y.xp6(2),y.s9C("p-label",y.lcZ(4,4,"l-load-more")),y.Q6J("p-disabled",n.showMoreDisable)}}var z,N=[{path:"",component:(z=function(){function e(i,n,s,r,a,o,l){t(this,e),this.requisitionsService=i,this.windowUtilService=n,this.appTranslateService=s,this.permissionSelectors=r,this.globals=a,this.sanitizationService=o,this.profileService=l,this.requisitionsListView=new b.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.isReprove=!1,this.columnStatus="status"}return i(e,[{key:"onResize",value:function(){this.isMobileCheck()}},{key:"ngOnInit",value:function(){this.requisitionsListView.actualPage=1,this.requisitionsListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.initializeComponent()}},{key:"initializeComponent",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPermissions();case 2:return this.isMobileCheck(),this.getLabelsSearch(),this.getColumns(),t.next=7,this.globals.getEmployeeSummary();case 7:this.loggedUser=t.sent,this.getData(!0);case 9:case"end":return t.stop()}},t,this)}))}},{key:"isMobileCheck",value:function(){this.isMobile=this.windowUtilService.isMobileDevice()}},{key:"getData",value:function(t){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDataChangeList(this.requisitionsListView.actualPage,this.requisitionsListView.pageSize,t,this.employeeName,this.dateFilter,this.statusFilter);case 2:case"end":return e.stop()}},e,this)}))}},{key:"showMore",value:function(){this.getDataChangeList(this.requisitionsListView.getNextPage(),this.requisitionsListView.pageSize,!1,this.employeeName,this.dateFilter,this.statusFilter)}},{key:"onAdvancedSearch",value:function(t){t?this.searchItems(t):this.resetFilters()}},{key:"onChangeDisclaimers",value:function(t){var e={};t.forEach(function(t){e[t.property]=t.value}),this.searchItems(e)}},{key:"onQuickSearch",value:function(t){t?this.searchItems({name:t}):this.resetFilters()}},{key:"translateString",value:function(t){return this.appTranslateService.getI18n(t)}},{key:"back",value:function(){this.windowUtilService.back()}},{key:"getAvatar",value:function(t){var e=this;return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(function(i){i&&i.content&&(e.avatar[t]=e.sanitizationService.bypassSecurityTrustStyle("url(".concat("data:image/"+(i.type||"png")+";base64,"+i.content,")")))})),this.avatar[t]}},{key:"resetFilters",value:function(){this.requisitionsListView.actualPage>1&&(this.requisitionsListView.actualPage=1),this.getData(!0)}},{key:"getDataChangeList",value:function(t,e,i,n,s,r){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,this.loading=!0,a.next=4,this.requisitionsService.getAllRequisitions(this.loggedUser.id,t,e,n,null,null==s?void 0:s.toISOString(),r,"employeeDataChange");case 4:(o=a.sent)?this.updateItemsForTable(o,i):this.requisitionsListView.hasMoreRecords=!1,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),this.loading=!1;case 11:return a.prev=11,this.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,this,[[0,8,11,14]])}))}},{key:"updateItemsForTable",value:function(t,e){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:for(this.clearData(e),this.requisitionsListView.records=this.requisitionsListView.records.concat(t.items),this.requisitionsListView.hasMoreRecords=t.hasNext,n=0;n<this.requisitionsListView.records.length;n++)s={id:this.requisitionsListView.records[n].id,requestId:this.requisitionsListView.records[n].requestId,employeeName:this.requisitionsListView.records[n].employeeName,employeeId:this.requisitionsListView.records[n].employeeId,responsableName:this.requisitionsListView.records[n].responsableName,responsableId:this.requisitionsListView.records[n].responsableId,status:this.requisitionsListView.records[n].status,statusLabel:this.requisitionsListView.records[n].statusLabel,date:w.Em.formatUTCDate(new Date(this.requisitionsListView.records[n].startDate))},this.items[n]=s;this.items.length<this.requisitionsListView.actualPage*this.requisitionsListView.pageSize&&(this.showMoreDisable=!0),this.loading=!1;case 3:case"end":return i.stop()}},i,this)}))}},{key:"clearData",value:function(t){(!this.requisitionsListView.records||t)&&(this.requisitionsListView.records=[],t&&(this.items=[]))}},{key:"searchItems",value:function(t){var e,i;this.employeeName=null!==(e=t.name)&&void 0!==e?e:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.statusFilter=null!==(i=t.status)&&void 0!==i?i:void 0,this.requisitionsListView.actualPage>1&&(this.requisitionsListView.actualPage=1),this.getData(!0)}},{key:"getLabelsSearch",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-filter-applied");case 2:return t.t0=t.sent,t.next=5,this.translateString("l-filter-title");case 5:return t.t1=t.sent,t.next=8,this.translateString("l-cancel-title");case 8:return t.t2=t.sent,t.next=11,this.translateString("l-apply");case 11:return t.t3=t.sent,t.next=14,this.translateString("l-researched-value");case 14:return t.t4=t.sent,t.next=17,this.translateString("l-search-collaborator-placeholder");case 17:return t.t5=t.sent,this.literals={disclaimerGroupTitle:t.t0,filterTitle:t.t1,filterCancelLabel:t.t2,filterConfirmLabel:t.t3,quickSearchLabel:t.t4,searchPlaceholder:t.t5},t.next=21,this.translateString("l-name-collaborator");case 21:return t.t6=t.sent,t.t7={property:"name",label:t.t6,gridColumns:6},t.next=25,this.translateString("l-date");case 25:return t.t8=t.sent,t.t9={property:"date",label:t.t8,type:"date",gridColumns:6},t.next=29,this.translateString("l-status");case 29:return t.t10=t.sent,t.next=32,this.translateString("l-requisition-approving");case 32:return t.t11=t.sent,t.t12={value:"approving",label:t.t11},t.next=36,this.translateString("l-requisition-approved");case 36:return t.t13=t.sent,t.t14={value:"approved",label:t.t13},t.next=40,this.translateString("l-requisition-rejected");case 40:return t.t15=t.sent,t.t16={value:"rejected",label:t.t15},t.next=44,this.translateString("l-requisition-empty");case 44:return t.t17=t.sent,t.t18={value:"empty",label:t.t17},t.next=48,this.translateString("l-requisition-closed");case 48:t.t19=t.sent,t.t20={value:"closed",label:t.t19},t.t21=[t.t12,t.t14,t.t16,t.t18,t.t20],t.t22={property:"status",label:t.t10,options:t.t21,gridColumns:6},this.filters=[t.t7,t.t9,t.t22];case 53:case"end":return t.stop()}},t,this)}))}},{key:"getColumns",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-name");case 2:return t.t0=t.sent,t.t1={property:"employeeName",label:t.t0,width:"30%"},t.next=6,this.translateString("l-requisition-id");case 6:return t.t2=t.sent,t.t3={property:"requestId",label:t.t2,width:"10%"},t.next=10,this.translateString("l-requisition-matricula");case 10:return t.t4=t.sent,t.t5={property:"employeeId",label:t.t4,width:"12%"},t.next=14,this.translateString("l-date");case 14:return t.t6=t.sent,t.t7={property:"date",label:t.t6,type:"date",width:"12%"},t.next=18,this.translateString("l-requisition-responsible");case 18:return t.t8=t.sent,t.t9={property:"responsableName",label:t.t8,width:"20%"},t.t10=this.columnStatus,t.next=23,this.translateString("l-status");case 23:t.t11=t.sent,t.t12={property:t.t10,label:t.t11,type:"cellTemplate",width:"16%"},this.columns=[t.t1,t.t3,t.t5,t.t7,t.t9,t.t12];case 26:case"end":return t.stop()}},t,this)}))}},{key:"getPermissions",value:function(){return(0,f.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.permissionSelectors.nextPermissionsNotNull();case 2:case"end":return t.stop()}},t,this)}))}}]),e}(),z.\u0275fac=function(t){return new(t||z)(y.Y36(q._),y.Y36(C.g),y.Y36(k.g),y.Y36(x.eL),y.Y36(Z.O),y.Y36(M.H7),y.Y36(v.H))},z.\u0275cmp=y.Xpm({type:z,selectors:[["app-data-change"]],viewQuery:function(t,e){var i;1&t&&y.Gf(p._w3,5),2&t&&y.iGM(i=y.CRH())&&(e.poTable=i.first)},hostBindings:function(t,e){1&t&&y.NdJ("resize",function(t){return e.onResize(t)},!1,y.Jf7)},decls:4,vars:4,consts:[["backIsVisible","viewIsMobile","pageTitle","l-data-change",3,"backFunction"],["p-title"," ",3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],[1,"desktop"],["p-container","","p-hide-select-all","true","p-hide-text-overflow","","p-sort","true","p-striped","true","p-selectable","false",1,"po-table-custom-hide-text-overflow",3,"p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-show-more"],["p-table-cell-template",""],[4,"ngIf"],[1,"flag",3,"ngClass"],[1,"mobile"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],["card-body",""],[1,"po-row","card-line"],[1,"po-sm-6","po-md-6"],[1,"pull-right","po-sm-6","po-md-6"]],template:function(t,e){1&t&&(y.TgZ(0,"app-page-header",0),y.NdJ("backFunction",function(){return e.back()}),y.qZA(),y.TgZ(1,"po-page-dynamic-search",1),y.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),y.YNc(2,T,3,5,"div",2),y.YNc(3,I,5,6,"div",3),y.qZA()),2&t&&(y.xp6(1),y.Q6J("p-filters",e.filters)("p-literals",e.literals),y.xp6(1),y.Q6J("ngIf",!e.isMobile),y.xp6(1),y.Q6J("ngIf",e.isMobile))},directives:[_.q,u.O6,r.O5,p._w3,p.q5v,r.mk,r.sg,p.bOz,O.c],pipes:[r.i8,c.X$,S.r,P.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px;border-top:1px solid #eceeee;padding-top:16px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;text-align:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.icon-size[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}.flag[_ngcontent-%COMP%]{display:inline-block;height:20px;min-width:20px;overflow-y:hidden;padding:2px 8px;background:#e8850a;border-radius:3px;color:#fff;font-size:10px;line-height:16px;text-align:left;text-transform:uppercase;vertical-align:middle}.approved[_ngcontent-%COMP%], .aprovado[_ngcontent-%COMP%], .fechado[_ngcontent-%COMP%], .closed[_ngcontent-%COMP%]{background:#00b28e}.rejected[_ngcontent-%COMP%], .rejeitado[_ngcontent-%COMP%], .reprovado[_ngcontent-%COMP%], .reproved[_ngcontent-%COMP%]{background:#c64840}.empty[_ngcontent-%COMP%], .vazio[_ngcontent-%COMP%]{background:#cacaca}.approving[_ngcontent-%COMP%]{background:#e8850a}"]}),z),canActivate:[m.P]}],D=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y.oAB({type:e}),e.\u0275inj=y.cJS({imports:[[l.Bz.forChild(N)],l.Bz]}),e}(),F=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=y.oAB({type:e}),e.\u0275inj=y.cJS({imports:[[r.ez,g.q,c.aw,l.Bz,a.u5,o.To,p.JBz,d.Y,h.d,u.Pu,D]]}),e}()}}])}();