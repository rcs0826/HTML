!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[99],{47099:function(t,i,o){o.r(i),o.d(i,{OvertimeModule:function(){return ae}});var s,u=o(38583),d=o(90171),g=o(95987),h=o(3679),v=o(44956),m=o(29790),f=o(32114),x=o(43743),Z=o(56365),b=o(91061),y=o(51110),w=o(44852),A=o(37716),O=o(84479),M=o(36812),k=((s=function(){function e(t,n){c(this,e),this.navigationUtil=t,this.windowUtilService=n}return p(e,[{key:"ngOnInit",value:function(){}},{key:"doNavigation",value:function(e){this.navigationUtil.doNavigation(e)}},{key:"back",value:function(){this.windowUtilService.back()}}]),e}()).\u0275fac=function(e){return new(e||s)(A.Y36(w._),A.Y36(O.g))},s.\u0275cmp=A.Xpm({type:s,selectors:[["app-overtime"]],decls:28,vars:13,consts:[[1,"container-fluid",3,"hidden"],["pageTitle","l-management-overtime",3,"backIsVisible","backFunction"],[1,"po-holder"],[1,"po-row"],[1,"po-sm-6","po-md-3","po-lg-3","po-xl-3"],[1,"card"],[1,"po-font-subtitle","text-number","text-negative-hour"],[1,"text-title"],[1,"divider"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","show-more","mouse-pointer",3,"click"],[1,"po-font-subtitle","text-number"]],template:function(e,t){1&e&&(A.TgZ(0,"div",0),A.TgZ(1,"app-page-header",1),A.NdJ("backFunction",function(){return t.back()}),A.qZA(),A.TgZ(2,"div",2),A.TgZ(3,"div",3),A.TgZ(4,"div",4),A.TgZ(5,"div",5),A.TgZ(6,"div"),A.TgZ(7,"span",6),A._uU(8,"19h"),A.qZA(),A.TgZ(9,"h4",7),A._uU(10),A.ALo(11,"translate"),A.qZA(),A.qZA(),A.TgZ(12,"div",8),A.TgZ(13,"a",9),A.NdJ("click",function(){return t.doNavigation("overtime/pending")}),A._uU(14),A.ALo(15,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(16,"div",4),A.TgZ(17,"div",5),A.TgZ(18,"div"),A.TgZ(19,"span",10),A._uU(20,"200h"),A.qZA(),A.TgZ(21,"h4",7),A._uU(22),A.ALo(23,"translate"),A.qZA(),A.qZA(),A.TgZ(24,"div",8),A.TgZ(25,"a",9),A.NdJ("click",function(){return t.doNavigation("")}),A._uU(26),A.ALo(27,"translate"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&e&&(A.xp6(1),A.Q6J("backIsVisible",!1),A.xp6(9),A.Oqu(A.lcZ(11,5,"l-pending-overtime")),A.xp6(4),A.Oqu(A.lcZ(15,7,"l-view-more")),A.xp6(8),A.Oqu(A.lcZ(23,9,"l-total-overtime")),A.xp6(4),A.Oqu(A.lcZ(27,11,"l-view-more")))},directives:[M.q],pipes:[m.X$],styles:['.po-font-subtitle[_ngcontent-%COMP%]{margin:10px 10px 5px}.po-holder[_ngcontent-%COMP%]{margin:0}.divider[_ngcontent-%COMP%]{border-top:.5px solid #bbdefb;height:35px}.divider[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;padding:6px;font-family:"NunitoSans-Bold";color:#0c9abe}.divider[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{text-decoration:none}.text-title[_ngcontent-%COMP%]{left:10px;top:6px;margin:5px 0 10px;color:#676868;font-family:"NunitoSans";font-weight:300;font-size:1rem;text-align:left;position:absolute}.text-number[_ngcontent-%COMP%]{display:block;padding:20px 0;color:#2b3639;font-family:"NunitoSans-ExtraLight";font-size:3.2rem;font-weight:100}@media screen and (max-width: 576px){.text-number[_ngcontent-%COMP%]{text-align:left;font-weight:normal}}@media screen and (max-width: 320px){.text-number[_ngcontent-%COMP%]{margin:14px 10px 1px;font-size:1.4rem}}.text-negative-hour[_ngcontent-%COMP%]{color:#ba1a1a}[_nghost-%COMP%]     .card{position:relative;margin-bottom:8px;padding-top:22px;background:#ffffff;box-shadow:0 2px 8px #e3e6f1;border-radius:6px;text-align:center}']}),s),q=o(64762),T=o(92340),S=((S||(S={})).StatusEnum={Approved:"approved",Reproved:"reproved",Approving:"approving"},S),_=o(81483),L=o(33490),C=o(97983),P=o(36227),R=o(1927),H=o(81059),E=o(98348),U=o(32268),N=o(18648);function D(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",1),A.TgZ(1,"po-textarea",6),A.NdJ("ngModelChange",function(e){return A.CHM(n),A.oxw().justification=e}),A.ALo(2,"translate"),A.qZA(),A.qZA()}if(2&e){var i=A.oxw();A.xp6(1),A.s9C("p-label",A.lcZ(2,2,"l-justification")),A.Q6J("ngModel",i.justification)}}function J(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",1),A.TgZ(1,"po-select",7),A.NdJ("ngModelChange",function(e){return A.CHM(n),A.oxw().reasonId=e}),A.ALo(2,"translate"),A.ALo(3,"translate"),A.qZA(),A.qZA()}if(2&e){var i=A.oxw();A.xp6(1),A.s9C("p-label",A.lcZ(2,4,"l-reason")),A.s9C("p-placeholder",A.lcZ(3,6,"l-select-option")),A.Q6J("ngModel",i.reasonId)("p-options",i.reasonsOption)}}var j=function(){var e=function(e){r(i,e);var t=a(i);function i(e){var n;return c(this,i),(n=t.call(this)).overtimeService=e,n.reasonsOption=[],n.showReasons=!1,n.saveEvent=new A.vpe,n.closeDialogEvent=new A.vpe,n}return p(i,[{key:"ngOnInit",value:function(){n(l(i.prototype),"ngOnInit",this).call(this)}},{key:"closeDialog",value:function(){this.closeDialogEvent.emit()}},{key:"save",value:function(){var e=this,t=_.Em.getTotalMilliseconds(this.init).toString(),n=_.Em.getTotalMilliseconds(this.end).toString(),i={date:this.overtime.date,employee:this.overtime.employee,init:t,end:n,id:this.overtime.id,status:S.StatusEnum.Approved,total:(Number(n)-Number(t)).toString(),type:this.overtime.type,justification:null};i.justification=this.showReasons?this.reasons.filter(function(t){return t.id===e.reasonId})[0]:{label:this.justification},this.saveEvent.emit(i),this.closeDialog()}},{key:"initializeComponent",value:function(e){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadReasons();case 2:this.overtime=e,this.init=_.Em.getHoursByMilliseconds(e.init),this.end=_.Em.getHoursByMilliseconds(e.end),this.showReasons?this.reasonId=e.justification.id:this.justification=e.justification.label;case 6:case"end":return t.stop()}},t,this)}))}},{key:"loadReasons",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showReasons=E.ZP.isErpDatasul(),e.t0=this.showReasons,!e.t0){e.next=7;break}return e.next=5,this.overtimeService.loadReasons();case 5:this.reasons=e.sent.items,this.reasonsOption=this.reasons.map(function(e){return{label:e.label,value:e.id}});case 7:case"end":return e.stop()}},e,this)}))}}]),i}(H.R);return e.\u0275fac=function(t){return new(t||e)(A.Y36(R.K))},e.\u0275cmp=A.Xpm({type:e,selectors:[["app-partial-hours"]],outputs:{saveEvent:"saveEvent",closeDialogEvent:"closeDialogEvent"},features:[A.qOj],decls:39,vars:34,consts:[["pageTitle","l-adjustment-overtime",3,"backIsVisible","backFunction"],[1,"po-row"],[1,"po-row","input-row"],["type","text",1,"input-edit","po-sm-3","po-md-3","po-lg-4","po-xl-6",3,"ngModel","ngModelChange"],["class","po-row",4,"ngIf"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"p-label","p-click"],["name","textarea",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"ngModel","p-label","ngModelChange"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"ngModel","p-label","p-options","p-placeholder","ngModelChange"]],template:function(e,t){1&e&&(A.TgZ(0,"app-page-header",0),A.NdJ("backFunction",function(){return t.closeDialog()}),A.qZA(),A.TgZ(1,"div",1),A.TgZ(2,"strong"),A._uU(3),A.ALo(4,"translate"),A.qZA(),A.qZA(),A.TgZ(5,"div",1),A.TgZ(6,"p"),A._uU(7),A.ALo(8,"translate"),A.qZA(),A.TgZ(9,"p"),A._uU(10),A.qZA(),A.qZA(),A.TgZ(11,"div",1),A.TgZ(12,"p"),A._uU(13),A.ALo(14,"translate"),A.qZA(),A.TgZ(15,"p"),A._uU(16),A.ALo(17,"utcDate"),A.qZA(),A.qZA(),A.TgZ(18,"div",1),A.TgZ(19,"p"),A._uU(20),A.ALo(21,"translate"),A.qZA(),A.TgZ(22,"p"),A._uU(23),A.ALo(24,"formatMillisecondsAsHour"),A.qZA(),A.qZA(),A.TgZ(25,"div",2),A.TgZ(26,"strong"),A._uU(27),A.ALo(28,"translate"),A.qZA(),A.TgZ(29,"input",3),A.NdJ("ngModelChange",function(e){return t.init=e}),A.qZA(),A.qZA(),A.TgZ(30,"div",2),A.TgZ(31,"strong"),A._uU(32),A.ALo(33,"translate"),A.qZA(),A.TgZ(34,"input",3),A.NdJ("ngModelChange",function(e){return t.end=e}),A.qZA(),A.qZA(),A.YNc(35,D,3,4,"div",4),A.YNc(36,J,4,8,"div",4),A.TgZ(37,"po-button",5),A.NdJ("p-click",function(){return t.save()}),A.ALo(38,"translate"),A.qZA()),2&e&&(A.Q6J("backIsVisible",t.viewIsMobile),A.xp6(3),A.Oqu(A.lcZ(4,15,"l-summary")),A.xp6(4),A.hij("",A.lcZ(8,17,"l-colaborator"),":"),A.xp6(3),A.Oqu(null==t.overtime||null==t.overtime.employee?null:t.overtime.employee.name),A.xp6(3),A.hij("",A.lcZ(14,19,"l-date"),":"),A.xp6(3),A.Oqu(A.xi3(17,21,null==t.overtime?null:t.overtime.date,"shortDate")),A.xp6(4),A.hij("",A.lcZ(21,24,"l-overtime-pay"),":"),A.xp6(3),A.Oqu(A.lcZ(24,26,null==t.overtime?null:t.overtime.total)),A.xp6(4),A.Oqu(A.lcZ(28,28,"l-initial")),A.xp6(2),A.Q6J("ngModel",t.init),A.xp6(3),A.Oqu(A.lcZ(33,30,"l-end")),A.xp6(2),A.Q6J("ngModel",t.end),A.xp6(1),A.Q6J("ngIf",!t.showReasons),A.xp6(1),A.Q6J("ngIf",t.showReasons),A.xp6(1),A.s9C("p-label",A.lcZ(38,32,"l-save")))},directives:[M.q,h.Fj,h.JJ,h.On,u.O5,v.bOz,v.gJm,v.C9q],pipes:[m.X$,U.$,N.P],styles:[".input-edit[_ngcontent-%COMP%]{position:absolute;right:5%}.input-row[_ngcontent-%COMP%]{margin-bottom:25px}"]}),e}(),I=function(){return(e=I||(I={}))[e.Approve=0]="Approve",e[e.Reprove=1]="Reprove",e[e.ApproveMany=2]="ApproveMany",e[e.ReproveMany=3]="ReproveMany",I;var e}(),V=o(61466),G=o(65241),B=o(39075),z=o(96054),F=o(57706),Q=o(10690),Y=o(70385),$=o(13235);function X(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",7),A.TgZ(1,"po-table",8),A.NdJ("p-all-selected",function(){return A.CHM(n),A.oxw().countSelected()})("p-all-unselected",function(){return A.CHM(n),A.oxw().countSelected()})("p-selected",function(){return A.CHM(n),A.oxw().countSelected()})("p-unselected",function(){return A.CHM(n),A.oxw().countSelected()})("p-show-more",function(){return A.CHM(n),A.oxw().showMore()}),A.qZA(),A.qZA()}if(2&e){var i=A.oxw();A.xp6(1),A.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",i.columns)("p-items",i.items)("p-actions",i.actions)("p-loading",i.loading)("p-show-more-disabled",i.showMoreDisable)("p-hide-text-overflow",!0)}}function K(e,t){if(1&e&&(A.TgZ(0,"div",19),A._UZ(1,"hr",20),A.TgZ(2,"label",21),A._uU(3),A.ALo(4,"translate"),A.qZA(),A.TgZ(5,"strong",22),A._uU(6),A.ALo(7,"formatMillisecondsAsHour"),A.qZA(),A.qZA()),2&e){var n=A.oxw().$implicit;A.xp6(3),A.Oqu(A.lcZ(4,2,"l-initial")),A.xp6(3),A.Oqu(A.lcZ(7,4,n.init))}}function W(e,t){if(1&e&&(A.TgZ(0,"div",19),A._UZ(1,"hr",20),A.TgZ(2,"label",21),A._uU(3),A.ALo(4,"translate"),A.qZA(),A.TgZ(5,"strong",22),A._uU(6),A.ALo(7,"formatMillisecondsAsHour"),A.qZA(),A.qZA()),2&e){var n=A.oxw().$implicit;A.xp6(3),A.Oqu(A.lcZ(4,2,"l-end-2")),A.xp6(3),A.Oqu(A.lcZ(7,4,n.end))}}function ee(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",19),A._UZ(1,"hr",20),A.TgZ(2,"label",21),A._uU(3),A.ALo(4,"translate"),A.qZA(),A.TgZ(5,"a",28),A.NdJ("click",function(){A.CHM(n);var e=A.oxw().$implicit;return A.oxw(2).openPartialHours(e)}),A._uU(6),A.ALo(7,"formatMillisecondsAsHour"),A.qZA(),A.qZA()}if(2&e){var i=A.oxw().$implicit;A.xp6(3),A.Oqu(A.lcZ(4,2,"l-initial")),A.xp6(3),A.Oqu(A.lcZ(7,4,i.init))}}function te(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",19),A._UZ(1,"hr",20),A.TgZ(2,"label",21),A._uU(3),A.ALo(4,"translate"),A.qZA(),A.TgZ(5,"a",28),A.NdJ("click",function(){A.CHM(n);var e=A.oxw().$implicit;return A.oxw(2).openPartialHours(e)}),A._uU(6),A.ALo(7,"formatMillisecondsAsHour"),A.qZA(),A.qZA()}if(2&e){var i=A.oxw().$implicit;A.xp6(3),A.Oqu(A.lcZ(4,2,"l-end-2")),A.xp6(3),A.Oqu(A.lcZ(7,4,i.end))}}function ne(e,t){if(1&e){var n=A.EpF();A.TgZ(0,"div",11),A.TgZ(1,"app-expansion-card"),A.TgZ(2,"div",12),A.TgZ(3,"div",13),A.TgZ(4,"po-checkbox",14),A.NdJ("ngModelChange",function(e){return A.CHM(n).$implicit.checked=e})("p-change",function(){var e=A.CHM(n).$implicit;return A.oxw(2).selectMobile(e)}),A.qZA(),A.qZA(),A.TgZ(5,"div",15),A.TgZ(6,"div",16),A.TgZ(7,"strong"),A._uU(8),A.ALo(9,"titleCase"),A.qZA(),A.qZA(),A.TgZ(10,"div",17),A._uU(11),A.ALo(12,"titleCase"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(13,"div",18),A.TgZ(14,"div",19),A._UZ(15,"hr",20),A.TgZ(16,"label",21),A._uU(17),A.ALo(18,"translate"),A.qZA(),A.TgZ(19,"strong",22),A._uU(20),A.ALo(21,"utcDate"),A.qZA(),A.qZA(),A.YNc(22,K,8,6,"div",23),A.YNc(23,W,8,6,"div",23),A.YNc(24,ee,8,6,"div",23),A.YNc(25,te,8,6,"div",23),A.TgZ(26,"div",19),A._UZ(27,"hr",20),A.TgZ(28,"label",21),A._uU(29),A.ALo(30,"translate"),A.qZA(),A.TgZ(31,"strong",22),A._uU(32),A.ALo(33,"formatMillisecondsAsHour"),A.qZA(),A.qZA(),A.TgZ(34,"div",24),A._UZ(35,"hr",20),A.TgZ(36,"label",21),A._uU(37),A.ALo(38,"translate"),A.qZA(),A.TgZ(39,"strong",25),A._uU(40),A.qZA(),A.qZA(),A.TgZ(41,"div",19),A._UZ(42,"hr",20),A.TgZ(43,"label",21),A._uU(44),A.ALo(45,"translate"),A.qZA(),A.TgZ(46,"strong",26),A._uU(47),A.qZA(),A.qZA(),A.TgZ(48,"app-yes-or-no-buttons",27),A.NdJ("yes",function(){var e=A.CHM(n).$implicit;return A.oxw(2).approve(e)})("no",function(){var e=A.CHM(n).$implicit;return A.oxw(2).reprove(e)}),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&e){var i=t.$implicit,r=A.oxw(2);A.xp6(4),A.MGl("id","card-",r.i,""),A.Q6J("ngModel",i.checked),A.xp6(4),A.Oqu(A.lcZ(9,17,i.employee.name)),A.xp6(3),A.Oqu(A.lcZ(12,19,i.employee.roleDescription)),A.xp6(6),A.Oqu(A.lcZ(18,21,"l-date")),A.xp6(3),A.Oqu(A.xi3(21,23,i.date,"shortDate")),A.xp6(2),A.Q6J("ngIf",!(null!=r.partialHours&&r.partialHours.visible)),A.xp6(1),A.Q6J("ngIf",!(null!=r.partialHours&&r.partialHours.visible)),A.xp6(1),A.Q6J("ngIf",null==r.partialHours?null:r.partialHours.visible),A.xp6(1),A.Q6J("ngIf",null==r.partialHours?null:r.partialHours.visible),A.xp6(4),A.Oqu(A.lcZ(30,26,"l-total")),A.xp6(3),A.Oqu(A.lcZ(33,28,i.total)),A.xp6(5),A.Oqu(A.lcZ(38,30,"l-type")),A.xp6(3),A.Oqu(i.type.label),A.xp6(4),A.Oqu(A.lcZ(45,32,r.justificationLabelKey)),A.xp6(3),A.Oqu(i.justification.label),A.xp6(1),A.Q6J("id",i.id)}}function ie(e,t){if(1&e&&(A.TgZ(0,"div",9),A.YNc(1,ne,49,34,"div",10),A.qZA()),2&e){var n=A.oxw();A.xp6(1),A.Q6J("ngForOf",null==n.pendingOvertimesListView?null:n.pendingOvertimesListView.records)("ngForTrackBy",n.trackByFunction)}}var re=[{path:"",component:k,canActivate:[y.P]},{path:"pending",component:function(){var t=function(t){r(o,t);var i=a(o);function o(e,t,n,r,a,s,l,u){var p;return c(this,o),(p=i.call(this)).overtimeService=e,p.windowUtilService=t,p.appTranslateService=n,p.profileService=r,p.sanitizationService=a,p.fieldProperties=s,p.notificationService=l,p.notificationsPageStore=u,p.pendingOvertimesListView=new L.i([]),p.actions=[],p.items=[],p.avatar=[],p.pageActions=[],p.filters=[],p._selectedLines=[],p}return p(o,[{key:"selectedLines",get:function(){return this._selectedLines},set:function(e){var t=e?e.length:0;this._selectedLines=e,this.getPageActions(t),this.isDisableActions=0===t}},{key:"justificationLabelKey",get:function(){return E.ZP.isErpDatasul()?"l-reason":"l-justification"}},{key:"ngOnInit",value:function(){n(l(o.prototype),"ngOnInit",this).call(this),this.pendingOvertimesListView.actualPage=1,this.pendingOvertimesListView.pageSize=20,this.showMoreDisable=!1,this.loading=!1,this.isDisableActions=!0,this.partialHoursDialog=!1,this.initializeComponents()}},{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getPendingOvertimesList(t,this.pendingOvertimesListView.actualPage,this.pendingOvertimesListView.pageSize,e,this.employeeName);case 2:case"end":return n.stop()}},n,this)}))}},{key:"approveDesk",value:function(e){this.approve(e.overtime)}},{key:"reproveDesk",value:function(e){this.reprove(e.overtime)}},{key:"approve",value:function(e){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-approve-notification");case 2:this.modalText=t.sent,this.currentModalAction={type:I.Approve,overtime:e},this.poModal.open();case 5:case"end":return t.stop()}},t,this)}))}},{key:"reprove",value:function(e){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-reprove-notification");case 2:this.modalText=t.sent,this.currentModalAction={type:I.Reprove,overtime:e},this.poModal.open();case 5:case"end":return t.stop()}},t,this)}))}},{key:"approveMany",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-approve-notifications");case 2:this.modalText=e.sent,this.currentModalAction={type:I.ApproveMany},this.poModal.open();case 5:case"end":return e.stop()}},e,this)}))}},{key:"reproveMany",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-reprove-notifications");case 2:this.modalText=e.sent,this.currentModalAction={type:I.ReproveMany},this.poModal.open();case 5:case"end":return e.stop()}},e,this)}))}},{key:"openPartialHours",value:function(e){this.partialHoursDialog=!0,this.partialHoursComponent.initializeComponent(e)}},{key:"closePartialHours",value:function(){this.partialHoursDialog=!1}},{key:"countSelected",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.selectedLines=this.poTable.getSelectedRows();case 1:case"end":return e.stop()}},e,this)}))}},{key:"disableButtons",value:function(){return this.isDisableActions}},{key:"showMore",value:function(){this.getPendingOvertimesList(!1,this.pendingOvertimesListView.getNextPage(),this.pendingOvertimesListView.pageSize,!1,this.employeeName)}},{key:"searchByEmployeeName",value:function(e){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.employeeName=e,this.selectedLines=[],t.next=4,this.getData(!0);case 4:case"end":return t.stop()}},t,this)}))}},{key:"back",value:function(){this.windowUtilService.back()}},{key:"translateString",value:function(e){return this.appTranslateService.getI18n(e)}},{key:"onChangeDisclaimers",value:function(e){var t={};e.forEach(function(e){t[e.property]=e.value}),this.searchByEmployeeName(t.name)}},{key:"onQuickSearch",value:function(e){this.searchByEmployeeName(e)}},{key:"onAdvancedSearch",value:function(e){this.searchByEmployeeName(e.name)}},{key:"selectMobile",value:function(t){var n=this.selectedLines.findIndex(function(e){return e.overtime.id===t.id});-1!==n?(this.selectedLines.splice(n,1),this.selectedLines=e(this.selectedLines),this.isDisableActions=0===this.selectedLines.length):(this.selectedLines=[].concat(e(this.selectedLines),[this.items.filter(function(e){return e.id===t.id})[0]]),this.isDisableActions=!1)}},{key:"initializeComponents",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFieldProps();case 2:this.getColumns(),this.getActions(),this.getData(!0,!0),this.getPageActions(),this.getModalActions(),this.getLabelsSearch();case 8:case"end":return e.stop()}},e,this)}))}},{key:"getFieldProps",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fieldProperties.getFieldProperties("overtime");case 2:e.sent.forEach(function(e){t.partialHours=e});case 3:case"end":return e.stop()}},e,this)}))}},{key:"getColumns",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-name");case 2:return e.t0=e.sent.toString(),e.t1={property:"name",label:e.t0,width:"20%"},e.next=6,this.translateString("l-type");case 6:return e.t2=e.sent.toString(),e.t3={property:"type",label:e.t2,width:"20%"},e.next=10,this.translateString("l-date");case 10:return e.t4=e.sent.toString(),e.t5={property:"date",label:e.t4,type:"date",width:"10%"},e.next=14,this.translateString("l-initial");case 14:return e.t6=e.sent.toString(),e.t7={property:"initHour",label:e.t6,width:"10%"},e.next=18,this.translateString("l-end-2");case 18:return e.t8=e.sent.toString(),e.t9={property:"endHour",label:e.t8,width:"10%"},e.next=22,this.translateString("l-total");case 22:return e.t10=e.sent.toString(),e.t11={property:"total",label:e.t10,width:"10%"},e.next=26,this.translateString(this.justificationLabelKey);case 26:e.t12=e.sent,e.t13={property:"justification",label:e.t12,width:"20%"},this.columns=[e.t1,e.t3,e.t5,e.t7,e.t9,e.t11,e.t13];case 29:case"end":return e.stop()}},e,this)}))}},{key:"getActions",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.approveDesk.bind(this),e.next=3,this.translateString("l-approve");case 3:return e.t1=e.sent.toString(),e.t2={action:e.t0,label:e.t1},e.t3=this.reproveDesk.bind(this),e.next=8,this.translateString("l-decline");case 8:if(e.t4=e.sent.toString(),e.t5={action:e.t3,label:e.t4},this.actions=[e.t2,e.t5],e.t6=this.partialHours.visible,!e.t6){e.next=20;break}return e.t7=this.actions,e.t8=this.payPartialHours.bind(this),e.next=17,this.translateString("l-pay-overtimes");case 17:e.t9=e.sent.toString(),e.t10={action:e.t8,label:e.t9},e.t7.push.call(e.t7,e.t10);case 20:case"end":return e.stop()}},e,this)}))}},{key:"getPendingOvertimesList",value:function(e,t,n,i,r){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,this.loading=!0,!e){o.next=9;break}return this.notificationsPageStore.getOvertime({employeedId:T.N.loggedUser,page:t,pageSize:n,employee:r}),o.next=6,this.notificationsPageStore.nextOvertimeNotNull();case 6:a=o.sent,o.next=12;break;case 9:return o.next=11,this.overtimeService.getPendingOvertimesList(T.N.loggedUser,t,n,r);case 11:a=o.sent;case 12:if(!a){o.next=14;break}return o.abrupt("return",this.updateOvertimeItemsForTable(a,i));case 14:o.next=19;break;case 16:o.prev=16,o.t0=o.catch(0),this.loading=!1;case 19:this.pendingOvertimesListView.hasMoreRecords=!1;case 20:case"end":return o.stop()}},o,this,[[0,16]])}))}},{key:"updateOvertimeItemsForTable",value:function(e,t){this.clearData(t),this.pendingOvertimesListView.records=this.pendingOvertimesListView.records.concat(e.items),this.pendingOvertimesListView.hasMoreRecords=e.hasNext;for(var n=0;n<this.pendingOvertimesListView.records.length;n++)this.items[n]={id:this.pendingOvertimesListView.records[n].id,avatar:this.getAvatar(this.pendingOvertimesListView.records[n].employee.id),name:this.pendingOvertimesListView.records[n].employee.name,date:_.Em.formatUTCDate(new Date(this.pendingOvertimesListView.records[n].date)),initHour:_.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[n].init),endHour:_.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[n].end),total:_.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[n].total),type:this.pendingOvertimesListView.records[n].type.label,status:this.pendingOvertimesListView.records[n].status,overtime:this.pendingOvertimesListView.records[n],justification:this.pendingOvertimesListView.records[n].justification.label};this.items.length<this.pendingOvertimesListView.actualPage*this.pendingOvertimesListView.pageSize&&(this.showMoreDisable=!0),this.loading=!1}},{key:"clearData",value:function(e){(!this.pendingOvertimesListView.records||e)&&(this.pendingOvertimesListView.records=[],e&&(this.items=[]))}},{key:"sendPut",value:function(e,t){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.overtimeService.putOvertime(e.items[0].employee.id,e);case 3:return n.next=5,this.appTranslateService.getI18n(t);case 5:i=n.sent,this.notificationService.showNotification(i,v.ik9.Success),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),this.notificationService.showNotification(n.t0.message,v.ik9.Error);case 12:case"end":return n.stop()}},n,this,[[0,9]])}))}},{key:"payPartialHours",value:function(e){this.openPartialHours(e.overtime)}},{key:"getAvatar",value:function(e){var t=this;return this.avatar[e]||(this.avatar[e]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(e).then(function(n){n&&n.content&&(t.avatar[e]=t.sanitizationService.bypassSecurityTrustStyle("url(".concat("data:image/"+(n.type||"png")+";base64,"+n.content,")")))})),this.avatar[e]}},{key:"getPageActions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0="",t.next=3,this.translateString("l-approve-selected");case 3:return t.t1=t.sent,t.t2=t.t0.concat.call(t.t0,t.t1," (").concat(e,")"),t.t3=this.approveMany.bind(this),t.t4=this.disableButtons.bind(this),t.t5={label:t.t2,action:t.t3,disabled:t.t4},t.t6="",t.next=11,this.translateString("l-reprove-selected");case 11:t.t7=t.sent,t.t8=t.t6.concat.call(t.t6,t.t7," (").concat(e,")"),t.t9=this.reproveMany.bind(this),t.t10=this.disableButtons.bind(this),t.t11={label:t.t8,action:t.t9,disabled:t.t10},this.pageActions=[t.t5,t.t11];case 17:case"end":return t.stop()}},t,this)}))}},{key:"getModalActions",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(){t.closeModal()},e.next=3,this.translateString("l-cancel-title");case 3:return e.t1=e.sent,e.t2=!0,this.closeAction={action:e.t0,label:e.t1,danger:e.t2},e.t3=function(){t.confirmModal()},e.next=9,this.translateString("l-yes");case 9:e.t4=e.sent,this.confirmAction={action:e.t3,label:e.t4};case 11:case"end":return e.stop()}},e,this)}))}},{key:"closeModal",value:function(){this.poModal.close(),this.currentModalAction=null}},{key:"confirmModal",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.poModal.close(),this.currentModalAction.type!==I.Approve&&this.currentModalAction.type!==I.Reprove){e.next=6;break}return e.next=4,this.confirmModalOne();case 4:e.next=8;break;case 6:return e.next=8,this.confirmModalMany();case 8:this.windowUtilService.reloadPage();case 9:case"end":return e.stop()}},e,this)}))}},{key:"confirmModalOne",value:function(){var e,t,n=this.currentModalAction.overtime,i={hasNext:!1,items:[n]};return this.currentModalAction.type===I.Approve?(t=S.StatusEnum.Approved,e="m-approved-request"):(t=S.StatusEnum.Reproved,e="m-reprove-request"),n.status=t,this.sendPut(i,e)}},{key:"confirmModalMany",value:function(){var e,t=this.selectedLines,n=[];return this.currentModalAction.type===I.ApproveMany?(e="m-approved-request",t.forEach(function(e){e.overtime.status=S.StatusEnum.Approved,n.push(e.overtime)})):(e="m-reprove-request",t.forEach(function(e){e.overtime.status=S.StatusEnum.Reproved,n.push(e.overtime)})),this.sendPut({hasNext:!1,items:n},e)}},{key:"getLabelsSearch",value:function(){return(0,q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-filter-applied");case 2:return e.t0=e.sent.toString(),e.next=5,this.translateString("l-filter-title");case 5:return e.t1=e.sent.toString(),e.next=8,this.translateString("l-cancel-title");case 8:return e.t2=e.sent.toString(),e.next=11,this.translateString("l-apply");case 11:return e.t3=e.sent.toString(),e.next=14,this.translateString("l-researched-value");case 14:return e.t4=e.sent.toString(),e.next=17,this.translateString("l-search-collaborator-placeholder");case 17:return e.t5=e.sent.toString(),this.literals={disclaimerGroupTitle:e.t0,filterTitle:e.t1,filterCancelLabel:e.t2,filterConfirmLabel:e.t3,quickSearchLabel:e.t4,searchPlaceholder:e.t5},e.next=21,this.translateString("l-name-collaborator");case 21:e.t6=e.sent.toString(),e.t7={property:"name",label:e.t6,gridColumns:12},this.filters=[e.t7];case 24:case"end":return e.stop()}},e,this)}))}}]),o}(H.R);return t.\u0275fac=function(e){return new(e||t)(A.Y36(R.K),A.Y36(O.g),A.Y36(G.g),A.Y36(C.H),A.Y36(B.H7),A.Y36(P.c),A.Y36(z.g),A.Y36(V.P))},t.\u0275cmp=A.Xpm({type:t,selectors:[["app-pending-overtimes"]],viewQuery:function(e,t){var n;(1&e&&(A.Gf(v._w3,5),A.Gf(j,5),A.Gf(v.hmF,7)),2&e)&&(A.iGM(n=A.CRH())&&(t.poTable=n.first),A.iGM(n=A.CRH())&&(t.partialHoursComponent=n.first),A.iGM(n=A.CRH())&&(t.poModal=n.first))},features:[A.qOj],decls:9,vars:13,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile po-mt-1",4,"ngIf"],["id","partial-hours-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["dialog-content",""],[3,"closeDialogEvent","saveEvent"],["p-hide-close","true","p-size","md",3,"p-title","p-primary-action","p-secondary-action"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-hide-text-overflow","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],[1,"mobile","po-mt-1"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left","checkbox-without-photo"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"name"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],["for","date",1,"po-sm-6","po-md-6"],[1,"pull-right"],["class","card-line",4,"ngIf"],[1,"card-line","clearfix"],[1,"po-sm-6","po-md-6"],[1,"po-sm-6","po-md-6","text-right","po-pr-0"],[1,"po-sm-12","po-md-12","buttons-mobile",3,"id","yes","no"],[1,"pull-right",3,"click"]],template:function(e,t){1&e&&(A.TgZ(0,"po-page-dynamic-search",0),A.NdJ("p-change-disclaimers",function(e){return t.onChangeDisclaimers(e)})("p-quick-search",function(e){return t.onQuickSearch(e)})("p-advanced-search",function(e){return t.onAdvancedSearch(e)}),A.YNc(1,X,2,9,"div",1),A.YNc(2,ie,2,2,"div",2),A.qZA(),A.TgZ(3,"app-dialog",3),A.NdJ("closeDialogEvent",function(){return t.closePartialHours()}),A.TgZ(4,"div",4),A.TgZ(5,"app-partial-hours",5),A.NdJ("closeDialogEvent",function(){return t.closePartialHours()})("saveEvent",function(e){return t.approve(e)}),A.qZA(),A.qZA(),A.qZA(),A.TgZ(6,"po-modal",6),A.ALo(7,"translate"),A._uU(8),A.qZA()),2&e&&(A.Q6J("p-actions",t.pageActions)("p-filters",t.filters)("p-literals",t.literals),A.xp6(1),A.Q6J("ngIf",!t.viewIsMobile),A.xp6(1),A.Q6J("ngIf",t.viewIsMobile),A.xp6(1),A.Q6J("isVisible",t.partialHoursDialog)("closeDialogButtonEnable",!t.viewIsMobile),A.xp6(3),A.s9C("p-title",A.lcZ(7,11,"l-confirmation")),A.Q6J("p-primary-action",t.confirmAction)("p-secondary-action",t.closeAction),A.xp6(2),A.hij(" ",t.modalText,"\n"))},directives:[f.O6,u.O5,F.a,j,v.hmF,v._w3,u.sg,Q.c,v.ejx,h.JJ,h.On,Y.o],pipes:[m.X$,$.r,U.$,N.P],styles:[".qtd-selected[_ngcontent-%COMP%]{font-size:.8em;font-style:normal;font-weight:bold;position:absolute;margin-left:20px}.line-buttons[_ngcontent-%COMP%]{margin:20px 0 15px}.line-search[_ngcontent-%COMP%]{margin:12px 0 7px}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}a[_ngcontent-%COMP%]:hover{color:#0c9abe!important}a[_ngcontent-%COMP%]{color:#0c9abe!important}.checkbox-without-photo[_ngcontent-%COMP%]{margin-top:-5px}[_nghost-%COMP%]     .po-page-list-operations .po-button{margin-bottom:.25rem}@media screen and (min-width: 961px){[_nghost-%COMP%]     div.po-page{margin-left:0!important;height:auto!important}[_nghost-%COMP%]     div.po-page, [_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-header, [_nghost-%COMP%]     div.po-page div.po-page-content{padding-left:8px!important;padding-right:8px!important}}.card-line.clearfix[_ngcontent-%COMP%]{margin-bottom:-25px}.card-line.clearfix[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-align:right;padding:0}"]}),t}(),canActivate:[y.P]}],oe=function(){var e=p(function e(){c(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[g.Bz.forChild(re)],g.Bz]}),e}(),ae=function(){var e=p(function e(){c(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[u.ez,oe,Z.q,m.aw,h.u5,v.JBz,g.Bz,d.To,x.Y,b.G,f.Pu]]}),e}()}}])}();