"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[876],{6876:function(e,t,i){i.r(t),i.d(t,{TeamManagementTabsModule:function(){return Ci}});var n=i(38583),a=i(3679),s=i(90171),o=i(29790),r=i(44956),l=i(32114),c=i(43743),p=i(56365),d=i(37716);let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez]]}),e})();var u=i(59708);let m=(()=>{class e{constructor(e){this.genericService=e}getItems(e,t,i){const n=`team/shifts/${i}`;let a=[];return a.page=e,a.pageSize=t,this.genericService.search(n,a)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.M))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=i(89019);const f={hasNext:!0,items:[{initDate:new Date("2018-02-14T09:30Z"),assignDate:new Date("2018-02-13T09:30Z"),endDate:new Date("9999-12-31T09:30Z"),shift:{id:"1",label:"07h00 \xe0s 16h30"},schedule:{id:"3",label:"Turma 3"},workdays:[{id:"1",label:"Jornada 1",currentIntervalId:"1",interval:[{id:"1",label:"Almo\xe7o",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")},{id:"2",label:"Jantar",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")}]},{id:"2",label:"Jornada 2",currentIntervalId:"2",interval:[{id:"2",label:"Jantar",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")},{id:"3",label:"Intervalo",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")}]}]},{initDate:new Date("2018-02-12T09:30Z"),assignDate:new Date("2018-02-11T09:30Z"),endDate:new Date("2018-02-20T09:30Z"),shift:{id:"4",label:"13h00 \xe0s 22h00"},schedule:{id:"5",label:"14h00 \xe0s 23h00"},workdays:[{id:"6",label:"Noturno",currentIntervalId:"2",interval:[{id:"1",label:"Intervalo 1",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")},{id:"2",label:"Intervalo 2",initDate:new Date("2018-02-10T09:30Z"),endDate:new Date("2018-02-10T09:30Z")}]}]}]};let b=(()=>{class e{getItems(e,t,i=g.N.loggedUser){return new Promise(e=>{const t=[];Array.from(f.items).forEach(e=>{const i=e;Object.keys(e).forEach(t=>{e[t]instanceof Date&&(i[t]=e[t].toISOString())}),t.push(i)}),e(Object.assign(Object.assign({},f),{items:t}))})}search(e,t){return f}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})();var v=i(64762);let y=(()=>{class e{constructor(e){this.genericService=e}searchShifts(e,t,i){let n=[];return n.page=e,n.pageSize=t,n.searchShift=i,this.genericService.search("team/shifts/types",n)}getSchedules(e,t,i){const n=`team/shifts/schedules/${i}`;let a=[];return a.page=e,a.pageSize=t,this.genericService.search(n,a)}getIntervals(e,t,i){return this.genericService.post(`team/shifts/intervals/${e}/${t}`,i)}getWorkdayIds(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=`team/shifts/workday/${e}`,i=yield this.genericService.get(t);return i&&i.items?i.items.map(e=>Number(e.id)):[]})}updateShift(e,t){return this.genericService.post(`team/shifts/update/${e}`,t,!1)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.M))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const w={hasNext:!0,items:[{id:"1",label:"07h00 \xe0s 16h30"},{id:"2",label:"07h30 \xe0s 17h00"},{id:"3",label:"08h00 \xe0s 17h30"}]},x={hasNext:!1,items:[{id:"4",label:"13h00 \xe0s 22h00"},{id:"5",label:"14h00 \xe0s 23h00"}]},Z={hasNext:!0,items:[{id:"1",label:"Turma 1"},{id:"2",label:"Turma 2"},{id:"3",label:"Turma 3"}]},C={hasNext:!1,items:[{id:"1",label:"Jornada 1",currentIntervalId:null,interval:[{id:"1",label:"das 12h00 \xe0s 13h00"},{id:"2",label:"das 12h30 \xe0s 13h30"}]},{id:"2",label:"Jornada 2",currentIntervalId:null,interval:[{id:"1",label:"das 12h00 \xe0s 13h00"},{id:"3",label:"das 13h00 \xe0s 14h00"}]},{id:"3",label:"Jornada 3",currentIntervalId:null,interval:[{id:"2",label:"das 12h30 \xe0s 13h30"},{id:"3",label:"das 13h00 \xe0s 14h00"}]}]},M={shiftId:1,initDate:new Date("2018-02-10T09:30Z"),workdays:[{workdayId:1,intervalId:1},{workdayId:2,intervalId:2}],scheduleId:2};new Date("2018-02-12T09:30Z"),new Date("2018-02-11T09:30Z"),new Date("2018-02-20T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-10T09:30Z"),new Date("2018-02-14T09:30Z");let A=(()=>{class e{searchShifts(e,t,i){return new Promise(t=>{let n=e>1?x:w,a=n.items;i.length>0&&(a=Array.from(n.items).filter(e=>e.label.includes(i))),t(Object.assign(Object.assign({},n),{items:a}))})}getSchedules(e,t,i){return new Promise(e=>{e(Z)})}getIntervals(e,t){return new Promise(e=>{e(C)})}updateShift(e,t){return new Promise(e=>{e(M)})}getWorkdayIds(e){return(0,v.mG)(this,void 0,void 0,function*(){return Promise.resolve([1,3,5])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})(),S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[y,A],imports:[[n.ez,p.q,o.aw,r.JBz,s.To,c.Y,a.u5]]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[m,b],imports:[[n.ez,p.q,o.aw,r.JBz,s.To,c.Y,S]]}),e})();var O=i(9789);let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[O.C],imports:[[n.ez,p.q,o.aw,r.JBz,s.To,c.Y,a.u5,T,l.Pu,h]]}),e})();var P=i(64383);let I=(()=>{class e{constructor(e,t){this.serviceGeneric=e,this.momentService=t}getAll(e,t){const i=`team/delaysAndAbsences/${e}`,n=[];if(t)for(const a of Object.keys(t))n[a]=["startDate","endDate"].includes(a)?this.momentService.getInstance(t[a]).toISOString():t[a];return null==n.page&&(n.page=1),null==n.pageSize&&(n.pageSize=10),n.encodeEmployeeId=!0,this.serviceGeneric.search(i,n)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.M),d.LFG(P.z))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_=(()=>{class e{constructor(e,t){this.serviceGeneric=e,this.momentService=t}getAll(e,t){const i=`team/delaysAndAbsencesTotalizer/${e}`,n=[];if(t)for(const a of Object.keys(t))n[a]=["startDate","endDate"].includes(a)?this.momentService.getInstance(t[a]).toISOString():t[a];return null==n.page&&(n.page=1),null==n.pageSize&&(n.pageSize=10),this.serviceGeneric.search(i,n)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.M),d.LFG(P.z))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[I,_],imports:[[n.ez,o.aw,p.q,r.JBz,a.u5,l.Pu,c.Y]]}),e})();var D=i(95987),L=i(51110),N=i(91195),F=i(77859),U=i(11491),J=i(81621),Y=i(48655),E=i(18399),H=i(38050),Q=i(25651),B=i(53307),G=i(8296),z=i(83614),$=i(57899),V=i(92340),R=(()=>((R||(R={})).OccurrenceEnum={Absence:"absence",Delay:"delay"},R))(),j=i(81483),W=i(82832);function X(e,t){if(1&e&&(d.TgZ(0,"div",9),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Oqu(e.response.qtyAbsence)}}function K(e,t){if(1&e&&(d.TgZ(0,"div",10),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Oqu(e.response.qtyHourDelay)}}function ee(e,t){if(1&e&&(d.TgZ(0,"div",9),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.response.qtyAbsence," ")}}function te(e,t){if(1&e&&(d.TgZ(0,"div",10),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.response.qtyHourDelay," ")}}let ie=(()=>{class e{constructor(e){this.service=e,this._currentFilter={},this.occurrenceChange=new d.vpe}set currentFilter(e){this.occurrence=e.ocurrency,e=Object.assign({},e),this.filtersChanged(e)&&(e.page=1,this.getAll(e)),this._currentFilter=e}get currentFilter(){return this._currentFilter}ngOnInit(){this.getAll()}getAll(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=yield this.service.getAll(V.N.loggedUser,e);this.response={qtyAbsence:t.qtyAbsence,qtyHourDelay:j.Em.getHoursByMilliseconds(t.qtyHourDelay,!1)}})}qtyAbsenceClick(){this.occurrenceClick(R.OccurrenceEnum.Absence)}hoursDelayClick(){this.occurrenceClick(R.OccurrenceEnum.Delay)}currentOccurrenceIsAbsence(){return this.occurrence===R.OccurrenceEnum.Absence}currentOccurrenceIsDelay(){return this.occurrence===R.OccurrenceEnum.Delay}occurrenceClick(e){this.occurrence=this.occurrence!==e?e:null,this.occurrenceChange.emit(this.occurrence)}filtersChanged(e){return JSON.stringify(e)!==JSON.stringify(this.currentFilter)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(_))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dashboard"]],inputs:{currentFilter:"currentFilter"},outputs:{occurrenceChange:"occurrenceChange"},decls:27,vars:20,consts:[[1,"po-visible-sm-12","po-visible-md-12"],["card-body","",1,"mr-card-body","po-sm-12","p-4"],[1,"po-row"],[1,"po-sm-6",3,"click"],["class","hours absence",4,"ngIf"],[1,"description"],["class","hours delay",4,"ngIf"],[1,"po-visible-lg-6","po-visible-xl-6",3,"click"],["card-header","",1,"mr-card-header","po-sm-12"],[1,"hours","absence"],[1,"hours","delay"]],template:function(e,t){1&e&&(d.TgZ(0,"app-card",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.NdJ("click",function(){return t.qtyAbsenceClick()}),d.YNc(4,X,2,1,"div",4),d.TgZ(5,"span",5),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.TgZ(8,"div",3),d.NdJ("click",function(){return t.hoursDelayClick()}),d.YNc(9,K,2,1,"div",6),d.TgZ(10,"span",5),d._uU(11),d.ALo(12,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"app-card",7),d.NdJ("click",function(){return t.qtyAbsenceClick()}),d.TgZ(14,"div",8),d.TgZ(15,"span",5),d._uU(16),d.ALo(17,"translate"),d.qZA(),d.qZA(),d.TgZ(18,"div",1),d.YNc(19,ee,2,1,"div",4),d.qZA(),d.qZA(),d.TgZ(20,"app-card",7),d.NdJ("click",function(){return t.hoursDelayClick()}),d.TgZ(21,"div",8),d.TgZ(22,"span",5),d._uU(23),d.ALo(24,"translate"),d.qZA(),d.qZA(),d.TgZ(25,"div",1),d.YNc(26,te,2,1,"div",6),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Q6J("ngIf",t.response&&null!=t.response.qtyAbsence),d.xp6(2),d.Oqu(d.lcZ(7,12,"l-qty-absences")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyHourDelay),d.xp6(2),d.Oqu(d.lcZ(12,14,"l-hours-delay")),d.xp6(2),d.ekj("occurrence-selected",t.currentOccurrenceIsAbsence()),d.xp6(3),d.Oqu(d.lcZ(17,16,"l-qty-absences")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyAbsence),d.xp6(1),d.ekj("occurrence-selected",t.currentOccurrenceIsDelay()),d.xp6(3),d.Oqu(d.lcZ(24,18,"l-total-delays-in-hours")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyHourDelay))},directives:[W.A,n.O5],pipes:[o.X$],styles:['.mr-card-body[_ngcontent-%COMP%]{text-align:center}.hours[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-weight:bold;font-family:"NunitoSans-Bold"}.hours[_ngcontent-%COMP%]{font-size:160%}.hours.absence[_ngcontent-%COMP%]{color:#00b28e}.hours.delay[_ngcontent-%COMP%]{color:rgba(190,39,12,.973)}@media (min-width: 961px){.hours[_ngcontent-%COMP%]{font-weight:normal;font-size:32px;font-family:"NunitoSans-ExtraLight"}.hours.absence[_ngcontent-%COMP%], .hours.delay[_ngcontent-%COMP%]{color:inherit}}.description[_ngcontent-%COMP%]{font-size:90%}[_nghost-%COMP%]     .card-well{cursor:pointer}@media (min-width: 961px){[_nghost-%COMP%]   .occurrence-selected[_ngcontent-%COMP%]     .card-well{background:#ceeaf2}[_nghost-%COMP%]   .occurrence-selected[_ngcontent-%COMP%]     .card-well .hours{font-weight:bold;font-family:"NunitoSans-Bold"}}']}),e})();var ne=i(97983),ae=i(36227),se=i(68014),oe=i(65241),re=i(10690),le=i(94560),ce=i(13235);function pe(e,t){if(1&e&&(d.TgZ(0,"div",14),d.TgZ(1,"span",15),d._uU(2),d.qZA(),d.TgZ(3,"span",16),d._uU(4),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=t.index,n=d.oxw().$implicit;d.ekj("border-top",0==i)("po-mt-2",0==i),d.xp6(2),d.Oqu(e.label),d.xp6(2),d.Oqu(n[e.property])}}function de(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"po-button",18),d.NdJ("p-click",function(){d.CHM(e);const t=d.oxw().$implicit,i=d.oxw().$implicit,n=d.oxw();return t.action.call(n,i)}),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.Q6J("p-label",e.label)}}function he(e,t){if(1&e&&(d.ynx(0),d.YNc(1,de,1,1,"po-button",17),d.BQk()),2&e){const e=t.$implicit;d.xp6(1),d.Q6J("ngIf",e.visible)}}function ue(e,t){if(1&e&&(d.TgZ(0,"div",4),d.TgZ(1,"app-expansion-card",5),d.TgZ(2,"div",6),d.TgZ(3,"div",7),d._UZ(4,"span",8),d.TgZ(5,"span",9),d.TgZ(6,"strong"),d._uU(7),d.ALo(8,"titleCase"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"div",10),d.YNc(10,pe,5,6,"div",11),d.TgZ(11,"div",12),d.YNc(12,he,2,1,"ng-container",13),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.xp6(1),d.Q6J("iconClass","po-icon-arrow-down")("iconClassCollapsed","po-icon-arrow-up"),d.xp6(3),d.Udp("background-image",i.getAvatar(e.id)),d.xp6(3),d.Oqu(d.lcZ(8,7,e.name)),d.xp6(3),d.Q6J("ngForOf",i.columnsMobile),d.xp6(2),d.Q6J("ngForOf",i.actions)}}function me(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-show-more-button",19),d.NdJ("click",function(){return d.CHM(e),d.oxw().showMore()}),d.qZA()}}let ge=(()=>{class e{constructor(e,t,i,n,a,s){this.appTranslateService=e,this.momentService=t,this.profileService=i,this.fieldPropertiesService=n,this.permissionSelectors=a,this.router=s,this.columns=[],this.columnsMobile=[],this.items=[],this.filters=[],this.actions=[],this.avatarsStyle=[],this.onGetAllRequested=new d.vpe}set currentFilter(e){this._currentFilter=e,this.changeOccurrenceFilter(e.ocurrency)}set response(e){this._response=e,this.getItems()}get response(){return this._response}get currentFilter(){return this._currentFilter}ngOnInit(){Promise.all([this.getColumns(),this.getColumnsMobile(),this.getFilters(),this.getLiterals()]).then(()=>{this.getFieldProperties()}),this.loadPermissions()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}onQuickSearch(e){this.onGetAllRequested.emit({name:e})}onAdvancedSearch(e){this.onGetAllRequested.emit(e)}showMore(){const e=this.currentFilter;void 0===e.page?e.page=2:e.page+=1,this.onGetAllRequested.emit(e)}onChangeDisclaimers(e){const t={};e.forEach(e=>{t[e.property]=e.value}),this.onGetAllRequested.emit(t)}changeOccurrenceFilter(e){return(0,v.mG)(this,void 0,void 0,function*(){if(!this.poPageDynamicSearchComponent||!this.poPageDynamicSearchComponent.disclaimerGroup||!this.poPageDynamicSearchComponent.disclaimerGroup.disclaimers)return;const t=this.poPageDynamicSearchComponent.disclaimerGroup.disclaimers,i=t.findIndex(e=>"ocurrency"===e.property);i>-1&&t.splice(i,1),e&&t.push({label:`${yield this.appTranslateService.getI18n("l-occurrence-singular")}: ${yield this.translateOccurrence(e)}`,property:"ocurrency",value:e})})}getAvatar(e){return this.avatarsStyle[e]||(this.avatarsStyle[e]=this.profileService.getDefaultImageStyle(),this.profileService.getImageBase64Style(e).then(t=>{this.avatarsStyle[e]=t})),this.avatarsStyle[e]}trackByFunction(e,t){return t.id}getColumns(){return(0,v.mG)(this,void 0,void 0,function*(){this.columns=[{property:"name",label:yield this.appTranslateService.getI18n("l-name"),width:"25%"},{property:"date",label:yield this.appTranslateService.getI18n("l-date"),width:"25%"},{property:"startHour",label:yield this.appTranslateService.getI18n("l-start"),width:"25%"},{property:"endHour",label:yield this.appTranslateService.getI18n("l-end-2"),width:"25%"},{property:"stringHours",label:yield this.appTranslateService.getI18n("l-total-hours"),width:"25%"},{property:"occurrence",label:yield this.appTranslateService.getI18n("l-occurrence-singular"),width:"25%"}]})}getColumnsMobile(){return(0,v.mG)(this,void 0,void 0,function*(){this.columnsMobile=[{property:"date",label:yield this.appTranslateService.getI18n("l-date")},{property:"startHour",label:yield this.appTranslateService.getI18n("l-start")},{property:"endHour",label:yield this.appTranslateService.getI18n("l-end-2")},{property:"stringHours",label:yield this.appTranslateService.getI18n("l-total-hours")},{property:"occurrence",label:yield this.appTranslateService.getI18n("l-occurrence-singular")}]})}getOccurrenceOptions(){return(0,v.mG)(this,void 0,void 0,function*(){return[{value:"absence",label:yield this.appTranslateService.getI18n("l-absence")},{value:"delay",label:yield this.appTranslateService.getI18n("l-delay")},{value:"absence",label:yield this.appTranslateService.getI18n("l-absence")},{value:"delay",label:yield this.appTranslateService.getI18n("l-delay")}]})}getFilters(){return(0,v.mG)(this,void 0,void 0,function*(){this.filters=[{property:"startDate",label:yield this.appTranslateService.getI18n("l-date-initial"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6,type:r.$8e.DateTime},{property:"endDate",label:yield this.appTranslateService.getI18n("l-date-end"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6,type:r.$8e.DateTime},{property:"name",label:yield this.appTranslateService.getI18n("l-name"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6},{property:"ocurrency",label:yield this.appTranslateService.getI18n("l-occurrence-singular"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6,options:yield this.getOccurrenceOptions()}]})}getLiterals(){return(0,v.mG)(this,void 0,void 0,function*(){this.literals={searchPlaceholder:yield this.appTranslateService.getI18n("l-name-search")}})}getItems(){return(0,v.mG)(this,void 0,void 0,function*(){if(this.items=[],this.response&&this.response.items)for(const e of this.response.items)this.items.push({id:e.id,name:e.name,date:this.momentService.getInstance(e.date).utc().format("L"),amountHours:e.amountHours,stringHours:j.Em.getHoursByMilliseconds(e.amountHours,!1),occurrence:yield this.translateOccurrence(e.occurrence),startHour:e.startHour,endHour:e.endHour})})}translateOccurrence(e){return(0,v.mG)(this,void 0,void 0,function*(){if(null==e)return"";switch(e){case R.OccurrenceEnum.Absence:return this.appTranslateService.getI18n("l-absence");case R.OccurrenceEnum.Delay:return this.appTranslateService.getI18n("l-delay");default:return""}})}getFieldProperties(){return(0,v.mG)(this,void 0,void 0,function*(){(yield this.fieldPropertiesService.getFieldProperties("delayAndAbsence")).forEach(e=>{["startHour","endHour"].includes(e.field)&&!e.visible&&this.removeColumn(e.field)})})}removeColumn(e){this.removeColumnTable(e),this.removeColumnMobile(e)}removeColumnTable(e){const t=this.columns.findIndex(t=>t.property===e);t>-1&&this.columns.splice(t,1),this.columns=[...this.columns]}removeColumnMobile(e){const t=this.columnsMobile.findIndex(t=>t.property===e);t>-1&&this.columnsMobile.splice(t,1),this.columns=[...this.columns]}loadPermissions(){this.permissionSubscription=this.permissionSelectors.permissions$.subscribe(e=>{this.checkPermissionRequestAllowance(e),this.checkPermissionRequestMedicalCertificate(e),this.loadActions()})}loadActions(){return(0,v.mG)(this,void 0,void 0,function*(){const e=[];e.push({label:yield this.appTranslateService.getI18n("im-allowanceLong"),visible:this.permissionRequestAllowance,action:this.openRequestAllowance.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-request-medical-certificate"),visible:this.permissionRequestMedicalCertificate,action:this.openRequestMedicalCertificate.bind(this)}),this.actions=e})}checkPermissionRequestAllowance(e){this.permissionRequestAllowance=null!=e&&!!e.teamManagementAllowance}checkPermissionRequestMedicalCertificate(e){this.permissionRequestMedicalCertificate=null!=e&&!!e.teamManagementMedicalCertificateRequest}openRequestAllowance(e){const t=this.momentService.getInstance(e.date,"L").utc().valueOf().toString(),i={date:t,endDate:t};let n=`timesheet/allowances/request/${e.id}`;null!=e.startHour&&(i.startHour=e.startHour.substr(0,2).concat(e.startHour.substr(3,4))),null!=e.endHour&&(i.endHour=e.endHour.substr(0,2).concat(e.endHour.substr(3,4))),this.router.navigateByUrl(this.router.createUrlTree([n],{queryParams:i}))}openRequestMedicalCertificate(e){const t=this.momentService.getInstance(e.date,"L").utc().valueOf().toString();this.router.navigateByUrl(this.router.createUrlTree(["health/medicalCertificate/request"],{queryParams:{date:t,employeeId:e.id,endDate:t}}))}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(oe.g),d.Y36(P.z),d.Y36(ne.H),d.Y36(ae.c),d.Y36(se.eL),d.Y36(D.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-occurrence-viewer"]],viewQuery:function(e,t){if(1&e&&d.Gf(l.O6,5),2&e){let e;d.iGM(e=d.CRH())&&(t.poPageDynamicSearchComponent=e.first)}},inputs:{loading:"loading",currentFilter:"currentFilter",response:"response"},outputs:{onGetAllRequested:"onGetAllRequested"},decls:4,vars:12,consts:[["p-title"," ","name","fieldName","ngDefaultControl","",3,"p-filters","p-literals","p-quick-search","p-advanced-search","p-change-disclaimers"],["class","margin-card po-visible-sm-12 po-visible-md-12",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click",4,"ngIf"],["p-container","","p-hide-text-overflow","",1,"po-p-0","po-visible-lg-12","po-visible-xl-12",3,"p-hide-select-all","p-sort","p-columns","p-items","p-loading","p-show-more-disabled","p-actions","p-show-more"],[1,"margin-card","po-visible-sm-12","po-visible-md-12"],[3,"iconClass","iconClassCollapsed"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"about-employee"],[1,"avatar-small"],[1,"name","cut-title"],["card-body",""],["class","item-body po-row border-bottom",3,"border-top","po-mt-2",4,"ngFor","ngForOf"],[1,"po-row","mb-2","mt-3"],[4,"ngFor","ngForOf"],[1,"item-body","po-row","border-bottom"],[1,"title","po-sm-6"],[1,"value","po-sm-6"],["class","button-show-details po-sm-6","p-type","default",3,"p-label","p-click",4,"ngIf"],["p-type","default",1,"button-show-details","po-sm-6",3,"p-label","p-click"],[3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"po-page-dynamic-search",0),d.NdJ("p-quick-search",function(e){return t.onQuickSearch(e)})("p-advanced-search",function(e){return t.onAdvancedSearch(e)})("p-change-disclaimers",function(e){return t.onChangeDisclaimers(e)}),d.YNc(1,ue,13,9,"div",1),d.YNc(2,me,1,0,"app-show-more-button",2),d.TgZ(3,"po-table",3),d.NdJ("p-show-more",function(){return t.showMore()}),d.qZA(),d.qZA()),2&e&&(d.Q6J("p-filters",t.filters)("p-literals",t.literals),d.xp6(1),d.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByFunction),d.xp6(1),d.Q6J("ngIf",t.response&&t.response.hasNext),d.xp6(1),d.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-columns",t.columns)("p-items",t.items)("p-loading",t.loading)("p-show-more-disabled",!t.response||!t.response.hasNext)("p-actions",t.actions))},directives:[l.O6,a.Fj,n.sg,n.O5,r._w3,re.c,r.bOz,le.N],pipes:[ce.r],styles:[".avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]     .po-page, [_nghost-%COMP%]     .po-page-content{height:auto!important}[_nghost-%COMP%]     #expansion-card-header{position:relative}[_nghost-%COMP%]     #expansion-card-header .icon-collapsed{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:0}[_nghost-%COMP%]     #expansion-card-header .mr-card-header{float:unset}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee{align-items:center;display:flex;padding-right:15px}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee .cut-title{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee .name{font-size:15px}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .po-checkbox .po-checkbox-label{font-weight:bolder!important}[_nghost-%COMP%]     #expansion-card-body .item-body .value{text-align:right;font-weight:bold}[_nghost-%COMP%]     .po-page-content{padding:0!important}@media screen and (min-width: 491px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{float:none;margin-top:unset}}@media screen and (min-width: 961px){[_nghost-%COMP%]     div.po-page{margin-left:0!important;height:auto!important}[_nghost-%COMP%]     div.po-page, [_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-header, [_nghost-%COMP%]     div.po-page div.po-page-content{padding-left:8px!important;padding-right:8px!important}}.border-top[_ngcontent-%COMP%]{border-top:1px solid #eceeee}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #eceeee;padding-bottom:.5rem;padding-top:.5rem}"]}),e})(),fe=(()=>{class e{constructor(e){this.service=e,this.loading=!0,this.currentFilter={},this.showPageHader=!0}ngOnInit(){this.getAll()}getAll(e){return(0,v.mG)(this,void 0,void 0,function*(){this.loading=!0;const t=yield this.service.getAll(V.N.loggedUser,e);this.response&&e&&e.page>1&&(t.items=[...this.response.items,...t.items]),this.response=t,this.currentFilter=null!=e?e:{},this.loading=!1})}onGetAllRequested(e){this.getAll(e)}occurrenceChange(e){const t=Object.assign({},this.currentFilter);t.ocurrency=e,t.page=1,this.getAll(t)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(I))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-management-of-delays-and-absences"]],inputs:{showPageHader:"showPageHader"},decls:2,vars:4,consts:[[3,"currentFilter","occurrenceChange"],[3,"response","loading","currentFilter","onGetAllRequested"]],template:function(e,t){1&e&&(d.TgZ(0,"app-dashboard",0),d.NdJ("occurrenceChange",function(e){return t.occurrenceChange(e)}),d.qZA(),d.TgZ(1,"app-occurrence-viewer",1),d.NdJ("onGetAllRequested",function(e){return t.onGetAllRequested(e)}),d.qZA()),2&e&&(d.Q6J("currentFilter",t.currentFilter),d.xp6(1),d.Q6J("response",t.response)("loading",t.loading)("currentFilter",t.currentFilter))},directives:[ie,ge],styles:[""]}),e})();var be=i(93444),ve=i(11524),ye=i(44852),we=i(84259);const xe=["divSwipeButton"];function Ze(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",14),d.TgZ(1,"span",15),d.NdJ("click",function(){return d.CHM(e),d.oxw().openNotifications()}),d.TgZ(2,"a"),d._uU(3),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(3),d.hij("",e.response.qtyPendingOnCall," ")}}function Ce(e,t){if(1&e&&(d.TgZ(0,"div",16),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.response.qtyOnCall," ")}}function Me(e,t){if(1&e&&(d.TgZ(0,"div",14),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.getHoursByMilliseconds(e.response.qtyHourOnCall)," ")}}function Ae(e,t){if(1&e&&(d.TgZ(0,"div",14),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.response.qtyOnCall," ")}}function Se(e,t){if(1&e&&(d.TgZ(0,"div",17),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.getHoursByMilliseconds(e.response.qtyHourOnCall)," ")}}function Te(e,t){if(1&e&&(d.TgZ(0,"div",17),d.TgZ(1,"span",18),d._uU(2),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(2),d.hij(" ",e.response.qtyPendingOnCall," ")}}let Oe=(()=>{class e{constructor(e,t,i){this.service=e,this.appTranslateService=t,this.navigationUtil=i,this._currentFilter={},this.selectedVacationPosition=0,this.informationsCard=[],this.messagePending="Total de horas",this.pathNotifications="request/notifications/oncall"}set currentFilter(e){e=Object.assign({},e),this.filtersChanged(e)&&(e.page=1,this.getAll(e)),this._currentFilter=e}get currentFilter(){return this._currentFilter}ngOnInit(){Promise.all([this.getAll()]).then(()=>{this.initializeMobile(),this.createObjectCards(),this.initSwipe()})}getAll(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=yield this.service.getAll(V.N.loggedUser,e);this.response=t})}initializeMobile(){return(0,v.mG)(this,void 0,void 0,function*(){this.cardMobile={title:(yield this.translateString("l-qty-request-on-calls")).toString(),value:this.response.qtyOnCall}})}getHoursByMilliseconds(e){return j.Em.getHoursByMilliseconds(e,!1)}createObjectCards(){return(0,v.mG)(this,void 0,void 0,function*(){this.informationsCard.push({title:(yield this.translateString("l-qty-request-on-calls")).toString(),value:this.response.qtyOnCall}),this.informationsCard.push({title:(yield this.translateString("l-total-hours")).toString(),value:this.response.qtyHourOnCall}),this.informationsCard.push({title:(yield this.translateString("l-pending-request")).toString(),value:this.response.qtyPendingOnCall})})}translateString(e){return this.appTranslateService.getI18n(e)}isActivePointer(e){return e===this.selectedVacationPosition}openNotifications(){this.navigationUtil.doNavigation(this.pathNotifications)}filtersChanged(e){return JSON.stringify(e)!==JSON.stringify(this.currentFilter)}initSwipe(){if(this.swipeButton&&this.swipeButton.nativeElement){const e=new ve(this.swipeButton.nativeElement);e.get("swipe").set({direction:ve.DIRECTION_ALL}),e.on("swipe",e=>this.onSwipe(e))}}onSwipe(e){const t=Math.abs(e.deltaX)>40?e.deltaX>0?"right":"left":"";"right"===t?this.selectedVacationPosition>0&&(this.selectedVacationPosition--,this.cardMobile=this.informationsCard[this.selectedVacationPosition]):"left"===t&&this.selectedVacationPosition<this.informationsCard.length-1&&(this.selectedVacationPosition++,this.cardMobile=this.informationsCard[this.selectedVacationPosition])}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(we.v),d.Y36(oe.g),d.Y36(ye._))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){if(1&e&&d.Gf(xe,7),2&e){let e;d.iGM(e=d.CRH())&&(t.swipeButton=e.first)}},inputs:{currentFilter:"currentFilter"},decls:52,vars:24,consts:[[1,"scrolling-wrapper","po-visible-sm-12","po-visible-md-12"],[1,"cards-block"],["card-body","",1,"mr-card-body","po-sm-12"],[1,"po-row","row-title"],[1,"description-small"],[1,"po-row","row-description"],[1,"po-sm-6","center-text"],["class","hours absence",4,"ngIf"],["class","hours qty-oncall-text",4,"ngIf"],[1,"po-visible-lg-4","po-visible-xl-4"],["card-header","",1,"mr-card-header","po-sm-12"],[1,"description"],["class","hours delay",4,"ngIf"],[1,"po-visible-lg-4","po-visible-xl-4","card-pending",3,"click"],[1,"hours","absence"],[1,"link",3,"click"],[1,"hours","qty-oncall-text"],[1,"hours","delay"],[1,"link"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"app-card",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"div"),d.TgZ(5,"span",4),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",5),d.TgZ(9,"div",6),d.YNc(10,Ze,4,1,"div",7),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"app-card",1),d.TgZ(12,"div",2),d.TgZ(13,"div",3),d.TgZ(14,"div"),d.TgZ(15,"span",4),d._uU(16),d.ALo(17,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",5),d.TgZ(19,"div",6),d.YNc(20,Ce,2,1,"div",8),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"app-card",1),d.TgZ(22,"div",2),d.TgZ(23,"div",3),d.TgZ(24,"div"),d.TgZ(25,"span",4),d._uU(26),d.ALo(27,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"div",5),d.TgZ(29,"div",6),d.YNc(30,Me,2,1,"div",7),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(31,"app-card",9),d.TgZ(32,"div",10),d.TgZ(33,"span",11),d._uU(34),d.ALo(35,"translate"),d.qZA(),d.qZA(),d.TgZ(36,"div",2),d.YNc(37,Ae,2,1,"div",7),d.qZA(),d.qZA(),d.TgZ(38,"app-card",9),d.TgZ(39,"div",10),d.TgZ(40,"span",11),d._uU(41),d.ALo(42,"translate"),d.qZA(),d.qZA(),d.TgZ(43,"div",2),d.YNc(44,Se,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(45,"app-card",13),d.NdJ("click",function(){return t.openNotifications()}),d.TgZ(46,"div",10),d.TgZ(47,"span",11),d._uU(48),d.ALo(49,"translate"),d.qZA(),d.qZA(),d.TgZ(50,"div",2),d.YNc(51,Te,3,1,"div",12),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Oqu(d.lcZ(7,12,"l-pending-request")),d.xp6(4),d.Q6J("ngIf",t.response&&null!=t.response.qtyHourOnCall),d.xp6(6),d.Oqu(d.lcZ(17,14,"l-qty-request-on-calls")),d.xp6(4),d.Q6J("ngIf",t.response&&null!=t.response.qtyOnCall),d.xp6(6),d.Oqu(d.lcZ(27,16,"l-total-hours")),d.xp6(4),d.Q6J("ngIf",t.response&&null!=t.response.qtyHourOnCall),d.xp6(4),d.Oqu(d.lcZ(35,18,"l-qty-request-on-calls")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyOnCall),d.xp6(4),d.Oqu(d.lcZ(42,20,"l-hour-request-on-calls")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyHourOnCall),d.xp6(4),d.Oqu(d.lcZ(49,22,"l-pending-request")),d.xp6(3),d.Q6J("ngIf",t.response&&null!=t.response.qtyPendingOnCall))},directives:[W.A,n.O5],pipes:[o.X$],styles:['.mr-card-body[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{font-weight:bold;font-family:"NunitoSans-Bold"}.hours[_ngcontent-%COMP%]{font-size:160%}.hours.delay[_ngcontent-%COMP%]{color:rgba(190,39,12,.973)}@media (min-width: 961px){.hours[_ngcontent-%COMP%]{font-weight:normal;font-size:32px;font-family:"NunitoSans-ExtraLight"}.hours.absence[_ngcontent-%COMP%], .hours.delay[_ngcontent-%COMP%]{color:inherit}}.description[_ngcontent-%COMP%]{font-size:90%}.link[_ngcontent-%COMP%]{cursor:pointer;color:#0c9abe!important}.mr-card-header[_ngcontent-%COMP%]{padding:10px}.description-small[_ngcontent-%COMP%]{font-size:10px;font-weight:bold;line-height:1.1em;white-space:normal;display:block;text-align:left}.cards-block[_ngcontent-%COMP%]{display:inline-block;width:45%;margin-right:10px}.scrolling-wrapper[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;white-space:nowrap;height:125px;padding:0!important;margin-left:10px}.scrolling-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:inline-block}.row-title[_ngcontent-%COMP%]{padding:10px 5px}.row-description[_ngcontent-%COMP%]{margin-top:10px}@media screen and (max-width: 360px){.qty-oncall-text[_ngcontent-%COMP%]{position:relative;bottom:10px}}.mobile-pointer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.pointer[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background-color:#9da7a9;margin-left:10px}.activePointer[_ngcontent-%COMP%]{background-color:#0c9abe}.center-text[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px}.card-pending[_ngcontent-%COMP%]{cursor:pointer!important}[_nghost-%COMP%]     .card-well{height:118px;padding:0!important}@media (min-width: 961px){[_nghost-%COMP%]   .occurrence-selected[_ngcontent-%COMP%]     .card-well{background:#ceeaf2}[_nghost-%COMP%]   .occurrence-selected[_ngcontent-%COMP%]     .card-well .hours{font-weight:bold;font-family:"NunitoSans-Bold"}}']}),e})();var qe=i(2965);let Pe=(()=>{class e{constructor(e){this.service=e,this.loading=!0,this.currentFilter={}}ngOnInit(){this.getAll()}getAll(e){return(0,v.mG)(this,void 0,void 0,function*(){this.loading=!0;const t=yield this.service.getAll(V.N.loggedUser,e,!0);this.response&&e&&e.page>1&&(t.items=[...this.response.items,...t.items]),this.response=t,this.currentFilter=null!=e?e:{},this.loading=!1})}onGetAllRequested(e){this.getAll(e)}onCreateRequisition(e){this.service.createRequisitionsResponse(V.N.loggedUser,e.line,e.approve,e.message,e.reprovedReason).then(()=>{e.getAll&&(this.getAll(e.filter),this.dashboard.getAll(e.filter))})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(be.w))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-management-request-on-call"]],viewQuery:function(e,t){if(1&e&&d.Gf(Oe,5),2&e){let e;d.iGM(e=d.CRH())&&(t.dashboard=e.first)}},decls:2,vars:5,consts:[[3,"currentFilter"],[3,"response","loading","currentFilter","viewApprove","onGetAllRequested","onCreateRequisition"]],template:function(e,t){1&e&&(d._UZ(0,"app-dashboard",0),d.TgZ(1,"app-occurrence-viewer",1),d.NdJ("onGetAllRequested",function(e){return t.onGetAllRequested(e)})("onCreateRequisition",function(e){return t.onCreateRequisition(e)}),d.qZA()),2&e&&(d.Q6J("currentFilter",t.currentFilter),d.xp6(1),d.Q6J("response",t.response)("loading",t.loading)("currentFilter",t.currentFilter)("viewApprove",!1))},directives:[Oe,qe.J],styles:[""]}),e})();var Ie=i(5156),_e=i(81059),ke=i(40469),De=i(79765),Le=i(69412);let Ne=(()=>{class e{constructor(e){this.shiftsUpdateService=e,this.lookupOpen=new De.xQ,this.lookupOpenObservable=this.lookupOpen.asObservable(),this.emitModel=new De.xQ,this.emitModelObservable=this.emitModel.asObservable()}getFilteredItems(e){return this.lookupOpen.next(),(0,Le.D)(this.shiftsUpdateService.searchShifts(e.page,e.pageSize,e.filter))}getObjectByValue(e=""){let t,i=e.replace(/\d+ - /,"");return(0,Le.D)(this.shiftsUpdateService.searchShifts(1,5,i).then(e=>(t=e.items[0],this.emitModel.next(t),t)))}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(y))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Fe{constructor(){this.shiftId=0,this.scheduleLabel=""}}var Ue=i(96054),Je=i(84479),Ye=i(36812);const Ee=["shiftsUpdateForm"];function He(e,t){if(1&e&&(d.TgZ(0,"div",22),d.TgZ(1,"div",23),d._uU(2),d.ALo(3,"titleCase"),d.qZA(),d.TgZ(4,"div",24),d._uU(5),d.ALo(6,"titleCase"),d.qZA(),d.qZA()),2&e){const e=d.oxw(2);d.xp6(2),d.Oqu(d.lcZ(3,2,null==e.employeeData?null:e.employeeData.name)),d.xp6(3),d.Oqu(d.lcZ(6,4,null==e.employeeData?null:e.employeeData.roleDescription))}}function Qe(e,t){if(1&e&&(d.TgZ(0,"div",25),d.TgZ(1,"div",23),d.TgZ(2,"strong"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA(),d.TgZ(5,"div",24),d._uU(6),d.ALo(7,"titleCase"),d.qZA(),d.qZA()),2&e){const e=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,2,"l-colaborator")),d.xp6(3),d.Oqu(d.lcZ(7,4,null==e.employeeData?null:e.employeeData.name))}}function Be(e,t){if(1&e&&(d.TgZ(0,"div",25),d.TgZ(1,"div",23),d.TgZ(2,"strong"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA(),d.TgZ(5,"div",24),d._uU(6),d.ALo(7,"titleCase"),d.qZA(),d.qZA()),2&e){const e=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,2,"l-role")),d.xp6(3),d.Oqu(d.lcZ(7,4,null==e.employeeData?null:e.employeeData.roleDescription))}}function Ge(e,t){if(1&e&&(d.TgZ(0,"app-card",17),d.TgZ(1,"div",18),d.TgZ(2,"div"),d._UZ(3,"div",19),d.qZA(),d.YNc(4,He,7,6,"div",20),d.YNc(5,Qe,8,6,"div",21),d.YNc(6,Be,8,6,"div",21),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(3),d.Udp("background-image",e.imageAvatar),d.xp6(1),d.Q6J("ngIf",e.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!e.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!e.viewIsMobile)}}function ze(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"po-lookup",27),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().currentShift.shiftLabel=t})("p-selected",function(){return d.CHM(e),d.oxw().lookupSelectionChanged()}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,5,"l-shifts-shift")),d.Q6J("ngModel",e.currentShift.shiftLabel)("p-columns",e.lookupColumns)("p-literals",e.customLiterals)("p-filter-service",e.lookupService)}}function $e(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",28),d.TgZ(1,"po-lookup",27),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().currentShift.shiftLabel=t})("p-selected",function(){return d.CHM(e),d.oxw().lookupSelectionChanged()}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,5,"l-shifts-shift")),d.Q6J("ngModel",e.currentShift.shiftLabel)("p-columns",e.lookupColumns)("p-literals",e.customLiterals)("p-filter-service",e.lookupService)}}function Ve(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",29),d.TgZ(1,"po-select",30),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().currentShift.scheduleId=t}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,4,"l-shifts-work-schedule")),d.Q6J("p-required",!0)("p-options",e.scheduleList)("ngModel",e.currentShift.scheduleId)}}function Re(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",10),d.TgZ(1,"po-select",30),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().currentShift.scheduleId=t}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,4,"l-shifts-work-schedule")),d.Q6J("p-required",!0)("p-options",e.scheduleList)("ngModel",e.currentShift.scheduleId)}}function je(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",29),d.TgZ(1,"po-datepicker",31),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().editedDate=t}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,2,"l-shifts-initDate")),d.Q6J("ngModel",e.editedDate)}}function We(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",10),d.TgZ(1,"po-datepicker",31),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().editedDate=t}),d.ALo(2,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.s9C("p-label",d.lcZ(2,2,"l-shifts-initDate")),d.Q6J("ngModel",e.editedDate)}}function Xe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"tr",32),d.TgZ(1,"td",33),d._uU(2),d.qZA(),d.TgZ(3,"td",33),d.TgZ(4,"po-select",34),d.NdJ("ngModelChange",function(t){return d.CHM(e).$implicit.currentIntervalId=t})("p-change",function(){return d.CHM(e),d.oxw().intervalSelectionChanged()}),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(2),d.Oqu(null==e?null:e.text),d.xp6(2),d.MGl("name","intervalId_",e.id,""),d.MGl("id","intervalId_",e.id,""),d.Q6J("ngModel",e.currentIntervalId)("p-options",e.options)}}function Ke(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"div",36),d.TgZ(2,"po-button",37),d.NdJ("p-click",function(){return d.CHM(e),d.oxw().back()}),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"po-button",38),d.NdJ("p-click",function(){return d.CHM(e),d.oxw().send()}),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.qZA()}if(2&e){d.oxw();const e=d.MAs(5);d.xp6(2),d.s9C("p-label",d.lcZ(3,3,"l-cancel")),d.xp6(2),d.s9C("p-label",d.lcZ(5,5,"l-save")),d.Q6J("p-disabled",!e.form.valid)}}function et(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"po-button",39),d.NdJ("p-click",function(){return d.CHM(e),d.oxw().send()}),d.ALo(2,"translate"),d.qZA(),d.TgZ(3,"po-button",40),d.NdJ("p-click",function(){return d.CHM(e),d.oxw().back()}),d.ALo(4,"translate"),d.qZA(),d.qZA()}if(2&e){d.oxw();const e=d.MAs(5);d.xp6(1),d.s9C("p-label",d.lcZ(2,3,"l-save")),d.Q6J("p-disabled",!e.form.valid),d.xp6(2),d.s9C("p-label",d.lcZ(4,5,"l-cancel"))}}let tt=(()=>{class e extends _e.R{constructor(e,t,i,n,a,s){super(),this.shiftsUpdateService=e,this.notificationService=t,this.translateService=i,this.windowUtilService=n,this.lookupService=a,this.menuApplicationService=s,this.loading=!0,this.page=1,this.pageSize=5,this.currentShift=new Fe,this.scheduleList=[],this.shiftList=[],this.shiftChangedDate=!1,this.shiftChangedWorkSchedule=!1,this.closeUpdate=new d.vpe,this.showToast=new d.vpe}ngOnInit(){super.ngOnInit(),this.setModalSearchPlaceholder(),this.loading=!1}loadCurrentShift(e,t,i){return(0,v.mG)(this,void 0,void 0,function*(){this.employeeData=e,this.employeeId=this.employeeData.id,this.imageAvatar=t,this.originalData=i,this.selectedShiftId=i.shift.id,this.formController.value.shiftId=i.shift.id,this.loadData(),this.loadShiftDependencies(i.shift.id),this.initLookup(),this.startSubscriptions()})}loadData(){this.currentShift={shiftId:Number(this.originalData.shift.id),shiftLabel:`${this.originalData.shift.id} - ${this.originalData.shift.label}`,scheduleLabel:`${this.originalData.schedule.id} - ${this.originalData.schedule.label}`,initDate:new Date(this.originalData.initDate),scheduleId:Number(this.originalData.schedule.id),workdays:[]},this.setShiftvalue(this.currentShift),Array.from(this.originalData.workdays).forEach(e=>{this.currentShift.workdays.push({intervalId:Number(e.currentIntervalId),workdayId:Number(e.id)})})}setWorkDaysList(e){const t=[];e.forEach(e=>{const i={id:e.id,text:"",options:[],currentIntervalId:e.currentIntervalId};i.text=`${e.id} - ${e.label}`,e.interval.forEach(e=>{i.options.push({value:e.id,label:`${e.id} - ${e.label}`})}),t.push(i)}),this.currentWorkdays=t}getWorkdayRequestList(e){return(0,v.mG)(this,void 0,void 0,function*(){return{workdays:(yield this.shiftsUpdateService.getWorkdayIds(e)).map(e=>({workdayId:e}))}})}getIntervals(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=yield this.getWorkdayRequestList(e),i=yield this.shiftsUpdateService.getIntervals(this.employeeId,e,t);this.setWorkDaysList(i.items)})}lookupSelectionChanged(){return(0,v.mG)(this,void 0,void 0,function*(){this.menuApplicationService.showMenu();const{form:e}=this.formController,t="number"!=typeof e.value.shiftId?this.originalData.shift.id:e.value.shiftId;this.shiftChangedDate="object"!=typeof e.value.shiftId&&Number(this.selectedShiftId)!==Number(this.originalData.shift.id),this.editedDate=j.Em.returnDateStringPODatepicker(new Date),this.currentShift.shiftId=t,yield this.loadShiftDependencies(t),Number(t)===Number(this.originalData.shift.id)?(this.currentShift.scheduleId=Number(this.originalData.schedule.id),this.currentShift.scheduleLabel=`${this.originalData.schedule.id} - ${this.originalData.schedule.label}`):(this.currentShift.scheduleId=null,this.currentShift.scheduleLabel="")})}loadShiftDependencies(e){return(0,v.mG)(this,void 0,void 0,function*(){yield this.getSchedules(e),yield this.getIntervals(e)})}intervalSelectionChanged(){this.shiftChangedDate=!0}searchShifts(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=new Array,i=yield this.shiftsUpdateService.searchShifts(this.page,this.pageSize,e);i&&Array.from(i.items).forEach((e,i)=>{t.push({value:e.id,label:`${e.id} - ${e.label}`})}),this.shiftList=t})}getSchedules(e){return(0,v.mG)(this,void 0,void 0,function*(){const t=new Array,i=yield this.shiftsUpdateService.getSchedules(void 0,void 0,e);i&&Array.from(i.items).forEach(e=>{t.push({value:Number(e.id),label:`${e.id} - ${e.label}`})}),this.scheduleList=t})}fieldFormat(e){return`${e.id} - ${e.label}`}send(){this.output={shiftId:this.currentShift.shiftId,scheduleId:this.currentShift.scheduleId,initDate:new Date(this.editedDate),workdays:this.prepareWorkDays(this.formController.form.value)},this.shiftsUpdateService.updateShift(this.employeeId,this.output).then(()=>{this.formController.resetForm(),this.back(!0)}).catch(e=>this.translateService.getI18n("l-shifts-update-error").then(e=>{this.notificationService.showNotification(e,r.ik9.Error)}))}back(e=!1){this.formController.resetForm(),this.shiftChangedDate=!1,this.shiftChangedWorkSchedule=!1,e&&this.translateService.getI18n("l-shifts-update-success").then(e=>{this.notificationService.showNotification(e,r.ik9.Success)}),this.scheduleList=[],this.employeeId?this.closeUpdate.emit():this.windowUtilService.back()}setShiftvalue(e){this.currentShift.shiftLabel=e.shiftLabel,this.lookup.selectValue({id:e.shiftLabel}),this.lookup.setViewValue(e.shiftLabel,{})}initLookup(){this.lookupColumns=[{property:"id",label:"id",fieldLabel:!0,width:"100px"},{property:"label",label:"l-shifts-shift",fieldLabel:!0,width:"auto"}],this.lookupColumns.forEach(e=>{this.translateService.getI18n(e.label).then(t=>{e.label=t})})}startSubscriptions(){this.lookupService.lookupOpenObservable.subscribe(()=>{this.menuApplicationService.hideMenu()}),this.lookupService.emitModelObservable.subscribe(e=>{this.currentShift.shiftLabel=e}),this.formController.form.get("shiftId")&&this.formController.form.get("shiftId").valueChanges.subscribe(e=>{e&&(this.selectedShiftId=e)})}prepareWorkDays(e){const t=[];return Object.keys(e).filter(e=>e.includes("intervalId")).forEach(i=>{const n=e[i],a=i.split("_")[1];t.push({workdayId:Number(a),intervalId:Number(n)})}),t}setModalSearchPlaceholder(){return(0,v.mG)(this,void 0,void 0,function*(){this.customLiterals={modalPlaceholder:yield this.translateService.getI18n("l-search-for-shift")}})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(y),d.Y36(Ue.g),d.Y36(oe.g),d.Y36(Je.g),d.Y36(Ne),d.Y36(ke.Kv))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-team-shifts-update"]],viewQuery:function(e,t){if(1&e&&(d.Gf(Ee,5),d.Gf(r.za1,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.formController=e.first),d.iGM(e=d.CRH())&&(t.lookup=e.first)}},outputs:{closeUpdate:"closeUpdate",showToast:"showToast"},features:[d.qOj],decls:28,vars:17,consts:[["pageTitle","l-shifts-change-shift",3,"backIsVisible","backFunction"],[1,"po-row","po-mb-2"],["class","po-col-12 card-employee",4,"ngIf"],["shiftsUpdateForm","ngForm"],[1,"po-row","header-divider","po-pt-2","panel-body","po-xs-hidden","po-sm-hidden","po-md-12","po-lg-12","po-xl-12"],[1,"center-block","po-xs-12","po-sm-12","po-md-8","po-lg-6","po-xl-6"],["class","po-sm-12 po-md-12 po-lg-12 lookup-container",4,"ngIf"],["class","po-12 lookup-container",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-12",4,"ngIf"],["class","po-12",4,"ngIf"],[1,"po-12"],["ng-init","current = 0",1,"workdays-panel","table"],[1,"column-header"],[1,"custom-tr"],[1,"shifts-label-column"],["ngFor","",3,"ngForOf"],["class","po-row",4,"ngIf"],[1,"po-col-12","card-employee"],["card-header","",1,"shifts-header","mr-card-header"],[1,"avatar","avatar-medium","avatar-align"],["class","card-header-item mobile",4,"ngIf"],["class","card-header-item",4,"ngIf"],[1,"card-header-item","mobile"],[1,"title"],[1,"office"],[1,"card-header-item"],[1,"po-sm-12","po-md-12","po-lg-12","lookup-container"],["p-field-value","id","p-field-label","label","name","shiftId","id","shiftId",3,"ngModel","p-columns","p-label","p-literals","p-filter-service","ngModelChange","p-selected"],[1,"po-12","lookup-container"],[1,"po-sm-12","po-md-12","po-lg-12"],["id","scheduleId","name","scheduleId",3,"p-required","p-options","ngModel","p-label","ngModelChange"],["name","initDatePicker","id","initDate","name","initDate","p-clean","true","p-required","true",3,"p-label","ngModel","ngModelChange"],[1,"custom-tr","hover-design"],[1,"column"],["p-required","true","ngDefaultControl","",3,"name","id","ngModel","p-options","ngModelChange","p-change"],[1,"po-row"],[1,"center-block","text-right","po-xs-12","po-sm-12","po-md-8","po-lg-6","po-xl-6"],[1,"po-mr-2",3,"p-label","p-click"],["p-type","primary","p-primary","true",3,"p-label","p-disabled","p-click"],["p-primary","true","p-type","primary",1,"mobile-btn","po-sm-12","po-md-12","po-lg-12","po-xl-12","block",3,"p-label","p-disabled","p-click"],["p-primary","true",1,"mobile-btn","po-sm-12","po-md-12","po-lg-12","po-xl-12","block",3,"p-label","p-click"]],template:function(e,t){1&e&&(d.TgZ(0,"app-page-header",0),d.NdJ("backFunction",function(){return t.back()}),d.qZA(),d.TgZ(1,"div",1),d.YNc(2,Ge,7,5,"app-card",2),d.qZA(),d.TgZ(3,"div"),d.TgZ(4,"form",null,3),d.TgZ(6,"div",4),d.TgZ(7,"div",5),d.YNc(8,ze,3,7,"div",6),d.YNc(9,$e,3,7,"div",7),d.YNc(10,Ve,3,6,"div",8),d.YNc(11,Re,3,6,"div",9),d.YNc(12,je,3,4,"div",8),d.YNc(13,We,3,4,"div",9),d.TgZ(14,"div",10),d.TgZ(15,"table",11),d.TgZ(16,"thead",12),d.TgZ(17,"tr",13),d.TgZ(18,"th",14),d._uU(19),d.ALo(20,"translate"),d.qZA(),d.TgZ(21,"th",14),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"tbody"),d.YNc(25,Xe,5,5,"ng-template",15),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(26,Ke,6,7,"div",16),d.YNc(27,et,5,7,"div",16),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Q6J("backIsVisible",!0),d.xp6(2),d.Q6J("ngIf",t.employeeId),d.xp6(6),d.Q6J("ngIf",t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!t.viewIsMobile),d.xp6(6),d.Oqu(d.lcZ(20,13,"l-shifts-workday")),d.xp6(3),d.Oqu(d.lcZ(23,15,"l-shifts-interval")),d.xp6(3),d.Q6J("ngForOf",t.currentWorkdays),d.xp6(1),d.Q6J("ngIf",!t.viewIsMobile),d.xp6(1),d.Q6J("ngIf",t.viewIsMobile))},directives:[Ye.q,n.O5,a._Y,a.JL,a.F,n.sg,W.A,r.za1,a.JJ,a.On,r.C9q,r.GWy,a.Fj,r.bOz],pipes:[o.X$,ce.r],styles:["[_nghost-%COMP%]     .card-employee{flex:1;margin-top:10px}[_nghost-%COMP%]     .card-employee .shifts-header{display:flex;align-items:center;justify-content:flex-start}[_nghost-%COMP%]     .card-employee .shifts-header .card-header-item{margin:1em 2em 1em .75em}[_nghost-%COMP%]     .card-employee .shifts-header .card-header-item .title{font-size:10pt;font-weight:bold;color:#666}[_nghost-%COMP%]     .card-employee .shifts-header .card-header-item.mobile .title{font-size:12pt;font-weight:bold;color:#666}[_nghost-%COMP%]     .card-employee .shifts-header .card-header-item.mobile .office{font-size:10pt;color:#888}.center-block[_ngcontent-%COMP%]{margin:0 auto}.workdays-panel[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%}.workdays-panel[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:0}.po-select-item-selected[_ngcontent-%COMP%] > .po-select-item[_ngcontent-%COMP%]{background-color:#666}.shifts-label-column[_ngcontent-%COMP%]{font-size:12px;font-weight:bold;line-height:2;color:#0c9abe;border-bottom:2px solid #ceebf2!important;background-color:#fff;padding:0;margin:0}.shifts-label-title[_ngcontent-%COMP%]{color:#0c9abe}.custom-tr.hover-design[_ngcontent-%COMP%]:hover{background-color:#fafbfb}.custom-tr.hover-design[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #649b9b}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle!important;font-size:14px;line-height:1;text-align:left;height:60px!important;word-wrap:break-word}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}.custom-tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-align:left;white-space:nowrap;padding:10px 10px 0}.custom-tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:0}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:0 2px 8px #e3e6f1!important;border-radius:6px;position:relative;background:#ffffff;display:flow-root;padding:0;margin-bottom:16px}.mat-expansion-panel[_ngcontent-%COMP%]   .right-align[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:1.5em}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{margin-bottom:-20px}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   .right-align[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{top:1.75em}.next-periods[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe}.next-periods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.next-periods[_ngcontent-%COMP%]   .spinner-img[_ngcontent-%COMP%]{width:2em;height:auto}.next-periods.mobile[_ngcontent-%COMP%]{margin-bottom:calc(2em + 60px)}.dropdown-shifts-header[_ngcontent-%COMP%]{font-weight:bold;font-size:16px;color:#2b3639}.shifts-content[_ngcontent-%COMP%]{padding:0 24px}.shifts-value[_ngcontent-%COMP%]{float:right;color:#2b3639;font-weight:bold}.shifts-label[_ngcontent-%COMP%]{color:#4a5c60}[_nghost-%COMP%]     po-button.change-shift-button-mobile{display:flex;padding:1em;height:5.5em}[_nghost-%COMP%]     po-button.change-shift-button-mobile button{height:4em}[_nghost-%COMP%]     po-button.change-shift-button{float:right;margin-bottom:1em}[_nghost-%COMP%]     po-button.change-shift-button button{padding:0 2em}.change-shift-mobile[_ngcontent-%COMP%]{position:fixed;background-color:#fff;bottom:60px;width:calc(100% - 2em)}.lookup-container[_ngcontent-%COMP%]{margin-bottom:.5em}.form-desc[_ngcontent-%COMP%]{color:#0c9abe;margin-bottom:.5em}[_nghost-%COMP%]     po-button.mobile-btn{height:4.5em}[_nghost-%COMP%]     po-button.mobile-btn button{height:4em}[_nghost-%COMP%]     po-button.mobile-btn:first-child{margin-top:3em}[_nghost-%COMP%]     po-button.mobile-btn:last-child button{border:0}"]}),e})();var it=i(88002),nt=i(20307),at=i(16738);let st=(()=>{class e{transform(e,t){return at(e.split("T")[0],"YYYY-MM-DD",!0).isValid()?j.Em.momentFormat(e,t):"invalid date"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Yjl({name:"formatDate",type:e,pure:!0}),e})(),ot=(()=>{class e{isIdLabel(e){return!!e.label}transform(e,t){return this.isIdLabel(e)?"labelOnly"===t?e.label:`${e.id} - ${e.label}`:"invalid GenericIdLabel"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Yjl({name:"idLabel",type:e,pure:!0}),e})();function rt(e,t){if(1&e&&d._UZ(0,"app-card-employee",6),2&e){const e=d.oxw(2);d.Q6J("image",e.imageAvatar)("name",null==e.employeeData?null:e.employeeData.name)("role",null==e.employeeData?null:e.employeeData.roleDescription)("status",null==e.employeeData?null:e.employeeData.employeeStatus)}}function lt(e,t){1&e&&d._UZ(0,"span",24)}function ct(e,t){1&e&&d._UZ(0,"span",25)}function pt(e,t){if(1&e&&(d.TgZ(0,"mat-expansion-panel",12,13),d.TgZ(2,"mat-expansion-panel-header",14),d.TgZ(3,"mat-panel-title"),d.TgZ(4,"div"),d.TgZ(5,"span",15),d._uU(6),d.ALo(7,"formatDate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"mat-panel-description",16),d.TgZ(9,"div",17),d.YNc(10,lt,1,0,"span",18),d.YNc(11,ct,1,0,"span",19),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"span"),d._UZ(13,"hr",20),d.TgZ(14,"div",21),d.TgZ(15,"span",22),d._uU(16),d.ALo(17,"translate"),d.qZA(),d.TgZ(18,"span",23),d._uU(19),d.ALo(20,"idLabel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"span"),d._UZ(22,"hr",20),d.TgZ(23,"div",21),d.TgZ(24,"span",22),d._uU(25),d.ALo(26,"translate"),d.qZA(),d.TgZ(27,"span",23),d._uU(28),d.ALo(29,"idLabel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"span"),d._UZ(31,"hr",20),d.TgZ(32,"div",21),d.TgZ(33,"span",22),d._uU(34),d.ALo(35,"translate"),d.qZA(),d.TgZ(36,"span",23),d._uU(37),d.ALo(38,"formatDate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"span"),d._UZ(40,"hr",20),d.TgZ(41,"div",21),d.TgZ(42,"span",22),d._uU(43),d.ALo(44,"translate"),d.qZA(),d.TgZ(45,"span",23),d._uU(46),d.ALo(47,"formatDate"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.MAs(1);d.xp6(6),d.Oqu(d.xi3(7,11,null==e?null:e.assignDate,"dayMonth")),d.xp6(4),d.Q6J("ngIf",i.expanded),d.xp6(1),d.Q6J("ngIf",!i.expanded),d.xp6(5),d.Oqu(d.lcZ(17,14,"l-shifts-shift")),d.xp6(3),d.Oqu(d.lcZ(20,16,null==e?null:e.shift)),d.xp6(6),d.Oqu(d.lcZ(26,18,"l-shifts-schedule")),d.xp6(3),d.Oqu(d.lcZ(29,20,null==e?null:e.schedule)),d.xp6(6),d.Oqu(d.lcZ(35,22,"l-shifts-initDate")),d.xp6(3),d.Oqu(d.lcZ(38,24,null==e?null:e.initDate)),d.xp6(6),d.Oqu(d.lcZ(44,26,"l-shifts-endDate")),d.xp6(3),d.Oqu(d.lcZ(47,28,null==e?null:e.endDate))}}function dt(e,t){1&e&&d._UZ(0,"img",28)}function ht(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.NdJ("click",function(){return d.CHM(e),d.oxw(3).viewMore()}),d.YNc(1,dt,1,0,"img",27),d.TgZ(2,"a"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(3);d.xp6(1),d.Q6J("ngIf",e.loading),d.xp6(2),d.hij("",d.lcZ(4,2,"l-load-more")," ")}}function ut(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-accordion",7),d.YNc(1,pt,48,30,"mat-expansion-panel",8),d.YNc(2,ht,5,4,"div",9),d.TgZ(3,"div",10),d.TgZ(4,"po-button",11),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.openUpdateShift(t.employeeData)}),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngForOf",e.items),d.xp6(1),d.Q6J("ngIf",e.hasNext),d.xp6(2),d.s9C("p-label",d.lcZ(5,3,"l-shifts-change-shift"))}}function mt(e,t){if(1&e&&(d.TgZ(0,"tr",39),d.TgZ(1,"td",40),d.TgZ(2,"div",41),d._uU(3),d.ALo(4,"formatDate"),d.qZA(),d.TgZ(5,"div",42),d._uU(6),d.ALo(7,"formatDate"),d.qZA(),d.qZA(),d.TgZ(8,"td",43),d._uU(9),d.ALo(10,"idLabel"),d.qZA(),d.TgZ(11,"td",43),d._uU(12),d.ALo(13,"idLabel"),d.qZA(),d.TgZ(14,"td",43),d._uU(15),d.ALo(16,"formatDate"),d.qZA(),d.TgZ(17,"td",43),d._uU(18),d.ALo(19,"formatDate"),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(3),d.Oqu(d.xi3(4,6,null==e?null:e.assignDate,"dayMonth")),d.xp6(3),d.Oqu(d.xi3(7,9,null==e?null:e.assignDate,"weekday")),d.xp6(3),d.Oqu(d.lcZ(10,12,null==e?null:e.shift)),d.xp6(3),d.Oqu(d.lcZ(13,14,null==e?null:e.schedule)),d.xp6(3),d.Oqu(d.lcZ(16,16,null==e?null:e.initDate)),d.xp6(3),d.Oqu(d.lcZ(19,18,null==e?null:e.endDate))}}function gt(e,t){1&e&&d._UZ(0,"img",28)}function ft(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"a",46),d.NdJ("click",function(){return d.CHM(e),d.oxw(4).viewMore()}),d._uU(1),d.ALo(2,"translate"),d.qZA()}2&e&&(d.xp6(1),d.Oqu(d.lcZ(2,1,"l-view-more")))}function bt(e,t){if(1&e&&(d.TgZ(0,"div",44),d.YNc(1,gt,1,0,"img",27),d.YNc(2,ft,3,3,"a",45),d.qZA()),2&e){const e=d.oxw(3);d.xp6(1),d.Q6J("ngIf",e.loading),d.xp6(1),d.Q6J("ngIf",!e.loading)}}function vt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",29),d.TgZ(1,"div",30),d.TgZ(2,"div",31),d.TgZ(3,"po-button",32),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2);return t.openUpdateShift(t.employeeData)}),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"table",33),d.TgZ(6,"thead",34),d.TgZ(7,"tr",35),d.TgZ(8,"th",36),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.TgZ(11,"th",36),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.TgZ(14,"th",36),d._uU(15),d.ALo(16,"translate"),d.qZA(),d.TgZ(17,"th",36),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.TgZ(20,"th",36),d._uU(21),d.ALo(22,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"tbody"),d.YNc(24,mt,20,20,"tr",37),d.qZA(),d.qZA(),d.YNc(25,bt,3,2,"div",38),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(3),d.s9C("p-label",d.lcZ(4,8,"l-shifts-change-shift")),d.xp6(6),d.Oqu(d.lcZ(10,10,"l-shifts-assignDate")),d.xp6(3),d.Oqu(d.lcZ(13,12,"l-shifts-shift")),d.xp6(3),d.Oqu(d.lcZ(16,14,"l-shifts-schedule")),d.xp6(3),d.Oqu(d.lcZ(19,16,"l-shifts-initDate")),d.xp6(3),d.Oqu(d.lcZ(22,18,"l-shifts-endDate")),d.xp6(3),d.Q6J("ngForOf",e.items),d.xp6(1),d.Q6J("ngIf",e.hasNext)}}function yt(e,t){if(1&e&&(d.TgZ(0,"div"),d._UZ(1,"app-page-header",2),d.YNc(2,rt,1,4,"app-card-employee",3),d.YNc(3,ut,6,5,"mat-accordion",4),d.YNc(4,vt,26,20,"div",5),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("backIsVisible",!0),d.xp6(1),d.Q6J("ngIf",e.employeeData),d.xp6(1),d.Q6J("ngIf",e.viewIsMobile),d.xp6(1),d.Q6J("ngIf",!e.viewIsMobile)}}let wt=(()=>{class e extends _e.R{constructor(e,t,i,n){super(),this.shiftsService=e,this.teamManagementService=t,this.activatedRoute=i,this.router=n,this.loading=!0,this.page=1,this.pageSize=5,this.items=[],this.viewIsTeamManagement=!1,this.close=new d.vpe}ngOnInit(){super.ngOnInit(),this.subscribeToActivatedRoute(),this.loading=!1}ngOnDestroy(){!0===this.viewIsTeamManagement&&this.teamManagementService.cleanEmployeeCard(),null!=this.routeDataSubscription&&this.routeDataSubscription.unsubscribe()}teamManagementShifts(){const{employee:e,image:t}=this.teamManagementService.getEmployeeCard();this.items=[],this.employeeData=e,this.imageAvatar=t,this.loadData(this.page,this.pageSize)}loadData(e,t){return(0,v.mG)(this,void 0,void 0,function*(){this.loading=!0,this.employeeData&&(this.employeeId=this.employeeData.id),this.shiftsService.getItems(e,t,this.employeeId).then(e=>{e&&(this.items=this.page>1?this.items.concat(e.items):Array.from(e.items),this.hasNext=e.hasNext),this.loading=!1}).catch(e=>{this.loading=!1,console.error(e)})})}viewMore(){this.page++,this.loadData(this.page,this.pageSize)}closeUpdateShift(){this.showUpdateShift=!1,this.loadData(1,this.pageSize)}openUpdateShift(e){const t=this.selectItem();this.shiftsUpdate.loadCurrentShift(e,this.imageAvatar,t),this.showUpdateShift=!0}selectItem(){let e=new Date;e.setDate(e.getDate()+365);let t,i=0;return this.items.forEach(n=>{new Date(n.initDate)<e&&i<1&&(i++,t=n)}),t}subscribeToActivatedRoute(){this.routeDataSubscription=this.activatedRoute.data.pipe((0,it.U)(e=>e.management)).subscribe(e=>{if(this.viewIsTeamManagement=e,e){if(null==this.teamManagementService.getEmployeeCard().employee)return void this.router.navigateByUrl("teamManagement");this.teamManagementShifts()}})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(m),d.Y36(O.C),d.Y36(D.gz),d.Y36(D.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-team-shifts"]],viewQuery:function(e,t){if(1&e&&d.Gf(tt,5),2&e){let e;d.iGM(e=d.CRH())&&(t.shiftsUpdate=e.first)}},outputs:{close:"close"},features:[d.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"hidden","closeUpdate"],["pageTitle","l-view-work-shifts",3,"backIsVisible"],[3,"image","name","role","status",4,"ngIf"],["class","po-12 no-padding",4,"ngIf"],["class","po-row",4,"ngIf"],[3,"image","name","role","status"],[1,"po-12","no-padding"],["hideToggle","true",4,"ngFor","ngForOf"],["class","next-periods mobile",3,"click",4,"ngIf"],[1,"change-shift-mobile"],["p-type","primary",1,"po-md-12","change-shift-button-mobile",3,"p-label","click"],["hideToggle","true"],["dropdown",""],[1,"dropdown-shifts-header"],[1,"shifts-label-title"],[1,"specific-class"],[1,"right-align"],["class","icon-arrow up",4,"ngIf"],["class","icon-arrow down",4,"ngIf"],[1,"line"],[1,"shifts-content"],[1,"shifts-label"],[1,"shifts-value"],[1,"icon-arrow","up"],[1,"icon-arrow","down"],[1,"next-periods","mobile",3,"click"],["class","spinner-img","src","../../../assets/img/loading.gif",4,"ngIf"],["src","../../../assets/img/loading.gif",1,"spinner-img"],[1,"po-row"],[1,"header-divider","panel-body","po-xs-hidden","po-sm-hidden","po-md-12","po-lg-12","po-xl-12"],[1,"tableshifts"],["p-type","primary",1,"change-shift-button",3,"p-label","click"],["ng-init","current = 0",1,"shifts-panel","table"],[1,"column-header"],[1,"custom-tr"],[1,"shifts-label-column"],["class","custom-tr hover-design",4,"ngFor","ngForOf"],["class","next-periods",4,"ngIf"],[1,"custom-tr","hover-design"],[1,"column-date"],[1,"big-date"],[1,"weekday"],[1,"column"],[1,"next-periods"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,t){1&e&&(d.YNc(0,yt,5,4,"div",0),d.TgZ(1,"app-team-shifts-update",1),d.NdJ("closeUpdate",function(){return t.closeUpdateShift()}),d.qZA()),2&e&&(d.Q6J("ngIf",!t.showUpdateShift),d.xp6(1),d.Q6J("hidden",!t.showUpdateShift))},directives:[n.O5,tt,Ye.q,nt.x,s.pp,n.sg,r.bOz,s.ib,s.yz,s.yK,s.u4],pipes:[o.X$,st,ot],styles:[".tableshifts[_ngcontent-%COMP%]{margin-top:1em;padding:10px}.tableshifts[_ngcontent-%COMP%]   .shifts-panel[_ngcontent-%COMP%]{margin-bottom:0}.tableshifts[_ngcontent-%COMP%]   .shifts-panel[_ngcontent-%COMP%]   .column-date[_ngcontent-%COMP%]   .big-date[_ngcontent-%COMP%]{font-size:20px;padding:10px 0 5px;color:#0c9abe}.tableshifts[_ngcontent-%COMP%]   .shifts-panel[_ngcontent-%COMP%]   .column-date[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{color:#888}.shifts-label-column[_ngcontent-%COMP%]{font-size:12px;font-weight:bold;line-height:2;color:#0c9abe;border-bottom:2px solid #ceebf2!important;background-color:#fff;padding:0;margin:0}.shifts-label-title[_ngcontent-%COMP%]{color:#0c9abe}.custom-tr.hover-design[_ngcontent-%COMP%]:hover{background-color:#fafbfb}.custom-tr.hover-design[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #649b9b}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle!important;font-size:14px;line-height:1;text-align:left;height:60px!important;word-wrap:break-word}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}.custom-tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-align:left;white-space:nowrap;padding:10px 10px 0}.custom-tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:0}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:0 2px 8px #e3e6f1!important;border-radius:6px;position:relative;background:#ffffff;display:flow-root;padding:0;margin-bottom:16px}.mat-expansion-panel[_ngcontent-%COMP%]   .right-align[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:1.5em}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{margin-bottom:-20px}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   .right-align[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{top:1.75em}.next-periods[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe}.next-periods[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.next-periods[_ngcontent-%COMP%]   .spinner-img[_ngcontent-%COMP%]{width:2em;height:auto}.next-periods.mobile[_ngcontent-%COMP%]{margin-bottom:calc(2em + 60px)}.dropdown-shifts-header[_ngcontent-%COMP%]{font-weight:bold;font-size:16px;color:#2b3639}.shifts-content[_ngcontent-%COMP%]{padding:0 24px}.shifts-value[_ngcontent-%COMP%]{float:right;color:#2b3639;font-weight:bold}.shifts-label[_ngcontent-%COMP%]{color:#4a5c60}[_nghost-%COMP%]     po-button.change-shift-button-mobile{display:flex;padding:1em;height:5.5em}[_nghost-%COMP%]     po-button.change-shift-button-mobile button{height:4em}[_nghost-%COMP%]     po-button.change-shift-button{float:right;margin-bottom:1em}[_nghost-%COMP%]     po-button.change-shift-button button{padding:0 2em}.change-shift-mobile[_ngcontent-%COMP%]{position:fixed;background-color:#fff;bottom:60px;width:calc(100% - 2em)}"]}),e})();var xt=i(85647),Zt=i(14833);const Ct=["childTable"];function Mt(e,t){1&e&&d.GkF(0)}const At=function(e){return{$implicit:e}};function St(e,t){if(1&e&&d.YNc(0,Mt,1,0,"ng-container",4),2&e){const e=t.$implicit,i=d.oxw().$implicit;d.Q6J("ngTemplateOutlet",i.templateRef)("ngTemplateOutletContext",d.VKq(2,At,e))}}function Tt(e,t){if(1&e&&(d.ynx(0),d.YNc(1,St,1,4,"ng-template",3),d.BQk()),2&e){const e=t.$implicit;d.xp6(1),d.Q6J("p-property",e.targetProperty)}}function Ot(e,t){1&e&&d.GkF(0)}function qt(e,t){if(1&e&&d.YNc(0,Ot,1,0,"ng-container",4),2&e){const e=t.$implicit,i=d.oxw().$implicit;d.Q6J("ngTemplateOutlet",i.templateRef)("ngTemplateOutletContext",d.VKq(2,At,e))}}function Pt(e,t){if(1&e&&(d.ynx(0),d.YNc(1,qt,1,4,"ng-template",3),d.BQk()),2&e){const e=t.$implicit;d.xp6(1),d.Q6J("p-property",e.targetProperty)}}function It(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-recursive-table",5,6),d.NdJ("showMore",function(){const t=d.CHM(e).$implicit;return d.oxw().internalShowMoreChild(t)})("showMoreChild",function(t){return d.CHM(e),d.oxw().internalShowMoreChild(t)})("expanded",function(t){return d.CHM(e),d.oxw().internalExpanded(t)})("allSelected",function(t){return d.CHM(e),d.oxw().internalAllSelected(t)})("allUnselected",function(t){return d.CHM(e),d.oxw().internalAllUnselected(t)})("unselected",function(t){return d.CHM(e),d.oxw().internalUnselected(t)})("selected",function(t){return d.CHM(e),d.oxw().internalSelected(t)})("sortBy",function(t){return d.CHM(e),d.oxw().sortByChild(t)}),d.YNc(2,Pt,2,1,"ng-container",1),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw();d.Q6J("columns",i.columns)("items",i.getExpandedItems(e))("loading",i.firstTable&&i.loading)("showMoreDisabled",i.getShowMoreDisabled(e))("actions",i.actions)("showExpand",i.showExpand)("hideSelectAll",!1)("hideTextOverflow",i.hideTextOverflow)("selectable",i.selectable)("firstTable",!1)("getExpandedItems",i.getExpandedItems)("getShowMoreDisabled",i.getShowMoreDisabled),d.xp6(2),d.Q6J("ngForOf",i.tableColumnTemplates)}}let _t=(()=>{class e{constructor(){this.columns=[],this.items=[],this.firstTable=!0,this.isActiveTable=!1,this.showMoreIsVisible=!0,this.actions=[],this.showMore=new d.vpe,this.showMoreChild=new d.vpe,this.expanded=new d.vpe,this.collapsed=new d.vpe,this.allSelected=new d.vpe,this.allUnselected=new d.vpe,this.unselected=new d.vpe,this.selected=new d.vpe,this.sortEmitter=new d.vpe,this.showExpand=()=>!1,this.getExpandedItems=()=>[],this.getShowMoreDisabled=()=>!0}ngOnInit(){}sortBy(e){this.sortEmitter.emit({sort:e,recursiveTable:this})}sortByChild(e){this.sortEmitter.emit(e)}internalShowMore(e){this.showMore.next(e)}internalExpanded(e){this.showMoreIsVisible=!1,this.expanded.next(e)}getVisible(){return this.showMoreIsVisible||this.firstTable}internalShowMoreChild(e){this.showMoreChild.next(e)}internalCollapsed(e){this.showMoreIsVisible=!0,this.collapsed.next(e)}internalAllSelected(e){this.allSelected.next(e)}internalAllUnselected(e){this.allUnselected.next(e)}internalUnselected(e){this.unselected.next(e)}internalSelected(e){this.selected.next(e)}getSelectedRows(){const e=[];return e.push(...this.poTable.getSelectedRows()),this.childTable&&e.push(...this.childTable.getSelectedRows()),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-recursive-table"]],contentQueries:function(e,t,i){if(1&e&&d.Suo(i,r.UDu,4),2&e){let e;d.iGM(e=d.CRH())&&(t.tableColumnTemplates=e)}},viewQuery:function(e,t){if(1&e&&(d.Gf(r._w3,5),d.Gf(Ct,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.poTable=e.first),d.iGM(e=d.CRH())&&(t.childTable=e.first)}},inputs:{columns:"columns",items:"items",showMoreDisabled:"showMoreDisabled",loading:"loading",sort:"sort",hideTextOverflow:"hideTextOverflow",hideSelectAll:"hideSelectAll",container:"container",striped:"striped",selectable:"selectable",firstTable:"firstTable",isActiveTable:"isActiveTable",showMoreIsVisible:"showMoreIsVisible",actions:"actions",showExpand:"showExpand",getExpandedItems:"getExpandedItems",getShowMoreDisabled:"getShowMoreDisabled"},outputs:{showMore:"showMore",showMoreChild:"showMoreChild",expanded:"expanded",collapsed:"collapsed",allSelected:"allSelected",allUnselected:"allUnselected",unselected:"unselected",selected:"selected",sortEmitter:"sortBy"},decls:3,vars:19,consts:[[3,"p-container","p-hide-select-all","p-hide-text-overflow","p-sort","p-striped","p-columns","p-selectable","p-items","p-loading","p-show-more-disabled","p-actions","p-show-more","p-expanded","p-all-selected","p-all-unselected","p-selected","p-collapsed","p-unselected","p-sort-by"],[4,"ngFor","ngForOf"],["p-table-row-template","",3,"p-table-row-template-show"],["p-table-column-template","",3,"p-property"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["container","","striped","false","sort","true",3,"columns","items","loading","showMoreDisabled","actions","showExpand","hideSelectAll","hideTextOverflow","selectable","firstTable","getExpandedItems","getShowMoreDisabled","showMore","showMoreChild","expanded","allSelected","allUnselected","unselected","selected","sortBy"],["childTable",""]],template:function(e,t){1&e&&(d.TgZ(0,"po-table",0),d.NdJ("p-show-more",function(e){return t.internalShowMore(e)})("p-expanded",function(e){return t.internalExpanded(e)})("p-all-selected",function(e){return t.internalAllSelected(e)})("p-all-unselected",function(e){return t.internalAllUnselected(e)})("p-selected",function(e){return t.internalSelected(e)})("p-collapsed",function(e){return t.internalCollapsed(e)})("p-unselected",function(e){return t.internalUnselected(e)})("p-sort-by",function(e){return t.sortBy(e)}),d.YNc(1,Tt,2,1,"ng-container",1),d.YNc(2,It,3,13,"ng-template",2),d.qZA()),2&e&&(d.ekj("recursive-table-first",t.firstTable)("hideMoreVisible",!t.getVisible())("showMoreVisible",t.showMoreIsVisible),d.Q6J("p-container",t.container)("p-hide-select-all",t.hideSelectAll)("p-hide-text-overflow",t.hideTextOverflow)("p-sort",t.sort)("p-striped",t.striped)("p-columns",t.columns)("p-selectable",t.selectable)("p-items",t.items)("p-loading",t.loading)("p-show-more-disabled",t.showMoreDisabled)("p-actions",t.actions),d.xp6(1),d.Q6J("ngForOf",t.tableColumnTemplates),d.xp6(1),d.Q6J("p-table-row-template-show",t.showExpand))},directives:[r._w3,n.sg,r.GY2,r.UDu,n.tP,e],styles:[".hideMoreVisible[_ngcontent-%COMP%]     .po-table-footer-show-more{display:none}.showMoreVisible[_ngcontent-%COMP%]     .po-table-footer-show-more{display:block}[_nghost-%COMP%]     .po-table-checkbox-label{margin-bottom:0!important}"]}),e})();var kt=i(98348),Dt=i(92430),Lt=i(37503);let Nt=(()=>{class e{constructor(e,t,i,n){this.dynamicSearchComponent=e,this.globals=t,this.appTranslateService=i,this.absenceService=n,this.savedFiltersChange=new d.vpe,this.options=[]}ngOnInit(){return(0,v.mG)(this,void 0,void 0,function*(){yield this.initializeDirective()})}get storageKey(){return`savedFilter-${this.currentUserId}-${this.appSavedFilters}`}changeDisclaimers(e){this.saveFilters(e.reduce((e,t)=>(e[t.property]=t.value,e),{}))}advancedSearch(e){this.saveFilters(e)}quickSearch(e){if(null!=this.appSavedFiltersQuickSearchProperty){const t={};t[this.appSavedFiltersQuickSearchProperty]=e,this.saveFilters(t)}else this.saveFilters(null)}saveFilters(e){return(0,v.mG)(this,void 0,void 0,function*(){e&&0===Object.keys(e).length&&(e=null),yield Dt.setItem(this.storageKey,e)})}loadFilters(){return(0,v.mG)(this,void 0,void 0,function*(){try{const e=yield Dt.getItem(this.storageKey);let t;e&&(t=Object.keys(e).map(t=>(0,v.mG)(this,void 0,void 0,function*(){return yield this.convertFilterToDisclaimer(e,t)})).filter(e=>(0,v.mG)(this,void 0,void 0,function*(){yield e.then(e=>{null!=e&&this.dynamicSearchComponent.disclaimerGroup.disclaimers.push(e)})}))),this.savedFiltersChange.next(null!=t?e:null)}catch(e){console.error(e),this.savedFiltersChange.next(null)}})}initializeDirective(){return(0,v.mG)(this,void 0,void 0,function*(){if(null==this.appSavedFilters)throw"appSavedFilters must be not null";yield this.getHierarchicalLevelsDTS(),yield this.loadUserId(),yield this.loadFilters()})}getHierarchicalLevelName(e){const t=[];return Object.keys(e).map(i=>{t.push(this.options.find(t=>t.value==e[i]).label)}),t}convertFilterToDisclaimer(e,t){return(0,v.mG)(this,void 0,void 0,function*(){const i=yield this.resolveName(e,t).then(e=>e);return"hierarchicalLevel"==t?{label:`${i} : ${this.getHierarchicalLevelName(e[t])}`,property:t,value:e[t]}:{label:`${i} : ${e[t]}`,property:t,value:e[t]}})}loadUserId(){return(0,v.mG)(this,void 0,void 0,function*(){const e=yield this.globals.getEmployeeSummary();return this.currentUserId=e.id,this.currentUserId})}resolveName(e,t){return(0,v.mG)(this,void 0,void 0,function*(){var i={};return Object.keys(e).map(n=>{n==t&&(i[n]=e[t])}),yield this.returnTranslateName(i)})}returnTranslateName(e){return(0,v.mG)(this,void 0,void 0,function*(){let t="l-name";return e.registry&&(t="l-registry"),e.branch&&(t="l-branch"),e.hierarchicalLevel&&(t=kt.ZP.isErpDatasul()?"l-level":"l-show-indirect-subordinates"),yield this.appTranslateService.getI18n(t)})}getHierarchicalLevelsDTS(){return(0,v.mG)(this,void 0,void 0,function*(){kt.ZP.isErpDatasul()&&(yield this.absenceService.getHierarchicalLevels()).items.forEach(e=>{this.options.push({label:e.description,value:e.value})})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.O6,1),d.Y36(Lt.O),d.Y36(oe.g),d.Y36(xt.D))},e.\u0275dir=d.lG2({type:e,selectors:[["","appSavedFilters",""]],hostBindings:function(e,t){1&e&&d.NdJ("p-change-disclaimers",function(e){return t.changeDisclaimers(e)})("p-advanced-search",function(e){return t.advancedSearch(e)})("p-quick-search",function(e){return t.quickSearch(e)})},inputs:{appSavedFilters:"appSavedFilters",appSavedFiltersQuickSearchProperty:"appSavedFiltersQuickSearchProperty"},outputs:{savedFiltersChange:"savedFiltersChange"}}),e})();var Ft=i(14323),Ut=i(39075);function Jt(e,t){1&e&&(d.TgZ(0,"span",7),d._UZ(1,"span",8),d.qZA())}const Yt=function(e,t){return{"center-card-margin":e,"active-card":t}};function Et(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",2),d.TgZ(1,"div",3),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().selectEmployee(t.employeeId)}),d._UZ(2,"div",4),d.TgZ(3,"p",5),d._uU(4),d.qZA(),d.qZA(),d.YNc(5,Jt,2,0,"span",6),d.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=d.oxw();d.Q6J("ngClass",d.WLB(5,Yt,1===i,n.employeesBreadcrumbTree[i].isActive)),d.xp6(2),d.Udp("background-image",e.image),d.xp6(2),d.Oqu(e.employeeName),d.xp6(1),d.Q6J("ngIf",i+1<n.employeesBreadcrumbTree.length)}}let Ht=(()=>{class e{constructor(){this.employeesBreadcrumbTree=[],this.employeeClickEvent=new d.vpe}selectEmployee(e){this.employeeClickEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-breadcrumb-subordinate-tree"]],inputs:{employeesBreadcrumbTree:"employeesBreadcrumbTree"},outputs:{employeeClickEvent:"employeeClickEvent"},decls:2,vars:1,consts:[[1,"po-row"],["class","card-size po-text-center po-sm-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-size","po-text-center","po-sm-4",3,"ngClass"],[3,"click"],[1,"avatar-small"],[1,"name-format"],["class","dot",4,"ngIf"],[1,"dot"],[1,"po-icon","po-icon-arrow-right"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.YNc(1,Et,6,8,"div",1),d.qZA()),2&e&&(d.xp6(1),d.Q6J("ngForOf",t.employeesBreadcrumbTree))},directives:[n.sg,n.mk,n.O5],styles:[".name-format[_ngcontent-%COMP%]{font-size:11px;margin-top:5px}.avatar-small[_ngcontent-%COMP%]{height:32px;width:32px;margin:20% auto auto}.card-size[_ngcontent-%COMP%]{border:1px solid #b2b2b2;border-radius:5px;width:32%;position:relative}.center-card-margin[_ngcontent-%COMP%]{margin-right:2%;margin-left:2%}.active-card[_ngcontent-%COMP%]{border:1px solid #0c9abe}.dot[_ngcontent-%COMP%]{height:25px;width:25px;background-color:#fff;border-radius:50%;position:absolute;color:#0c9abe;box-shadow:0 0 0 1px #b2b2b2;left:95%;top:25%;z-index:10}"]}),e})();function Qt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",10),d.TgZ(1,"po-page-dynamic-search",11),d.NdJ("p-change-disclaimers",function(t){return d.CHM(e),d.oxw().onChangeDisclaimers(t)})("p-quick-search",function(t){return d.CHM(e),d.oxw().onQuickSearch(t)})("p-advanced-search",function(t){return d.CHM(e),d.oxw().onAdvancedSearch(t)})("savedFiltersChange",function(t){return d.CHM(e),d.oxw().savedFiltersChange(t)}),d.qZA(),d._UZ(2,"po-dropdown",12),d.ALo(3,"translate"),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.Q6J("p-filters",e.filters)("p-literals",e.literals),d.xp6(1),d.s9C("p-label",d.lcZ(3,5,"l-select")),d.Q6J("p-actions",e.actionsDropdown)("p-disabled",!e.dropdownButtonIsVisible)}}function Bt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"po-input",13),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().teamParams.name=t})("p-change-model",function(){return d.CHM(e),d.oxw().searchAllWhenNameFieldIsEmpty()})("keyup.enter",function(){return d.CHM(e),d.oxw().search()}),d.ALo(1,"translate"),d.qZA()}if(2&e){const e=d.oxw();d.s9C("p-placeholder",d.lcZ(1,2,"l-search-collaborator")),d.Q6J("ngModel",e.teamParams.name)}}function Gt(e,t){if(1&e&&(d.TgZ(0,"div",14),d._UZ(1,"div",15),d.TgZ(2,"div",16),d.TgZ(3,"span"),d._uU(4),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.xp6(1),d.Udp("background-image",i.getImageAvatar(e)),d.xp6(3),d.Oqu(i.getNameById(e))}}function zt(e,t){if(1&e&&(d.TgZ(0,"div",17),d.TgZ(1,"span"),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.xp6(2),d.Oqu(i.replaceDotForComma(e))}}function $t(e,t){if(1&e&&(d.TgZ(0,"div",17),d.TgZ(1,"span"),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.xp6(2),d.Oqu(i.getLabelForStatus(e))}}function Vt(e,t){if(1&e&&(d.TgZ(0,"div",18),d.TgZ(1,"span"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",19),d.TgZ(5,"span",20),d._uU(6),d.ALo(7,"titleCase"),d.qZA(),d.TgZ(8,"span",21),d._uU(9),d.ALo(10,"lowercase"),d.ALo(11,"translate"),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,4,"l-direct-subordinates")),d.xp6(4),d.hij("",d.lcZ(7,6,e.employeesTreeBreadcrumbToShow[e.employeesTreeBreadcrumbToShow.length-1].employeeName),":"),d.xp6(3),d.AsE("",e.employees.length," ",d.lcZ(10,8,d.lcZ(11,10,"l-results")),"")}}function Rt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span",37),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().seeDirectEmployees(t)}),d.qZA()}}function jt(e,t){if(1&e&&(d.TgZ(0,"p"),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(1),d.Oqu(t.contacts[e.id].email)}}function Wt(e,t){if(1&e&&(d.TgZ(0,"p"),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw();d.xp6(1),d.Oqu(t.contacts[e.id].phone)}}function Xt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",39),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openWorkLeave(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-work-leaves")," "))}function Kt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",40),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openMedicalCertificate(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-medical-certificate")," "))}function ei(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",41),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openPaymentSummary(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"im-paymentsShort")," "))}function ti(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",42),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openVacation(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"im-vacation")," "))}function ii(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",43),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openSalaryHistory(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"im-salaryHistoryLong")," "))}function ni(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",44),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openOvertimeHours(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"im-overtime-hours")," "))}function ai(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",45),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openProfile(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-profile")," "))}function si(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",46),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openClockings(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"im-timesheet")," "))}function oi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",47),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openOnCall(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-on-call")," "))}function ri(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",48),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openAllowancesRequest(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-request-allowance")," "))}function li(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"span",46),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().openShiftsRequest(t)}),d.qZA(),d._uU(2),d.ALo(3,"translate"),d.qZA()}2&e&&(d.xp6(2),d.hij("",d.lcZ(3,1,"l-view-work-shifts")," "))}function ci(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"po-widget",49),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw().seeDirectEmployees(t)}),d._UZ(1,"span",50),d.TgZ(2,"span",51),d._uU(3),d.ALo(4,"translate"),d.qZA(),d._UZ(5,"span",52),d.qZA()}2&e&&(d.xp6(3),d.Oqu(d.lcZ(4,1,"l-direct-subordinates")))}function pi(e,t){if(1&e&&(d.TgZ(0,"app-expansion-card"),d.TgZ(1,"div",22),d.TgZ(2,"div",23),d._UZ(3,"div",15),d.qZA(),d.TgZ(4,"div",24),d.TgZ(5,"div",25),d.TgZ(6,"strong"),d._uU(7),d.ALo(8,"titleCase"),d.qZA(),d.YNc(9,Rt,1,0,"span",26),d.qZA(),d.TgZ(10,"div",27),d._uU(11),d.ALo(12,"titleCase"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",28),d.TgZ(14,"div",29),d.TgZ(15,"span",30),d._UZ(16,"span",31),d.qZA(),d.YNc(17,jt,2,1,"p",32),d.qZA(),d.TgZ(18,"div",29),d.TgZ(19,"span",30),d._UZ(20,"span",33),d.qZA(),d.YNc(21,Wt,2,1,"p",32),d.qZA(),d.TgZ(22,"div",34),d.YNc(23,Xt,4,3,"div",35),d.YNc(24,Kt,4,3,"div",35),d.YNc(25,ei,4,3,"div",35),d.YNc(26,ti,4,3,"div",35),d.YNc(27,ii,4,3,"div",35),d.YNc(28,ni,4,3,"div",35),d.YNc(29,ai,4,3,"div",35),d.YNc(30,si,4,3,"div",35),d.YNc(31,oi,4,3,"div",35),d.YNc(32,ri,4,3,"div",35),d.YNc(33,li,4,3,"div",35),d.qZA(),d.YNc(34,ci,6,3,"po-widget",36),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.xp6(3),d.Udp("background-image",i.getImageAvatar(e.id)),d.xp6(4),d.Oqu(d.lcZ(8,19,e.name)),d.xp6(2),d.Q6J("ngIf",e.isCoordinator),d.xp6(2),d.Oqu(d.lcZ(12,21,e.roleDescription)),d.xp6(6),d.Q6J("ngIf",e.contacts&&e.contacts.emails),d.xp6(4),d.Q6J("ngIf",e.contacts&&e.contacts.phones),d.xp6(2),d.Q6J("ngIf",i.workLeaveVisible),d.xp6(1),d.Q6J("ngIf",i.medicalVisible),d.xp6(1),d.Q6J("ngIf",i.paymentsIsVisible),d.xp6(1),d.Q6J("ngIf",i.vacationVisible),d.xp6(1),d.Q6J("ngIf",i.salaryHistoryVisible),d.xp6(1),d.Q6J("ngIf",i.overtimeHoursVisible),d.xp6(1),d.Q6J("ngIf",i.profileVisible),d.xp6(1),d.Q6J("ngIf",i.timesheetVisible),d.xp6(1),d.Q6J("ngIf",i.onCallVisible),d.xp6(1),d.Q6J("ngIf",i.allowanceVisible),d.xp6(1),d.Q6J("ngIf",i.shiftsVisible),d.xp6(1),d.Q6J("ngIf",e.isCoordinator)}}function di(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",53),d.TgZ(1,"a",54),d.NdJ("click",function(){return d.CHM(e),d.oxw().viewMore()}),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.qZA()}2&e&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"l-view-more")))}let hi=(()=>{class e{constructor(e,t,i,n,a,s,o,r,l,c,p,d,h){this.teamManagementService=e,this.sanitization=t,this.profileService=i,this.navigationUtilService=n,this.globals=a,this.translateService=s,this.permissionSelector=o,this.router=r,this.momentService=l,this.lastAccess=c,this.fieldProperties=p,this.windowUtilService=d,this.absenceService=h,this.teamParams=new Ft.$,this.employees=[],this.chieldrenEmployees=[],this.hasNext=!1,this.contacts={},this.descriptionStatus=[],this.avatarImage=[],this.translateStatusLabels=[],this.columns=[],this.tableActions=[],this.items=[],this.collumnName="id",this.collumnEmployeeStatus="employeeStatus",this.collumnSalary="salary",this.pageActions=[],this.filters=[],this.loading=!1,this.isMobile=!1,this.registryProps={field:"registry",visible:!1},this.employeesTreeBreadcrumb=[],this.employeesTreeBreadcrumbToShow=[],this.showDirectEmployeeOption=!0,this.showPageHader=!0}get canViewSalary(){return this.permissions&&(void 0===this.permissions.teamManagementViewSalary||this.permissions.teamManagementViewSalary)}ngOnInit(){this.initializeComponent()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}getPermissions(){this.permissionSubscription=this.permissionSelector.permissions$.subscribe(e=>{this.permissions=e,this.salaryHistoryVisible=void 0===this.permissions.teamManagementSalaryHist||this.permissions.teamManagementSalaryHist,this.paymentsIsVisible=void 0!==this.permissions.teamManagementPayment&&this.permissions.teamManagementPayment,this.timesheetVisible=void 0===this.permissions.teamManagementTimesheet||this.permissions.teamManagementTimesheet,this.medicalVisible=void 0===this.permissions.teamManagementMedical||this.permissions.teamManagementMedical,this.vacationVisible=void 0===this.permissions.teamManagementVacation||this.permissions.teamManagementVacation,this.allowanceVisible=void 0===this.permissions.teamManagementAllowance||this.permissions.teamManagementAllowance,this.shiftsVisible=void 0!==this.permissions.teamManagementShifts&&this.permissions.teamManagementShifts,this.profileVisible=this.setPermissionTrueDefault(this.permissions.teamManagementProfile),this.workLeaveVisible=this.setPermissionFalseDefault(this.permissions.teamManagementWorkLeave),this.overtimeHoursVisible=this.setPermissionFalseDefault(this.permissions.teamManagementOvertimeHours),this.onCallVisible=this.setPermissionFalseDefault(this.permissions.teamManagementOnCallRequest),this.onCallBatchVisible=this.setPermissionFalseDefault(this.permissions.teamManagementOnCallBatchRequest)})}checkRowsTable(){this.dropdownButtonIsVisible=this.recursiveTable.getSelectedRows().length>0}setPermissionFalseDefault(e){return void 0!==e&&e}setPermissionTrueDefault(e){return void 0===e||e}isFirstTime(){let e=this.teamManagementService.getEmployeeCard();if(e.originComponent)switch(e.originComponent){case"clocking":this.openClockings(e.employee,e.image);break;case"medical":this.openMedicalCertificate(e.employee,e.image)}}getTeam(e=!1){return(0,v.mG)(this,void 0,void 0,function*(){try{this.loading=!0;const t=this.employeesTreeBreadcrumb.length>0?this.employeesTreeBreadcrumb[this.employeesTreeBreadcrumb.length-1].employeeId:V.N.loggedUser,i=yield this.teamManagementService.getEmployees(t,this.teamParams);if(i){this.hasNext=i.hasNext,e||(this.employees=[]);const t=[];this.employees=this.employees.concat(i.items),this.employees.forEach(e=>{t.push({id:e.id,name:e.name,branchName:e.branchName,registry:e.registry,admissionDate:this.getFormatedDate(e.admissionDate),salary:e.salary,salaryDate:this.getFormatedDate(e.salaryDate),employeeStatus:e.employeeStatus,hasDetail:e.isCoordinator})}),this.items=t,this.organizeEmployees()}else this.hasNext=!1}finally{this.loading=!1}})}getImageAvatar(e){return this.avatarImage[e]||(this.avatarImage[e]=this.sanitization.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(e).then(t=>{t&&t.content&&(this.avatarImage[e]=this.sanitization.bypassSecurityTrustStyle(`url(${"data:image/"+(t.type||"png")+";base64,"+t.content})`))})),this.avatarImage[e]}getNameById(e){const t=this.employees.filter(t=>t.id===e);if(t&&t.length>0)return t&&t.length>0?t[0].name:"";{const t=this.chieldrenEmployees.filter(t=>t.id===e);return t&&t.length>0?t[0].name:""}}order(e,t){if("down"===t)switch(e){case"name":this.employees.sort((e,t)=>e.name<t.name?-1:1);break;case"admission":this.employees.sort((e,t)=>e.admissionDate<t.admissionDate?-1:1);break;case"branch":this.employees.sort((e,t)=>e.branchName<t.branchName?-1:1);break;case"status":this.employees.sort((e,t)=>e.employeeStatus<t.employeeStatus?-1:1);break;case"salary":this.employees.sort((e,t)=>e.salary-t.salary);break;case"salaryDate":this.employees.sort((e,t)=>e.salaryDate<t.salaryDate?-1:1)}else switch(e){case"name":this.employees.sort((e,t)=>e.name>t.name?-1:1);break;case"admission":this.employees.sort((e,t)=>e.admissionDate>t.admissionDate?-1:1);break;case"branch":this.employees.sort((e,t)=>e.branchName>t.branchName?-1:1);break;case"status":this.employees.sort((e,t)=>e.employeeStatus>t.employeeStatus?-1:1);break;case"salary":this.employees.sort((e,t)=>t.salary-e.salary);break;case"salaryDate":this.employees.sort((e,t)=>e.salaryDate>t.salaryDate?-1:1)}}trackByFunction(e,t){return t.id}viewMore(){this.teamParams.page++,this.getTeam(!0)}openSalaryHistory(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"salary"),this.router.navigateByUrl("teamManagement/payment/salaryHistory")}openShiftsRequest(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"shifts"),this.router.navigateByUrl("teamManagement/shifts")}openClockings(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"clockings"),this.router.navigateByUrl(`teamManagement/timesheet/clockings/${encodeURIComponent(e.id)}`)}openPaymentSummary(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"payments"),this.router.navigateByUrl("teamManagement/payments")}openMedicalCertificate(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"medical"),this.router.navigateByUrl("teamManagement/health/medicalCertificate")}openAllowancesRequest(e){this.navigationUtilService.doNavigation(`teamManagement/timesheet/allowances/${e.id}`)}openVacation(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.globals.setEmployeeCard(e,t,"vacation"),this.navigationUtilService.doNavigation("teamManagement/vacation")}openProfile(e){this.teamManagementService.setEmployeeCard(e,"","profile"),this.router.navigateByUrl("teamManagement/profile")}openWorkLeave(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"workLeave"),this.navigationUtilService.doNavigation("teamManagement/workLeave")}openOvertimeHours(e){this.router.navigate(["teamManagement/timesheet/overtimeHours",e.id])}openOnCall(e,t=this.avatarImage[e.id].changingThisBreaksApplicationSecurity){this.teamManagementService.setEmployeeCard(e,t,"onCall"),this.navigationUtilService.doNavigation("teamManagement/timesheet/onCall")}openOnCallMany(e){let t="",i=1;e.forEach(n=>{t+=i<e.length?`${n.id}||`:n.id,i++}),this.router.navigate(["teamManagement/timesheet/onCall/request",t,!0])}getStatus(e,t){this.descriptionStatus[t]=this.getLabelForStatus(e)}getLabelForStatus(e){let t="";switch(e){case"N":t=this.translateStatusLabels[0].toString();break;case"A":t=this.translateStatusLabels[1].toString();break;case"D":t=this.translateStatusLabels[2].toString();break;case"F":t=this.translateStatusLabels[3].toString();break;default:t=this.translateStatusLabels[4].toString()}return t}getFormatedDate(e){if(e)return this.momentService.getInstance(e).utc().format("L")}onChangeDisclaimers(e){this.resetFilters(),e.forEach(e=>{"name"===e.property?this.teamParams.name=e.value:"registry"===e.property?this.teamParams.registry=e.value:"hierarchicalLevel"===e.property?this.teamParams.hierarchicalLevel=e.value:this.teamParams.branch=e.value}),this.teamParams.page=1,this.getTeam()}onQuickSearch(e){this.teamParams.name=e,this.teamParams.page=1,this.getTeam()}onAdvancedSearch(e){let t=e.hierarchicalLevel;("boolean"==typeof e.hierarchicalLevel||void 0===e.hierarchicalLevel)&&(t=e.hierarchicalLevel?0:1),this.teamParams.name=e.name,this.teamParams.registry=e.registry,this.teamParams.branch=e.branch,this.teamParams.hierarchicalLevel=t,this.teamParams.page=1,this.getTeam()}replaceDotForComma(e){return e?e.toString().replace(".",","):""}search(){this.teamParams.page=1,this.employees=[],this.getTeam()}searchAllWhenNameFieldIsEmpty(){""===this.teamParams.name&&this.search()}seeDirectEmployees(e){const t=this.employeesTreeBreadcrumb.filter(t=>t.employeeId===e.id);(null==t?void 0:t.length)>0?this.removeLowLevelsHierarchyFromBreadcrumb(e.id):(this.employeeSummaryLoggedUser&&0===this.employeesTreeBreadcrumb.length&&this.employeesTreeBreadcrumb.push({employeeId:this.employeeSummaryLoggedUser.id,image:this.avatarImage[this.employeeSummaryLoggedUser.id],employeeName:this.employeeSummaryLoggedUser.name,isActive:!1}),this.employeesTreeBreadcrumb.push({employeeId:e.id,image:this.avatarImage[e.id],employeeName:e.name,isActive:!1})),this.updateDirectEmployeesBreadcrumb()}selectEmployeeBreadcrumb(e){var t;e===(null===(t=this.employeeSummaryLoggedUser)||void 0===t?void 0:t.id)?(this.employeesTreeBreadcrumb=[],this.employeesTreeBreadcrumbToShow=[],this.search()):(this.removeLowLevelsHierarchyFromBreadcrumb(e),this.updateDirectEmployeesBreadcrumb())}expanded(e){return(0,v.mG)(this,void 0,void 0,function*(){if(!e.detail&&e.hasDetail){e.detail=[],this.loading=!0;try{const t=new Ft.$;yield this.organizeDetails(e,t),this.loading=!1}catch(t){this.loading=!1}}})}viewMoreChildren(e){return(0,v.mG)(this,void 0,void 0,function*(){if(e.detail){this.loading=!0;try{const t=e.detail[0].teamParams;t.page++,yield this.organizeDetails(e,t),this.loading=!1}catch(t){this.loading=!1}}})}isShow(e){return e.hasDetail}getExpandedItems(e){return e.detail}getShowMoreDisabled(e){return!(e.detail.length>0&&e.detail[0].hasNext)}savedFiltersChange(e){return(0,v.mG)(this,void 0,void 0,function*(){e?this.onAdvancedSearch(e):yield this.getTeam()})}organizeDetails(e,t){return(0,v.mG)(this,void 0,void 0,function*(){const i=yield this.teamManagementService.getEmployees(e.id,t);this.chieldrenEmployees=this.chieldrenEmployees.concat(i.items),i.items.forEach(n=>{e.detail.push({id:n.id,name:n.name,branchName:n.branchName,registry:n.registry,admissionDate:this.getFormatedDate(n.admissionDate),salary:n.salary,salaryDate:this.getFormatedDate(n.salaryDate),employeeStatus:n.employeeStatus,hasDetail:n.isCoordinator,hasNext:i.hasNext,teamParams:t})})})}updateDirectEmployeesBreadcrumb(){this.filterBreadcrumbToShow(),this.employeesTreeBreadcrumbToShow[this.employeesTreeBreadcrumbToShow.length-1].isActive=!0,this.search()}filterBreadcrumbToShow(){this.employeesTreeBreadcrumbToShow=this.employeesTreeBreadcrumb.length<=3?this.employeesTreeBreadcrumb.map(e=>Object.assign({},e)):this.employeesTreeBreadcrumb.slice(Math.max(this.employeesTreeBreadcrumb.length-3,0))}removeLowLevelsHierarchyFromBreadcrumb(e){const t=this.employeesTreeBreadcrumb.map(e=>Object.assign({},e));for(let i=t.length-1;i>=0&&t[i].employeeId!==e;i--)this.employeesTreeBreadcrumb.pop()}initializeComponent(){return(0,v.mG)(this,void 0,void 0,function*(){this.teamParams.page=1,this.teamParams.hierarchicalLevel=1,this.getPermissions(),this.isMobileCheck(),this.isFirstTime(),this.setCountLastAccess(),this.getTranslateForStatusLabels(),yield this.getFieldProperties(),this.getLabelsSearch(),this.getTableColumns(),this.getTableActions(),this.actionsDropdown=[{label:"Solicitar sobreaviso",action:()=>this.openOnCallMany(this.recursiveTable.getSelectedRows()),visible:this.onCallBatchVisible}]})}setCountLastAccess(){this.globals.getEmployeeSummary().then(e=>{this.employeeSummaryLoggedUser=e,this.getImageAvatar(this.employeeSummaryLoggedUser.id),this.lastAccess.setLastAccess(Zt.to,e.id)})}organizeEmployees(){this.employees.forEach(e=>{let t,i;t=e.contacts&&e.contacts.phones[0]?this.organizePhone(e,t):"",i=e.contacts&&e.contacts.emails[0]?`${e.contacts.emails[0].email}`:"",this.getStatus(e.employeeStatus,e.id),this.contacts[e.id]={phone:t,email:i}})}organizePhone(e,t){return e.contacts.phones[0].ddd?`${e.contacts.phones[0].ddd} ${e.contacts.phones[0].number}`.replace("undefined","-"):`${e.contacts.phones[0].number}`.replace("undefined","-")}translateString(e){return this.translateService.getI18n(e)}getTableColumns(){return(0,v.mG)(this,void 0,void 0,function*(){this.columns=[],this.columns.push({property:this.collumnName,label:(yield this.translateString("l-name")).toString(),type:"columnTemplate",width:this.canViewSalary?this.registryProps.visible?"25%":"30%":"35%"}),this.columns.push({property:"branchName",label:(yield this.translateString("l-branch")).toString(),width:this.canViewSalary?this.registryProps.visible?"18%":"23%":"25%"}),this.registryProps.visible&&this.columns.push({property:"registry",label:(yield this.translateString("l-registry")).toString(),width:this.canViewSalary?"10%":"15%"}),this.columns.push({property:"admissionDate",label:(yield this.translateString("l-admission")).toString(),type:"string",width:this.canViewSalary?"12%":"15%"}),this.canViewSalary&&(this.columns.push({property:"salary",label:(yield this.translateString("l-salary")).toString(),width:"13%",type:"columnTemplate"}),this.columns.push({property:"salaryDate",label:(yield this.translateString("l-salaryDate")).toString(),type:"string",width:"12%"})),this.columns.push({property:this.collumnEmployeeStatus,label:(yield this.translateString("l-status")).toString(),type:"columnTemplate",width:"10%"})})}getTableActions(){return(0,v.mG)(this,void 0,void 0,function*(){this.tableActions=[],this.salaryHistoryVisible&&this.tableActions.push({action:this.openSalaryHistory.bind(this),label:(yield this.translateString("im-salaryHistoryLong")).toString(),icon:"po-icon ico-dollar-sign"}),this.timesheetVisible&&this.tableActions.push({action:this.openClockings.bind(this),label:(yield this.translateString("im-timesheet")).toString(),icon:"po-icon po-icon-clock"}),this.paymentsIsVisible&&this.tableActions.push({action:this.openPaymentSummary.bind(this),label:(yield this.translateString("im-paymentsLong")).toString(),icon:"po-icon po-icon-wallet"}),this.medicalVisible&&this.tableActions.push({action:this.openMedicalCertificate.bind(this),label:(yield this.translateString("l-medical-certificate")).toString(),icon:"po-icon icon-medical-briefcase"}),this.vacationVisible&&this.tableActions.push({action:this.openVacation.bind(this),label:(yield this.translateString("l-vacation")).toString(),icon:"po-icon ico-sun"}),this.allowanceVisible&&this.tableActions.push({action:this.openAllowancesRequest.bind(this),label:(yield this.translateString("l-request-allowance")).toString(),icon:"po-icon po-icon-document"}),this.shiftsVisible&&this.tableActions.push({action:this.openShiftsRequest.bind(this),label:(yield this.translateString("l-view-work-shifts")).toString(),icon:"po-icon po-icon-clock"}),this.overtimeHoursVisible&&this.tableActions.push({action:this.openOvertimeHours.bind(this),label:(yield this.translateString("im-overtime-hours")).toString(),icon:"po-icon ico-overtime"}),this.profileVisible&&this.tableActions.push({action:this.openProfile.bind(this),label:(yield this.translateString("l-profile")).toString(),icon:"po-icon po-icon-user"}),this.workLeaveVisible&&this.tableActions.push({action:this.openWorkLeave.bind(this),label:(yield this.translateString("l-work-leaves")).toString(),icon:"po-icon po-icon-user-delete"}),this.onCallVisible&&this.tableActions.push({action:this.openOnCall.bind(this),label:(yield this.translateString("l-on-call")).toString(),icon:"po-icon ico-on-call"}),this.tableActions.sort((e,t)=>e.label<t.label?-1:1)})}returnInitialValuesFilters(){return(0,v.mG)(this,void 0,void 0,function*(){const e=`savedFilter-${this.employeeSummaryLoggedUser.id}-teamManagement`;return yield Dt.getItem(e)})}getLabelsSearch(){return(0,v.mG)(this,void 0,void 0,function*(){this.literals={disclaimerGroupTitle:(yield this.translateString("l-filter-applied")).toString(),filterTitle:(yield this.translateString("l-advanced-search")).toString(),filterCancelLabel:(yield this.translateString("l-cancel-title")).toString(),filterConfirmLabel:(yield this.translateString("l-apply")).toString(),quickSearchLabel:(yield this.translateString("l-researched-value")).toString(),searchPlaceholder:(yield this.translateString("l-name-search")).toString()};let e=[];const t=yield this.returnInitialValuesFilters();let i=null,n=null,a=null,s=null;t&&kt.ZP.isErpDatasul()&&(i="undefined"!==t.hierarchicalLevel?t.hierarchicalLevel:null,n="undefined"!==t.name?t.name:null,a="undefined"!==t.registry?t.registry:null,s="undefined"!==t.branch?t.branch:null),yield this.getHierarchicalLevelsDTS(e),this.filters=[e.length>0?{property:"hierarchicalLevel",label:(yield this.translateString("l-level")).toString(),gridColumns:12,optionsMulti:!0,options:e,initValue:i}:{property:"hierarchicalLevel",label:(yield this.translateString("l-show-indirect-subordinates")).toString(),gridColumns:12,booleanTrue:(yield this.translateString("l-yes")).toString(),booleanFalse:(yield this.translateString("l-no")).toString(),type:"boolean",initValue:!1},{property:"name",label:(yield this.translateString("l-name")).toString(),gridColumns:12,initValue:n},{property:"registry",label:(yield this.translateString("l-registry")).toString(),gridColumns:this.isMobile?12:6,initValue:a},{property:"branch",label:(yield this.translateString("l-branch")).toString(),gridColumns:this.isMobile?12:6,initValue:s}]})}getHierarchicalLevelsDTS(e){return(0,v.mG)(this,void 0,void 0,function*(){kt.ZP.isErpDatasul()&&(yield this.absenceService.getHierarchicalLevels()).items.forEach(t=>{e.push({label:t.description,value:t.value})})})}getTranslateForStatusLabels(){return(0,v.mG)(this,void 0,void 0,function*(){this.translateStatusLabels.push(yield this.translateString("l-active")),this.translateStatusLabels.push(yield this.translateString("l-away")),this.translateStatusLabels.push(yield this.translateString("l-fired")),this.translateStatusLabels.push(yield this.translateString("l-vacation")),this.translateStatusLabels.push(yield this.translateString("l-transferred"))})}resetFilters(){this.teamParams.name=void 0,this.teamParams.registry=void 0,this.teamParams.branch=void 0,this.teamParams.page=1,this.teamParams.hierarchicalLevel=1}getFieldProperties(){return(0,v.mG)(this,void 0,void 0,function*(){(yield this.fieldProperties.getFieldProperties("teamManagement")).forEach(e=>{"registry"===e.field&&(this.registryProps=e)})})}isMobileCheck(){this.isMobile=this.windowUtilService.isMobileDevice()}sortBy(e){e.sort.type===r.MpO.Ascending?this.sortUp(e):e.sort.type===r.MpO.Descending&&this.sortDown(e)}sortUp(e){switch(e.sort.column.property){case"id":e.recursiveTable.items=[...e.recursiveTable.items.sort((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))];break;case"admissionDate":e.recursiveTable.items.sort(function(e,t){const i=at(e.admissionDate,"DD/MM/YYYY"),n=at(t.admissionDate,"DD/MM/YYYY");return at(i).isBefore(n)?-1:1});break;case"employeeStatus":e.recursiveTable.items.sort((e,t)=>this.getLabelForStatus(e.employeeStatus).localeCompare(this.getLabelForStatus(t.employeeStatus)));break;case"salary":e.recursiveTable.items.sort((e,t)=>e.salary.localeCompare(t.salary));break;case"salaryDate":e.recursiveTable.items.sort(function(e,t){const i=at(e.salaryDate,"DD/MM/YYYY"),n=at(t.salaryDate,"DD/MM/YYYY");return at(i).isBefore(n)?-1:1})}}sortDown(e){switch(e.sort.column.property){case"id":e.recursiveTable.items=[...e.recursiveTable.items.sort((e,t)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()))];break;case"admissionDate":e.recursiveTable.items.sort(function(e,t){const i=at(e.admissionDate,"DD/MM/YYYY"),n=at(t.admissionDate,"DD/MM/YYYY");return at(i).isAfter(n)?-1:1});break;case"employeeStatus":e.recursiveTable.items.sort((e,t)=>this.getLabelForStatus(t.employeeStatus).localeCompare(this.getLabelForStatus(e.employeeStatus)));break;case"salary":e.recursiveTable.items.sort((e,t)=>t.salary.localeCompare(e.salary));break;case"salaryDate":e.recursiveTable.items.sort(function(e,t){const i=at(e.salaryDate,"DD/MM/YYYY"),n=at(t.salaryDate,"DD/MM/YYYY");return at(i).isAfter(n)?-1:1})}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(O.C),d.Y36(Ut.H7),d.Y36(ne.H),d.Y36(ye._),d.Y36(Lt.O),d.Y36(oe.g),d.Y36(se.eL),d.Y36(D.F0),d.Y36(P.z),d.Y36(Zt.Lx),d.Y36(ae.c),d.Y36(Je.g),d.Y36(xt.D))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-team-management"]],viewQuery:function(e,t){if(1&e&&d.Gf(_t,5),2&e){let e;d.iGM(e=d.CRH())&&(t.recursiveTable=e.first)}},inputs:{showPageHader:"showPageHader"},decls:12,vars:20,consts:[["class","po-mt-xs-2 po-mt-sm-2 align-margin-header",4,"ngIf"],["class","po-pl-0 po-lg-3 po-md-12 po-xl-3","p-clean","true","id","input-collaborator","p-icon","po-icon po-icon-search","name","search-people","p-optional","false",3,"ngModel","p-placeholder","ngModelChange","p-change-model","keyup.enter",4,"ngIf"],[1,"header-divider","panel-body"],["container","","striped","false","sort","true",1,"po-table-custom-hide-text-overflow","po-hidden-xs","po-hidden-sm","po-hidden-md","po-visible-lg-12","po-visible-xl-12","po-p-0",3,"hideSelectAll","columns","items","loading","showMoreDisabled","actions","selectable","showExpand","getExpandedItems","getShowMoreDisabled","showMore","showMoreChild","expanded","allSelected","allUnselected","unselected","selected","sortBy"],["p-table-column-template","",3,"p-property"],[1,"panel-body","po-xs-12","po-hidden-lg","po-hidden-xl","po-visible-sm-12","po-visible-md-12"],[3,"employeesBreadcrumbTree","employeeClickEvent"],["class","po-mt-2 po-mb-2",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","next-periods",4,"ngIf"],[1,"po-mt-xs-2","po-mt-sm-2","align-margin-header"],["p-title"," ","appSavedFilters","teamManagement","appSavedFiltersQuickSearchProperty","name",1,"po-md-6","po-lg-6","po-xl-6","search-po",3,"p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search","savedFiltersChange"],[1,"po-offset-md-3","po-offset-lg-1","po-offset-xl-1","po-lg-5","po-xl-5","po-hidden-sm","po-hidden-md",3,"p-actions","p-disabled","p-label"],["p-clean","true","id","input-collaborator","p-icon","po-icon po-icon-search","name","search-people","p-optional","false",1,"po-pl-0","po-lg-3","po-md-12","po-xl-3",3,"ngModel","p-placeholder","ngModelChange","p-change-model","keyup.enter"],[1,"po-row"],[1,"avatar-small"],[1,"po-table-column-cell","po-table-body-ellipsis","cell-content","po-ml-1"],[1,"po-table-column-cel"],[1,"po-mt-2","po-mb-2"],[1,"po-mt-2"],[1,"employee-selected-name"],[1,"employee-result-number","pull-right"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"avatar-card","pull-left","inline"],[1,"aboutEmployee"],[1,"name"],["class","team-icon pull-right po-pr-2 po-icon po-icon-users",3,"click",4,"ngIf"],[1,"office"],["card-body","",1,"cardbody"],[1,"informations"],[1,"icon-email"],[1,"po-icon","po-icon-mail","float"],[4,"ngIf"],[1,"po-icon","po-icon-telephone","float"],[1,"actions"],["class","actions-button",4,"ngIf"],["class","po-sm-12",3,"click",4,"ngIf"],[1,"team-icon","pull-right","po-pr-2","po-icon","po-icon-users",3,"click"],[1,"actions-button"],[1,"action-icons-mobile","po-icon","po-icon-user-delete",3,"click"],[1,"action-icons-mobile","po-icon","icon-medical-briefcase",3,"click"],[1,"action-icons-mobile","po-icon","po-icon-wallet",3,"click"],[1,"action-icons-mobile","po-icon","ico-sun",3,"click"],[1,"action-icons-mobile","po-icon","ico-dollar-sign",3,"click"],[1,"action-icons-mobile","po-icon","ico-overtime",3,"click"],[1,"action-icons-mobile","po-icon","po-icon-user",3,"click"],[1,"action-icons-mobile","po-icon","po-icon-clock",3,"click"],[1,"action-icons-mobile","po-icon","ico-on-call",3,"click"],[1,"action-icons-mobile","po-icon","po-icon-document",3,"click"],[1,"po-sm-12",3,"click"],[1,"team-icon","pull-left","po-pb-1","po-pl-1","po-icon","po-icon-users"],[1,"direct-employees","po-pl-1"],[1,"team-icon","pull-right","po-icon","po-icon-arrow-right"],[1,"next-periods"],[1,"linkViewMore",3,"click"]],template:function(e,t){1&e&&(d.YNc(0,Qt,4,7,"div",0),d.YNc(1,Bt,2,4,"po-input",1),d.TgZ(2,"div",2),d.TgZ(3,"app-recursive-table",3),d.NdJ("showMore",function(){return t.viewMore()})("showMoreChild",function(e){return t.viewMoreChildren(e)})("expanded",function(e){return t.expanded(e)})("allSelected",function(){return t.dropdownButtonIsVisible=!0})("allUnselected",function(){return t.dropdownButtonIsVisible=!1})("unselected",function(){return t.checkRowsTable()})("selected",function(){return t.checkRowsTable()})("sortBy",function(e){return t.sortBy(e)}),d.YNc(4,Gt,5,3,"ng-template",4),d.YNc(5,zt,3,1,"ng-template",4),d.YNc(6,$t,3,1,"ng-template",4),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"app-breadcrumb-subordinate-tree",6),d.NdJ("employeeClickEvent",function(e){return t.selectEmployeeBreadcrumb(e)}),d.qZA(),d.YNc(9,Vt,12,12,"div",7),d.YNc(10,pi,35,23,"app-expansion-card",8),d.YNc(11,di,4,3,"div",9),d.qZA()),2&e&&(d.Q6J("ngIf",t.registryProps.visible),d.xp6(1),d.Q6J("ngIf",!t.registryProps.visible),d.xp6(2),d.Q6J("hideSelectAll",!t.onCallBatchVisible)("columns",t.columns)("items",t.items)("loading",t.loading)("showMoreDisabled",!t.hasNext)("actions",t.tableActions)("selectable",t.onCallBatchVisible)("showExpand",t.isShow.bind(t))("getExpandedItems",t.getExpandedItems)("getShowMoreDisabled",t.getShowMoreDisabled),d.xp6(1),d.Q6J("p-property",t.collumnName),d.xp6(1),d.Q6J("p-property",t.collumnSalary),d.xp6(1),d.Q6J("p-property",t.collumnEmployeeStatus),d.xp6(2),d.Q6J("employeesBreadcrumbTree",t.employeesTreeBreadcrumbToShow),d.xp6(1),d.Q6J("ngIf",t.employeesTreeBreadcrumbToShow.length>0),d.xp6(1),d.Q6J("ngForOf",t.employees)("ngForTrackBy",t.trackByFunction),d.xp6(1),d.Q6J("ngIf",t.hasNext))},directives:[n.O5,_t,r.UDu,Ht,n.sg,l.O6,Nt,r.fj8,r.xxV,a.JJ,a.On,re.c,r.zWL],pipes:[o.X$,ce.r,n.i8],styles:['span[_ngcontent-%COMP%]{align-self:center}.cell-content[_ngcontent-%COMP%]{display:flex;max-width:81%}@media screen and (min-width: 1500px){.cell-content[_ngcontent-%COMP%]{max-width:85%}}@media screen and (min-width: 490px){.align-margin-header[_ngcontent-%COMP%]{margin-top:-30px}}@media screen and (min-width: 491px){.search-po[_ngcontent-%COMP%]{margin-top:-26px}}.po-table-custom-hide-text-overflow[_ngcontent-%COMP%]{margin-top:-32px}.po-table-custom-hide-text-overflow[_ngcontent-%COMP%]   .po-table-body-ellipsis[_ngcontent-%COMP%]   .po-tooltip[_ngcontent-%COMP%]{display:none!important}.po-table-custom-hide-text-overflow[_ngcontent-%COMP%]   .po-table-body-ellipsis[_ngcontent-%COMP%]:not([ng-reflect-ng-switch="label"]):hover{white-space:normal!important;text-overflow:unset!important}.panel-body[_ngcontent-%COMP%]{padding-bottom:0;margin-top:-20px}.name[_ngcontent-%COMP%]{max-width:97%}.custom-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle!important;font-size:14px;line-height:1;text-align:left;height:60px!important;word-wrap:break-word;max-width:200px}.avatar-small[_ngcontent-%COMP%]{width:32px;height:32px}@media (min-width: 1025px) and (max-width: 1366px){.avatar-small[_ngcontent-%COMP%]{width:22px;height:22px}}.team-icon[_ngcontent-%COMP%]{color:#0c9abe;font-size:20px}[_nghost-%COMP%]     .po-widget{border:solid 1px #0c9abe;box-shadow:none;box-shadow:initial}.direct-employees[_ngcontent-%COMP%]{font-size:14px;font-weight:bold;color:#000}.next-periods[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe;cursor:pointer}[_nghost-%COMP%]     .po-container{margin-top:10px!important}.informations[_ngcontent-%COMP%]{padding:0 8px;margin-top:5px;width:100%;font-size:14px;float:left}.icon-email[_ngcontent-%COMP%]{margin-top:2px;margin-right:4px;float:left;color:#0c9abe}[_nghost-%COMP%]     .cardbody{margin-top:55px}[_nghost-%COMP%]     .aboutEmployee{padding-left:55px}.actions[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;color:#0c9abe;margin:15px 0;float:left}.actions-button[_ngcontent-%COMP%]{border:.8px solid #0c9abe;border-radius:5px;margin-left:10px;text-align:center;cursor:pointer;white-space:normal;width:65px;height:75px;font-size:10px;font-weight:bold}.action-icons-mobile[_ngcontent-%COMP%]{margin:6px 0;display:block;font-size:30px}.employee-result-number[_ngcontent-%COMP%]{font-size:12px;color:#8e8e93}.employee-selected-name[_ngcontent-%COMP%]{font-weight:bold}@media screen and (max-width: 320px){[_nghost-%COMP%]     .cardbody{padding-left:0}.informations[_ngcontent-%COMP%]{padding-left:63px}}[_nghost-%COMP%]     .po-input{height:44px!important}[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important;height:0px!important}[_nghost-%COMP%]     div.po-page div.po-page-header{padding-left:0;padding-right:0}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:block}}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page{display:block;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-bottom:0}}[_nghost-%COMP%]     .po-table-header-block{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;float:left}[_nghost-%COMP%]     .po-table-header-icon-unselected:after{float:none}[_nghost-%COMP%]     .po-table-header-icon-descending:after{float:none}[_nghost-%COMP%]     .po-table-header-icon-ascending:after{float:none}[_nghost-%COMP%]     .po-table-column-manager-footer .po-button{border:none!important}[_nghost-%COMP%]     .po-button{height:44px!important}[_nghost-%COMP%]     .po-page-list-filter-search-link{font-size:15px!important}[_nghost-%COMP%]     .po-field-container{margin-top:10px}[_nghost-%COMP%]     .po-page-header{padding:16px}[_nghost-%COMP%]     .po-page-list-filter-wrapper{float:left}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:0!important}}[_nghost-%COMP%]     .po-page-list-operations{display:flow-root}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page-list-actions{float:right;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .po-page-list-actions .po-button{margin-right:0}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-bottom:0!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-actions{margin-bottom:0;margin-top:0}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}[_nghost-%COMP%]     .po-dropdown{margin-left:59%;margin-top:.9%}@media screen and (min-width: 720px){[_nghost-%COMP%]     .po-disclaimer-group{margin-bottom:18px}}']}),e})();var ui=(()=>{return(e=ui||(ui={}))[e.managementOfDelaysAndAbsences=0]="managementOfDelaysAndAbsences",e[e.teamManagement=1]="teamManagement",e[e.teamManagementOnCallRequest=2]="teamManagementOnCallRequest",ui;var e})();class mi{constructor(e,t){this.currentTab=e,this.viewIsMobile=t}get pageHeaderTitle(){if(!this.viewIsMobile)return"l-teamManagement";switch(this.currentTab){case ui.teamManagement:return"l-teamManagement";case ui.managementOfDelaysAndAbsences:return"im-management-of-delays-and-absences-short";case ui.teamManagementOnCallRequest:return"im-management-request-on-call-short";default:return""}}get currentTabIsTeamManagement(){return this.currentTab===ui.teamManagement}get currentTabIsManagementOfDelaysAndAbsences(){return this.currentTab===ui.managementOfDelaysAndAbsences}get currentTabIsTeamManagementOnCallRequest(){return this.currentTab===ui.teamManagementOnCallRequest}}function gi(e,t){if(1&e&&(d._UZ(0,"app-page-header",3),d.ALo(1,"translate")),2&e){const e=d.oxw().ngIf,t=d.oxw();d.s9C("pageTitle",d.lcZ(1,2,e.pageHeaderTitle)),d.Q6J("backIsVisible",t.viewIsMobile)}}function fi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"po-tab",6),d.NdJ("p-click",function(){return d.CHM(e),d.oxw(3).navigateTo("teamManagement/managementOfDelaysAndAbsences")}),d.ALo(1,"translate"),d.qZA()}if(2&e){const e=d.oxw(2).ngIf;d.s9C("p-label",d.lcZ(1,2,"im-management-of-delays-and-absences-short")),d.Q6J("p-active",e.currentTabIsManagementOfDelaysAndAbsences)}}function bi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"po-tab",6),d.NdJ("p-click",function(){return d.CHM(e),d.oxw(3).navigateTo("teamManagement/managementRequestOnCall")}),d.ALo(1,"translate"),d.qZA()}if(2&e){const e=d.oxw(2).ngIf;d.s9C("p-label",d.lcZ(1,2,"l-on-calls")),d.Q6J("p-active",e.currentTabIsTeamManagementOnCallRequest)}}function vi(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"po-tabs",5),d.TgZ(2,"po-tab",6),d.NdJ("p-click",function(){return d.CHM(e),d.oxw(2).navigateTo("teamManagement")}),d.ALo(3,"translate"),d.qZA(),d.YNc(4,fi,2,4,"po-tab",7),d.YNc(5,bi,2,4,"po-tab",7),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().ngIf,t=d.oxw();d.xp6(2),d.s9C("p-label",d.lcZ(3,4,"l-teamManagement-overview")),d.Q6J("p-active",e.currentTabIsTeamManagement),d.xp6(2),d.Q6J("ngIf",t.haveManagementOfDelaysAndAbsencesPermission),d.xp6(1),d.Q6J("ngIf",t.haveTeamManagementOnCallRequestPermission)}}function yi(e,t){if(1&e&&(d.ynx(0),d.YNc(1,gi,2,4,"app-page-header",1),d.YNc(2,vi,6,6,"div",2),d._UZ(3,"router-outlet"),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",e.visibility),d.xp6(1),d.Q6J("ngIf",!e.viewIsMobile&&(e.haveManagementOfDelaysAndAbsencesPermission||e.haveTeamManagementOnCallRequestPermission))}}const wi=[{path:"",component:(()=>{class e extends _e.R{constructor(e,t){super(),this.permissionSelector=e,this.router=t,this.visibility=!0,this.haveManagementOfDelaysAndAbsencesPermission=!1,this.haveTeamManagementOnCallRequestPermission=!1,this.stateSubject=new De.xQ,this.state$=this.stateSubject.asObservable(),this.subscribeToViewMobile(),this.setCurrentRouteFromUrl()}ngOnInit(){super.ngOnInit(),this.getPermissions()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe(),this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.viewIsMobileSubscription&&this.viewIsMobileSubscription.unsubscribe(),this.stateSubject.complete()}navigateTo(e){this.router.navigateByUrl(e)}getPermissions(){this.permissionSubscription=this.permissionSelector.permissions$.subscribe(e=>{void 0!==e.managementOfDelaysAndAbsences&&(this.haveManagementOfDelaysAndAbsencesPermission=e.managementOfDelaysAndAbsences),void 0!==e.teamManagementOnCallRequest&&(this.haveTeamManagementOnCallRequestPermission=e.teamManagementOnCallRequest)})}subscribeToViewMobile(){this.viewIsMobileSubscription=this.viewIsMobile$.subscribe(e=>{this.stateSubject.next(new mi(this.currentTab,e))})}setCurrentRouteFromUrl(){this.routerEventsSubscription=this.router.events.subscribe(e=>{if(e instanceof D.m2){switch(e.urlAfterRedirects){case"/teamManagement/overview":this.currentTab=ui.teamManagement;break;case"/teamManagement/managementOfDelaysAndAbsences":this.currentTab=ui.managementOfDelaysAndAbsences;break;case"/teamManagement/managementRequestOnCall":this.currentTab=ui.teamManagementOnCallRequest;break;default:this.currentTab=null}this.stateSubject.next(new mi(this.currentTab,this.viewIsMobile))}})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(se.eL),d.Y36(D.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-team-management-tabs"]],features:[d.qOj],decls:2,vars:3,consts:[[4,"ngIf"],[3,"backIsVisible","pageTitle",4,"ngIf"],["class","panel-body no-padding tabs",4,"ngIf"],[3,"backIsVisible","pageTitle"],[1,"panel-body","no-padding","tabs"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-mb-3"],[3,"p-active","p-label","p-click"],[3,"p-active","p-label","p-click",4,"ngIf"]],template:function(e,t){1&e&&(d.YNc(0,yi,4,2,"ng-container",0),d.ALo(1,"async")),2&e&&d.Q6J("ngIf",d.lcZ(1,1,t.state$))},directives:[n.O5,D.lC,Ye.q,r.Gv4,r.w8F],pipes:[n.Ov,o.X$],styles:[".tabs[_ngcontent-%COMP%]{height:52px}"]}),e})(),canActivate:[L.P],children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:hi,canActivate:[L.P]},{path:"managementOfDelaysAndAbsences",component:fe,canActivate:[L.P]},{path:"managementRequestOnCall",component:Pe,canActivate:[L.P]}]},{path:"timesheet/clockings/:employeeId",loadChildren:()=>Promise.all([i.e(422),i.e(443),i.e(592),i.e(517)]).then(i.bind(i,2517)).then(e=>e.ClockingsModule),canActivate:[L.P],data:{management:!0}},{path:"payment/payment-detail",loadChildren:()=>i.e(626).then(i.bind(i,69626)).then(e=>e.PaymentsModule),canActivate:[L.P],data:{management:!0}},{path:"timesheet/overtimeHours",loadChildren:()=>i.e(78).then(i.bind(i,86078)).then(e=>e.OvertimeHoursModule),canActivate:[L.P],data:{management:!0}},{path:"health/medicalCertificate",component:N.O,canActivate:[L.P],data:{management:!0}},{path:"profile",component:F.d,canActivate:[L.P],data:{management:!0}},{path:"payment/salaryHistory",loadChildren:()=>i.e(722).then(i.bind(i,28722)).then(e=>e.SalaryHistoryModule),canActivate:[L.P],data:{management:!0}},{path:"payments",loadChildren:()=>i.e(626).then(i.bind(i,69626)).then(e=>e.PaymentsModule),canActivate:[L.P],data:{management:!0}},{path:"shifts",component:wt,canActivate:[L.P],data:{management:!0}},{path:"workLeave",loadChildren:()=>i.e(739).then(i.bind(i,57739)).then(e=>e.WorkLeaveModule),canActivate:[L.P],data:{management:!0}},{path:"timesheet/allowances/:employeeId",loadChildren:()=>i.e(970).then(i.bind(i,76970)).then(e=>e.AllowanceListRoutingModule),canActivate:[L.P],data:{management:!0}},{path:"timesheet/onCall",loadChildren:()=>i.e(807).then(i.bind(i,48807)).then(e=>e.OnCallRoutingModule),canActivate:[L.P],data:{management:!0}},{path:"managementRequestOnCall/visualize",component:Ie.e,canActivate:[L.P]},{path:"vacation",component:$.n,canActivate:[L.P],data:{management:!0},children:[{path:"request",component:z.w,canActivateChild:[L.P],children:[{path:"",redirectTo:"init",pathMatch:"full"},{path:"init",component:H.j},{path:"days",component:Y.d},{path:"vacationBonus",component:G.G},{path:"sellDays",component:B.$},{path:"confirmRequest",component:J.U},{path:"hasAdvance",component:E.d},{path:"requestDone",component:Q.I}]}]},{path:"absenceManager/vacation",component:$.n,canActivate:[L.P],data:{management:!0},children:[{path:"request",component:z.w,canActivateChild:[L.P],children:[{path:"",redirectTo:"init",pathMatch:"full"},{path:"init",component:H.j},{path:"days",component:Y.d},{path:"vacationBonus",component:G.G},{path:"sellDays",component:B.$},{path:"confirmRequest",component:J.U},{path:"hasAdvance",component:E.d},{path:"requestDone",component:Q.I}]}]},{path:"vacation/receipt",component:U.g,canActivate:[L.P]},{path:"vacation/details",loadChildren:()=>i.e(261).then(i.bind(i,40261)).then(e=>e.VacationDetailsModule),canActivate:[L.P]},{path:"absenceManager/vacation/receipt",component:U.g,canActivate:[L.P]},{path:"absenceManager/vacation/details",loadChildren:()=>i.e(261).then(i.bind(i,40261)).then(e=>e.VacationDetailsModule),canActivate:[L.P]}];let xi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[D.Bz.forChild(wi)],D.Bz]}),e})();var Zi=i(97427);let Ci=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,xi,p.q,q,k,Zi.F]]}),e})()}}]);