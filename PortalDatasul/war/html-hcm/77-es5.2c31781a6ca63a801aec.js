!function(){"use strict";function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,i,n){var o=t(e,i);if(o){var s=Object.getOwnPropertyDescriptor(o,i);return s.get?s.get.call(arguments.length<3?e:n):s.value}}).apply(this,arguments)}function t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var o=c(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[77],{43077:function(t,n,s){s.r(n),s.d(n,{ClockingGeoModule:function(){return ct}});var l,p=s(38583),d=s(56365),g=s(42779),u=s(59708),f=s(98348),h=s(37716),m="timesheet",v=((l=function(){function e(t){a(this,e),this.serviceGeneric=t}return r(e,[{key:"getClockingsGeo",value:function(e,t){var i=[];this.serviceGeneric.parseParams(i,"page",t),this.serviceGeneric.parseParams(i,"pageSize",10);var n="".concat(m,"/clockingsGeolocation/").concat(f.ZP.checkIfEncode(e));return this.serviceGeneric.search(n,i)}},{key:"save",value:function(e,t){return this.serviceGeneric.post("".concat(m,"/clockingsGeolocation/").concat(e),t,!1)}},{key:"update",value:function(e,t){var i="".concat(m,"/clockingsGeolocation/").concat(f.ZP.checkIfEncode(e));return this.serviceGeneric.put(i,t)}},{key:"getDisconsiderReasons",value:function(){return this.serviceGeneric.get("".concat(m,"/disconsiderReasons")).then(function(e){return e.items})}},{key:"getCurrentTime",value:function(e,t,i){var n="".concat(m,"/clockingsGeolocation/currentTime/").concat(e,"/").concat(t,"/"),o=[];return o.timezone=i,this.serviceGeneric.search(n,o)}},{key:"getTodayClockings",value:function(e,t,i){return this.serviceGeneric.get("".concat(m,"/todayClockings/").concat(e,"/").concat(t,"/").concat(i,"/")).then(function(e){return e.items})}}]),e}()).\u0275fac=function(e){return new(e||l)(h.LFG(u.M))},l.\u0275prov=h.Yz7({token:l,factory:l.\u0275fac}),l),x=s(95987),k=s(51110),b=s(64762),w=s(44956),y=s(92340),C=((C||(C={})).DirectionEnum={Entry:"entry",Exit:"exit",Independ:"independ"},C),M=s(81483),Z=s(88044),_=s(14833),O=s(81059),A=s(16851),P=s(11524),T=s(91704),G=s(65241),q=["divSwipeButton"];function I(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"div",7),h._uU(2),h.qZA(),h.TgZ(3,"div",8),h._uU(4),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(2),h.Oqu(i.swipeButtonText),h.xp6(2),h.hij("< ",i.swipeButtonTextTip," >")}}function U(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"div",9),h._uU(2),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(2),h.Oqu(i.swipeButtonExecutionText)}}function E(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"div",10),h._UZ(2,"span",11),h._uU(3),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(3),h.hij("\xa0 ",i.swipeButtonOperationSuccessText," ")}}function D(e,t){if(1&e&&(h.TgZ(0,"div",6),h.TgZ(1,"div",12),h._UZ(2,"span",13),h._uU(3),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(3),h.hij("\xa0 ",i.swipeButtonOperationErrorText," ")}}var S=function(e,t){return{"swipe-boundary-actived":e,"no-boundary":t}},J=function(e,t,i,n){return{"swipe-actived":e,"no-animate":t,"swipe-success":i,"swipe-error":n}},V=function(){var e=function(){function e(t){a(this,e),this.appTranslateService=t,this.onHold=new h.vpe,this.onSwipeDone=new h.vpe,this._swipeActived=!1,this._swipeBlocked=!1,this._defaultMessageVisible=!0,this._errorMessageVisible=!1,this._successMessageVisible=!1,this._executionMessageVisible=!1,this._initialPaddingBoundarySwipeButton=0,this._swipeButtonCenterCoordinates={top:0,left:0},this._lastMovement={deltaX:0,deltaY:0,distance:0,direction:1},this._swipeButtonText="TEXT",this._swipeButtonTextTip="TIP",this._swipeButtonExecutionText="EXECUTION",this._swipeButtonOperationSuccessText="SUCCESS",this._swipeButtonOperationErrorText="ERROR"}return r(e,[{key:"ngOnInit",value:function(){this._initialPaddingBoundarySwipeButton=this.getBoundryPaddingValue(),this.defineTextComponent(this.text,this.successMessage,this.errorMessage)}},{key:"ngAfterViewInit",value:function(){this.startEventListenersToSwipeButton()}},{key:"swipeActived",get:function(){return this._swipeActived},set:function(e){this._swipeActived=e}},{key:"swipeBlocked",get:function(){return this._swipeBlocked}},{key:"defaultMessageVisible",get:function(){return this._defaultMessageVisible}},{key:"defaultExecutionVisible",get:function(){return this._executionMessageVisible}},{key:"errorMessageVisible",get:function(){return this._errorMessageVisible}},{key:"successMessageVisible",get:function(){return this._successMessageVisible}},{key:"swipeButtonText",get:function(){return this._swipeButtonText}},{key:"swipeButtonTextTip",get:function(){return this._swipeButtonTextTip}},{key:"swipeButtonExecutionText",get:function(){return this._swipeButtonExecutionText}},{key:"swipeButtonOperationSuccessText",get:function(){return this._swipeButtonOperationSuccessText}},{key:"swipeButtonOperationErrorText",get:function(){return this._swipeButtonOperationErrorText}},{key:"onPan",value:function(e){e.preventDefault(),this.doSwipeAnimation(e)}},{key:"onPanEnd",value:function(e){e.preventDefault(),this.swipeBlocked||(this.swipeActived=!1,this.resetSwipe())}},{key:"onPress",value:function(e){e.preventDefault(),this.swipeActived=!0,this.onHold.emit()}},{key:"onPressUp",value:function(e){e.preventDefault(),this.swipeBlocked||(this.swipeActived=!1,this.resetSwipe())}},{key:"doAnimationSuccess",value:function(){this.swipeActived&&this.showSuccessMessage(),this.doAnimationReset()}},{key:"doAnimationError",value:function(){this.swipeActived&&this.showErrorMessage(),this.doAnimationReset()}},{key:"doAnimationReset",value:function(){var e=this;setTimeout(function(t){e.blockSwipe(!1),e.resetSwipe()},3e3)}},{key:"cancelExecution",value:function(){this.blockSwipe(!1),this.resetSwipe()}},{key:"doAnimationExecution",value:function(){this.swipeActived&&(this.showExecutionMessage(),this.blockSwipe(!0))}},{key:"swipeDone",value:function(){this.doAnimationExecution(),this.onSwipeDone.emit()}},{key:"doSwipeAnimation",value:function(e){var t=T(".swipe-boundary");this.swipeActived&&!this.swipeBlocked&&(e.distance-this._lastMovement.distance>0?this.getBoundryPaddingValue()>0?t.css("padding","-="+(e.distance-this._lastMovement.distance)):this.swipeDone():e.distance-this._lastMovement.distance<0&&(this.getBoundryPaddingValue()<this._initialPaddingBoundarySwipeButton?t.css("padding","+="+-1*(e.distance-this._lastMovement.distance)):t.css("padding",this._initialPaddingBoundarySwipeButton))),this._lastMovement.deltaX=e.deltaX,this._lastMovement.deltaY=e.deltaY,this._lastMovement.distance=e.distance,this._lastMovement.direction=e.direction}},{key:"getBoundryPaddingValue",value:function(){return Number(T(".swipe-boundary").css("padding").replace("px",""))}},{key:"resetSwipe",value:function(){if(!this.swipeBlocked){var e=T(".swipe-boundary");e&&e.css("padding",this._initialPaddingBoundarySwipeButton),this.swipeActived=!1,this.showDefaultMessage()}}},{key:"blockSwipe",value:function(e){this._swipeBlocked=e}},{key:"defineTextComponent",value:function(e,t,i){var n=this;this.appTranslateService.getI18n("l-hold-and-drag").then(function(e){e&&(n._swipeButtonTextTip=e)}),this.appTranslateService.getI18n("l-processing").then(function(e){e&&(n._swipeButtonExecutionText=e)}),e&&this.appTranslateService.getI18n(e).then(function(t){n._swipeButtonText=t||e}),t&&this.appTranslateService.getI18n(t).then(function(e){n._swipeButtonOperationSuccessText=e||t}),i&&this.appTranslateService.getI18n(i).then(function(e){n._swipeButtonOperationErrorText=e||i})}},{key:"showSuccessMessage",value:function(){this._executionMessageVisible=!1,this._successMessageVisible=!0,this._errorMessageVisible=!1,this._defaultMessageVisible=!1}},{key:"showErrorMessage",value:function(){this._executionMessageVisible=!1,this._successMessageVisible=!1,this._errorMessageVisible=!0,this._defaultMessageVisible=!1}},{key:"showDefaultMessage",value:function(){this._executionMessageVisible=!1,this._successMessageVisible=!1,this._errorMessageVisible=!1,this._defaultMessageVisible=!0}},{key:"showExecutionMessage",value:function(){this._successMessageVisible=!1,this._errorMessageVisible=!1,this._defaultMessageVisible=!1,this._executionMessageVisible=!0}},{key:"startEventListenersToSwipeButton",value:function(){var e=this,t=new P(this.swipeButton.nativeElement);t.get("pan").set({direction:P.DIRECTION_ALL}),t.on("pan",function(t){return e.onPan(t)}),t.on("panend",function(t){return e.onPanEnd(t)}),t.on("press",function(t){return e.onPress(t)}),t.on("pressup",function(t){return e.onPressUp(t)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(G.g))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-swipe-button"]],viewQuery:function(e,t){var i;(1&e&&h.Gf(q,5),2&e)&&(h.iGM(i=h.CRH())&&(t.swipeButton=i.first))},inputs:{text:"text",errorMessage:"errorMessage",successMessage:"successMessage"},outputs:{onHold:"onHold",onSwipeDone:"onSwipeDone"},decls:9,vars:14,consts:[[1,"po-row","po-sm-12","po-md-12","po-lg-12","po-xl-12","po-text-center"],[1,"container-swipe-button"],[1,"swipe-boundary",3,"ngClass"],[1,"swipe-button",3,"ngClass"],["divSwipeButton",""],["class","swipe-button-text",4,"ngIf"],[1,"swipe-button-text"],["id","div-swipeButtonText",1,"text"],["id","div-swipeButtonTextTip",1,"tip-text","highlight"],[1,"text"],["id","div-swipeButtonOperationSuccessText",1,"text"],[1,"glyphicon","glyphicon-ok"],["id","div-swipeButtonOperationErrorText",1,"text"],[1,"glyphicon","glyphicon-remove"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3,4),h.YNc(5,I,5,2,"div",5),h.YNc(6,U,3,1,"div",5),h.YNc(7,E,4,1,"div",5),h.YNc(8,D,4,1,"div",5),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("ngClass",h.WLB(6,S,t.swipeActived,t.swipeBlocked)),h.xp6(1),h.Q6J("ngClass",h.l5B(9,J,t.swipeActived,t.swipeActived,t.successMessageVisible,t.errorMessageVisible)),h.xp6(2),h.Q6J("ngIf",t.defaultMessageVisible),h.xp6(1),h.Q6J("ngIf",t.defaultExecutionVisible),h.xp6(1),h.Q6J("ngIf",t.successMessageVisible),h.xp6(1),h.Q6J("ngIf",t.errorMessageVisible))},directives:[p.mk,p.O5],styles:[".container-swipe-button[_ngcontent-%COMP%]{width:276px;display:inline-block;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-boundary[_ngcontent-%COMP%]{width:100%;border-radius:100%;padding:4em;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-boundary-actived[_ngcontent-%COMP%]{border:2px dotted #0c9abe;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-actived[_ngcontent-%COMP%]{background-color:#0b89a5!important}.swipe-button[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;height:0;padding:50% 0;border-radius:50%;background:#0c9abe;color:#fff;text-align:center;transition:all .3s ease-in;-webkit-animation:pulse 2s infinite;animation:pulse 2s infinite;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-success[_ngcontent-%COMP%]{background-color:#05aa5d!important}.swipe-error[_ngcontent-%COMP%]{background-color:#b12a2a!important}.swipe-success[_ngcontent-%COMP%]   .swipe-button-text[_ngcontent-%COMP%], .swipe-error[_ngcontent-%COMP%]   .swipe-button-text[_ngcontent-%COMP%]{margin-top:-1em}.swipe-button-text[_ngcontent-%COMP%]{margin-top:-1.4em;position:relative}.swipe-button-text[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.4em;color:#fff}.swipe-button-text[_ngcontent-%COMP%]   .tip-text[_ngcontent-%COMP%]{color:#8ecff0;font-size:.8em}.no-animate[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important}.no-boundary[_ngcontent-%COMP%]{border:none!important}@media (max-width: 480px){.swipe-boundary[_ngcontent-%COMP%]{padding:4em}}@-webkit-keyframes pulse{0%{-webkit-box-shadow:0 0 0 0 rgba(11,154,188,.4)}70%{-webkit-box-shadow:0 0 0 50px rgba(11,154,188,0)}to{-webkit-box-shadow:0 0 0 0 rgba(11,154,188,0)}}@keyframes pulse{0%{box-shadow:0 0 rgba(11,154,188,.4)}70%{box-shadow:0 0 0 50px rgba(11,154,188,0)}to{box-shadow:0 0 rgba(11,154,188,0)}}.highlight[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}@-webkit-keyframes blinker{0%{opacity:.7;color:#fff}50%{opacity:.4;color:#fff}to{opacity:.7;color:#fff}}@keyframes blinker{0%{opacity:.7;color:#fff}50%{opacity:.4;color:#fff}to{opacity:.7;color:#fff}}"]}),e}(),L=s(68014),B=s(33224),N=s(84479),R=s(96054),Q=s(29790),z=s(11530),Y=s(37503),j=s(32268),F=s(18648),H=["map"],$=["swipeButtonClockingRegister"],X=["addressElement"];function K(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"app-swipe-button",12,13),h.NdJ("onSwipeDone",function(){return h.CHM(i),h.oxw().save()}),h.qZA()}}function W(e,t){if(1&e&&(h.TgZ(0,"div",14),h.TgZ(1,"span",15),h._uU(2),h.qZA(),h.TgZ(3,"span",16),h._uU(4),h.ALo(5,"utcDate"),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(2),h.Oqu(i.clock),h.xp6(2),h.Oqu(h.xi3(5,2,i.date,"longDate"))}}function ee(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",17),h._UZ(1,"div",18),h.TgZ(2,"div",19),h.TgZ(3,"strong",20),h._uU(4),h.qZA(),h.TgZ(5,"span",21),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.qZA(),h.TgZ(8,"span",22),h.NdJ("click",function(){return h.CHM(i),h.oxw(),h.MAs(9).open()}),h.qZA(),h.qZA()}if(2&e){var n=h.oxw();h.xp6(4),h.Oqu(n.lastClockingHour),h.xp6(2),h.Oqu(h.lcZ(7,2,n.lastClockingDirection))}}function te(e,t){1&e&&(h.TgZ(0,"div",29),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"l-location-near-address")," "))}function ie(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"po-button",30),h.NdJ("click",function(){return h.CHM(i),h.oxw(2).checkLocation()}),h.ALo(1,"translate"),h.qZA()}2&e&&h.s9C("p-label",h.lcZ(1,1,"l-reload"))}var ne=function(e){return{"address-container-without-clocking":e}};function oe(e,t){if(1&e&&(h.TgZ(0,"div",23,24),h._UZ(2,"img",25),h.YNc(3,te,3,3,"div",26),h.TgZ(4,"div",27),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.YNc(7,ie,2,3,"po-button",28),h.qZA()),2&e){var i=h.oxw();h.Q6J("ngClass",h.VKq(8,ne,!i.hasTodayClockings())),h.xp6(2),h.Q6J("src",i.getImagePointer(),h.LSH),h.xp6(1),h.Q6J("ngIf",i.geolocationIsAvailable),h.xp6(1),h.Q6J("ngClass",i.getClassMessage()),h.xp6(1),h.hij(" ",h.lcZ(6,6,i.message)," "),h.xp6(2),h.Q6J("ngIf",!i.geolocationIsAvailable)}}function se(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",31),h._UZ(2,"div",32),h.TgZ(3,"div",33),h.TgZ(4,"strong",20),h._uU(5),h.ALo(6,"formatMillisecondsAsHour"),h.qZA(),h.TgZ(7,"span",21),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var i=t.$implicit,n=h.oxw();h.xp6(5),h.Oqu(h.lcZ(6,2,i.hour)),h.xp6(3),h.Oqu(h.lcZ(9,4,n.getDirection(i)))}}var ce=function(){var t=function(t){i(s,t);var n=o(s);function s(e,t,i,o,c,l,r,p,d,g,u,f){var h;return a(this,s),(h=n.call(this)).clockingGeoService=e,h.geolocationService=t,h.ionicUtilService=i,h.windowUtilService=o,h.notificationService=c,h.translateService=l,h.openStreetMapService=r,h.changeDetectRef=p,h.lastAccess=d,h.globals=g,h.ngZone=u,h.permissionSelector=f,h.showRegisterButton=!1,h.loadingClock=!0,h.setClockingGeolocationDefault(),h}return r(s,[{key:"ngOnInit",value:function(){e(c(s.prototype),"ngOnInit",this).call(this),this.checkLocation(),this.getTodayClockings(),this.setCountLastAccess()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.showRegisterButton=!0},5e3)}},{key:"ngOnDestroy",value:function(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}},{key:"setCountLastAccess",value:function(){var e=this;this.globals.getEmployeeSummary().then(function(t){e.lastAccess.setLastAccess(_.Ux,t.id)})}},{key:"getTodayClockings",value:function(){return(0,b.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clockingGeoService.getTodayClockings(y.N.loggedUser,this.clockingGeolocation.latitude.toString(),this.clockingGeolocation.longitude.toString());case 2:this.clockingsDay=e.sent,this.loadLastHourDirection();case 4:case"end":return e.stop()}},e,this)}))}},{key:"hasTodayClockings",value:function(){return!!(this.clockingsDay&&this.clockingsDay.length>0)}},{key:"loadLastHourDirection",value:function(){this.clockingsDay&&this.clockingsDay.length?(this.lastClockingHour=M.Em.getHoursByMilliseconds(this.clockingsDay.slice(-1)[0].hour),this.lastClockingDirection=this.getDirection(this.clockingsDay.slice(-1)[0])):(this.lastClockingHour=void 0,this.lastClockingDirection=void 0)}},{key:"getDirection",value:function(e){if(e){if(e.direction===C.DirectionEnum.Entry)return"l-entry";if(e.direction===C.DirectionEnum.Exit)return"l-output"}}},{key:"setClock",value:function(e,t,i){var n,o,s,c=this,a=!0;this.loadingClock=!0,this.clockingGeoService.getCurrentTime(e,t,i).then(function(e){o=e.actualTime,c.date=new Date(e.actualDate),c.loadingClock=!1}),this.ngZone.runOutsideAngular(function(){setInterval(function(){c.ngZone.run(function(){c.clock=M.Em.getHoursByMilliseconds(o),"00:00"===c.clock&&a&&(s=c.date.setDate(c.date.getDate()+1),(n=new Date(s)).getDay()===(new Date).getDay()&&(c.date=n),a=!1),o+=1e3})},1e3)})}},{key:"checkLocation",value:function(){var e=this;this.permissionSubscription=this.permissionSelector.permissions$.subscribe(function(t){var i;e.clockingLocalization=null===(i=null==t?void 0:t.clockingLocalization)||void 0===i||i,t&&(t.clockingLocalization||null==t.clockingLocalization)?e.windowUtilService.isWebView()?e.requestGeolocationPermission():e.findLocation():e.setClock("0","0",0)})}},{key:"findLocation",value:function(){this.windowUtilService.isWebView()?this.requestGeolocationDevice():this.requestGeolocationLocal()}},{key:"requestGeolocationDevice",value:function(){this.ionicUtilService.emit({args:{},type:Z.g.RequestGelocationCoordinates})}},{key:"requestGeolocationLocal",value:function(){var e=this;this.geolocationService.getPosition(function(t){e.findLocationSuccess(t)},function(t){e.findLocationError(t)})}},{key:"findLocationSuccess",value:function(e){this.geolocationIsAvailable=!0,this.setClockingGeolocation(e)}},{key:"findLocationError",value:function(e){this.geolocationIsAvailable=!1,this.message="l-location-unavailable",this.setClockingGeolocationDefault(!0),this.showGeolocationError(e.message)}},{key:"setClockingGeolocation",value:function(e){var t=new Date;this.clockingGeolocation={latitude:e.coords.latitude.toString(),longitude:e.coords.longitude.toString(),timezone:t.getTimezoneOffset()},this.setClock(this.clockingGeolocation.latitude,this.clockingGeolocation.longitude,this.clockingGeolocation.timezone),this.showUserPositionAddress(this.clockingGeolocation)}},{key:"setClockingGeolocationDefault",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.clockingGeolocation={date:new Date,hour:0,latitude:"0",longitude:"0",timezone:0},e&&this.setClock("0","0",0)}},{key:"save",value:function(){var e=this;this.clockingGeolocation.date=this.date,this.clockingGeolocation.hour=M.Em.getTotalMilliseconds(this.clock),this.clockingGeolocation.address=this.message,this.clockingGeoService.save(y.N.loggedUser,this.clockingGeolocation).then(function(){e.swipeButtonClockingRegister.doAnimationSuccess(),e.getTodayClockings(),e.setClock(e.clockingGeolocation.latitude,e.clockingGeolocation.longitude,e.clockingGeolocation.timezone)}).catch(function(){e.swipeButtonClockingRegister.doAnimationError()})}},{key:"showUserPositionAddress",value:function(e){var t=this;this.openStreetMapService.simpleReverseGeocoding(+e.longitude,+e.latitude).then(function(i){t.message=i,t.showRegisterButton=!0,t.map&&(t.map.resetMap(),t.map.loadMap(e.latitude,e.longitude,!1,.0015)),t.changeDetectRef.detectChanges()}).catch(function(e){t.showRegisterButton=!0,console.error("[openStreetMapService]",e)})}},{key:"showGeolocationError",value:function(e){var t=this;this.translateService.get(e).subscribe(function(e){t.notificationService.showNotification(e,w.ik9.Warning)})}},{key:"requestGeolocationPermission",value:function(){this.ionicUtilService.emit({args:{},type:Z.g.RequestGeolocationPermission})}},{key:"getClassMessage",value:function(){return this.geolocationIsAvailable?"all-address":"no-address"}},{key:"getImagePointer",value:function(){return this.geolocationIsAvailable?"assets/img/location-color.svg":"assets/img/location-gray.svg"}},{key:"callbackIonicExternalEvent",value:function(e){if(e.detail.event.type===Z.g.RequestGeolocationPermission&&(e.detail.success?(this.statusPermission=e.detail.returnObject.allow,this.statusPermission||this.setClock("0","0",0)):this.setClockingGeolocationDefault(!0),this.findLocation()),e.detail.event.type===Z.g.RequestGelocationCoordinates)if(e.detail.success){var t=e;t.detail.returnObject.error?this.findLocationError(t.detail.returnObject.error):this.findLocationSuccess(t.detail.returnObject.position)}else this.setClockingGeolocationDefault(!0);else this.setClock("0","0",0)}}]),s}(O.R);return t.\u0275fac=function(e){return new(e||t)(h.Y36(v),h.Y36(B._),h.Y36(Z.l),h.Y36(N.g),h.Y36(R.g),h.Y36(Q.sK),h.Y36(z.H),h.Y36(h.sBO),h.Y36(_.Lx),h.Y36(Y.O),h.Y36(h.R0b),h.Y36(L.eL))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-clocking-geo-register"]],viewQuery:function(e,t){var i;(1&e&&(h.Gf(H,5),h.Gf($,5),h.Gf(X,5)),2&e)&&(h.iGM(i=h.CRH())&&(t.map=i.first),h.iGM(i=h.CRH())&&(t.swipeButtonClockingRegister=i.first),h.iGM(i=h.CRH())&&(t.addressElement=i.first))},hostBindings:function(e,t){1&e&&h.NdJ("callbackIonicExternalEvent",function(e){return t.callbackIonicExternalEvent(e)},!1,h.evT)},features:[h.qOj],decls:13,vars:9,consts:[[1,"over-component","no-text-select"],[1,"map-finishing"],["id","btn-app-swipe-clocking-register","text","bt-clocking-register","errorMessage","l-message-register-clock-error","successMessage","l-message-register-clock-success",3,"onSwipeDone",4,"ngIf"],["class","div-clock po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],["class","clockings-container po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],["id","div-address","class","address-container",3,"ngClass",4,"ngIf"],[3,"hidden"],["map",""],["p-click-out","true","p-size","md",3,"p-title"],["modal",""],[1,"timeline"],[4,"ngFor","ngForOf"],["id","btn-app-swipe-clocking-register","text","bt-clocking-register","errorMessage","l-message-register-clock-error","successMessage","l-message-register-clock-success",3,"onSwipeDone"],["swipeButtonClockingRegister",""],[1,"div-clock","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"clock","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"long-date","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"clockings-container","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"indicator","timeline-status-none"],[1,"po-sm-6","po-md-6","po-lg-6","po-xl-6","clockings"],[1,"hour"],[1,"direction"],[1,"po-icon","po-icon-arrow-up","icn-clockings","pull-right",3,"click"],["id","div-address",1,"address-container",3,"ngClass"],["addressElement",""],["id","img-pointer",1,"appear-1",3,"src"],["class","near-location appear-2",4,"ngIf"],[1,"po-sm-5","po-md-5","po-lg-5","po-xl-5","message","appear-3",3,"ngClass"],["id","btn-reload","class","po-sm-6 po-md-6 po-lg-6 po-xl-5 reload",3,"p-label","click",4,"ngIf"],[1,"near-location","appear-2"],["id","btn-reload",1,"po-sm-6","po-md-6","po-lg-6","po-xl-5","reload",3,"p-label","click"],[1,"timeline-block"],[1,"timeline-status-indicator","timeline-status-none"],[1,"timeline-content"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"div",1),h.YNc(2,K,2,0,"app-swipe-button",2),h.YNc(3,W,6,5,"div",3),h.YNc(4,ee,9,4,"div",4),h.YNc(5,oe,8,10,"div",5),h._UZ(6,"app-opens-street-map",6,7),h.TgZ(8,"po-modal",8,9),h.ALo(10,"translate"),h.TgZ(11,"div",10),h.YNc(12,se,10,6,"div",11),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("ngIf",t.showRegisterButton),h.xp6(1),h.Q6J("ngIf",!t.loadingClock),h.xp6(1),h.Q6J("ngIf",t.hasTodayClockings()),h.xp6(1),h.Q6J("ngIf",t.clockingLocalization),h.xp6(1),h.Q6J("hidden",!t.geolocationIsAvailable),h.xp6(2),h.s9C("p-title",h.lcZ(10,7,"l-clockings-today")),h.xp6(4),h.Q6J("ngForOf",t.clockingsDay))},directives:[p.O5,A.Y,w.hmF,p.sg,V,p.mk,w.bOz],pipes:[Q.X$,j.$,F.P],styles:['.over-component[_ngcontent-%COMP%]{margin-left:-16px;width:100%;height:calc(97vh - 108px);margin-top:-52px;position:absolute;margin-right:8px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0;position:absolute;z-index:10;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.near-location[_ngcontent-%COMP%]{font-weight:bold;text-transform:uppercase;font-size:.6em;font-family:NunitoSans-bold;margin-top:0}.timeline-block[_ngcontent-%COMP%]{position:relative}.timeline[_ngcontent-%COMP%]{position:relative;margin-top:1em;margin-bottom:2em;margin-left:10px!important}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:34px;height:100%;width:1.5px;background:#9de6f9}.timeline-content[_ngcontent-%COMP%]{position:relative;margin-left:60px;margin-bottom:10px}.timeline-content[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.timeline-block[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.timeline-block[_ngcontent-%COMP%]:first-child{margin-top:0}.timeline-block[_ngcontent-%COMP%]:last-child{margin-bottom:0;margin-left:-8px}.address-container[_ngcontent-%COMP%]{z-index:10;display:block;height:50px;width:100%;padding:10px 16px 12px;left:0px;background-color:#fff;text-align:left}.clockings-container[_ngcontent-%COMP%]{z-index:11;display:block;height:50px;width:100%;left:0px;background-color:#fff;text-align:left;box-shadow:0 -2px 8px #e3e6f1}.clockings[_ngcontent-%COMP%]{position:absolute;top:8px;left:50px}.icn-clockings[_ngcontent-%COMP%]{color:#0c9abe;font-size:38px;padding-top:4px}.timeline-status-indicator[_ngcontent-%COMP%]{position:absolute;top:10px;left:35px;width:15px;height:15px;border-radius:50%;border-width:2px;background:#1b92be;text-align:center;color:#fff}.indicator[_ngcontent-%COMP%]{position:absolute;top:20px;left:35px;width:15px;height:15px;border-radius:50%;border-width:2px;background:#1b92be;text-align:center;color:#fff}.timeline-status-none[_ngcontent-%COMP%]{width:10px;height:10px;left:38px}.open-clockings[_ngcontent-%COMP%]{color:#0c9abe;display:table-cell;width:50px}.hour[_ngcontent-%COMP%]{font-size:22px;margin-right:10px}.direction[_ngcontent-%COMP%]{font-size:18px;color:#9da7a9}@media only screen and (max-width: 960px){.address-container[_ngcontent-%COMP%]{bottom:110px;position:fixed}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:60px}.clockings-container[_ngcontent-%COMP%]{bottom:60px;position:fixed}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:8%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}@media only screen and (min-width: 961px) and (max-width: 1366px){.over-component[_ngcontent-%COMP%]{width:100vw;height:100vh;text-align:center;position:fixed;margin-left:-16px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}.address-container[_ngcontent-%COMP%]{bottom:50px;position:fixed}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:fixed}.po-menu-mobile[_ngcontent-%COMP%]{z-index:unset}.po-clickable[_ngcontent-%COMP%]{z-index:2!important}h2[_ngcontent-%COMP%]{padding-left:40px!important;z-index:2!important}.po-menu-mobile[_ngcontent-%COMP%]{z-index:2!important}.over-component[_ngcontent-%COMP%]{z-index:0!important}}@media only screen and (min-width: 1367px){.over-component[_ngcontent-%COMP%]{width:calc(100vw - 256px);height:100vh;text-align:center;position:fixed;margin-left:-15px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.address-container[_ngcontent-%COMP%]{bottom:50px;position:absolute}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:absolute}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}@media only screen and (min-width: 1201px) and (max-width: 1502px){.over-component[_ngcontent-%COMP%]{width:calc(100vw - 256px);text-align:center;position:fixed;margin-left:-15px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.address-container[_ngcontent-%COMP%]{bottom:50px;position:absolute}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:absolute}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}.all-address[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:calc(100% - 32px);padding-right:15px}.reload[_ngcontent-%COMP%]{padding-right:40px;margin-top:-6px}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.reload[_ngcontent-%COMP%]{padding-right:15px;margin-top:-6px}}.message[_ngcontent-%COMP%]{padding:0}#img-pointer[_ngcontent-%COMP%]{float:left;width:20px;margin-right:5px;margin-top:0}.no-address[_ngcontent-%COMP%]{font-weight:bold}.map-finishing[_ngcontent-%COMP%]{height:50vh;width:100%;display:block;background:linear-gradient(to top,rgba(250,250,250,0) 0%,#fafafa 100%);z-index:1;position:absolute}@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3){.address-container[_ngcontent-%COMP%]{bottom:144px;padding:8px 16px}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:94px}.clockings-container[_ngcontent-%COMP%]{bottom:94px;position:fixed}.over-component[_ngcontent-%COMP%]{height:calc(97vh - 142px)}}']}),t}(),ae=s(57706);function le(e,t){if(1&e&&(h.TgZ(0,"h2",3),h._uU(1),h.qZA()),2&e){var i=h.oxw();h.xp6(1),h.Oqu(i.selectedEmployee.name)}}function re(e,t){1&e&&(h.TgZ(0,"div",4),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"l-clocking-no-employee"),"\n"))}function pe(e,t){1&e&&(h.TgZ(0,"div",4),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"l-clocking-select-employee"),"\n"))}function de(e,t){1&e&&(h.TgZ(0,"div",28),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.Oqu(h.lcZ(2,1,"l-disconsider")))}var ge=function(e){return{optionsDropUpDisconsider:e}};function ue(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"ul",29),h.TgZ(1,"li",30),h.NdJ("click",function(){h.CHM(i);var e=h.oxw().$implicit;return h.oxw(2).openClockingGeoUpdate(e,!1)}),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()}if(2&e){var n=h.oxw(),o=n.last,s=n.index,c=h.oxw(2);h.Q6J("ngClass",h.VKq(4,ge,c.isDropUp(o,s))),h.xp6(2),h.hij(" ",h.lcZ(3,2,"disconsider-the-clocking")," ")}}function fe(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"li",33),h.NdJ("click",function(){h.CHM(i);var e=h.oxw(2).$implicit;return h.oxw(2).openClockingGeoUpdate(e,!1)}),h._uU(1),h.ALo(2,"translate"),h.qZA()}2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"l-reconsider-the-clocking")," "))}var he=function(e){return{optionsDropUpReconsider:e}};function me(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"ul",31),h.YNc(1,fe,3,3,"li",32),h.TgZ(2,"li",30),h.NdJ("click",function(){h.CHM(i);var e=h.oxw().$implicit;return h.oxw(2).openClockingGeoUpdate(e,!0)}),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.qZA()}if(2&e){var n=h.oxw().last,o=h.oxw(2);h.Q6J("ngClass",h.VKq(5,he,n)),h.xp6(1),h.Q6J("ngIf",o.reconsiderAllowed),h.xp6(2),h.hij(" ",h.lcZ(4,3,"view-justification")," ")}}var ve=function(e){return{selected:e}},xe=function(e){return{disabled:e}};function ke(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"tr",14),h.NdJ("click",function(){var e=h.CHM(i).$implicit;return h.oxw(2).showClockingOnMap(e)}),h.TgZ(1,"td",15),h._UZ(2,"img",16),h.TgZ(3,"span",17),h.TgZ(4,"span",18),h._uU(5),h.ALo(6,"utcDate"),h.qZA(),h.YNc(7,de,3,3,"div",19),h.qZA(),h.qZA(),h.TgZ(8,"td",20),h.TgZ(9,"span",21),h._uU(10),h.qZA(),h.qZA(),h.TgZ(11,"td",22),h.TgZ(12,"div",23),h.TgZ(13,"div",24),h._UZ(14,"span",25),h.YNc(15,ue,4,6,"ul",26),h.YNc(16,me,5,7,"ul",27),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=t.$implicit,o=h.oxw(2);h.Q6J("ngClass",h.VKq(13,ve,o.isSelected(n))),h.xp6(2),h.Q6J("src",o.getImagePointer(n),h.LSH),h.xp6(2),h.Q6J("ngClass",o.diffClockings(n)),h.xp6(1),h.Oqu(h.xi3(6,10,n.date,"dd/MM")),h.xp6(2),h.Q6J("ngIf",n.disconsider),h.xp6(2),h.Q6J("ngClass",o.diffClockings(n)),h.xp6(1),h.Oqu(o.getHoursByMilliseconds(n.hour)),h.xp6(4),h.Q6J("ngClass",h.VKq(15,xe,!n.disconsider&&!o.disconsiderAllowed)),h.xp6(1),h.Q6J("ngIf",o.disconsiderAllowed&&!n.disconsider),h.xp6(1),h.Q6J("ngIf",n.disconsider)}}function be(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"table",5),h.TgZ(1,"thead",6),h.TgZ(2,"tr",7),h.TgZ(3,"th",8),h.TgZ(4,"strong"),h._uU(5),h.ALo(6,"uppercase"),h.ALo(7,"translate"),h.qZA(),h.qZA(),h.TgZ(8,"th",9),h.TgZ(9,"strong"),h._uU(10),h.ALo(11,"uppercase"),h.ALo(12,"translate"),h.qZA(),h.qZA(),h.TgZ(13,"th",10),h.TgZ(14,"strong"),h._uU(15),h.ALo(16,"uppercase"),h.ALo(17,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(18,"tbody"),h.YNc(19,ke,17,17,"tr",11),h.qZA(),h.TgZ(20,"tfoot"),h.TgZ(21,"td",12),h.TgZ(22,"po-button",13),h.NdJ("p-click",function(){return h.CHM(i),h.oxw().moreResults()}),h.ALo(23,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=h.oxw();h.xp6(5),h.Oqu(h.lcZ(6,6,h.lcZ(7,8,"l-date"))),h.xp6(5),h.Oqu(h.lcZ(11,10,h.lcZ(12,12,"l-hour"))),h.xp6(5),h.Oqu(h.lcZ(16,14,h.lcZ(17,16,"l-actions"))),h.xp6(4),h.Q6J("ngForOf",n.clockingsGeo),h.xp6(3),h.s9C("p-label",h.lcZ(23,18,"l-load-more")),h.Q6J("p-disabled",!n.hasNext)}}var we=function(){var e=function(){function e(t,i,n){a(this,e),this.clockingGeoService=t,this.changeDetectRef=i,this.permissionSelector=n,this.clockingsGeo=[],this.hasNext=!1,this.page=1,this.catchGeoLocation=new h.vpe,this.catchGeoUpdate=new h.vpe,this.catchGeoUpdateJustify=new h.vpe}return r(e,[{key:"ngOnInit",value:function(){this.getPermissions()}},{key:"ngOnDestroy",value:function(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}},{key:"moreResults",value:function(){this.page++,this.loadClockingsGeo()}},{key:"getClockingsGeo",value:function(e,t){this.clockingsGeo=[],this.page=1,this.isMobile=t,this.selectedEmployee=e,this.changeDetectRef.detectChanges(),this.loadClockingsGeo()}},{key:"getHoursByMilliseconds",value:function(e){return M.Em.getHoursByMilliseconds(e)}},{key:"diffClockings",value:function(e){return e.disconsider?"disconsider":""}},{key:"isSelected",value:function(e){return e===this.selectedClocking}},{key:"showClockingOnMap",value:function(e){this.selectedClocking=e,this.catchGeoLocation.emit(e)}},{key:"openClockingGeoUpdate",value:function(e,t){this.selectedClocking=e,t?this.catchGeoUpdateJustify.emit(e):this.catchGeoUpdate.emit(e)}},{key:"getImagePointer",value:function(e){return e.isOutFence?"assets/img/pin-outfence.svg":"0"!==e.latitude||"0"!==e.longitude?"assets/img/pin-approved.svg":"assets/img/pin-gray.svg"}},{key:"isDropUp",value:function(e,t){return e&&0!==t}},{key:"loadClockingsGeo",value:function(){var e=this;this.selectedEmployee&&this.selectedEmployee.id&&this.clockingGeoService.getClockingsGeo(this.selectedEmployee.id,this.page).then(function(t){e.clockingsGeo=e.clockingsGeo.concat(t.items),e.hasNext=t.hasNext})}},{key:"getPermissions",value:function(){var e=this;this.permissionSubscription=this.permissionSelector.permissions$.subscribe(function(t){e.disconsiderAllowed=t.clockingGeoDisconsider,e.reconsiderAllowed=t.clockingGeoReconsider})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(v),h.Y36(h.sBO),h.Y36(L.eL))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-clocking-geo-list"]],inputs:{selectedEmployee:"selectedEmployee"},outputs:{catchGeoLocation:"catchGeoLocation",catchGeoUpdate:"catchGeoUpdate",catchGeoUpdateJustify:"catchGeoUpdateJustify"},decls:4,vars:4,consts:[["class","po-font-subtitle title-name",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12 text-center map-not-visible",4,"ngIf"],["id","table-timesheet","class","table table-timesheet po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],[1,"po-font-subtitle","title-name"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-center","map-not-visible"],["id","table-timesheet",1,"table","table-timesheet","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"column-header"],[1,"no-padding"],[1,"clocking-geo-view-label-column","label-day","text-left"],[1,"clocking-geo-view-label-column","clocking-header-column","label-hour","text-left"],[1,"lbl-see-more","clocking-geo-view-label-column","clocking-header-column","label-actions","text-right"],["class","line",3,"ngClass","click",4,"ngFor","ngForOf"],["colspan","3"],["p-type","primary","id","moreResultsId","name","moreResults",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-label","p-disabled","p-click"],[1,"line",3,"ngClass","click"],[1,"column-day"],["id","img-pointer",3,"src"],["name","clockings-list"],[3,"ngClass"],["class","text-disconsider",4,"ngIf"],[1,"column-hour","text-center"],[1,"po-sm-3","po-md-3","po-lg-3","po-xl-3",3,"ngClass"],[1,"column-actions","text-right","column-see"],[1,"icon","text-right"],[1,"dropdown","mouse-pointer"],["data-toggle","dropdown",1,"po-icon","po-icon-more","see-more",3,"ngClass"],["name","ul-dropdown-option-disconsider","class","dropdown-menu",3,"ngClass",4,"ngIf"],["name","ul-dropdown-option-reconsider","class","dropdown-menu",3,"ngClass",4,"ngIf"],[1,"text-disconsider"],["name","ul-dropdown-option-disconsider",1,"dropdown-menu",3,"ngClass"],[1,"dropdown-menu-itens",3,"click"],["name","ul-dropdown-option-reconsider",1,"dropdown-menu",3,"ngClass"],["name","li-dropdown-option-reconsider","class","dropdown-menu-itens",3,"click",4,"ngIf"],["name","li-dropdown-option-reconsider",1,"dropdown-menu-itens",3,"click"]],template:function(e,t){1&e&&(h.YNc(0,le,2,1,"h2",0),h.YNc(1,re,3,3,"div",1),h.YNc(2,pe,3,3,"div",1),h.YNc(3,be,24,20,"table",2)),2&e&&(h.Q6J("ngIf",t.selectedEmployee&&!t.isMobile),h.xp6(1),h.Q6J("ngIf",t.selectedEmployee&&0==t.clockingsGeo.length),h.xp6(1),h.Q6J("ngIf",!t.selectedEmployee&&0==t.clockingsGeo.length),h.xp6(1),h.Q6J("ngIf",t.clockingsGeo.length>0))},directives:[p.O5,p.sg,w.bOz,p.mk],pipes:[Q.X$,p.gd,j.$],styles:[".clocking-geo[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;padding:16px 10px}.icon[_ngcontent-%COMP%]{padding-right:8px;color:#29b6c5}.optionsDropUpDisconsider[_ngcontent-%COMP%]{margin-top:-80px}.optionsDropUpReconsider[_ngcontent-%COMP%]{margin-top:-120px}@media (max-width: 480px){.optionsDropUpReconsider[_ngcontent-%COMP%]{margin-top:0;position:fixed;right:5px!important}}.dropdown-menu-itens[_ngcontent-%COMP%]{cursor:default;text-align:left;font-weight:400;background-color:#fff;line-height:44px;width:100%;padding-left:16px;margin-top:-4px;color:#000}.dropdown-menu-itens[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.text-disconsider[_ngcontent-%COMP%]{font-size:12px;color:red}.dropdown-menu[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 0 10px}.dropdown-menu[_ngcontent-%COMP%]{top:100%;min-width:175px;left:auto!important}.selected[_ngcontent-%COMP%]{background-color:#ceeaf2}hr[_ngcontent-%COMP%]{margin:0}.po-icon.po-icon-more[_ngcontent-%COMP%]:before{border:1px solid #808080;padding:5px 8px;font-size:23px;border-radius:3px}.title-name[_ngcontent-%COMP%]{margin-top:5px;text-align:center}#img-pointer[_ngcontent-%COMP%]{float:left;width:16px;margin-right:5px}.column-day[_ngcontent-%COMP%]{font-size:16px;color:#28303e;vertical-align:middle!important;font-weight:bold;padding-top:15px}.column-hour[_ngcontent-%COMP%]{font-size:16px;color:#28303e;font-weight:bold;padding-top:20px}.column-actions[_ngcontent-%COMP%]{font-size:22px;padding-top:15px}.clocking-geo-view-label-column[_ngcontent-%COMP%]{font-size:10px;text-transform:uppercase;border-bottom:2px solid rgba(0,154,192,.5)!important;color:#0c9abe;border:none}.label-day[_ngcontent-%COMP%]{padding-left:25px}.label-hour[_ngcontent-%COMP%]{padding-left:21px}.label-actions[_ngcontent-%COMP%]{padding-right:21px}.line[_ngcontent-%COMP%]{border-bottom:1px solid #eceeee}"]}),e}(),ye=s(16898),Ce=r(function e(){a(this,e),this.reason=new ye.f,this.justify=new ye.f}),Me=s(3679),Ze=["clockingGeoUpdateForm"],_e=["addressElement"];function Oe(e,t){1&e&&(h.TgZ(0,"div",12),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"l-location-near-address")," "))}function Ae(e,t){if(1&e&&(h.TgZ(0,"div",7,8),h._UZ(2,"img",9),h.YNc(3,Oe,3,3,"div",10),h.TgZ(4,"div",11),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(2),h.Q6J("src",i.getImagePointer(),h.LSH),h.xp6(1),h.Q6J("ngIf",i.hasLocation),h.xp6(1),h.Q6J("ngClass",i.getClassMessage()),h.xp6(1),h.hij(" ",h.lcZ(6,4,i.message)," ")}}function Pe(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"po-select",21),h.NdJ("ngModelChange",function(e){return h.CHM(i),h.oxw(2).clockingGeoUpdateView.reason.value=e}),h.ALo(1,"translate"),h.ALo(2,"translate"),h.qZA()}if(2&e){var n=h.oxw(2);h.s9C("p-label",h.lcZ(1,6,"l-reason")),h.s9C("p-placeholder",h.lcZ(2,8,"l-select-reason")),h.Q6J("ngModel",n.clockingGeoUpdateView.reason.value)("p-options",n.reasons)("p-required",n.clockingGeoUpdateView.reason.required)("p-disabled",!n.clockingGeoUpdateView.reason.editable)}}function Te(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",22),h.TgZ(1,"div",23),h.TgZ(2,"span",24),h._uU(3),h.ALo(4,"translate"),h.qZA(),h._UZ(5,"span",25),h.TgZ(6,"textarea",26),h.NdJ("ngModelChange",function(e){return h.CHM(i),h.oxw(2).justify=e}),h.ALo(7,"translate"),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=h.oxw(2);h.xp6(3),h.Oqu(h.lcZ(4,5,"l-justification")),h.xp6(3),h.s9C("placeholder",h.lcZ(7,7,"l-include-justify")),h.Q6J("ngModel",n.justify)("required",n.clockingGeoUpdateView.justify.required)("disabled",!n.clockingGeoUpdateView.justify.editable)}}function Ge(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"form",null,13),h.YNc(3,Pe,3,10,"po-select",14),h.YNc(4,Te,8,9,"div",15),h.qZA(),h.TgZ(5,"div",16),h._UZ(6,"div",17),h.TgZ(7,"span",18),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.qZA(),h.TgZ(10,"po-button",19),h.NdJ("click",function(){return h.CHM(i),h.oxw().close()}),h.ALo(11,"translate"),h.qZA(),h.TgZ(12,"po-button",20),h.NdJ("click",function(){return h.CHM(i),h.oxw().confirm(!0)}),h.ALo(13,"translate"),h.qZA(),h.qZA()}if(2&e){var n=h.MAs(2),o=h.oxw();h.xp6(3),h.Q6J("ngIf",o.clockingGeoUpdateView.reason.visible),h.xp6(1),h.Q6J("ngIf",o.clockingGeoUpdateView.justify.visible),h.xp6(4),h.Oqu(h.lcZ(9,6,"text-warning-for-disconsider")),h.xp6(2),h.s9C("p-label",h.lcZ(11,8,"l-cancel")),h.xp6(2),h.s9C("p-label",h.lcZ(13,10,"disconsider-the-clocking")),h.Q6J("p-disabled",!n.form.valid)}}function qe(e,t){if(1&e&&(h.TgZ(0,"span",32),h._uU(1),h.qZA()),2&e){var i=h.oxw(2);h.xp6(1),h.Oqu(i.clockingGeo.justify)}}function Ie(e,t){if(1&e&&h._UZ(0,"textarea",33),2&e){var i=h.oxw(2);h.s9C("placeholder",i.clockingGeo.justify)}}function Ue(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"po-button",19),h.NdJ("click",function(){return h.CHM(i),h.oxw(2).closeReconsider()}),h.ALo(1,"translate"),h.qZA()}2&e&&h.s9C("p-label",h.lcZ(1,1,"l-cancel"))}function Ee(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"po-button",34),h.NdJ("click",function(){return h.CHM(i),h.oxw(2).confirm(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.s9C("p-label",h.lcZ(1,1,"l-reconsider-the-clocking"))}function De(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",27),h.TgZ(2,"div",23),h.TgZ(3,"span",24),h._uU(4),h.ALo(5,"translate"),h.qZA(),h._UZ(6,"span",25),h.YNc(7,qe,2,1,"span",28),h.YNc(8,Ie,1,1,"textarea",29),h.qZA(),h.qZA(),h.YNc(9,Ue,2,3,"po-button",30),h.YNc(10,Ee,2,3,"po-button",31),h.qZA()),2&e){var i=h.oxw();h.xp6(4),h.Oqu(h.lcZ(5,5,"l-justification")),h.xp6(3),h.Q6J("ngIf",i.viewJustification),h.xp6(1),h.Q6J("ngIf",!i.viewJustification),h.xp6(1),h.Q6J("ngIf",!i.viewJustification),h.xp6(1),h.Q6J("ngIf",!i.viewJustification)}}var Se=function(){var e=function(){function e(t,i,n,o){a(this,e),this.clockingGeoService=t,this.appTranslateService=i,this.notificationService=n,this.openStreetMapService=o,this.reasons=[],this.clockingGeoUpdateView=new Ce,this.closeEvent=new h.vpe}return r(e,[{key:"fieldProperties",set:function(e){this.getFieldProps(e)}},{key:"ngOnInit",value:function(){}},{key:"getFieldProps",value:function(e){var t=this;e&&(e.forEach(function(e){switch(e.field){case"justify":t.clockingGeoUpdateView.justify.editable=e.editable,t.clockingGeoUpdateView.justify.required=e.required,t.clockingGeoUpdateView.justify.visible=e.visible;break;case"reason":t.clockingGeoUpdateView.reason.editable=e.editable,t.clockingGeoUpdateView.reason.required=e.required,t.clockingGeoUpdateView.reason.visible=e.visible}}),this.clockingGeoUpdateView.reason.visible&&this.getClockingReasonTypes())}},{key:"getClockingReasonTypes",value:function(){var e=this;this.clockingGeoService.getDisconsiderReasons().then(function(t){e.clockingGeoUpdateView.reason.required||e.getLabelReasonForNotRequired(),e.resetFormStatus(),t.forEach(function(t){e.reasons.push({label:t.description,value:t.id})})})}},{key:"getInformations",value:function(e,t){this.message=null,this.employee=t,this.clockingGeo=e,this.hasLocation="0"!==e.latitude&&"0"!==e.latitude,this.showUserPositionAddress()}},{key:"getHoursByMilliseconds",value:function(e){return M.Em.getHoursByMilliseconds(e)}},{key:"close",value:function(){this.resetFormStatus(),this.closeEvent.emit()}},{key:"confirm",value:function(e){var t,i=this;t={id:this.clockingGeo.id,disconsider:e,justify:this.justify,reason:this.parseReasonViewToObject(this.clockingGeoUpdateView.reason.value)},e||(t.justify=""),this.clockingGeoService.update(this.employee.id,t).then(function(){e?(i.callToastsManager("success-disconsider","success"),i.close()):(i.callToastsManager("success-reconsider","success"),i.closeReconsider())}).catch(function(e){i.callToastsManager(e.menssage,"error")})}},{key:"callToastsManager",value:function(e,t){var i=this;this.appTranslateService.getI18n(e).then(function(e){i.notificationService.showNotification(e,"success"===t?w.ik9.Success:w.ik9.Error)})}},{key:"closeReconsider",value:function(){this.closeEvent.emit()}},{key:"resetFormStatus",value:function(){this.clockingGeoUpdateForm&&this.clockingGeoUpdateForm.resetForm()}},{key:"setViewJustification",value:function(e){this.viewJustification=e}},{key:"getClassMessage",value:function(){return this.hasLocation?"all-address":"no-address"}},{key:"getImagePointer",value:function(){return this.hasLocation?"assets/img/location-color.svg":"assets/img/location-gray.svg"}},{key:"showUserPositionAddress",value:function(){var e=this;this.openStreetMapService.simpleReverseGeocoding(+this.clockingGeo.longitude,+this.clockingGeo.latitude).then(function(t){t?(t=t.trim(),e.message=t||"l-location-unavailable"):e.message="l-location-unavailable"})}},{key:"getLabelReasonForNotRequired",value:function(){var e=this;this.appTranslateService.getI18n("l-select-reason").then(function(t){e.reasons.push({label:t,value:void 0})})}},{key:"parseReasonViewToObject",value:function(e){var t=this.reasons.find(function(t){return t.value===e});if(t)return{id:e,description:t.label}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(v),h.Y36(G.g),h.Y36(R.g),h.Y36(z.H))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-clocking-geo-update"]],viewQuery:function(e,t){var i;(1&e&&(h.Gf(Ze,5),h.Gf(_e,5)),2&e)&&(h.iGM(i=h.CRH())&&(t.clockingGeoUpdateForm=i.first),h.iGM(i=h.CRH())&&(t.addressElement=i.first))},inputs:{fieldProperties:"fieldProperties"},outputs:{closeEvent:"closeEvent"},decls:14,vars:13,consts:[["id","div-employee-name",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","clocking-geo-update"],[1,"date-and-hour","text-bold-default"],[1,"po-sm-2","po-md-2","po-lg-2","po-xl-2"],[1,"po-sm-10","po-md-10","po-lg-10","po-xl-10","text-right"],[1,"week-day"],["id","div-address","class","address-container",4,"ngIf"],[4,"ngIf"],["id","div-address",1,"address-container"],["addressElement",""],["id","img-pointer",3,"src"],["class","near-location",4,"ngIf"],[3,"ngClass"],[1,"near-location"],["clockingGeoUpdateForm","ngForm"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12","name","string",3,"ngModel","p-label","p-options","p-placeholder","p-required","p-disabled","ngModelChange",4,"ngIf"],["class","text-area po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-info"],[1,"po-sm-2","po-md-2","po-lg-2","po-xl-2","alert-image"],[1,"po-sm-10","po-md-10","po-lg-10","po-xl-10"],["id","btn-cancel",1,"po-sm-4","po-md-4","po-lg-4","po-xl-4",3,"p-label","click"],["id","btn-disconsider","p-primary","true",1,"text-right","po-sm-8","po-md-8","po-lg-8","po-xl-8",3,"p-disabled","p-label","click"],["name","string",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"ngModel","p-label","p-options","p-placeholder","p-required","p-disabled","ngModelChange"],[1,"text-area","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-field-flex-container","space","txtarea"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-label","titleInput","space","text-bold-default"],[1,"po-label-help"],["rows","3","id","txt-justify","name","justify",1,"form-control","po-lg-12","po-md-12","po-sm-12",3,"ngModel","required","disabled","placeholder","ngModelChange"],[1,"text-area"],["class","po-lg-12 po-md-12 po-sm-12 po-label titleInput space",4,"ngIf"],["class","form-control txt-area-reconsider po-xl-12 po-lg-12 po-md-12 po-sm-12","rows","3","id","txt-justify","name","justify","readonly","",3,"placeholder",4,"ngIf"],["id","btn-cancel","class","po-sm-4 po-md-4 po-lg-4 po-xl-4",3,"p-label","click",4,"ngIf"],["id","btn-reconsider","p-primary","true","class","text-right po-sm-8 po-md-8 po-lg-8 po-xl-8",3,"p-label","click",4,"ngIf"],[1,"po-lg-12","po-md-12","po-sm-12","po-label","titleInput","space"],["rows","3","id","txt-justify","name","justify","readonly","",1,"form-control","txt-area-reconsider","po-xl-12","po-lg-12","po-md-12","po-sm-12",3,"placeholder"],["id","btn-reconsider","p-primary","true",1,"text-right","po-sm-8","po-md-8","po-lg-8","po-xl-8",3,"p-label","click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._uU(1),h.qZA(),h.TgZ(2,"div",1),h.TgZ(3,"span",2),h._uU(4),h.qZA(),h.TgZ(5,"span",3),h._uU(6),h.ALo(7,"utcDate"),h.TgZ(8,"span",4),h._uU(9),h.ALo(10,"utcDate"),h.qZA(),h.qZA(),h.qZA(),h.YNc(11,Ae,7,6,"div",5),h.YNc(12,Ge,14,12,"div",6),h.YNc(13,De,11,7,"div",6)),2&e&&(h.xp6(1),h.Oqu(null==t.employee?null:t.employee.name),h.xp6(3),h.Oqu(t.getHoursByMilliseconds(null==t.clockingGeo?null:t.clockingGeo.hour)),h.xp6(2),h.hij(" ",h.xi3(7,7,null==t.clockingGeo?null:t.clockingGeo.date,"dd/MM/yyyy")," "),h.xp6(3),h.Oqu(h.xi3(10,10,null==t.clockingGeo?null:t.clockingGeo.date,"EEEE")),h.xp6(2),h.Q6J("ngIf",t.message),h.xp6(1),h.Q6J("ngIf",!(null!=t.clockingGeo&&t.clockingGeo.disconsider)),h.xp6(1),h.Q6J("ngIf",null==t.clockingGeo?null:t.clockingGeo.disconsider))},directives:[p.O5,p.mk,Me._Y,Me.JL,Me.F,w.bOz,w.C9q,Me.JJ,Me.On,Me.Fj,Me.Q7],pipes:[j.$,Q.X$],styles:[".clocking-geo-update[_ngcontent-%COMP%]{font-weight:bold;font-size:20px}.date-and-hour[_ngcontent-%COMP%]{margin-top:50px;font-size:15px}.week-day[_ngcontent-%COMP%]{color:#9da7a9}.txtarea[_ngcontent-%COMP%]{margin-top:15px}.txt-area-reconsider[_ngcontent-%COMP%]{margin-bottom:20px}.text-area[_ngcontent-%COMP%]{margin-bottom:8px!important;margin-top:-10px}.titleInput[_ngcontent-%COMP%]{margin-top:10px}.text-info[_ngcontent-%COMP%]{padding:8px;color:#000;font-weight:bold;font-size:12px;margin-bottom:8px}.alert-image[_ngcontent-%COMP%]{background:url(alert-image.88aaab01378193383cb6.png) no-repeat center;width:40px;height:50px;float:left}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.alert-image[_ngcontent-%COMP%]{background:url(alert-image.88aaab01378193383cb6.png) no-repeat center;width:40px;height:50px;float:left}}.near-location[_ngcontent-%COMP%]{font-weight:bold;text-transform:uppercase;font-size:.8em}.address-container[_ngcontent-%COMP%]{padding:34px 16px 15px 10px;display:block;width:100%;border-bottom:1px solid #dddddd}.all-address[_ngcontent-%COMP%]{overflow:hidden;width:85%}#img-pointer[_ngcontent-%COMP%]{float:left;width:20px;margin-right:5px}.no-address[_ngcontent-%COMP%]{font-weight:bold;margin-top:10px;height:15px}"]}),e}(),Je=s(36227),Ve=s(36812),Le=s(89019),Be=s(82236),Ne=s(14323),Re=r(function e(){a(this,e),this.filterButton=new ye.f});function Qe(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"po-button",12),h.NdJ("click",function(){return h.CHM(i),h.oxw().showFilterDialog()}),h.ALo(2,"translate"),h.qZA(),h.qZA()}2&e&&(h.xp6(1),h.s9C("p-label",h.lcZ(2,1,"l-filtrate")))}var ze=function(e){return{selected:e}};function Ye(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"div",13),h.NdJ("click",function(){var e=h.CHM(i).$implicit;return h.oxw().showClockingOnMap(e)}),h.TgZ(2,"span",14),h._uU(3),h.qZA(),h._UZ(4,"hr"),h.qZA(),h.qZA()}if(2&e){var n=t.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngClass",h.VKq(2,ze,o.isSelected(n))),h.xp6(2),h.Oqu(n.name)}}function je(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"a",15),h.NdJ("click",function(){return h.CHM(i),h.oxw().viewMore()}),h._uU(1),h.ALo(2,"translate"),h.qZA()}2&e&&(h.xp6(1),h.hij("",h.lcZ(2,1,"l-load-more")," "))}function Fe(e,t){1&e&&(h.TgZ(0,"span",16),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij("",h.lcZ(2,1,"l-no-more-records")," "))}var He=function(){var e=function(){function e(t){a(this,e),this.teamEmployeesService=t,this.filtering=new h.vpe,this.catchSelectedEmployee=new h.vpe,this.filterDirectSubordinates=!0,this.filterDialogIsVisible=!1,this.employees=[],this.viewMoreIsVisible=!1,this.teamEmployeesView=new Re}return r(e,[{key:"fieldProperties",set:function(e){this.getFieldProps(e)}},{key:"ngOnInit",value:function(){this.getTeam(),this.switch=!1,this.labelPosition=w.fxz.Left}},{key:"getFieldProps",value:function(e){var t=this;e&&e.forEach(function(e){"filterButton"===e.field&&(t.teamEmployeesView.filterButton.editable=e.editable,t.teamEmployeesView.filterButton.required=e.required,t.teamEmployeesView.filterButton.visible=e.visible)})}},{key:"getTeam",value:function(e){var t=this;e||(e=new Ne.$),this.teamParams=e,this.teamEmployeesService.getEmployees(Le.N.loggedUser,e,!0).then(function(e){0!==e.items.length&&e.items.forEach(function(e){t.employees.push(e)}),t.viewMoreIsVisible=e.hasNext})}},{key:"showClockingOnMap",value:function(e){this.employeeSelected=e,this.catchSelectedEmployee.emit(e)}},{key:"showFilterDialog",value:function(){this.filterDialogIsVisible=!0,this.switch=this.filterDirectSubordinates}},{key:"closeDialog",value:function(){this.filterDialogIsVisible=!1}},{key:"filter",value:function(){this.filterReset(),this.filtering.emit(),this.filterDirectSubordinates=this.switch,this.teamParams.hierarchicalLevel=this.filterDirectSubordinates?1:void 0,this.getTeam(this.teamParams),this.closeDialog()}},{key:"filterReset",value:function(){this.teamParams.page=1,this.employees=[]}},{key:"viewMore",value:function(){this.teamParams.page++,this.getTeam(this.teamParams)}},{key:"isSelected",value:function(e){return e===this.employeeSelected}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Be.s))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-team-employees"]],inputs:{fieldProperties:"fieldProperties"},outputs:{filtering:"filtering",catchSelectedEmployee:"catchSelectedEmployee"},decls:15,vars:20,consts:[["class","text-center po-sm-12 po-md-12 po-lg-12 po-xl-12 button-filter",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"next-periods"],["id","link-more-records",3,"click",4,"ngIf"],["id","span-no-more-records",4,"ngIf"],["id","team-employees-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["id","div-dialog-content","dialog-content",""],["backIsVisible","true",3,"pageTitle","backFunction"],["name","po-switch","ngDefaultControl","",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","switch",3,"p-label-position","ngModel","p-label-on","p-label-off","ngModelChange"],[1,"text-center"],["id","btn-filter","p-primary","true",3,"p-label","click"],[1,"text-center","po-sm-12","po-md-12","po-lg-12","po-xl-12","button-filter"],["id","btn-filter","p-icon","po-icon po-icon-filter",3,"p-label","click"],[1,"team-employee","mouse-pointer",3,"ngClass","click"],["name","employee-name"],["id","link-more-records",3,"click"],["id","span-no-more-records"]],template:function(e,t){1&e&&(h.YNc(0,Qe,3,3,"div",0),h.YNc(1,Ye,5,4,"div",1),h.TgZ(2,"div",2),h.YNc(3,je,3,3,"a",3),h.YNc(4,Fe,3,3,"span",4),h.qZA(),h.TgZ(5,"app-dialog",5),h.NdJ("closeDialogEvent",function(){return t.closeDialog()}),h.TgZ(6,"div",6),h.TgZ(7,"app-page-header",7),h.NdJ("backFunction",function(){return t.closeDialog()}),h.ALo(8,"translate"),h.qZA(),h.TgZ(9,"po-switch",8),h.NdJ("ngModelChange",function(e){return t.switch=e}),h.ALo(10,"translate"),h.ALo(11,"translate"),h.qZA(),h.TgZ(12,"div",9),h.TgZ(13,"po-button",10),h.NdJ("click",function(){return t.filter()}),h.ALo(14,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("ngIf",t.teamEmployeesView.filterButton.visible),h.xp6(1),h.Q6J("ngForOf",t.employees),h.xp6(2),h.Q6J("ngIf",t.viewMoreIsVisible),h.xp6(1),h.Q6J("ngIf",!t.viewMoreIsVisible),h.xp6(1),h.Q6J("isVisible",t.filterDialogIsVisible)("closeDialogButtonEnable",!1),h.xp6(2),h.s9C("pageTitle",h.lcZ(8,12,"l-filter")),h.xp6(2),h.s9C("p-label-on",h.lcZ(10,14,"l-direct-subordinates-only")),h.s9C("p-label-off",h.lcZ(11,16,"l-direct-subordinates-only")),h.Q6J("p-label-position",t.labelPosition)("ngModel",t.switch),h.xp6(4),h.s9C("p-label",h.lcZ(14,18,"l-filtrate")))},directives:[p.O5,p.sg,ae.a,Ve.q,w.nrg,Me.Fj,Me.JJ,Me.On,w.bOz,p.mk],pipes:[Q.X$],styles:[".team-employee[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:bold;padding-top:20px;padding-left:10px;padding-right:10px}.button-filter[_ngcontent-%COMP%]{margin-bottom:15px;padding:0}.switch[_ngcontent-%COMP%]{margin-top:-20px;padding-left:8px}.next-periods[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe;padding-bottom:20px}@media (max-width: 768px){.next-periods[_ngcontent-%COMP%]{padding-bottom:60px}}#span-no-more-records[_ngcontent-%COMP%]{color:#aaa}.selected[_ngcontent-%COMP%]{background-color:#ceeaf2}hr[_ngcontent-%COMP%]{margin-bottom:0}"]}),e}(),$e=["map"],Xe=["mapMobile"],Ke=["clockingGeoUpdate"],We=["dialogComponent"],et=["clockingGeoListComponentDesktop"],tt=["clockingGeoListComponentMobile"];function it(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",25),h.TgZ(1,"app-clocking-geo-list",26,27),h.NdJ("catchGeoLocation",function(e){return h.CHM(i),h.oxw().showClockingOnMap(e)})("catchGeoUpdate",function(e){return h.CHM(i),h.oxw().openClockingGeoUpdate(e,!1)})("catchGeoUpdateJustify",function(e){return h.CHM(i),h.oxw().openClockingGeoUpdate(e,!0)}),h.qZA(),h.qZA()}}function nt(e,t){if(1&e&&(h.TgZ(0,"div",28),h.TgZ(1,"div",11),h._UZ(2,"img",12),h.TgZ(3,"p",13),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.qZA(),h.TgZ(6,"div",14),h._UZ(7,"img",15),h.TgZ(8,"p",13),h._uU(9),h.ALo(10,"translate"),h.qZA(),h.qZA(),h._UZ(11,"app-opens-street-map",29,30),h.qZA()),2&e){var i=h.oxw();h.xp6(1),h.Q6J("hidden",!i.mapIsDisabled),h.xp6(3),h.Oqu(h.lcZ(5,5,"l-locate-empty-in-clocking")),h.xp6(2),h.Q6J("hidden",i.mapIsDisabled||i.mapIsVisible),h.xp6(3),h.Oqu(h.lcZ(10,7,"l-select-one-clocking")),h.xp6(2),h.Q6J("hidden",!i.mapIsVisible)}}var ot=[{path:"register",component:ce,canActivate:[k.P]},{path:"view",component:function(){var t=function(t){i(s,t);var n=o(s);function s(e,t,i,o){var c;return a(this,s),(c=n.call(this)).changeDetectRef=e,c.lastAccess=t,c.globals=i,c.fieldPropertiesService=o,c.updateDialogIsVisible=!1,c.viewDialogIsVisible=!1,c.clockingsGeo=[],c.pageName="clockingGeoUpdate",c}return r(s,[{key:"ngOnInit",value:function(){this.menuIsVisible=!0,this.mapIsVisible=!1,this.mapIsDisabled=!1,this.teamSelect=!1,e(c(s.prototype),"ngOnInit",this).call(this),this.getFieldProps(),this.setCountLastAccess()}},{key:"setCountLastAccess",value:function(){var e=this;this.globals.getEmployeeSummary().then(function(t){e.lastAccess.setLastAccess(_.jh,t.id)})}},{key:"getClockingsGeo",value:function(e){this.selectedEmployee=e,this.teamSelect=!0,this.viewDialogIsVisible=this.viewIsMobile,this.changeDetectRef.detectChanges(),this.loadClockingsGeo()}},{key:"loadClockingsGeo",value:function(){this.reloadMap(),this.mapIsVisible=!1,this.mapIsDisabled=!1,this.viewIsMobile?this.clockingGeoListComponentMobile.getClockingsGeo(this.selectedEmployee,this.viewIsMobile):(this.clockingGeoListComponentDesktop.getClockingsGeo(this.selectedEmployee,this.viewIsMobile),this.goTop())}},{key:"showClockingOnMap",value:function(e){"0"!==e.latitude||"0"!==e.longitude?(this.mapIsDisabled=!1,this.selectedClocking=e,this.mapIsVisible=!0,this.changeDetectRef.detectChanges(),this.reloadMap(e)):(this.mapIsVisible=!1,this.mapIsDisabled=!0)}},{key:"closeDialog",value:function(){this.mapIsVisible=!1,this.mapIsDisabled=!1,this.viewDialogIsVisible=!1,this.updateDialogIsVisible=!1,this.clockingsGeo=void 0}},{key:"openClockingGeoUpdate",value:function(e,t){this.setTitleDialog(e,t),this.clockingGeoUpdate.getInformations(e,this.selectedEmployee),this.mapIsVisible=!1,this.mapIsDisabled=!1,this.dialogComponent.menuIsVisible=!1,this.dialogComponent.hideMenu(),this.updateDialogIsVisible=!0}},{key:"setTitleDialog",value:function(e,t){t?(this.titleDialog="justification-of-the-clocking",this.clockingGeoUpdate.setViewJustification(!0),this.question=""):(this.clockingGeoUpdate.setViewJustification(!1),this.question="?",this.titleDialog=e.disconsider?"l-reconsider-the-clocking":"disconsider-the-clocking")}},{key:"closeUpdateDialog",value:function(){this.updateDialogIsVisible=!1,this.dialogComponent.showMenu(),this.getClockingsGeo(this.selectedEmployee)}},{key:"isSelected",value:function(e){return e===this.selectedClocking}},{key:"goTop",value:function(){window.scrollTo(0,0)}},{key:"hideClocking",value:function(){this.teamSelect=!1,this.clockingGeoListComponentDesktop.getClockingsGeo(void 0,this.viewIsMobile)}},{key:"reloadMap",value:function(e){var t=this.viewIsMobile?this.mapMobile:this.map;t&&(t.resetMap(),e&&t.loadMap(e.latitude,e.longitude))}},{key:"getFieldProps",value:function(){return(0,b.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fieldPropertiesService.getFieldProperties(this.pageName);case 2:this.fieldProperties=e.sent;case 3:case"end":return e.stop()}},e,this)}))}}]),s}(O.R);return t.\u0275fac=function(e){return new(e||t)(h.Y36(h.sBO),h.Y36(_.Lx),h.Y36(Y.O),h.Y36(Je.c))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-clocking-geo-view"]],viewQuery:function(e,t){var i;(1&e&&(h.Gf($e,5),h.Gf(Xe,5),h.Gf(Ke,5),h.Gf(We,5),h.Gf(et,5),h.Gf(tt,5)),2&e)&&(h.iGM(i=h.CRH())&&(t.map=i.first),h.iGM(i=h.CRH())&&(t.mapMobile=i.first),h.iGM(i=h.CRH())&&(t.clockingGeoUpdate=i.first),h.iGM(i=h.CRH())&&(t.dialogComponent=i.first),h.iGM(i=h.CRH())&&(t.clockingGeoListComponentDesktop=i.first),h.iGM(i=h.CRH())&&(t.clockingGeoListComponentMobile=i.first))},features:[h.qOj],decls:34,vars:27,consts:[["pageTitle","l-clockings-report",3,"backIsVisible"],[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"fieldProperties","filtering","catchSelectedEmployee"],["class","po-sm-12 po-md-12 po-lg-4 po-xl-4","id","div-desktop-clocking-list",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-4 po-xl-4","id","div-desktop-map",4,"ngIf"],["id","clocking-geo-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["dialog-content",""],["backIsVisible","true",3,"pageTitle","backFunction"],[1,"map-content",3,"hidden"],["mapMobile",""],[1,"text-center","map-not-visible",3,"hidden"],["src","./assets/img/pin-gray.svg","alt","",1,"none-item-selected-image"],[1,"none-item-selected-message"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-center","map-not-visible",3,"hidden"],["src","./assets/img/satellite.svg","alt","",1,"none-item-selected-image"],[1,"scrollable","po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding","scroll-panel"],[3,"catchGeoLocation","catchGeoUpdateJustify","catchGeoUpdate"],["clockingGeoListComponentMobile",""],["id","clocking-geo-update-dialog",3,"isVisible","closeDialogButtonEnable","menuIsVisible","closeDialogEvent"],["dialogComponent",""],["isDialog","true",3,"pageTitle","backFunction"],[1,"scrollable"],[3,"fieldProperties","closeEvent"],["clockingGeoUpdate",""],["id","div-desktop-clocking-list",1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"catchGeoLocation","catchGeoUpdate","catchGeoUpdateJustify"],["clockingGeoListComponentDesktop",""],["id","div-desktop-map",1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"hidden"],["map",""]],template:function(e,t){1&e&&(h._UZ(0,"app-page-header",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"app-team-employees",3),h.NdJ("filtering",function(){return t.hideClocking()})("catchSelectedEmployee",function(e){return t.getClockingsGeo(e)}),h.qZA(),h.qZA(),h.YNc(4,it,3,0,"div",4),h.YNc(5,nt,13,9,"div",5),h.qZA(),h.TgZ(6,"app-dialog",6),h.NdJ("closeDialogEvent",function(){return t.closeDialog()}),h.TgZ(7,"div",7),h.TgZ(8,"app-page-header",8),h.NdJ("backFunction",function(){return t.closeDialog()}),h.ALo(9,"translate"),h.qZA(),h.TgZ(10,"div",9),h._UZ(11,"app-opens-street-map",null,10),h.qZA(),h.TgZ(13,"div",11),h._UZ(14,"img",12),h.TgZ(15,"p",13),h._uU(16),h.ALo(17,"translate"),h.qZA(),h.qZA(),h.TgZ(18,"div",14),h._UZ(19,"img",15),h.TgZ(20,"p",13),h._uU(21),h.ALo(22,"translate"),h.qZA(),h.qZA(),h.TgZ(23,"div",16),h.TgZ(24,"app-clocking-geo-list",17,18),h.NdJ("catchGeoLocation",function(e){return t.showClockingOnMap(e)})("catchGeoUpdateJustify",function(e){return t.openClockingGeoUpdate(e,!0)})("catchGeoUpdate",function(e){return t.openClockingGeoUpdate(e,!1)}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(26,"app-dialog",19,20),h.NdJ("closeDialogEvent",function(){return t.closeUpdateDialog()}),h.TgZ(28,"div",7),h.TgZ(29,"app-page-header",21),h.NdJ("backFunction",function(){return t.closeUpdateDialog()}),h.ALo(30,"translate"),h.qZA(),h.TgZ(31,"div",22),h.TgZ(32,"app-clocking-geo-update",23,24),h.NdJ("closeEvent",function(){return t.closeUpdateDialog()}),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("backIsVisible",!1),h.xp6(3),h.Q6J("fieldProperties",t.fieldProperties),h.xp6(1),h.Q6J("ngIf",!t.viewIsMobile),h.xp6(1),h.Q6J("ngIf",!t.viewIsMobile&&t.teamSelect),h.xp6(1),h.Q6J("isVisible",t.viewDialogIsVisible)("closeDialogButtonEnable",!1),h.xp6(2),h.s9C("pageTitle",h.xi3(9,18,"l-clockings",t.selectedEmployee)),h.xp6(2),h.Q6J("hidden",!t.mapIsVisible),h.xp6(3),h.Q6J("hidden",!t.mapIsDisabled),h.xp6(3),h.Oqu(h.lcZ(17,21,"l-locate-empty-in-clocking")),h.xp6(2),h.Q6J("hidden",t.mapIsDisabled||t.mapIsVisible),h.xp6(3),h.Oqu(h.lcZ(22,23,"l-select-one-clocking")),h.xp6(5),h.Q6J("isVisible",t.updateDialogIsVisible)("closeDialogButtonEnable",!t.viewIsMobile)("menuIsVisible",t.menuIsVisible),h.xp6(3),h.hYB("pageTitle","",h.lcZ(30,25,t.titleDialog),"",t.question,""),h.xp6(3),h.Q6J("fieldProperties",t.fieldProperties))},directives:[Ve.q,He,p.O5,ae.a,A.Y,we,Se],pipes:[Q.X$],styles:["@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 192px);overflow:auto;padding-bottom:15px}}.map-content[_ngcontent-%COMP%]{height:140px;margin:0 -15px 40px}.scrollable[_ngcontent-%COMP%]{height:calc(100% - 1px);overflow:auto;padding-bottom:15px}.page-title[_ngcontent-%COMP%]{text-overflow:ellipsis!important;white-space:nowrap;overflow:hidden;margin-top:-8px}.address[_ngcontent-%COMP%]{padding:20px}.none-item-selected-message[_ngcontent-%COMP%]{font-size:14px;color:#333}div#address.address[_ngcontent-%COMP%]{height:160px}.none-item-selected-image[_ngcontent-%COMP%]{width:96px;height:96px;margin-top:16px}.icon-side-spacing[_ngcontent-%COMP%]{padding-right:4px}.fixed-collumn-icon-more[_ngcontent-%COMP%]{width:32px}.clocking-geo-title[_ngcontent-%COMP%]{padding-left:40px}@media only screen and (min-width: 960px){.map-not-visible[_ngcontent-%COMP%]{height:100%;position:relative;top:calc(50vh - 96px)}.align-center[_ngcontent-%COMP%]{position:relative;top:calc(50% - 58px)}#div-desktop-clocking-list[_ngcontent-%COMP%]{height:100vh;border-left:1px solid #cccccc;border-right:1px solid #cccccc;box-shadow:none;z-index:2;overflow:auto}}@media only screen and (min-width: 1367px){.po-page-content[_ngcontent-%COMP%]{width:calc(100vw - 270px)!important;height:none!important}}@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 237px)}}@media only screen and (max-width: 844px){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 203px)}}"]}),t}(),canActivate:[k.P]}],st=function(){var e=r(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[x.Bz.forChild(ot)],x.Bz]}),e}(),ct=function(){var e=r(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[v],imports:[[p.ez,st,d.q,g.t]]}),e}()}}])}();