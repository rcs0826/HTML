!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[703],{24156:function(e,n,a){a.r(n),a.d(n,{NotificationsPageModule:function(){return xt}});var s,r=a(38583),o=a(61466),c=a(95987),l=a(51110),u=a(5156),h=a(30343),p=a(68014),d=((d||(d={})).TypeEnum={Vacation:"vacation",Allowance:"allowance",Clocking:"clocking",Overtime:"overtime",OnCall:"onCall"},d),g=function(){function e(){t(this,e),this.init()}return i(e,[{key:"countToolBar",value:function(t){var e=this;t&&t.total?(this.total=t.total,t.subtotals.forEach(function(t){t.type===d.TypeEnum.Vacation?e.vacation=t.total:t.type===d.TypeEnum.Allowance?e.allowance=t.total:t.type===d.TypeEnum.Overtime?e.overtime=t.total:t.type===d.TypeEnum.OnCall?e.onCall=t.total:e.clocking=t.total,e.timesheet=e.allowance+e.clocking})):this.init()}},{key:"init",value:function(){this.total=0,this.vacation=0,this.allowance=0,this.clocking=0,this.timesheet=0,this.overtime=0,this.onCall=0}}]),e}(),f=a(37716),v=a(44956),m="hide-arrows",w=((s=function(){function e(i,n,a,s){t(this,e),this.renderer=n,this.document=a,this.ngZone=s,this.element=i.nativeElement,this.wrapper=this.createWrapper(),this.createArrows()}return i(e,[{key:"poTabsContainer",get:function(){return this.element.querySelector(".po-tabs-container")}},{key:"poTabsHeader",get:function(){return this.element.querySelector(".po-tabs-header")}},{key:"ngOnInit",value:function(){var t=this;this.ngZone.runOutsideAngular(function(){t.checkIfArrowsIsNeededTimeoutId=setInterval(function(){t.hideArrowsIfNotNeeded()},500)})}},{key:"ngOnDestroy",value:function(){this.checkIfArrowsIsNeededTimeoutId&&clearInterval(this.checkIfArrowsIsNeededTimeoutId)}},{key:"createWrapper",value:function(){var t=this.document.createElement("div");return t.className="tabs-wrapper-with-arrows ".concat(m),this.renderer.insertBefore(this.element.parentElement,t,this.element),this.renderer.appendChild(t,this.element),t}},{key:"createArrows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.wrapper,e=this.document.createElement("div"),i=this.document.createElement("div");e.className="arrow arrow-left",i.className="arrow arrow-right",this.renderer.insertBefore(t,e,t.firstChild),this.renderer.appendChild(t,i);var n=this.document.createElement("span");n.className="sort po-icon po-icon-arrow-left",n.onclick=this.scrollTabs.bind(this,!1),this.renderer.appendChild(e,n);var a=this.document.createElement("span");a.className="sort po-icon po-icon-arrow-right",a.onclick=this.scrollTabs.bind(this,!0),this.renderer.appendChild(i,a)}},{key:"scrollTabs",value:function(t){var e=this.poTabsContainer.clientWidth,i=this.poTabsContainer.scrollLeft+(t?40:-40);this.poTabsContainer.scrollLeft=i>0&&i<e?i:t?e:0}},{key:"hideArrowsIfNotNeeded",value:function(){var t=this.wrapper.className.includes(m),e=this.poTabsHeader.clientWidth>this.poTabsContainer.clientWidth+50;t&&e?this.wrapper.className=this.wrapper.className.replace(m,""):!t&&!e&&(this.wrapper.className+=" ".concat(m))}}]),e}()).\u0275fac=function(t){return new(t||s)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(r.K0),f.Y36(f.R0b))},s.\u0275dir=f.lG2({type:s,selectors:[["","appTabArrows",""]]}),s),b=a(29790);function x(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"po-tab",3),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().timesheetClicked()}),f.ALo(1,"translate"),f.qZA()}if(2&t){var n=f.oxw();f.hYB("p-label","",f.lcZ(1,3,"l-timesheet")," (",n.notificationsToolBar.timesheet,")"),f.Q6J("p-active",n.currentTab===n.tabsEnum.Timesheet)}}function y(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"po-tab",3),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().overtimeClicked()}),f.ALo(1,"translate"),f.qZA()}if(2&t){var n=f.oxw();f.hYB("p-label","",f.lcZ(1,3,"l-overtime")," (",n.notificationsToolBar.overtime,")"),f.Q6J("p-active",n.currentTab===n.tabsEnum.Overtime)}}function k(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"po-tab",3),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().vacationClicked()}),f.ALo(1,"translate"),f.qZA()}if(2&t){var n=f.oxw();f.hYB("p-label","",f.lcZ(1,3,"l-vacation")," (",n.notificationsToolBar.vacation,")"),f.Q6J("p-active",n.currentTab===n.tabsEnum.Vacation)}}function Z(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"po-tab",3),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().onCallClicked()}),f.ALo(1,"translate"),f.qZA()}if(2&t){var n=f.oxw();f.hYB("p-label","",f.lcZ(1,3,"l-on-call")," (",n.notificationsToolBar.onCall,")"),f.Q6J("p-active",n.currentTab===n.tabsEnum.OnCall)}}var A=function(){return(t=A||(A={}))[t.Timesheet=1]="Timesheet",t[t.Overtime=2]="Overtime",t[t.Vacation=3]="Vacation",t[t.OnCall=4]="OnCall",A;var t}(),S=function(){var e=function(){function e(i,n,a,s,r){t(this,e),this.router=i,this.permissionSelector=n,this.notificationsCountSelectors=a,this.spinnerService=s,this.notificationsPageStore=r,this.showOvertime=!1,this.showTimesheet=!1,this.showVacation=!1,this.showOnCall=!1,this.setCurrentTabFromUrl()}return i(e,[{key:"tabsEnum",get:function(){return A}},{key:"ngOnInit",value:function(){this.notificationsToolBar={},this.getPermissions(),this.countNotifications()}},{key:"ngOnDestroy",value:function(){this.permissionSubscription&&this.permissionSubscription.unsubscribe(),this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.notificationsCountSubscription&&this.notificationsCountSubscription.unsubscribe(),this.notificationsPageStore.reset()}},{key:"countNotifications",value:function(){var t=this;this.notificationsCountSubscription=this.notificationsCountSelectors.state$.subscribe(function(e){e.loading?t.spinnerService.show():t.spinnerService.hide(),t.notificationsToolBar=new g,t.notificationsToolBar.countToolBar(e.model)})}},{key:"timesheetClicked",value:function(){this.currentTab=A.Timesheet,this.router.navigateByUrl("request/notifications/timesheet")}},{key:"overtimeClicked",value:function(){this.currentTab=A.Overtime,this.router.navigateByUrl("request/notifications/overtime/pending")}},{key:"onCallClicked",value:function(){this.currentTab=A.OnCall,this.router.navigateByUrl("request/notifications/oncall")}},{key:"vacationClicked",value:function(){this.currentTab=A.Vacation,this.router.navigateByUrl("request/notifications/vacation")}},{key:"getPermissions",value:function(){var t=this;this.permissionSubscription=this.permissionSelector.permissions$.subscribe(function(e){e?(t.showTimesheet=void 0===e.notificationClocking&&void 0===e.notificationAllowance||e.notificationClocking||e.notificationAllowance,t.showVacation=void 0===e.notificationVacation||e.notificationVacation,t.showOvertime=!!e.overtime,t.showOnCall=!!e.notificationOnCall,null==t.currentTab&&t.redirectBasedOnPermission()):t.showOvertime=!1})}},{key:"redirectBasedOnPermission",value:function(){this.showTimesheet?this.timesheetClicked():this.showOvertime?this.overtimeClicked():this.showVacation?this.vacationClicked():this.showOnCall&&this.onCallClicked()}},{key:"setCurrentTabFromUrl",value:function(){var t=this;this.routerEventsSubscription=this.router.events.subscribe(function(e){if(e instanceof c.m2)switch(e.urlAfterRedirects){case"/request/notifications/timesheet":t.currentTab=A.Timesheet;break;case"/request/notifications/vacation":t.currentTab=A.Vacation;break;case"/request/notifications/overtime/pending":t.currentTab=A.Overtime;break;case"/request/notifications/oncall":t.currentTab=A.OnCall;break;default:t.currentTab=null,t.redirectBasedOnPermission()}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.F0),f.Y36(p.eL),f.Y36(p.S2),f.Y36(h.V),f.Y36(o.P))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-notifications"]],decls:7,vars:4,consts:[[1,"panel-body","no-padding"],["appTabArrows","",1,"po-xl-12","po-lg-12","po-md-12","po-sm-12"],[3,"p-active","p-label","p-click",4,"ngIf"],[3,"p-active","p-label","p-click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"po-tabs",1),f.YNc(2,x,2,5,"po-tab",2),f.YNc(3,y,2,5,"po-tab",2),f.YNc(4,k,2,5,"po-tab",2),f.YNc(5,Z,2,5,"po-tab",2),f.qZA(),f._UZ(6,"router-outlet"),f.qZA()),2&t&&(f.xp6(2),f.Q6J("ngIf",e.showTimesheet),f.xp6(1),f.Q6J("ngIf",e.showOvertime),f.xp6(1),f.Q6J("ngIf",e.showVacation),f.xp6(1),f.Q6J("ngIf",e.showOnCall))},directives:[v.Gv4,w,r.O5,c.lC,v.w8F],pipes:[b.X$],styles:["[_nghost-%COMP%]     .po-wrapper .po-page{display:inline-block;height:100%!important}"]}),e}(),M=a(64762),T=a(92340),C=a(81483),q=a(33490),L=a(63114),V=a(97983),O=a(98348),P=a(36227),R=a(49512),_=a(12994),N=a(54683),D=a(84479),F=a(65241),U=a(39075),J=a(96054),I=a(32114),E=a(3679),Y=a(10690),B=a(13235),H=a(32268);function G(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"span",10),f.NdJ("click",function(){f.CHM(i);var t=f.oxw().$implicit;return f.oxw(2).getAttachedFile(t)}),f.qZA()}}function Q(t,e){if(1&t&&f.YNc(0,G,1,0,"span",9),2&t){var i=e.$implicit;f.Q6J("ngIf",i&&""!==i)}}function z(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",6),f.TgZ(1,"po-table",7),f.NdJ("p-all-selected",function(){return f.CHM(i),f.oxw().countSelected()})("p-all-unselected",function(){return f.CHM(i),f.oxw().countSelected()})("p-selected",function(){return f.CHM(i),f.oxw().countSelected()})("p-unselected",function(){return f.CHM(i),f.oxw().countSelected()})("p-show-more",function(){return f.CHM(i),f.oxw().showMore()}),f.YNc(2,Q,1,1,"ng-template",8),f.qZA(),f.qZA()}if(2&t){var n=f.oxw();f.xp6(1),f.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",n.columns)("p-items",n.items)("p-actions",n.tableActions)("p-loading",n.loading)("p-show-more-disabled",n.showMoreDisable),f.xp6(1),f.Q6J("p-property",n.collumnName)}}function j(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.ALo(7,"utcDate"),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-date")),f.xp6(3),f.Oqu(f.xi3(7,4,i.date,"shortDate"))}}function $(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.ALo(7,"utcDate"),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-initial-date")),f.xp6(3),f.Oqu(f.xi3(7,4,i.date,"shortDate"))}}function X(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.ALo(7,"utcDate"),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-end-date")),f.xp6(3),f.Oqu(f.xi3(7,4,i.endDate,"shortDate"))}}function W(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-hour")),f.xp6(3),f.Oqu(i.hour)}}function K(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-initial-hour")),f.xp6(3),f.Oqu(i.hour)}}function tt(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",27),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-final-hour")),f.xp6(3),f.Oqu(i.endHour)}}function et(t,e){1&t&&(f.TgZ(0,"label",35),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&t&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"l-justification")))}function it(t,e){1&t&&(f.TgZ(0,"label",35),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&t&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"l-reason")))}function nt(t,e){if(1&t&&(f.TgZ(0,"div",25),f._UZ(1,"hr",26),f.TgZ(2,"label",35),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"strong",28),f._uU(6),f.qZA(),f.qZA()),2&t){var i=f.oxw().$implicit;f.xp6(3),f.Oqu(f.lcZ(4,2,"l-reason")),f.xp6(3),f.Oqu(i.reason)}}function at(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"po-button",36),f.NdJ("p-click",function(){f.CHM(i);var t=f.oxw().$implicit;return f.oxw(2).getAttachedFile(t.requestId)}),f.ALo(2,"translate"),f.qZA(),f.qZA()}2&t&&(f.xp6(1),f.s9C("p-label",f.lcZ(2,1,"l-view-medical-certificate")))}function st(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",16),f.TgZ(1,"app-expansion-card"),f.TgZ(2,"div",17),f.TgZ(3,"div",18),f.TgZ(4,"po-checkbox",19),f.NdJ("ngModelChange",function(t){return f.CHM(i).$implicit.checked=t})("p-change",function(){var t=f.CHM(i).$implicit;return f.oxw(2).selectMobile(t)}),f.qZA(),f.qZA(),f.TgZ(5,"div",20),f._UZ(6,"div",21),f.TgZ(7,"div",22),f.TgZ(8,"strong"),f._uU(9),f.ALo(10,"titleCase"),f.qZA(),f.qZA(),f.TgZ(11,"div",23),f._uU(12),f.ALo(13,"titleCase"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",24),f.TgZ(15,"div",25),f._UZ(16,"hr",26),f.TgZ(17,"label",27),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.TgZ(20,"strong",28),f._uU(21),f.qZA(),f.qZA(),f.YNc(22,j,8,7,"div",29),f.YNc(23,$,8,7,"div",29),f.YNc(24,X,8,7,"div",29),f.YNc(25,W,7,4,"div",29),f.YNc(26,K,7,4,"div",29),f.YNc(27,tt,7,4,"div",29),f.TgZ(28,"div",25),f._UZ(29,"hr",26),f.YNc(30,et,3,3,"label",30),f.YNc(31,it,3,3,"label",30),f.TgZ(32,"strong",28),f._uU(33),f.qZA(),f.qZA(),f.YNc(34,nt,7,4,"div",29),f.YNc(35,at,3,3,"div",31),f.TgZ(36,"div",32),f.TgZ(37,"po-button",33),f.NdJ("p-click",function(){var t=f.CHM(i).$implicit;return f.oxw(2).reprove(t)}),f.ALo(38,"translate"),f.qZA(),f.TgZ(39,"po-button",34),f.NdJ("p-click",function(){var t=f.CHM(i).$implicit;return f.oxw(2).approve(t)}),f.ALo(40,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&t){var n=e.$implicit,a=e.index,s=f.oxw(2);f.xp6(4),f.MGl("id","card-",a,""),f.Q6J("ngModel",n.checked),f.xp6(2),f.Udp("background-image",s.getAvatar(n.object.employeeSummary.id)),f.xp6(3),f.Oqu(f.lcZ(10,21,n.object.employeeSummary.name)),f.xp6(3),f.Oqu(f.lcZ(13,23,n.object.employeeSummary.roleDescription)),f.xp6(6),f.Oqu(f.lcZ(19,25,"l-type")),f.xp6(3),f.Oqu(n.type),f.xp6(1),f.Q6J("ngIf","clocking"===n.originalType),f.xp6(1),f.Q6J("ngIf","allowance"===n.originalType),f.xp6(1),f.Q6J("ngIf","allowance"===n.originalType),f.xp6(1),f.Q6J("ngIf","clocking"===n.originalType),f.xp6(1),f.Q6J("ngIf","allowance"===n.originalType),f.xp6(1),f.Q6J("ngIf","allowance"===n.originalType),f.xp6(3),f.Q6J("ngIf",!n.isDatasul),f.xp6(1),f.Q6J("ngIf",n.isDatasul),f.xp6(2),f.Oqu(n.justify),f.xp6(1),f.Q6J("ngIf",n.isProtheus),f.xp6(1),f.Q6J("ngIf",s.canViewAttachFile&&n.attachment&&""!==n.attachment),f.xp6(2),f.s9C("p-label",f.lcZ(38,27,"l-decline")),f.xp6(2),f.s9C("p-label",f.lcZ(40,29,"l-accept"))}}function rt(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",11),f.TgZ(1,"div"),f.TgZ(2,"po-checkbox",12),f.NdJ("p-change",function(){f.CHM(i);var t=f.oxw();return t.selectAllMobile(t.items)})("ngModelChange",function(t){return f.CHM(i),f.oxw().checkAll=t}),f.ALo(3,"translate"),f.qZA(),f.qZA(),f.YNc(4,st,41,31,"div",13),f.TgZ(5,"div",14),f.TgZ(6,"po-button",15),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().showMore()}),f.ALo(7,"translate"),f.qZA(),f.qZA(),f.qZA()}if(2&t){var n=f.oxw();f.xp6(2),f.s9C("p-label",f.lcZ(3,6,"l-select-all")),f.Q6J("ngModel",n.checkAll),f.xp6(2),f.Q6J("ngForOf",n.items)("ngForTrackBy",n.trackByFunction),f.xp6(2),f.s9C("p-label",f.lcZ(7,8,"l-load-more")),f.Q6J("p-disabled",n.showMoreDisable)}}function ot(t,e){if(1&t&&(f.TgZ(0,"span",37),f._uU(1),f.qZA()),2&t){var i=f.oxw();f.xp6(1),f.Oqu(i.modalText)}}function ct(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"po-textarea",38),f.NdJ("ngModelChange",function(t){return f.CHM(i),f.oxw().reprovedReason=t}),f.ALo(1,"translate"),f.qZA()}if(2&t){var n=f.oxw();f.s9C("p-label",f.lcZ(1,2,"l-reason")),f.Q6J("ngModel",n.reprovedReason)}}var lt=function(){var e=function(){function e(i,n,a,s,r,o,c,l,u,h){t(this,e),this.notificationService=i,this.windowUtilService=n,this.appTranslateService=a,this.profileService=s,this.sanitizationService=r,this.router=o,this.permissionSelectors=c,this.allowanceService=l,this.fieldPropertiesService=u,this.notificationServiceManager=h,this.timesheetListView=new q.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.selectedLines=[],this.canViewAttachFile=!1,this.collumnName="attachment",this.reasonRequired=!1,this.isReprove=!1}return i(e,[{key:"onResize",value:function(){this.isMobileCheck()}},{key:"ngOnInit",value:function(){this.initializeComponent()}},{key:"initializeComponent",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.timesheetListView.actualPage=1,this.timesheetListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.disableVerify=!0,this.tab="timesheet",this.countLines="",this.verifyModal=[!1,!1,!1,{}],t.next=10,this.getPermissions();case 10:this.isMobileCheck(),this.getLabelsSearch(),this.getTypeFilterOptions(),this.getColumns(),this.getPageActions(),this.getTableActions(),this.getModalActions(),this.getData(!0),this.getFieldProps();case 19:case"end":return t.stop()}},t,this)}))}},{key:"isMobileCheck",value:function(){this.isMobile=this.windowUtilService.isMobileDevice()}},{key:"getAttachedFile",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.allowanceService.getAttachedFile(t);case 3:(i=e.sent)&&this.initializeFilePreviewDialog("timesheet/allowances/file/download",i,t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"getData",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTimesheetNotificationsList(this.timesheetListView.actualPage,this.timesheetListView.pageSize,t,this.employeeName,this.dateFilter,this.typeFilter);case 2:case"end":return e.stop()}},e,this)}))}},{key:"showMore",value:function(){this.getTimesheetNotificationsList(this.timesheetListView.getNextPage(),this.timesheetListView.pageSize,!1,this.employeeName,this.dateFilter,this.typeFilter)}},{key:"countSelected",value:function(){var t;(t=this.getLines(t))&&t>0?(this.countLines=" ("+t.toString()+")",this.getPageActions()):(this.countLines="",this.getPageActions())}},{key:"selectAllMobile",value:function(t){var e=this;this.selectedLines=[],t.forEach(function(t){t.checked=e.checkAll,e.selectedLines.push(t)}),this.selectedLines=this.checkAll?this.selectedLines:[],this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}},{key:"selectMobile",value:function(t){if(this.selectedLines.length>0)if(this.selectedLines.find(function(e){return e===t})){var e=this.selectedLines.indexOf(t);e>-1&&this.selectedLines.splice(e,1),this.checkAll&&this.items.length!==this.selectedLines.length&&(this.checkAll=!1)}else this.selectedLines.push(t),!this.checkAll&&this.items.length===this.selectedLines.length&&(this.checkAll=!0);else this.selectedLines.push(t);this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}},{key:"onAdvancedSearch",value:function(t){t?this.searchItems(t):this.resetFilters()}},{key:"onChangeDisclaimers",value:function(t){var e={};t.forEach(function(t){e[t.property]=t.value}),this.searchItems(e)}},{key:"onQuickSearch",value:function(t){t?this.searchItems({name:t}):this.resetFilters()}},{key:"translateString",value:function(t){return this.appTranslateService.getI18n(t)}},{key:"getAvatar",value:function(t){var e=this;return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(function(i){i&&i.content&&(e.avatar[t]=e.sanitizationService.bypassSecurityTrustStyle("url(".concat("data:image/"+(i.type||"png")+";base64,"+i.content,")")))})),this.avatar[t]}},{key:"resetFilters",value:function(){this.timesheetListView.actualPage>1&&(this.timesheetListView.actualPage=1),this.getData(!0)}},{key:"getTimesheetNotificationsList",value:function(t,e,i,n,a,s){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.notificationService.getNotificationsQP(T.N.loggedUser,s,t,e,n,a,this.tab);case 3:if(!(o=r.sent)){r.next=6;break}return r.abrupt("return",this.updateItemsForTable(o,i));case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:this.timesheetListView.hasMoreRecords=!1;case 11:case"end":return r.stop()}},r,this,[[0,8]])}))}},{key:"updateItemsForTable",value:function(t,e){var i,n,a;return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var r,o,c=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.clearData(e),this.timesheetListView.records=this.timesheetListView.records.concat(t.items),this.timesheetListView.hasMoreRecords=t.hasNext,this.notificationsView=[],this.timesheetListView.records.forEach(function(t){c.notificationsView.push(new N.B(t))}),r=0;case 2:if(!(r<this.timesheetListView.records.length)){s.next=27;break}return s.t0=this.notificationsView[r].id,s.t1=O.ZP.isErpDatasul(),s.t2=O.ZP.isErpProtheus(),s.t3=!1,s.t4=this.getAvatar(this.notificationsView[r].employeeSummary.id),s.t5=this.notificationsView[r].employeeSummary.name,s.t6=C.Em.formatUTCDate(new Date(this.notificationsView[r].fieldsView.initDate.value)),s.t7=this.notificationsView[r].fieldsView.endDate&&this.notificationsView[r].fieldsView.endDate.value?C.Em.formatUTCDate(new Date(this.notificationsView[r].fieldsView.endDate.value)):"",s.next=13,this.returnTypeLabel(this.notificationsView[r]);case 13:s.t8=s.sent,s.t9=this.notificationsView[r].type,s.t10=this.notificationsView[r].fieldsView.initHour&&"-1"!==this.notificationsView[r].fieldsView.initHour.value?C.Em.getHoursByMilliseconds(this.notificationsView[r].fieldsView.initHour.value):"00:00",s.t11=this.notificationsView[r].fieldsView.endHour&&"-1"!==this.notificationsView[r].fieldsView.endHour.value?C.Em.getHoursByMilliseconds(this.notificationsView[r].fieldsView.endHour.value):"00:00",s.t12=O.ZP.isErpDatasul()?this.notificationsView[r].fieldsView.reason?this.notificationsView[r].fieldsView.reason.value:"":this.notificationsView[r].fieldsView.justify.value,s.t13=O.ZP.isErpProtheus()&&this.notificationsView[r].fieldsView.reason?this.notificationsView[r].fieldsView.reason.value:"",s.t14=this.notificationsView[r],s.t15=/true/i.test(null===(i=this.notificationsView[r].fieldsView.hasAttachment)||void 0===i?void 0:i.value)?null===(n=this.notificationsView[r].fieldsView.requestId)||void 0===n?void 0:n.value:"",s.t16=null===(a=this.notificationsView[r].fieldsView.requestId)||void 0===a?void 0:a.value,o={id:s.t0,isDatasul:s.t1,isProtheus:s.t2,checked:s.t3,avatar:s.t4,name:s.t5,date:s.t6,endDate:s.t7,type:s.t8,originalType:s.t9,hour:s.t10,endHour:s.t11,justify:s.t12,reason:s.t13,object:s.t14,attachment:s.t15,requestId:s.t16},this.items[r]=o;case 24:r++,s.next=2;break;case 27:this.items.length<this.timesheetListView.actualPage*this.timesheetListView.pageSize&&(this.showMoreDisable=!0);case 28:case"end":return s.stop()}},s,this)}))}},{key:"clearData",value:function(t){(!this.timesheetListView.records||t)&&(this.timesheetListView.records=[],t&&(this.selectedLines=[],this.items=[]))}},{key:"getLines",value:function(t){return this.isMobile?this.selectedLines.length:this.poTable.getSelectedRows().length}},{key:"disableButtons",value:function(){return this.isMobile?this.disableVerify:!this.items.find(function(t){return t.$selected})}},{key:"searchItems",value:function(t){this.employeeName=t.name?t.name:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.typeFilter=t.type?t.type:void 0,this.timesheetListView.actualPage>1&&(this.timesheetListView.actualPage=1),this.getData(!0)}},{key:"approveMany",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-approve-notifications");case 2:this.modalText=t.sent.toString(),this.poModal.open(),this.reasonRequired=!1,this.isReprove=!1,this.verifyModal=[!0,!0,!0,{}];case 7:case"end":return t.stop()}},t,this)}))}},{key:"reproveMany",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-reprove-notifications");case 2:this.modalText=t.sent.toString(),this.poModal.open(),this.isReprove=!0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!0,{}];case 7:case"end":return t.stop()}},t,this)}))}},{key:"approve",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-approve-notification");case 2:this.modalText=e.sent.toString(),this.poModal.open(),this.isReprove=!1,this.reasonRequired=!1,this.verifyModal=[!0,!0,!1,t];case 7:case"end":return e.stop()}},e,this)}))}},{key:"reprove",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-reprove-notification");case 2:this.modalText=e.sent.toString(),this.poModal.open(),this.isReprove=!0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!1,t];case 7:case"end":return e.stop()}},e,this)}))}},{key:"sendData",value:function(t,e,i){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=t?"m-approved-request":"m-reprove-request",a=this.isMobile?e?this.selectedLines:[i]:e?this.poTable.getSelectedRows():[i],n.next=4,this.notificationService.createRequisitionsResponse(a,t,s,this.reprovedReason);case 4:return n.next=6,this.initializeComponent();case 6:case"end":return n.stop()}},n,this)}))}},{key:"detail",value:function(t){_.T.notification=t.object,this.router.navigate(["request/notificationDetails"])}},{key:"returnTypeLabel",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("clocking"!==t.type){e.next=17;break}if(!O.ZP.isErpDatasul()){e.next=7;break}return e.next=4,this.translateString("l-clocking-hour");case 4:e.t1=e.sent.toString(),e.next=14;break;case 7:return e.next=9,this.translateString("l-clocking-hour");case 9:e.t2=e.sent.toString(),e.t3=e.t2+" (",e.t4=t.fieldsView.direction.value,e.t5=e.t3+e.t4,e.t1=e.t5+")";case 14:e.t0=e.t1,e.next=20;break;case 17:return e.next=19,this.translateString("l-allowance");case 19:e.t0=e.sent.toString();case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}},e,this)}))}},{key:"getModalActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(){e.closeModal()},t.next=3,this.translateString("l-cancel-title");case 3:return t.t1=t.sent.toString(),t.t2=!0,this.closeAction={action:t.t0,label:t.t1,danger:t.t2},t.t3=function(){e.confirmModal()},t.next=9,this.translateString("l-yes");case 9:t.t4=t.sent.toString(),this.confirmAction={action:t.t3,label:t.t4};case 11:case"end":return t.stop()}},t,this)}))}},{key:"getTypeFilterOptions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-allowance");case 2:return t.t0=t.sent.toString(),t.t1={value:"allowance",label:t.t0},t.next=6,this.translateString("l-clocking-hour");case 6:t.t2=t.sent.toString(),t.t3={value:"clocking",label:t.t2},this.typeFilterOptions=[t.t1,t.t3];case 9:case"end":return t.stop()}},t,this)}))}},{key:"getLabelsSearch",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-filter-applied");case 2:return t.t0=t.sent.toString(),t.next=5,this.translateString("l-filter-title");case 5:return t.t1=t.sent.toString(),t.next=8,this.translateString("l-cancel-title");case 8:return t.t2=t.sent.toString(),t.next=11,this.translateString("l-apply");case 11:return t.t3=t.sent.toString(),t.next=14,this.translateString("l-researched-value");case 14:return t.t4=t.sent.toString(),t.next=17,this.translateString("l-search-collaborator-placeholder");case 17:return t.t5=t.sent.toString(),this.literals={disclaimerGroupTitle:t.t0,filterTitle:t.t1,filterCancelLabel:t.t2,filterConfirmLabel:t.t3,quickSearchLabel:t.t4,searchPlaceholder:t.t5},t.next=21,this.translateString("l-name-collaborator");case 21:return t.t6=t.sent.toString(),t.t7={property:"name",label:t.t6,gridColumns:6},t.next=25,this.translateString("l-date");case 25:t.t8=t.sent.toString(),t.t9={property:"date",label:t.t8,type:"date",gridColumns:6},t.t10={property:"type",label:"Tipo de solicita\xe7\xe3o",options:this.typeFilterOptions,gridColumns:6},this.filters=[t.t7,t.t9,t.t10];case 29:case"end":return t.stop()}},t,this)}))}},{key:"getColumns",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-name");case 2:return t.t0=t.sent.toString(),t.t1=this.canViewAttachFile?"16,6%":"20%",t.t2={property:"name",label:t.t0,width:t.t1},t.next=7,this.translateString("l-type");case 7:return t.t3=t.sent.toString(),t.t4=this.canViewAttachFile?"16,6%":"20%",t.t5={property:"type",label:t.t3,width:t.t4},t.next=12,this.translateString("l-date");case 12:return t.t6=t.sent.toString(),t.t7=this.canViewAttachFile?"16,6%":"20%",t.t8={property:"date",label:t.t6,type:"date",width:t.t7},t.next=17,this.translateString("l-hour");case 17:if(t.t9=t.sent.toString(),t.t10=this.canViewAttachFile?"16,6%":"20%",t.t11={property:"hour",label:t.t9,width:t.t10},!O.ZP.isErpDatasul()){t.next=26;break}return t.next=23,this.translateString("l-reason");case 23:t.t12=t.sent.toString(),t.next=29;break;case 26:return t.next=28,this.translateString("l-justification");case 28:t.t12=t.sent.toString();case 29:if(t.t13=t.t12,t.t14=this.canViewAttachFile?"16,6%":"20%",t.t15={property:"justify",label:t.t13,width:t.t14},this.columns=[t.t2,t.t5,t.t8,t.t11,t.t15],t.t16=this.canViewAttachFile,!t.t16){t.next=42;break}return t.t17=this.columns,t.t18=this.collumnName,t.next=39,this.translateString("l-attachments");case 39:t.t19=t.sent.toString(),t.t20={property:t.t18,label:t.t19,type:"columnTemplate",width:"16,6%"},t.t17.push.call(t.t17,t.t20);case 42:case"end":return t.stop()}},t,this)}))}},{key:"getPageActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-approve-selected");case 2:return t.t0=t.sent.toString(),t.t1=this.countLines,t.t2=t.t0+t.t1,t.t3=this.approveMany.bind(this),t.t4=this.disableButtons.bind(this),t.t5={label:t.t2,action:t.t3,disabled:t.t4},t.next=10,this.translateString("l-reprove-selected");case 10:t.t6=t.sent.toString(),t.t7=this.countLines,t.t8=t.t6+t.t7,t.t9=this.reproveMany.bind(this),t.t10=this.disableButtons.bind(this),t.t11={label:t.t8,action:t.t9,disabled:t.t10},this.pageActions=[t.t5,t.t11];case 17:case"end":return t.stop()}},t,this)}))}},{key:"getTableActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.approve.bind(this),t.next=3,this.translateString("l-approve");case 3:return t.t1=t.sent.toString(),t.t2={action:t.t0,label:t.t1},t.t3=this.reprove.bind(this),t.next=8,this.translateString("l-decline");case 8:return t.t4=t.sent.toString(),t.t5={action:t.t3,label:t.t4},t.t6=this.detail.bind(this),t.next=13,this.translateString("l-see-details");case 13:t.t7=t.sent.toString(),t.t8={action:t.t6,label:t.t7},this.tableActions=[t.t2,t.t5,t.t8];case 16:case"end":return t.stop()}},t,this)}))}},{key:"getFieldProps",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fieldPropertiesService.getFieldProperties("notification");case 2:t.sent.map(function(t){"reasonTimesheet"===t.field&&(e.reasoFieldProps=t)});case 3:case"end":return t.stop()}},t,this)}))}},{key:"closeModal",value:function(){this.closePoModal(),this.verifyModal=[!1,!1,!1,{}]}},{key:"confirmModal",value:function(){var t;return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isReprove||!(null===(t=this.reasoFieldProps)||void 0===t?void 0:t.required)||this.reprovedReason){e.next=7;break}return e.next=3,this.appTranslateService.getI18n("l-reason-required");case 3:i=e.sent,this.notificationServiceManager.showNotification(i,v.ik9.Error),e.next=17;break;case 7:if(this.poModal.close(),e.t0=this.verifyModal[0],!e.t0){e.next=17;break}if(!this.verifyModal[2]){e.next=15;break}return e.next=13,this.sendData(this.verifyModal[1],this.verifyModal[2]);case 13:e.next=17;break;case 15:return e.next=17,this.sendData(this.verifyModal[1],this.verifyModal[2],this.verifyModal[3]);case 17:case"end":return e.stop()}},e,this)}))}},{key:"closePoModal",value:function(){this.poModal.close()}},{key:"getPermissions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.permissionSelectors.nextPermissionsNotNull();case 2:e=t.sent,this.canViewAttachFile=e.viewAttachmentAllowance;case 4:case"end":return t.stop()}},t,this)}))}},{key:"initializeFilePreviewDialog",value:function(t,e,i){this.previewFileDialog.initializeComponent(t,e,i)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Y36(_.T),f.Y36(D.g),f.Y36(F.g),f.Y36(V.H),f.Y36(U.H7),f.Y36(c.F0),f.Y36(p.eL),f.Y36(R.n),f.Y36(P.c),f.Y36(J.g))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-tab-timesheet"]],viewQuery:function(t,e){var i;(1&t&&(f.Gf(v._w3,5),f.Gf(v.hmF,7),f.Gf(L.K,5)),2&t)&&(f.iGM(i=f.CRH())&&(e.poTable=i.first),f.iGM(i=f.CRH())&&(e.poModal=i.first),f.iGM(i=f.CRH())&&(e.previewFileDialog=i.first))},hostBindings:function(t,e){1&t&&f.NdJ("resize",function(t){return e.onResize(t)},!1,f.Jf7)},decls:8,vars:12,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],["p-size","md",3,"p-title","p-primary-action","p-secondary-action"],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12",4,"ngIf"],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12","name","textarea",3,"ngModel","p-label","ngModelChange",4,"ngIf"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",1,"po-table-custom-hide-text-overflow",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],["p-table-column-template","",3,"p-property"],["class","ico-download icon-color-totvs mouse-pointer download-icon waves-effect waves-base icon-size",3,"click",4,"ngIf"],[1,"ico-download","icon-color-totvs","mouse-pointer","download-icon","waves-effect","waves-base","icon-size",3,"click"],[1,"mobile"],["name","select-all",3,"ngModel","p-label","p-change","ngModelChange"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],[1,"po-sm-6","po-md-6"],[1,"pull-right"],["class","card-line",4,"ngIf"],["class","po-sm-4 po-md-5",4,"ngIf"],[4,"ngIf"],[1,"po-sm-12","po-md-12","no-padding"],["p-type","danger",1,"po-mt-2","po-mb-2","po-sm-6","po-md-6",3,"p-label","p-click"],[1,"po-mt-2","po-mb-2","po-sm-6","po-md-6",3,"p-label","p-click"],[1,"po-sm-4","po-md-5"],["p-icon","po-icon-attach",1,"po-mt-2","po-sm-12","po-md-12",3,"p-label","p-click"],[1,"po-lg-12","po-xl-12","po-md-12","po-sm-12"],["name","textarea",1,"po-lg-12","po-xl-12","po-md-12","po-sm-12",3,"ngModel","p-label","ngModelChange"]],template:function(t,e){1&t&&(f.TgZ(0,"po-page-dynamic-search",0),f.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),f.YNc(1,z,3,9,"div",1),f.YNc(2,rt,8,10,"div",2),f.qZA(),f.TgZ(3,"po-modal",3),f.ALo(4,"translate"),f.YNc(5,ot,2,1,"span",4),f.YNc(6,ct,2,4,"po-textarea",5),f.qZA(),f._UZ(7,"app-preview-file")),2&t&&(f.Q6J("p-actions",e.pageActions)("p-filters",e.filters)("p-literals",e.literals),f.xp6(1),f.Q6J("ngIf",!e.isMobile),f.xp6(1),f.Q6J("ngIf",e.isMobile),f.xp6(1),f.Q6J("p-title",f.lcZ(4,10,e.isReprove?"l-reprove-timesheet-requisition":"l-confirmation"))("p-primary-action",e.confirmAction)("p-secondary-action",e.closeAction),f.xp6(2),f.Q6J("ngIf",e.modalText),f.xp6(1),f.Q6J("ngIf",e.reasonRequired&&(null==e.reasoFieldProps?null:e.reasoFieldProps.visible)))},directives:[I.O6,r.O5,v.hmF,L.K,v._w3,v.UDu,v.ejx,E.JJ,E.On,r.sg,v.bOz,Y.c,v.gJm],pipes:[b.X$,B.r,H.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.icon-size[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}"]}),e}(),ut=a(2673),ht=a(85385),pt=a(70385);function dt(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",4),f.TgZ(1,"po-table",5),f.NdJ("p-all-selected",function(){return f.CHM(i),f.oxw().countSelected()})("p-all-unselected",function(){return f.CHM(i),f.oxw().countSelected()})("p-selected",function(){return f.CHM(i),f.oxw().countSelected()})("p-unselected",function(){return f.CHM(i),f.oxw().countSelected()})("p-show-more",function(){return f.CHM(i),f.oxw().showMore()}),f.qZA(),f.qZA()}if(2&t){var n=f.oxw();f.xp6(1),f.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",n.columns)("p-items",n.items)("p-actions",n.tableActions)("p-loading",n.loading)("p-show-more-disabled",n.showMoreDisable)}}function gt(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",11),f.TgZ(1,"app-expansion-card"),f.TgZ(2,"div",12),f.TgZ(3,"div",13),f.TgZ(4,"po-checkbox",14),f.NdJ("ngModelChange",function(t){return f.CHM(i).$implicit.checked=t})("p-change",function(){var t=f.CHM(i).$implicit;return f.oxw(2).selectMobile(t)}),f.qZA(),f.qZA(),f.TgZ(5,"div",15),f._UZ(6,"div",16),f.TgZ(7,"div",17),f.TgZ(8,"strong"),f._uU(9),f.ALo(10,"titleCase"),f.qZA(),f.qZA(),f.TgZ(11,"div",18),f._uU(12),f.ALo(13,"titleCase"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div",19),f.TgZ(15,"div",20),f._UZ(16,"hr",21),f.TgZ(17,"label",22),f._uU(18),f.ALo(19,"translate"),f.qZA(),f.TgZ(20,"strong",23),f._uU(21),f.qZA(),f.qZA(),f.TgZ(22,"div",24),f._UZ(23,"hr",21),f.TgZ(24,"label",22),f._uU(25),f.ALo(26,"translate"),f.qZA(),f.TgZ(27,"strong",23),f._uU(28),f.ALo(29,"utcDate"),f.qZA(),f.TgZ(30,"strong",23),f._uU(31),f.ALo(32,"utcDate"),f.qZA(),f.qZA(),f.TgZ(33,"div",20),f._UZ(34,"hr",21),f.TgZ(35,"label",22),f._uU(36),f.ALo(37,"translate"),f.qZA(),f.TgZ(38,"strong",23),f._uU(39),f.ALo(40,"utcDate"),f.qZA(),f.qZA(),f.TgZ(41,"div",20),f._UZ(42,"hr",21),f.TgZ(43,"label",22),f._uU(44),f.ALo(45,"translate"),f.qZA(),f.TgZ(46,"strong",23),f._uU(47),f.ALo(48,"utcDate"),f.qZA(),f.qZA(),f.TgZ(49,"div",20),f._UZ(50,"hr",21),f.TgZ(51,"label",22),f._uU(52),f.ALo(53,"translate"),f.qZA(),f.TgZ(54,"strong",23),f._uU(55),f.qZA(),f.qZA(),f.TgZ(56,"div",20),f._UZ(57,"hr",21),f.TgZ(58,"label",22),f._uU(59),f.ALo(60,"translate"),f.qZA(),f.TgZ(61,"strong",23),f._uU(62),f.qZA(),f.qZA(),f.TgZ(63,"app-yes-or-no-buttons",25),f.NdJ("yes",function(){var t=f.CHM(i).$implicit;return f.oxw(2).approve(t)})("no",function(){var t=f.CHM(i).$implicit;return f.oxw(2).reprove(t)}),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&t){var n=e.$implicit,a=e.index,s=f.oxw(2);f.xp6(4),f.MGl("id","card-",a,""),f.Q6J("ngModel",n.checked),f.xp6(2),f.Udp("background-image",s.getAvatar(n.object.employeeSummary.id)),f.xp6(3),f.Oqu(f.lcZ(10,20,n.object.employeeSummary.name)),f.xp6(3),f.Oqu(f.lcZ(13,22,n.object.employeeSummary.roleDescription)),f.xp6(6),f.Oqu(f.lcZ(19,24,"l-type")),f.xp6(3),f.Oqu(n.type),f.xp6(4),f.Oqu(f.lcZ(26,26,"l-absence-type-vacationLimit")),f.xp6(3),f.Oqu(f.xi3(29,28,n.object.fieldsView.initVacationLimit.value,"shortDate")),f.xp6(3),f.Oqu(f.xi3(32,31,n.object.fieldsView.endVacationLimit.value,"shortDate")),f.xp6(5),f.Oqu(f.lcZ(37,34,"l-vacation-init-period")),f.xp6(3),f.Oqu(f.xi3(40,36,n.initialDate,"shortDate")),f.xp6(5),f.Oqu(f.lcZ(45,39,"l-vacation-end-period")),f.xp6(3),f.Oqu(f.xi3(48,41,n.endDate,"shortDate")),f.xp6(5),f.Oqu(f.lcZ(53,44,"l-vacation-numofdays")),f.xp6(3),f.Oqu(n.daysVacation),f.xp6(4),f.Oqu(f.lcZ(60,46,"l-absence-type-vacationBonus")),f.xp6(3),f.Oqu(n.daysAllowance),f.xp6(1),f.Q6J("id",n.id)}}function ft(t,e){if(1&t){var i=f.EpF();f.TgZ(0,"div",6),f.TgZ(1,"div"),f.TgZ(2,"po-checkbox",7),f.NdJ("p-change",function(){f.CHM(i);var t=f.oxw();return t.selectAllMobile(t.items)})("ngModelChange",function(t){return f.CHM(i),f.oxw().checkAll=t}),f.ALo(3,"translate"),f.qZA(),f.qZA(),f.YNc(4,gt,64,48,"div",8),f.TgZ(5,"div",9),f.TgZ(6,"po-button",10),f.NdJ("p-click",function(){return f.CHM(i),f.oxw().showMore()}),f.ALo(7,"translate"),f.qZA(),f.qZA(),f.qZA()}if(2&t){var n=f.oxw();f.xp6(2),f.s9C("p-label",f.lcZ(3,6,"l-select-all")),f.Q6J("ngModel",n.checkAll),f.xp6(2),f.Q6J("ngForOf",n.items)("ngForTrackBy",n.trackByFunction),f.xp6(2),f.s9C("p-label",f.lcZ(7,8,"l-load-more")),f.Q6J("p-disabled",n.showMoreDisable)}}var vt=[{path:"",component:S,children:[{path:"overtime",canActivate:[l.P],loadChildren:function(){return a.e(99).then(a.bind(a,47099)).then(function(t){return t.OvertimeModule})}},{path:"oncall",canActivate:[l.P],loadChildren:function(){return Promise.all([a.e(965),a.e(963)]).then(a.bind(a,94963)).then(function(t){return t.TabOnCallModule})}},{path:"timesheet",canActivate:[l.P],component:lt},{path:"vacation",canActivate:[l.P],component:function(){var e=function(){function e(i,n,a,s,r,o,c,l){t(this,e),this.windowUtilService=i,this.appTranslateService=n,this.profileService=a,this.sanitizationService=s,this.router=r,this.fieldPropertiesService=o,this.notificationServiceManager=c,this.notificationService=l,this.vacationsListView=new q.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.selectedLines=[],this.reasonRequired=!1,this.isReprove=!1}return i(e,[{key:"onResize",value:function(){this.isMobileCheck()}},{key:"ngOnInit",value:function(){this.vacationsListView.actualPage=1,this.vacationsListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.disableVerify=!0,this.countLines="",this.verifyModal=[!1,!1,!1,{}],this.initializeComponent()}},{key:"isMobileCheck",value:function(){this.isMobile=this.windowUtilService.isMobileDevice()}},{key:"translateString",value:function(t){return this.appTranslateService.getI18n(t)}},{key:"getAvatar",value:function(t){var e=this;return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(function(i){i&&i.content&&(e.avatar[t]=e.sanitizationService.bypassSecurityTrustStyle("url(".concat("data:image/"+(i.type||"png")+";base64,"+i.content,")")))})),this.avatar[t]}},{key:"getData",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVacationsNotificationsList(this.vacationsListView.actualPage,this.vacationsListView.pageSize,t,this.employeeName,this.dateFilter);case 2:case"end":return e.stop()}},e,this)}))}},{key:"showMore",value:function(){this.getVacationsNotificationsList(this.vacationsListView.getNextPage(),this.vacationsListView.pageSize,!1,this.employeeName,this.dateFilter)}},{key:"countSelected",value:function(){var t;(t=this.getLines(t))&&t>0?(this.countLines=" ("+t.toString()+")",this.getPageActions()):(this.countLines="",this.getPageActions())}},{key:"selectAllMobile",value:function(t){var e=this;this.selectedLines=[],t.forEach(function(t){t.checked=e.checkAll,e.selectedLines.push(t)}),this.selectedLines=this.checkAll?this.selectedLines:[],this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}},{key:"selectMobile",value:function(t){if(this.selectedLines.length>0)if(this.selectedLines.find(function(e){return e===t})){var e=this.selectedLines.indexOf(t);e>-1&&this.selectedLines.splice(e,1),this.checkAll&&this.items.length!==this.selectedLines.length&&(this.checkAll=!1)}else this.selectedLines.push(t),!this.checkAll&&this.items.length===this.selectedLines.length&&(this.checkAll=!0);else this.selectedLines.push(t);this.disableVerify=this.selectedLines.length<=0,this.disableButtons(),this.countSelected()}},{key:"onAdvancedSearch",value:function(t){t?this.searchItems(t):this.resetFilters()}},{key:"onChangeDisclaimers",value:function(t){var e={};t.forEach(function(t){e[t.property]=t.value}),this.searchItems(e)}},{key:"onQuickSearch",value:function(t){t?this.searchItems({name:t}):this.resetFilters()}},{key:"reprovedReasonResponse",value:function(t){t?this.confirmModal():this.closeModal()}},{key:"initializeComponent",value:function(){this.isMobileCheck(),this.getLabelsSearch(),this.getColumns(),this.getPageActions(),this.getTableActions(),this.getModalActions(),this.getData(!0),this.getFieldProps()}},{key:"getFieldProps",value:function(){var t;return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.fieldPropertiesService)||void 0===t?void 0:t.getFieldProperties("notification");case 2:e.sent.forEach(function(t){"reason"===(null==t?void 0:t.field)&&(i.reasonFieldProps=t)});case 3:case"end":return e.stop()}},e,this)}))}},{key:"resetFilters",value:function(){this.vacationsListView.actualPage>1&&(this.vacationsListView.actualPage=1),this.getData(!0)}},{key:"searchItems",value:function(t){this.employeeName=t.name?t.name:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.vacationsListView.actualPage>1&&(this.vacationsListView.actualPage=1),this.getData(!0)}},{key:"approveMany",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isReprove=!1,this.justifyNotification.isReprove=!1,t.next=4,this.translateString("l-approve-notifications");case 4:this.modalText=t.sent.toString(),this.reasonRequired=!1,this.verifyModal=[!0,!0,!0,{}],this.openModal();case 8:case"end":return t.stop()}},t,this)}))}},{key:"reproveMany",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.isReprove=!0,this.justifyNotification.isReprove=!0,this.modalText=void 0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!0,{}],this.openModal();case 1:case"end":return t.stop()}},t,this)}))}},{key:"approve",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isReprove=!1,this.justifyNotification.isReprove=!1,e.next=4,this.translateString("l-approve-notification");case 4:this.modalText=e.sent.toString(),this.reasonRequired=!1,this.verifyModal=[!0,!0,!1,t],this.openModal();case 8:case"end":return e.stop()}},e,this)}))}},{key:"reprove",value:function(t){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.isReprove=!0,this.justifyNotification.isReprove=!0,this.modalText=void 0,this.reasonRequired=!0,this.verifyModal=[!0,!1,!1,t],this.openModal();case 1:case"end":return e.stop()}},e,this)}))}},{key:"sendData",value:function(t,e,i){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=t?"m-approved-request":"m-reprove-request",a=this.isMobile?e?this.selectedLines:[i]:e?this.poTable.getSelectedRows():[i],n.next=4,this.notificationService.createRequisitionsResponse(a,t,s,this.justifyNotification.justifyReprovedReason);case 4:this.initializeComponent();case 5:case"end":return n.stop()}},n,this)}))}},{key:"detail",value:function(t){_.T.notification=t.object,this.router.navigate(["request/notificationDetails"])}},{key:"closeModal",value:function(){this.verifyModal=[!1,!1,!1,{}],this.justifyNotification.closeModal()}},{key:"openModal",value:function(){this.justifyNotification.openModal()}},{key:"confirmModal",value:function(){var t;return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isReprove||!(null===(t=this.justifyNotification.reasonFieldProps)||void 0===t?void 0:t.required)||0!==this.justifyNotification.justifyReprovedReason.length){e.next=7;break}return e.next=3,this.appTranslateService.getI18n("l-reason-required");case 3:i=e.sent,this.notificationServiceManager.showNotification(i,v.ik9.Error),e.next=17;break;case 7:if(e.t0=this.verifyModal[0],!e.t0){e.next=16;break}if(!this.verifyModal[2]){e.next=14;break}return e.next=12,this.sendData(this.verifyModal[1],this.verifyModal[2]);case 12:e.next=16;break;case 14:return e.next=16,this.sendData(this.verifyModal[1],this.verifyModal[2],this.verifyModal[3]);case 16:this.closeModal();case 17:case"end":return e.stop()}},e,this)}))}},{key:"getLines",value:function(t){return this.isMobile?this.selectedLines.length:this.poTable.getSelectedRows().length}},{key:"getVacationsNotificationsList",value:function(t,e,i,n,a){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.notificationService.getNotificationsQP(T.N.loggedUser,ut.P.TypeEnum.Vacation,t,e,n,a,ut.P.TypeEnum.Vacation);case 2:if(!(r=s.sent)){s.next=5;break}return s.abrupt("return",this.updateItemsForTable(r,i));case 5:this.vacationsListView.hasMoreRecords=!1;case 6:case"end":return s.stop()}},s,this)}))}},{key:"updateItemsForTable",value:function(t,e){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n,a=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.clearData(e),this.vacationsListView.records=this.vacationsListView.records.concat(t.items),this.vacationsListView.hasMoreRecords=t.hasNext,this.notificationsView=[],this.vacationsListView.records.forEach(function(t){a.notificationsView.push(new N.B(t))}),n=0;case 2:if(!(n<this.vacationsListView.records.length)){i.next=20;break}return i.t0=this.notificationsView[n].id,i.t1=!1,i.t2=this.getAvatar(this.notificationsView[n].employeeSummary.id),i.t3=this.notificationsView[n].employeeSummary.name,i.next=9,this.translateString("l-vacation");case 9:i.t4=i.sent.toString(),i.t5=new Date(this.notificationsView[n].fieldsView.initVacationLimit.value).toLocaleDateString()+" - "+new Date(this.notificationsView[n].fieldsView.endVacationLimit.value).toLocaleDateString(),i.t6=C.Em.formatUTCDate(new Date(this.notificationsView[n].fieldsView.initDate.value)),i.t7=C.Em.formatUTCDate(new Date(this.notificationsView[n].fieldsView.endDate.value)),i.t8=this.notificationsView[n].fieldsView.totalDays.value,i.t9=this.notificationsView[n].fieldsView.vacationBonus.value,i.t10=this.notificationsView[n],this.items[n]={id:i.t0,ckecked:i.t1,avatar:i.t2,name:i.t3,type:i.t4,periodDate:i.t5,initialDate:i.t6,endDate:i.t7,daysVacation:i.t8,daysAllowance:i.t9,object:i.t10};case 17:n++,i.next=2;break;case 20:this.items.length<this.vacationsListView.actualPage*this.vacationsListView.pageSize&&(this.showMoreDisable=!0);case 21:case"end":return i.stop()}},i,this)}))}},{key:"clearData",value:function(t){(!this.vacationsListView.records||t)&&(this.vacationsListView.records=[],t&&(this.selectedLines=[],this.items=[]))}},{key:"getModalActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(){e.closeModal()},t.next=3,this.translateString("l-cancel-title");case 3:return t.t1=t.sent.toString(),t.t2=!0,this.closeAction={action:t.t0,label:t.t1,danger:t.t2},t.t3=function(){e.confirmModal()},t.next=9,this.translateString("l-confirm");case 9:t.t4=t.sent.toString(),this.confirmAction={action:t.t3,label:t.t4};case 11:case"end":return t.stop()}},t,this)}))}},{key:"getLabelsSearch",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-filter-applied");case 2:return t.t0=t.sent.toString(),t.next=5,this.translateString("l-filter-title");case 5:return t.t1=t.sent.toString(),t.next=8,this.translateString("l-cancel-title");case 8:return t.t2=t.sent.toString(),t.next=11,this.translateString("l-apply");case 11:return t.t3=t.sent.toString(),t.next=14,this.translateString("l-researched-value");case 14:return t.t4=t.sent.toString(),t.next=17,this.translateString("l-search-collaborator-placeholder");case 17:return t.t5=t.sent.toString(),this.literals={disclaimerGroupTitle:t.t0,filterTitle:t.t1,filterCancelLabel:t.t2,filterConfirmLabel:t.t3,quickSearchLabel:t.t4,searchPlaceholder:t.t5},t.next=21,this.translateString("l-name-collaborator");case 21:return t.t6=t.sent.toString(),t.t7={property:"name",label:t.t6,gridColumns:6},t.next=25,this.translateString("l-date");case 25:t.t8=t.sent.toString(),t.t9={property:"date",label:t.t8,type:"date",gridColumns:6},this.filters=[t.t7,t.t9];case 28:case"end":return t.stop()}},t,this)}))}},{key:"getColumns",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-name");case 2:return t.t0=t.sent.toString(),t.t1={property:"name",label:t.t0,width:"25%"},t.next=6,this.translateString("l-type");case 6:return t.t2=t.sent.toString(),t.t3={property:"type",label:t.t2,width:"8%"},t.next=10,this.translateString("l-absence-type-vacationLimit");case 10:return t.t4=t.sent.toString(),t.t5={property:"periodDate",label:t.t4,width:"18%"},t.next=14,this.translateString("l-vacation-init-period");case 14:return t.t6=t.sent.toString(),t.t7={property:"initialDate",label:t.t6,type:"date",width:"15%"},t.next=18,this.translateString("l-vacation-end-period");case 18:return t.t8=t.sent.toString(),t.t9={property:"endDate",label:t.t8,type:"date",width:"15%"},t.next=22,this.translateString("l-vacation-numofdays");case 22:return t.t10=t.sent.toString(),t.t11={property:"daysVacation",label:t.t10,width:"15%"},t.next=26,this.translateString("l-absence-type-vacationBonus");case 26:t.t12=t.sent.toString(),t.t13={property:"daysAllowance",label:t.t12,width:"12%"},this.columns=[t.t1,t.t3,t.t5,t.t7,t.t9,t.t11,t.t13];case 29:case"end":return t.stop()}},t,this)}))}},{key:"getPageActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.translateString("l-approve-selected");case 2:return t.t0=t.sent.toString(),t.t1=this.countLines,t.t2=t.t0+t.t1,t.t3=this.approveMany.bind(this),t.t4=this.disableButtons.bind(this),t.t5={label:t.t2,action:t.t3,disabled:t.t4},t.next=10,this.translateString("l-reprove-selected");case 10:t.t6=t.sent.toString(),t.t7=this.countLines,t.t8=t.t6+t.t7,t.t9=this.reproveMany.bind(this),t.t10=this.disableButtons.bind(this),t.t11={label:t.t8,action:t.t9,disabled:t.t10},this.pageActions=[t.t5,t.t11];case 17:case"end":return t.stop()}},t,this)}))}},{key:"getTableActions",value:function(){return(0,M.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.approve.bind(this),t.next=3,this.translateString("l-approve");case 3:return t.t1=t.sent.toString(),t.t2={action:t.t0,label:t.t1},t.t3=this.reprove.bind(this),t.next=8,this.translateString("l-decline");case 8:return t.t4=t.sent.toString(),t.t5={action:t.t3,label:t.t4},t.t6=this.detail.bind(this),t.next=13,this.translateString("l-see-details");case 13:t.t7=t.sent.toString(),t.t8={action:t.t6,label:t.t7},this.tableActions=[t.t2,t.t5,t.t8];case 16:case"end":return t.stop()}},t,this)}))}},{key:"disableButtons",value:function(){return this.isMobile?this.disableVerify:!this.items.find(function(t){return t.$selected})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Y36(D.g),f.Y36(F.g),f.Y36(V.H),f.Y36(U.H7),f.Y36(c.F0),f.Y36(P.c),f.Y36(J.g),f.Y36(_.T))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-tab-vacation"]],viewQuery:function(t,e){var i;(1&t&&(f.Gf(v._w3,5),f.Gf(ht.j,5)),2&t)&&(f.iGM(i=f.CRH())&&(e.poTable=i.first),f.iGM(i=f.CRH())&&(e.justifyNotification=i.first))},hostBindings:function(t,e){1&t&&f.NdJ("resize",function(t){return e.onResize(t)},!1,f.Jf7)},decls:5,vars:13,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],[3,"title","primaryAction","secondaryAction","modalText","reasonRequired","reasonFieldProps","reprovedReason"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],[1,"mobile"],["name","select-all",3,"ngModel","p-label","p-change","ngModelChange"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],["for","date",1,"po-sm-6","po-md-6"],[1,"pull-right"],[1,"card-line","period-vacation"],[1,"po-sm-12","po-md-12","buttons-mobile",3,"id","yes","no"]],template:function(t,e){1&t&&(f.TgZ(0,"po-page-dynamic-search",0),f.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),f.YNc(1,dt,2,8,"div",1),f.YNc(2,ft,8,10,"div",2),f.qZA(),f.TgZ(3,"app-justify-notification",3),f.NdJ("reprovedReason",function(t){return e.reprovedReasonResponse(t)}),f.ALo(4,"translate"),f.qZA()),2&t&&(f.Q6J("p-actions",e.pageActions)("p-filters",e.filters)("p-literals",e.literals),f.xp6(1),f.Q6J("ngIf",!e.isMobile),f.xp6(1),f.Q6J("ngIf",e.isMobile),f.xp6(1),f.Q6J("title",f.lcZ(4,11,e.isReprove?"l-reprove-vacation-requisition":"l-confirmation"))("primaryAction",e.confirmAction)("secondaryAction",e.closeAction)("modalText",e.modalText)("reasonRequired",e.reasonRequired)("reasonFieldProps",e.reasonFieldProps))},directives:[I.O6,r.O5,ht.j,v._w3,v.ejx,E.JJ,E.On,r.sg,v.bOz,Y.c,pt.o],pipes:[b.X$,B.r,H.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.period-vacation[_ngcontent-%COMP%]{height:25px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}"]}),e}()}]},{path:"onCall/visualize/:isApprove",component:u.e,canActivate:[l.P]}],mt=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[c.Bz.forChild(vt)],c.Bz]}),e}(),wt=a(43743),bt=a(56365),xt=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({providers:[o.P],imports:[[r.ez,bt.q,mt,I.Pu,wt.Y]]}),e}()}}])}();