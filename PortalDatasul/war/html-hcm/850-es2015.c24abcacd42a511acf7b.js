"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[850],{850:function(t,e,i){i.r(e),i.d(e,{DataChangeModule:function(){return z}});var s=i(38583),a=i(3679),n=i(90171),o=i(95987),r=i(29790),l=i(44956),p=i(32114),c=i(44677),d=i(43743),h=i(56365),g=i(51110),u=i(64762),m=i(97983),b=i(81483),f=i(33490),v=i(68014),w=i(21360),q=i(37716),y=i(84479),x=i(65241),C=i(37503),Z=i(39075),M=i(36812),_=i(10690),S=i(13235),O=i(32268);function P(t,e){if(1&t&&(q.TgZ(0,"div"),q.TgZ(1,"span",8),q.ALo(2,"lowercase"),q._uU(3),q.qZA(),q.qZA()),2&t){const t=q.oxw().row;q.xp6(1),q.Q6J("ngClass",q.lcZ(2,2,t.status)),q.xp6(2),q.hij(" ",t.statusLabel," ")}}function L(t,e){1&t&&q.YNc(0,P,4,4,"div",7),2&t&&q.Q6J("ngIf","status"===e.column.property)}function A(t,e){if(1&t){const t=q.EpF();q.TgZ(0,"div",4),q.TgZ(1,"po-table",5),q.NdJ("p-show-more",function(){return q.CHM(t),q.oxw().showMore()}),q.YNc(2,L,1,1,"ng-template",6),q.qZA(),q.qZA()}if(2&t){const t=q.oxw();q.xp6(1),q.Q6J("p-columns",t.columns)("p-items",t.items)("p-actions",t.tableActions)("p-loading",t.loading)("p-show-more-disabled",t.showMoreDisable)}}function T(t,e){if(1&t&&(q.TgZ(0,"div",13),q.TgZ(1,"app-expansion-card"),q.TgZ(2,"div",14),q._UZ(3,"div",15),q.TgZ(4,"div",16),q._UZ(5,"div",17),q.TgZ(6,"div",18),q.TgZ(7,"strong"),q._uU(8),q.ALo(9,"titleCase"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(10,"div",19),q.TgZ(11,"div",20),q.TgZ(12,"label",21),q._uU(13),q.ALo(14,"translate"),q.qZA(),q.TgZ(15,"strong",22),q._uU(16),q.qZA(),q.qZA(),q.TgZ(17,"div",20),q.TgZ(18,"label",21),q._uU(19),q.ALo(20,"translate"),q.qZA(),q.TgZ(21,"strong",22),q._uU(22),q.ALo(23,"utcDate"),q.qZA(),q.qZA(),q.TgZ(24,"div",20),q.TgZ(25,"label",21),q._uU(26),q.ALo(27,"translate"),q.qZA(),q.TgZ(28,"strong",22),q._uU(29),q.qZA(),q.qZA(),q.TgZ(30,"div",20),q.TgZ(31,"label",21),q._uU(32),q.ALo(33,"translate"),q.qZA(),q.TgZ(34,"div",22),q.TgZ(35,"span",8),q.ALo(36,"lowercase"),q._uU(37),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&t){const t=e.$implicit,i=q.oxw(2);q.xp6(5),q.Udp("background-image",i.getAvatar(t.employeeId)),q.xp6(3),q.Oqu(q.lcZ(9,12,t.employeeName)),q.xp6(5),q.Oqu(q.lcZ(14,14,"l-requisition-id")),q.xp6(3),q.Oqu(t.requestId),q.xp6(3),q.Oqu(q.lcZ(20,16,"l-date")),q.xp6(3),q.Oqu(q.xi3(23,18,t.date,"shortDate")),q.xp6(4),q.Oqu(q.lcZ(27,21,"l-requisition-responsible")),q.xp6(3),q.Oqu(t.responsableName),q.xp6(3),q.Oqu(q.lcZ(33,23,"l-status")),q.xp6(3),q.Q6J("ngClass",q.lcZ(36,25,t.status)),q.xp6(2),q.hij(" ",t.statusLabel," ")}}function k(t,e){if(1&t){const t=q.EpF();q.TgZ(0,"div",9),q.YNc(1,T,38,27,"div",10),q.TgZ(2,"div",11),q.TgZ(3,"po-button",12),q.NdJ("p-click",function(){return q.CHM(t),q.oxw().showMore()}),q.ALo(4,"translate"),q.qZA(),q.qZA(),q.qZA()}if(2&t){const t=q.oxw();q.xp6(1),q.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByFunction),q.xp6(2),q.s9C("p-label",q.lcZ(4,4,"l-load-more")),q.Q6J("p-disabled",t.showMoreDisable)}}const V=[{path:"",component:(()=>{class t{constructor(t,e,i,s,a,n,o){this.requisitionsService=t,this.windowUtilService=e,this.appTranslateService=i,this.permissionSelectors=s,this.globals=a,this.sanitizationService=n,this.profileService=o,this.requisitionsListView=new f.i([]),this.notificationsView=[],this.columns=[],this.pageActions=[],this.tableActions=[],this.items=[],this.avatar=[],this.isReprove=!1,this.columnStatus="status"}onResize(){this.isMobileCheck()}ngOnInit(){this.requisitionsListView.actualPage=1,this.requisitionsListView.pageSize=10,this.showMoreDisable=!1,this.loading=!1,this.initializeComponent()}initializeComponent(){return(0,u.mG)(this,void 0,void 0,function*(){yield this.getPermissions(),this.isMobileCheck(),this.getLabelsSearch(),this.getColumns(),this.loggedUser=yield this.globals.getEmployeeSummary(),this.getData(!0)})}isMobileCheck(){this.isMobile=this.windowUtilService.isMobileDevice()}getData(t){return(0,u.mG)(this,void 0,void 0,function*(){yield this.getDataChangeList(this.requisitionsListView.actualPage,this.requisitionsListView.pageSize,t,this.employeeName,this.dateFilter,this.statusFilter)})}showMore(){this.getDataChangeList(this.requisitionsListView.getNextPage(),this.requisitionsListView.pageSize,!1,this.employeeName,this.dateFilter,this.statusFilter)}onAdvancedSearch(t){t?this.searchItems(t):this.resetFilters()}onChangeDisclaimers(t){const e={};t.forEach(t=>{e[t.property]=t.value}),this.searchItems(e)}onQuickSearch(t){t?this.searchItems({name:t}):this.resetFilters()}translateString(t){return this.appTranslateService.getI18n(t)}back(){this.windowUtilService.back()}getAvatar(t){return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(e=>{e&&e.content&&(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle(`url(${"data:image/"+(e.type||"png")+";base64,"+e.content})`))})),this.avatar[t]}resetFilters(){this.requisitionsListView.actualPage>1&&(this.requisitionsListView.actualPage=1),this.getData(!0)}getDataChangeList(t,e,i,s,a,n){return(0,u.mG)(this,void 0,void 0,function*(){try{this.loading=!0;const o=yield this.requisitionsService.getAllRequisitions(this.loggedUser.id,t,e,s,null,null==a?void 0:a.toISOString(),n,"employeeDataChange");o?this.updateItemsForTable(o,i):this.requisitionsListView.hasMoreRecords=!1}catch(o){this.loading=!1}finally{this.loading=!1}})}updateItemsForTable(t,e){return(0,u.mG)(this,void 0,void 0,function*(){this.clearData(e),this.requisitionsListView.records=this.requisitionsListView.records.concat(t.items),this.requisitionsListView.hasMoreRecords=t.hasNext;for(let t=0;t<this.requisitionsListView.records.length;t++){const e={id:this.requisitionsListView.records[t].id,requestId:this.requisitionsListView.records[t].requestId,employeeName:this.requisitionsListView.records[t].employeeName,employeeId:this.requisitionsListView.records[t].employeeId,responsableName:this.requisitionsListView.records[t].responsableName,responsableId:this.requisitionsListView.records[t].responsableId,status:this.requisitionsListView.records[t].status,statusLabel:this.requisitionsListView.records[t].statusLabel,date:b.Em.formatUTCDate(new Date(this.requisitionsListView.records[t].startDate))};this.items[t]=e}this.items.length<this.requisitionsListView.actualPage*this.requisitionsListView.pageSize&&(this.showMoreDisable=!0),this.loading=!1})}clearData(t){(!this.requisitionsListView.records||t)&&(this.requisitionsListView.records=[],t&&(this.items=[]))}searchItems(t){var e,i;this.employeeName=null!==(e=t.name)&&void 0!==e?e:void 0,this.dateFilter=t.date?new Date(t.date):void 0,this.statusFilter=null!==(i=t.status)&&void 0!==i?i:void 0,this.requisitionsListView.actualPage>1&&(this.requisitionsListView.actualPage=1),this.getData(!0)}getLabelsSearch(){return(0,u.mG)(this,void 0,void 0,function*(){this.literals={disclaimerGroupTitle:yield this.translateString("l-filter-applied"),filterTitle:yield this.translateString("l-filter-title"),filterCancelLabel:yield this.translateString("l-cancel-title"),filterConfirmLabel:yield this.translateString("l-apply"),quickSearchLabel:yield this.translateString("l-researched-value"),searchPlaceholder:yield this.translateString("l-search-collaborator-placeholder")},this.filters=[{property:"name",label:yield this.translateString("l-name-collaborator"),gridColumns:6},{property:"date",label:yield this.translateString("l-date"),type:"date",gridColumns:6},{property:"status",label:yield this.translateString("l-status"),options:[{value:"approving",label:yield this.translateString("l-requisition-approving")},{value:"approved",label:yield this.translateString("l-requisition-approved")},{value:"rejected",label:yield this.translateString("l-requisition-rejected")},{value:"empty",label:yield this.translateString("l-requisition-empty")},{value:"closed",label:yield this.translateString("l-requisition-closed")}],gridColumns:6}]})}getColumns(){return(0,u.mG)(this,void 0,void 0,function*(){this.columns=[{property:"employeeName",label:yield this.translateString("l-name"),width:"30%"},{property:"requestId",label:yield this.translateString("l-requisition-id"),width:"10%"},{property:"employeeId",label:yield this.translateString("l-requisition-matricula"),width:"12%"},{property:"date",label:yield this.translateString("l-date"),type:"date",width:"12%"},{property:"responsableName",label:yield this.translateString("l-requisition-responsible"),width:"20%"},{property:this.columnStatus,label:yield this.translateString("l-status"),type:"cellTemplate",width:"16%"}]})}getPermissions(){return(0,u.mG)(this,void 0,void 0,function*(){yield this.permissionSelectors.nextPermissionsNotNull()})}}return t.\u0275fac=function(e){return new(e||t)(q.Y36(w._),q.Y36(y.g),q.Y36(x.g),q.Y36(v.eL),q.Y36(C.O),q.Y36(Z.H7),q.Y36(m.H))},t.\u0275cmp=q.Xpm({type:t,selectors:[["app-data-change"]],viewQuery:function(t,e){if(1&t&&q.Gf(l._w3,5),2&t){let t;q.iGM(t=q.CRH())&&(e.poTable=t.first)}},hostBindings:function(t,e){1&t&&q.NdJ("resize",function(t){return e.onResize(t)},!1,q.Jf7)},decls:4,vars:4,consts:[["backIsVisible","viewIsMobile","pageTitle","l-data-change",3,"backFunction"],["p-title"," ",3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],[1,"desktop"],["p-container","","p-hide-select-all","true","p-hide-text-overflow","","p-sort","true","p-striped","true","p-selectable","false",1,"po-table-custom-hide-text-overflow",3,"p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-show-more"],["p-table-cell-template",""],[4,"ngIf"],[1,"flag",3,"ngClass"],[1,"mobile"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],[1,"aboutEmployee"],[1,"avatar-small"],[1,"name","cut-title"],["card-body",""],[1,"po-row","card-line"],[1,"po-sm-6","po-md-6"],[1,"pull-right","po-sm-6","po-md-6"]],template:function(t,e){1&t&&(q.TgZ(0,"app-page-header",0),q.NdJ("backFunction",function(){return e.back()}),q.qZA(),q.TgZ(1,"po-page-dynamic-search",1),q.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),q.YNc(2,A,3,5,"div",2),q.YNc(3,k,5,6,"div",3),q.qZA()),2&t&&(q.xp6(1),q.Q6J("p-filters",e.filters)("p-literals",e.literals),q.xp6(1),q.Q6J("ngIf",!e.isMobile),q.xp6(1),q.Q6J("ngIf",e.isMobile))},directives:[M.q,p.O6,s.O5,l._w3,l.q5v,s.mk,s.sg,l.bOz,_.c],pipes:[s.i8,r.X$,S.r,O.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div #expansion-card-body{padding-top:20px!important}[_nghost-%COMP%]     .aboutEmployee .name{font-size:15px}[_nghost-%COMP%]     .aboutEmployee .office{font-size:12px}[_nghost-%COMP%]     .content-footer{padding-top:0!important}[_nghost-%COMP%]     .yes-or-no-buttons{float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px;border-top:1px solid #eceeee;padding-top:16px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;text-align:right!important}.load-container[_ngcontent-%COMP%]{margin-bottom:30px}.alignCenter[_ngcontent-%COMP%]{text-align:center}.icon-size[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cut-title[_ngcontent-%COMP%]{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 320px) and (max-width: 481px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 220px)}}@media screen and (max-width: 320px){.cut-title[_ngcontent-%COMP%]{width:calc(100vw - 240px)}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:-42px!important}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .po-page-list-actions .po-button, [_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}@media screen and (max-width: 1366px){[_nghost-%COMP%]     .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     .po-checkbox .po-checkbox-label{font-weight:bolder!important}}.flag[_ngcontent-%COMP%]{display:inline-block;height:20px;min-width:20px;overflow-y:hidden;padding:2px 8px;background:#e8850a;border-radius:3px;color:#fff;font-size:10px;line-height:16px;text-align:left;text-transform:uppercase;vertical-align:middle}.approved[_ngcontent-%COMP%], .aprovado[_ngcontent-%COMP%], .fechado[_ngcontent-%COMP%], .closed[_ngcontent-%COMP%]{background:#00b28e}.rejected[_ngcontent-%COMP%], .rejeitado[_ngcontent-%COMP%], .reprovado[_ngcontent-%COMP%], .reproved[_ngcontent-%COMP%]{background:#c64840}.empty[_ngcontent-%COMP%], .vazio[_ngcontent-%COMP%]{background:#cacaca}.approving[_ngcontent-%COMP%]{background:#e8850a}"]}),t})(),canActivate:[g.P]}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[o.Bz.forChild(V)],o.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({imports:[[s.ez,h.q,r.aw,o.Bz,a.u5,n.To,l.JBz,d.Y,c.d,p.Pu,I]]}),t})()}}]);