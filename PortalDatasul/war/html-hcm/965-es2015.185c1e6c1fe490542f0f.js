"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[965],{94560:function(e,t,i){i.d(t,{N:function(){return s}});var o=i(37716),n=i(29790);let s=(()=>{class e{constructor(){}ngOnInit(){}showMoreClick(){this.showMore&&this.showMore()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-show-more-button"]],inputs:{showMore:"showMore"},decls:4,vars:3,consts:[[1,"next-records","margin-card","po-visible-sm-12","po-visible-md-12",3,"click"],["id","link-more-records"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return t.showMoreClick()}),o.TgZ(1,"a",1),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij("",o.lcZ(3,1,"l-load-more")," "))},pipes:[n.X$],styles:[".next-records[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe;padding-bottom:20px;cursor:pointer}"]}),e})()},2965:function(e,t,i){i.d(t,{J:function(){return H}});var o=i(64762),n=i(37716),s=i(44956),a=i(32114),l=i(64383),r=i(24804),p=i(81483),c=i(97983),d=i(60228),h=i(44852),g=i(9789),u=i(93444),m=i(92340),v=i(8573),b=i(68014),f=i(65241),w=i(96054),x=i(84479),y=i(95987),M=i(3679),C=i(38583),S=i(55653),T=i(10690),O=i(94560),_=i(29790),Z=i(13235);const A=["poModal"],q=["deleteModal"];function P(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"po-button",21),n.NdJ("p-click",function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw();return t.action.call(i,i.item)}),n.qZA()}if(2&e){const e=n.oxw(),t=e.index,i=e.$implicit,o=n.oxw();n.ekj("po-sm-12",0==t),n.Q6J("p-label",i.label)("p-type",i.type)("ngClass",o.actionIsView(i.label))}}function I(e,t){if(1&e&&(n.ynx(0),n.YNc(1,P,1,5,"po-button",20),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",e.visible)}}function k(e,t){if(1&e&&(n.TgZ(0,"span",36),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e.label)}}function N(e,t){if(1&e&&(n.TgZ(0,"div",37),n.TgZ(1,"span"),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit;n.xp6(2),n.Oqu(t[e.property])}}function R(e,t){if(1&e&&(n.TgZ(0,"div",37),n.TgZ(1,"po-tag",38),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,i=n.oxw();n.xp6(1),n.Q6J("ngClass",i.getTypeTag(t,e.label))("p-type",i.getTypeTag(t,e.label))("p-value",i.getValueTag(t,e.label)),n.xp6(1),n.Oqu(t[e.property])}}function J(e,t){if(1&e&&(n.TgZ(0,"div",33),n.YNc(1,k,2,1,"span",34),n.YNc(2,N,3,1,"div",35),n.YNc(3,R,3,4,"div",35),n.qZA()),2&e){const e=t.$implicit,i=t.index,o=n.oxw().$implicit,s=n.oxw();n.ekj("border-top",0==i)("po-mt-2",0==i)("last-border-bottom",8==i),n.xp6(1),n.Q6J("ngIf",s.showColumn(o.status,e.property)),n.xp6(1),n.Q6J("ngIf",!s.isColumnStatus(o,e.label)&&s.showColumn(o.status,e.property)),n.xp6(1),n.Q6J("ngIf",s.isColumnStatus(o,e.label))}}function F(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"po-button",21),n.NdJ("p-click",function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw().$implicit,o=n.oxw();return t.action.call(o,i)}),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.Q6J("p-label",e.label)("p-type",e.type)("ngClass",t.actionIsView(e.label))}}function D(e,t){if(1&e&&(n.ynx(0),n.YNc(1,F,1,3,"po-button",39),n.BQk()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",e.visible)}}function G(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",22),n.TgZ(1,"app-expansion-card",23),n.TgZ(2,"div",24),n.TgZ(3,"div",25),n.TgZ(4,"div",26),n.TgZ(5,"po-checkbox",27),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.__selected=t})("p-change",function(){const t=n.CHM(e).index;return n.oxw().selectMobile(t)}),n.qZA(),n.qZA(),n._UZ(6,"span",28),n.TgZ(7,"span",29),n.TgZ(8,"strong"),n._uU(9),n.ALo(10,"titleCase"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",30),n.YNc(12,J,4,9,"div",31),n.TgZ(13,"div",32),n.YNc(14,D,2,1,"ng-container",3),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=n.oxw();n.xp6(1),n.Q6J("iconClass","po-icon-arrow-down")("iconClassCollapsed","po-icon-arrow-up"),n.xp6(4),n.Q6J("ngModel",e.__selected),n.xp6(1),n.Udp("background-image",i.getAvatar(e.idName)),n.xp6(3),n.Oqu(n.lcZ(10,8,e.name)),n.xp6(3),n.Q6J("ngForOf",i.columnsMobile),n.xp6(2),n.Q6J("ngForOf",i.actions)}}function L(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"app-show-more-button",40),n.NdJ("click",function(){return n.CHM(e),n.oxw().showMore()}),n.qZA()}}function Q(e,t){if(1&e&&(n.TgZ(0,"div",41),n._UZ(1,"div",28),n.TgZ(2,"div",42),n.TgZ(3,"span",43),n._uU(4),n.qZA(),n.qZA(),n.qZA()),2&e){const e=t.$implicit,i=n.oxw();n.xp6(1),n.Udp("background-image",i.getAvatar(e)),n.xp6(3),n.Oqu(i.getNameById(e))}}function Y(e,t){if(1&e&&n._UZ(0,"img",44),2&e){const e=t.$implicit,i=n.oxw();n.Q6J("src",i.getImageStatus(e),n.LSH)}}function E(e,t){1&e&&(n.TgZ(0,"div",45),n.TgZ(1,"div",46),n.TgZ(2,"div",47),n._UZ(3,"img",48),n.TgZ(4,"span",49),n._uU(5,"Solicita\xe7\xe3o de sobreaviso aprovada"),n.qZA(),n.qZA(),n.TgZ(6,"div",47),n._UZ(7,"img",50),n.TgZ(8,"span",49),n._uU(9,"Solicita\xe7\xe3o de sobreaviso em andamento"),n.qZA(),n.qZA(),n.TgZ(10,"div",47),n._UZ(11,"img",51),n.TgZ(12,"span",49),n._uU(13,"Solicita\xe7\xe3o de sobreaviso reprovada"),n.qZA(),n.qZA(),n.TgZ(14,"div",47),n._UZ(15,"img",52),n.TgZ(16,"span",49),n._uU(17,"Solicita\xe7\xe3o de sobreaviso parcialmente excluida"),n.qZA(),n.qZA(),n.TgZ(18,"div",53),n.TgZ(19,"div",54),n._UZ(20,"span",55),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function U(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"po-button",56),n.NdJ("p-click",function(){return n.CHM(e),n.oxw().showMore()}),n.ALo(1,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.s9C("p-label",n.lcZ(1,2,"l-load-more-results")),n.Q6J("p-disabled",e.response&&!e.response.hasNext)}}function $(e,t){if(1&e&&(n.TgZ(0,"span",57),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.modalText)}}function z(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"po-textarea",58),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().reprovedReason=t}),n.ALo(1,"translate"),n.ALo(2,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.s9C("p-label",n.lcZ(1,3,"l-justification")),n.s9C("p-placeholder",n.lcZ(2,5,"l-reason-50-char")),n.Q6J("ngModel",e.reprovedReason)}}let H=(()=>{class e{constructor(e,t,i,o,s,a,l,r,p,c,d,h){this.teamManagementService=e,this.appTranslateService=t,this.momentService=i,this.profileService=o,this.notificationService=s,this.windowUtilService=a,this.recurrenceService=l,this.navigationUtilService=r,this.managementRequestOnCallService=p,this.router=c,this.onCallService=d,this.permissionSelectors=h,this.columns=[],this.columnsMobile=[],this.items=[],this.filters=[],this.actions=[],this.tableActions=[],this.pageActions=[],this.isReprove=!1,this.reasonRequired=!1,this.collumnStatus="status",this.collumnName="idName",this.selectedLines=[],this.avatarImage=[],this.pathNotifications="request/notifications/oncall",this.avatarsStyle=[],this.portalShowStatus=!0,this.showLabel=!0,this.showEdit=!1,this.showDelete=!0,this.mobileShowView=!0,this.mobileShowApprove=!1,this.mobileShowDecline=!1,this.showView=!0,this.showStatusOnFilter=!0,this.viewApprove=!0,this.onGetAllRequested=new n.vpe,this.onCreateRequisition=new n.vpe}set currentFilter(e){this._currentFilter=e}set response(e){this._response=e,this.getItems()}onResize(){this.isMobileCheck()}get response(){return this._response}get currentFilter(){return this._currentFilter}ngOnInit(){this.isMobileCheck(),Promise.all([this.getColumns(),this.getColumnsMobile(),this.getFilters(),this.getLiterals(),this.getLabelsStatus()]).then(()=>{}),this.getPageActions(!1),this.getModalActions(),this.loadActions(),this.countSelected(),this.disableVerify=!0,this.subscribeToPermissions()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}onQuickSearch(e){this.onGetAllRequested.emit({name:e})}onAdvancedSearch(e){this.onGetAllRequested.emit(e)}showMore(){const e=this.currentFilter;void 0===e.page?e.page=2:e.page+=1,this.onGetAllRequested.emit(e)}onChangeDisclaimers(e){const t={};e.forEach(e=>{t[e.property]=e.value}),this.onGetAllRequested.emit(t)}getAvatar(e){return this.avatarsStyle[e]||(this.avatarsStyle[e]=this.profileService.getDefaultImageStyle(),this.profileService.getImageBase64Style(e).then(t=>{this.avatarsStyle[e]=t})),this.avatarsStyle[e]}trackByFunction(e,t){return t.id}translateString(e){return this.appTranslateService.getI18n(e)}getStatus(e){return(0,o.mG)(this,void 0,void 0,function*(){let t,i=e;return this.isPending(e)&&(i="approving"),t=(yield this.translateString("l-"+i)).toString(),t})}isPending(e){return e===r.v.StatusEnum.Pending}selectMobile(e){this.poTable.selectRow(this.items[e])}selectMobileAll(){this.poTable.selectAllRows()}countSelected(){let e;e=this.getLines(e),e&&e>0&&!this.poTable.getSelectedRows().find(e=>e.status!==this.approving)?(this.countLines=" ("+e.toString()+")",this.getPageActions(!0)):(this.countLines="",this.getPageActions(!1)),this.allChecked=0!==e&&0!==this.items.length&&(e===this.items.length||null),this.items.forEach(e=>e.__selected=!!e.$selected)}getLines(e){return this.poTable&&(e=this.poTable.getSelectedRows().length),e}getImageStatus(e){let t;switch(e){case this.approved:t="./assets/img/icon-oncall-approved.svg";break;case this.repproved:t="./assets/img/icon-oncall-reproved.svg";break;case this.approving:t="./assets/img/icon-oncall-pending.svg";break;case this.partiallyExcluded:t="./assets/img/icon-oncall-partially-excluded.svg";break;default:t=""}return t}getNameById(e){const t=this.items.filter(t=>t.idName===e);return t&&t.length>0?t[0].name:""}isMobileCheck(){const e=this.isMobile;this.isMobile=this.windowUtilService.isMobileDevice(),e!==this.isMobile&&this.loadActions()}actionMobileIsVisible(e){return e.status===this.approving}actionIsView(e){return e===this.visualizeLabel?"po-sm-12":"po-sm-6"}isColumnStatus(e,t){let i=!1;return"Status"===t&&(i=!0),i}getTypeTag(e,t){let i;if("Status"===t)switch(e.status){case this.approved:i="success";break;case this.repproved:i="danger";break;case this.approving:i="warning";break;case this.partiallyExcluded:i="color-oncall-partially-excluded";break;default:i=""}return i}getValueTag(e,t){let i;return"Status"===t&&(i=e.status),i}getRecurrence(e,t){return(0,o.mG)(this,void 0,void 0,function*(){return this.recurrenceService.getRecurrence(e,t)})}confirmDelete(){this.managementRequestOnCallService.deleteOnCall(m.N.loggedUser,this.deleteId).then(()=>(0,o.mG)(this,void 0,void 0,function*(){this.notificationService.showNotification(yield this.appTranslateService.getI18n("l-delete-success"),s.ik9.Success),this.onGetAllRequested.emit()}))}openVisualize(e,t=this.avatarsStyle[e.idName].changingThisBreaksApplicationSecurity){let i;this.teamManagementService.setEmployeeCard(null,t,"visualize"),this.response.items.map(t=>{t.id===e.id&&(i=t)}),i?(this.onCallService.setOnCall(i),this.navigationUtilService.doNavigation(this.viewApprove?`request/notifications/onCall/visualize/${this.viewApprove}`:"teamManagement/managementRequestOnCall/visualize")):this.error()}showColumn(e,t){return"reproveJustification"!==t||"reproveJustification"===t&&e===this.repproved}error(){this.appTranslateService.getI18n("l-oncall-not-found").then(e=>{this.notificationService.showNotification(e,s.ik9.Error)})}getLabelsStatus(){return(0,o.mG)(this,void 0,void 0,function*(){this.approved=(yield this.translateString("l-approved")).toString(),this.repproved=(yield this.translateString("l-reproved")).toString(),this.approving=(yield this.translateString("l-approving")).toString(),this.partiallyExcluded=(yield this.translateString("l-partially-excluded")).toString(),this.visualizeLabel=(yield this.appTranslateService.getI18n("l-view")).toString()})}getColumns(){return(0,o.mG)(this,void 0,void 0,function*(){const e=[{property:"idName",label:yield this.appTranslateService.getI18n("l-name"),width:"35%",type:"columnTemplate"},{property:"initDate",label:yield this.appTranslateService.getI18n("l-initial-date"),width:"25%"},{property:"endDate",label:yield this.appTranslateService.getI18n("l-end-date"),width:"25%"},{property:"initHour",label:yield this.appTranslateService.getI18n("l-initial-hour"),width:"25%"},{property:"endHour",label:yield this.appTranslateService.getI18n("l-final-hour"),width:"25%"},{property:"requesterName",label:yield this.appTranslateService.getI18n("l-requester"),width:"25%"},{property:"justification",label:yield this.appTranslateService.getI18n("l-justification"),width:"25%"}];this.portalShowStatus&&e.push({property:"status",label:yield this.appTranslateService.getI18n("l-status"),width:"25%",type:"columnTemplate"}),this.columns=e})}getColumnsMobile(){return(0,o.mG)(this,void 0,void 0,function*(){this.columnsMobile=[{property:"initDate",label:yield this.appTranslateService.getI18n("l-initial-date")},{property:"endDate",label:yield this.appTranslateService.getI18n("l-end-date")},{property:"initHour",label:yield this.appTranslateService.getI18n("l-initial-hour")},{property:"endHour",label:yield this.appTranslateService.getI18n("l-final-hour")},{property:"recurrence",label:yield this.appTranslateService.getI18n("l-recurrence")},{property:"responsibleId",label:yield this.appTranslateService.getI18n("l-requisition-responsible")},{property:"requesterName",label:yield this.appTranslateService.getI18n("l-requester")},{property:"justification",label:yield this.appTranslateService.getI18n("l-justification")},{property:"reproveJustification",label:yield this.appTranslateService.getI18n("l-on-call-reprove-justify-label")},{property:"status",label:yield this.appTranslateService.getI18n("l-status")}]})}getOccurrenceOptions(){return(0,o.mG)(this,void 0,void 0,function*(){return[{value:"approved",label:yield this.appTranslateService.getI18n("l-status-approved")},{value:"pending",label:yield this.appTranslateService.getI18n("l-status-pending")},{value:"reproved",label:yield this.appTranslateService.getI18n("l-reproved")},{value:"approved",label:yield this.appTranslateService.getI18n("l-status-approved")},{value:"pending",label:yield this.appTranslateService.getI18n("l-status-pending")},{value:"reproved",label:yield this.appTranslateService.getI18n("l-reproved")}]})}getFilters(){return(0,o.mG)(this,void 0,void 0,function*(){const e=[{property:"name",label:yield this.appTranslateService.getI18n("l-name"),gridSmColumns:12,gridMdColumns:12,gridLgColumns:12,gridXlColumns:12},{property:"requesterName",label:yield this.appTranslateService.getI18n("l-name-collaborator"),gridSmColumns:12,gridMdColumns:12,gridLgColumns:12,gridXlColumns:12},{property:"initDate",label:yield this.appTranslateService.getI18n("l-initial-date"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6,type:s.$8e.DateTime},{property:"endDate",label:yield this.appTranslateService.getI18n("l-end-date"),gridSmColumns:12,gridMdColumns:6,gridLgColumns:6,gridXlColumns:6,type:s.$8e.DateTime}];this.showStatusOnFilter&&e.push({property:"status",label:yield this.appTranslateService.getI18n("l-status"),gridSmColumns:12,gridMdColumns:12,gridLgColumns:12,gridXlColumns:12,options:yield this.getOccurrenceOptions()}),this.filters=e})}getLiterals(){return(0,o.mG)(this,void 0,void 0,function*(){this.literals={searchPlaceholder:yield this.appTranslateService.getI18n("l-name-search")}})}getItems(){return(0,o.mG)(this,void 0,void 0,function*(){if(this.items=[],this.response&&this.response.items)for(const e of this.response.items)this.items.push({id:e.id,idName:e.idName,name:e.name,initDate:this.momentService.getInstance(e.initDate).utc().format("L"),endDate:this.momentService.getInstance(e.endDate).utc().format("L"),initHour:p.Em.getHoursByMilliseconds(6e4*e.initHour),endHour:p.Em.getHoursByMilliseconds(6e4*e.endHour),requesterName:e.requesterName,responsibleId:e.responsibleName,status:yield this.getStatus(e.status),justification:e.justification,reproveJustification:e.reproveJustification,recurrence:yield this.getRecurrence(e.recurrence,e.initDate),considerDays:e.considerDays})})}loadActions(){return(0,o.mG)(this,void 0,void 0,function*(){const e=[];this.isMobile?(e.push({label:yield this.appTranslateService.getI18n("l-view"),visible:this.mobileShowView,action:this.openVisualize.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-delete"),visible:this.showDelete,type:"danger",action:this.delete.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-edit"),visible:this.showEdit,action:this.edit.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-decline"),visible:this.mobileShowDecline,action:this.reprove.bind(this),type:"danger"}),e.push({label:yield this.appTranslateService.getI18n("l-approve"),visible:this.mobileShowApprove,action:this.approve.bind(this)})):(e.push({label:yield this.appTranslateService.getI18n("l-approve"),visible:!0,action:this.approve.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-decline"),visible:!0,action:this.reprove.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-edit"),visible:this.showEdit,action:this.edit.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-delete"),visible:this.showDelete,action:this.delete.bind(this)}),e.push({label:yield this.appTranslateService.getI18n("l-view"),visible:this.showView,action:this.openVisualize.bind(this)})),this.actions=e})}getPageActions(e){return(0,o.mG)(this,void 0,void 0,function*(){const t=[],i=(yield this.translateString(this.isMobile?"l-approve":"l-approve-selected"))+this.countLines,o=(yield this.translateString(this.isMobile?"l-reprove":"l-reprove-selected"))+this.countLines,n=yield this.translateString("l-on-call-request");if(window.location.href.includes(this.pathNotifications))return t.push(...this.getPageActionsNotifications(i,o,e)),void(this.pageActions=t);const s={action:this.onCallRequest.bind(this),label:n,disabled:!1,visible:!0,type:"primary"},a={action:this.approveMany.bind(this),label:i,visible:!0,type:"default"},l={action:this.reproveMany.bind(this),label:o,visible:!0,type:"danger"};this.hasPermissionTeamManagementOnCallRequest&&t.push(s),e&&(this.isMobile?t.push(l,a):t.push(a,l)),this.pageActions=t})}getPageActionsNotifications(e,t,i){const o=[],n={action:this.approveMany.bind(this),label:e,disabled:!i,type:"default"},s={action:this.reproveMany.bind(this),label:t,disabled:!i,type:"danger"};return this.isMobile?o.push(s,n):o.push(n,s),o}approveMany(){return(0,o.mG)(this,void 0,void 0,function*(){this.isReprove=!1,this.modalText=(yield this.translateString("l-approve-notifications")).toString(),this.reasonRequired=!1,this.poModal.open(),this.verifyModal=[!0,!0,!0,{}]})}onCallRequest(){return(0,o.mG)(this,void 0,void 0,function*(){const e=this.poTable.getSelectedRows().map(e=>e.idName);if(e.length>0){const t=e.join("||");this.router.navigate(["teamManagement/timesheet/onCall/request",t,e.length>1])}else this.router.navigate(["teamManagement/timesheet/onCall/request/noEmployee"])})}reproveMany(){return(0,o.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-reprove-notification")).toString(),this.isReprove=!0,this.reasonRequired=!0,this.poModal.open(),this.verifyModal=[!0,!1,!0,{}]})}approve(e){return(0,o.mG)(this,void 0,void 0,function*(){this.isReprove=!1,this.modalText=(yield this.translateString("l-approve-notification")).toString(),this.reasonRequired=!1,this.poModal.open(),this.verifyModal=[!0,!0,!1,e]})}reprove(e){return(0,o.mG)(this,void 0,void 0,function*(){this.modalText=(yield this.translateString("l-reprove-notification")).toString(),this.isReprove=!0,this.reasonRequired=!0,this.poModal.open(),this.verifyModal=[!0,!1,!1,e]})}delete(e){const t=e.idName.split("|")[0];this.deleteId=t+"|"+e.id,this.deleteModal.openModal()}edit(e){let t;this.response.items.map(i=>{i.id===e.id&&(t=i)}),t?t.status===r.v.StatusEnum.Reproved?this.appTranslateService.getI18n("l-message-error-edit-on-call").then(e=>{this.notificationService.showNotification(e,s.ik9.Error)}):(this.onCallService.setOnCall(t),this.router.navigate(["teamManagement/timesheet/onCall/request",{employeeId:e.idName,isEdit:!0,editId:e.id}])):this.error()}getModalActions(){return(0,o.mG)(this,void 0,void 0,function*(){this.closeAction={action:()=>{this.closeModal()},label:(yield this.translateString("l-cancel-title")).toString(),danger:!0},this.confirmAction={action:()=>{this.confirmModal()},label:(yield this.translateString("l-yes")).toString()}})}closeModal(){this.poModal.close(),this.verifyModal=[!1,!1,!1,{}]}confirmModal(){return(0,o.mG)(this,void 0,void 0,function*(){if(this.reasonRequired&&!this.reprovedReason){const e=yield this.appTranslateService.getI18n("l-justify-required");this.notificationService.showNotification(e,s.ik9.Error)}else this.verifyModal[0]&&this.sendData(!this.reasonRequired,this.verifyModal[2],this.verifyModal[3]),this.poModal.close()})}sendData(e,t,i){return(0,o.mG)(this,void 0,void 0,function*(){let o=e?"m-approved-request":"m-reprove-request",n=t?this.poTable.getSelectedRows():[i];if(n.length>0&&void 0!==n.find(e=>e.status===this.approved||e.status===this.repproved)){const e=yield this.appTranslateService.getI18n("l-message-error-on-call");this.notificationService.showNotification(e,s.ik9.Error)}else this.onCreateRequisition.emit({message:o,approve:e,multiple:t,line:n,reprovedReason:this.reprovedReason,getAll:!0,filter:this.currentFilter}),this.countLines="",this.getPageActions(!1)})}subscribeToPermissions(){this.permissionSubscription=this.permissionSelectors.permissions$.subscribe(e=>{this.hasPermissionTeamManagementOnCallRequest=e.teamManagementOnCallRequest||e.teamManagementOnCallBatchRequest})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(g.C),n.Y36(f.g),n.Y36(l.z),n.Y36(c.H),n.Y36(w.g),n.Y36(x.g),n.Y36(d.b),n.Y36(h._),n.Y36(u.w),n.Y36(y.F0),n.Y36(v.I),n.Y36(b.eL))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-occurrence-viewer"]],viewQuery:function(e,t){if(1&e&&(n.Gf(a.O6,5),n.Gf(s._w3,5),n.Gf(A,5),n.Gf(q,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.poPageDynamicSearchComponent=e.first),n.iGM(e=n.CRH())&&(t.poTable=e.first),n.iGM(e=n.CRH())&&(t.poModal=e.first),n.iGM(e=n.CRH())&&(t.deleteModal=e.first)}},hostBindings:function(e,t){1&e&&n.NdJ("resize",function(e){return t.onResize(e)},!1,n.Jf7)},inputs:{loading:"loading",portalShowStatus:"portalShowStatus",showLabel:"showLabel",showEdit:"showEdit",showDelete:"showDelete",mobileShowView:"mobileShowView",mobileShowApprove:"mobileShowApprove",mobileShowDecline:"mobileShowDecline",showView:"showView",showStatusOnFilter:"showStatusOnFilter",viewApprove:"viewApprove",currentFilter:"currentFilter",response:"response"},outputs:{onGetAllRequested:"onGetAllRequested",onCreateRequisition:"onCreateRequisition"},decls:24,vars:33,consts:[["name","fieldName","ngDefaultControl","",3,"p-actions","p-filters","p-literals","p-advanced-search","p-change-disclaimers","p-quick-search"],[1,"po-visible-sm-12","po-visible-md-12"],[1,"po-row","mb-2"],[4,"ngFor","ngForOf"],[1,"po-sm-12"],[1,"select-all"],[3,"ngModel","p-label","p-change","ngModelChange"],["class","margin-card po-visible-sm-12 po-visible-md-12",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click",4,"ngIf"],["p-container","","p-hide-text-overflow","","p-selectable","",1,"po-table-custom-hide-text-overflow","po-p-0","po-visible-lg-12","po-visible-xl-12",3,"p-hide-select-all","p-sort","p-columns","p-items","p-loading","p-show-more-disabled","p-actions","p-all-selected","p-all-unselected","p-selected","p-unselected"],["p-table-column-template","",3,"p-property"],["class","po-table-footer",4,"ngIf"],[1,"po-row","po-table-footer-show-more"],["class","po-offset-xl-4 po-offset-lg-4 po-offset-md-3 po-lg-4 po-md-6",3,"p-label","p-disabled","p-click",4,"ngIf"],["p-size","md",3,"p-title","p-primary-action","p-secondary-action"],["poModal",""],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12 po-mb-3",4,"ngIf"],["class","po-lg-12 po-xl-12 po-md-12 po-sm-12","name","textarea","p-maxlength","50",3,"ngModel","p-label","p-placeholder","ngModelChange",4,"ngIf"],["removeTextKey","l-delete-on-call-message",3,"confirmEvent"],["deleteModal",""],["class","button-actions",3,"p-label","p-type","ngClass","po-sm-12","p-click",4,"ngIf"],[1,"button-actions",3,"p-label","p-type","ngClass","p-click"],[1,"margin-card","po-visible-sm-12","po-visible-md-12"],[3,"iconClass","iconClassCollapsed"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"about-employee"],[1,"checkbox"],[3,"ngModel","ngModelChange","p-change"],[1,"avatar-small"],[1,"name","cut-title"],["card-body",""],["class","item-body po-row border-bottom",3,"border-top","po-mt-2","last-border-bottom",4,"ngFor","ngForOf"],[1,"po-row","mb-2","mt-3"],[1,"item-body","po-row","border-bottom"],["class","title po-sm-6",4,"ngIf"],["class","value po-sm-6",4,"ngIf"],[1,"title","po-sm-6"],[1,"value","po-sm-6"],[3,"ngClass","p-type","p-value"],["class","button-actions",3,"p-label","p-type","ngClass","p-click",4,"ngIf"],[3,"click"],[1,"po-row"],[1,"po-table-column-cell","po-table-body-ellipsis","cell-content","po-ml-1"],[1,"name-table"],[3,"src"],[1,"po-table-footer"],[1,"po-table-subtitle-footer-container"],[1,"po-table-subtitle-footer"],["src","./assets/img/icon-oncall-approved.svg"],[1,"po-table-subtitle-text"],["src","./assets/img/icon-oncall-pending.svg"],["src","./assets/img/icon-oncall-reproved.svg"],["src","./assets/img/icon-oncall-partially-excluded.svg"],[1,"po-table-footer-show-subtitle"],[1,"po-table-footer-show-subtitle-container"],[1,"po-table-show-subtitle"],[1,"po-offset-xl-4","po-offset-lg-4","po-offset-md-3","po-lg-4","po-md-6",3,"p-label","p-disabled","p-click"],[1,"po-lg-12","po-xl-12","po-md-12","po-sm-12","po-mb-3"],["name","textarea","p-maxlength","50",1,"po-lg-12","po-xl-12","po-md-12","po-sm-12",3,"ngModel","p-label","p-placeholder","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"po-page-dynamic-search",0),n.NdJ("p-advanced-search",function(e){return t.onAdvancedSearch(e)})("p-change-disclaimers",function(e){return t.onChangeDisclaimers(e)})("p-quick-search",function(e){return t.onQuickSearch(e)}),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.YNc(3,I,2,1,"ng-container",3),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"po-checkbox",6),n.NdJ("p-change",function(){return t.selectMobileAll()})("ngModelChange",function(e){return t.allChecked=e}),n.ALo(8,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(9,G,15,10,"div",7),n.YNc(10,L,1,0,"app-show-more-button",8),n.TgZ(11,"po-table",9),n.NdJ("p-all-selected",function(){return t.countSelected()})("p-all-unselected",function(){return t.countSelected()})("p-selected",function(){return t.countSelected()})("p-unselected",function(){return t.countSelected()}),n.YNc(12,Q,5,3,"ng-template",10),n.YNc(13,Y,1,1,"ng-template",10),n.qZA(),n.YNc(14,E,21,0,"div",11),n.TgZ(15,"div",12),n.YNc(16,U,2,4,"po-button",13),n.qZA(),n.qZA(),n.TgZ(17,"po-modal",14,15),n.ALo(19,"translate"),n.YNc(20,$,2,1,"span",16),n.YNc(21,z,3,7,"po-textarea",17),n.qZA(),n.TgZ(22,"app-delete-modal",18,19),n.NdJ("confirmEvent",function(){return t.confirmDelete()}),n.qZA()),2&e&&(n.Q6J("p-actions",t.pageActions)("p-filters",t.filters)("p-literals",t.literals),n.xp6(3),n.Q6J("ngForOf",t.pageActions),n.xp6(4),n.s9C("p-label",n.lcZ(8,29,"l-select-all")),n.Q6J("ngModel",t.allChecked),n.xp6(2),n.Q6J("ngForOf",t.items)("ngForTrackBy",t.trackByFunction),n.xp6(1),n.Q6J("ngIf",t.response&&t.response.hasNext),n.xp6(1),n.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-columns",t.columns)("p-items",t.items)("p-loading",t.loading)("p-show-more-disabled",!t.response||!t.response.hasNext)("p-actions",t.actions),n.xp6(1),n.Q6J("p-property",t.collumnName),n.xp6(1),n.Q6J("p-property",t.collumnStatus),n.xp6(1),n.Q6J("ngIf",t.showLabel),n.xp6(2),n.Q6J("ngIf",!t.isMobile),n.xp6(1),n.ekj("modalApprove",!t.isReprove)("modalReprove",t.isReprove),n.Q6J("p-title",n.lcZ(19,31,t.isReprove?t.isMobile?"l-reprove-oncall-requisition-mobile":"l-reprove-oncall-requisition":""))("p-primary-action",t.confirmAction)("p-secondary-action",t.closeAction),n.xp6(3),n.Q6J("ngIf",t.modalText),n.xp6(1),n.Q6J("ngIf",t.reasonRequired))},directives:[a.O6,M.Fj,C.sg,s.ejx,M.JJ,M.On,C.O5,s._w3,s.UDu,s.hmF,S.z,s.bOz,C.mk,T.c,s.lzV,O.N,s.gJm],pipes:[_.X$,Z.r],styles:['span[_ngcontent-%COMP%]{align-self:center}img[_ngcontent-%COMP%]{width:24px}.cell-content[_ngcontent-%COMP%]{display:flex;max-width:64%!important}@media screen and (min-width: 1500px){.cell-content[_ngcontent-%COMP%]{max-width:80%!important}}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]     .po-page, [_nghost-%COMP%]     .po-page-content{height:auto!important}[_nghost-%COMP%]     #expansion-card-header{position:relative}[_nghost-%COMP%]     #expansion-card-header .icon-collapsed{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:0}[_nghost-%COMP%]     #expansion-card-header .mr-card-header{float:unset}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee{align-items:center;display:flex;padding-right:15px}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee .cut-title{margin:0;padding-left:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .about-employee .name{font-size:15px}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .checkbox-list .po-checkbox{margin-top:4px;padding:4px 0}[_nghost-%COMP%]     #expansion-card-header .mr-card-header .po-checkbox .po-checkbox-label{font-weight:bolder!important}[_nghost-%COMP%]     #expansion-card-body .item-body .value{text-align:right;font-weight:bold}[_nghost-%COMP%]     .po-page-content{padding:0!important}@media screen and (min-width: 961px){[_nghost-%COMP%]     div.po-page{margin-left:0!important;height:auto!important}[_nghost-%COMP%]     div.po-page, [_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-header, [_nghost-%COMP%]     div.po-page div.po-page-content{padding:0 8px!important}}.border-top[_ngcontent-%COMP%]{border-top:1px solid #eceeee}.last-border-bottom[_ngcontent-%COMP%]{border-bottom:0!important}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #eceeee;padding-bottom:.5rem;padding-top:.5rem}.po-table-subtitle-text[_ngcontent-%COMP%]{width:17%}.po-table-subtitle-footer-container[_ngcontent-%COMP%]{background-color:#fff;border-left:1px solid #eceeee}.po-table-subtitle-footer[_ngcontent-%COMP%]{margin-top:8px!important}.po-clickable[_ngcontent-%COMP%]{margin-bottom:0!important}.po-table-subtitle-text[_ngcontent-%COMP%]{padding-left:0 m!important}.custom-check[_ngcontent-%COMP%]{padding-left:10px}.flag[_ngcontent-%COMP%]{display:inline-block;height:20px;min-width:20px;overflow-y:hidden;padding:2px 8px;background:#e8850a;border-radius:3px;color:#fff;font-size:10px;line-height:16px;text-align:left;text-transform:uppercase;vertical-align:middle;position:relative;left:50px;width:33.33333%!important}.approved[_ngcontent-%COMP%], .aprovado[_ngcontent-%COMP%], .fechado[_ngcontent-%COMP%], .closed[_ngcontent-%COMP%]{background:#00b28e}.rejected[_ngcontent-%COMP%], .rejeitado[_ngcontent-%COMP%], .reprovado[_ngcontent-%COMP%], .reproved[_ngcontent-%COMP%]{background:#c64840}.empty[_ngcontent-%COMP%], .vazio[_ngcontent-%COMP%]{background:#cacaca}.approving[_ngcontent-%COMP%]{background:#e8850a}.cell-content[_ngcontent-%COMP%]{display:flex;max-width:81%}@media screen and (min-width: 1500px){.cell-content[_ngcontent-%COMP%]{max-width:85%}}[_nghost-%COMP%]     .po-table-subtitle-footer-container{border-bottom:2px solid #eceeee;border-top:1px solid #b8e4f1}[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:0!important;float:left}[_nghost-%COMP%]     .disclaimer{margin-top:100px}[_nghost-%COMP%]     .po-page-list-operations{display:flow-root;margin-bottom:0!important}[_nghost-%COMP%]     .po-table-footer-show-subtitle{cursor:auto!important;border-left:0!important}[_nghost-%COMP%]     .po-table-checkbox-label{margin-bottom:0!important}[_nghost-%COMP%]     .po-page-list-actions{margin-bottom:0!important}[_nghost-%COMP%]     .po-page-list-actions po-button{float:right}[_nghost-%COMP%]     .po-page-list-actions po-button:nth-child(3) button{border:1px solid #d13f43!important;color:#d13f43!important}[_nghost-%COMP%]     .po-page-list-actions po-button:nth-child(3) button:hover{color:#9e3933!important}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page-list-actions{float:right;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .po-page-list-operations{margin-top:20px}}@media screen and (max-width: 1366px){.po-table-footer-show-subtitle[_ngcontent-%COMP%], .po-table-subtitle-footer-container[_ngcontent-%COMP%]{height:70px!important;max-height:45px}[_nghost-%COMP%]     .po-page-list-actions .po-button{height:32px;margin:4px 8px 0 0}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-actions{margin-bottom:0;margin-top:42px;display:none}[_nghost-%COMP%]     .po-page-list-actions .po-button{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}[_nghost-%COMP%]     .po-table-footer{display:none}}@media screen and (max-width: 960px){[_nghost-%COMP%]     .po-table-footer{display:none}}.button-actions[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-body{font-family:"Nunito Sans",sans-serif;font-size:16px;padding-left:5px}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-header{padding:5px!important}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-footer{padding:20px!important}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-content{padding:0!important}@media screen and (min-width: 769px){[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-sm{width:25%}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-body{margin-bottom:70px}}@media screen and (max-width: 480px){[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-body{margin-bottom:50px;padding-left:20px}[_nghost-%COMP%]     .delete-modal -shadowcsshost   .po-modal-footer{padding:25px!important}}.select-all[_ngcontent-%COMP%]{margin-left:8px;font-weight:bold}.select-all[_ngcontent-%COMP%]     .po-checkbox-label{margin-left:35px}@media screen and (min-width: 481px){.modalApprove[_ngcontent-%COMP%]     .po-modal-content{width:420px}}.modalApprove[_ngcontent-%COMP%]     .po-modal-header{display:none}.modalApprove[_ngcontent-%COMP%]     .po-modal-body{margin:20px 0 40px}.modalReprove[_ngcontent-%COMP%]     .po-modal-header{padding-bottom:0}po-tag.color-oncall-partially-excluded[_ngcontent-%COMP%]     .po-tag-info{background-color:#0077b5!important}']}),e})()}}]);