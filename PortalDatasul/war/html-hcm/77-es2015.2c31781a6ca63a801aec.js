"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[77],{43077:function(e,t,i){i.r(t),i.d(t,{ClockingGeoModule:function(){return We}});var o=i(38583),n=i(56365),s=i(42779),c=i(59708),l=i(98348),a=i(37716);const r="timesheet";let p=(()=>{class e{constructor(e){this.serviceGeneric=e}getClockingsGeo(e,t){const i=[];this.serviceGeneric.parseParams(i,"page",t),this.serviceGeneric.parseParams(i,"pageSize",10);const o=`${r}/clockingsGeolocation/${l.ZP.checkIfEncode(e)}`;return this.serviceGeneric.search(o,i)}save(e,t){return this.serviceGeneric.post(`${r}/clockingsGeolocation/${e}`,t,!1)}update(e,t){const i=`${r}/clockingsGeolocation/${l.ZP.checkIfEncode(e)}`;return this.serviceGeneric.put(i,t)}getDisconsiderReasons(){return this.serviceGeneric.get(`${r}/disconsiderReasons`).then(e=>e.items)}getCurrentTime(e,t,i){const o=`${r}/clockingsGeolocation/currentTime/${e}/${t}/`,n=[];return n.timezone=i,this.serviceGeneric.search(o,n)}getTodayClockings(e,t,i){return this.serviceGeneric.get(`${r}/todayClockings/${e}/${t}/${i}/`).then(e=>e.items)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.M))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var d=i(95987),g=i(51110),u=i(64762),h=i(44956),m=i(92340),f=(()=>((f||(f={})).DirectionEnum={Entry:"entry",Exit:"exit",Independ:"independ"},f))(),x=i(81483),b=i(88044),w=i(14833),k=i(81059),v=i(16851),C=i(11524),M=i(91704),Z=i(65241);const _=["divSwipeButton"];function O(e,t){if(1&e&&(a.TgZ(0,"div",6),a.TgZ(1,"div",7),a._uU(2),a.qZA(),a.TgZ(3,"div",8),a._uU(4),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.swipeButtonText),a.xp6(2),a.hij("< ",e.swipeButtonTextTip," >")}}function y(e,t){if(1&e&&(a.TgZ(0,"div",6),a.TgZ(1,"div",9),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.swipeButtonExecutionText)}}function A(e,t){if(1&e&&(a.TgZ(0,"div",6),a.TgZ(1,"div",10),a._UZ(2,"span",11),a._uU(3),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.hij("\xa0 ",e.swipeButtonOperationSuccessText," ")}}function P(e,t){if(1&e&&(a.TgZ(0,"div",6),a.TgZ(1,"div",12),a._UZ(2,"span",13),a._uU(3),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.hij("\xa0 ",e.swipeButtonOperationErrorText," ")}}const T=function(e,t){return{"swipe-boundary-actived":e,"no-boundary":t}},G=function(e,t,i,o){return{"swipe-actived":e,"no-animate":t,"swipe-success":i,"swipe-error":o}};let q=(()=>{class e{constructor(e){this.appTranslateService=e,this.onHold=new a.vpe,this.onSwipeDone=new a.vpe,this._swipeActived=!1,this._swipeBlocked=!1,this._defaultMessageVisible=!0,this._errorMessageVisible=!1,this._successMessageVisible=!1,this._executionMessageVisible=!1,this._initialPaddingBoundarySwipeButton=0,this._swipeButtonCenterCoordinates={top:0,left:0},this._lastMovement={deltaX:0,deltaY:0,distance:0,direction:1},this._swipeButtonText="TEXT",this._swipeButtonTextTip="TIP",this._swipeButtonExecutionText="EXECUTION",this._swipeButtonOperationSuccessText="SUCCESS",this._swipeButtonOperationErrorText="ERROR"}ngOnInit(){this._initialPaddingBoundarySwipeButton=this.getBoundryPaddingValue(),this.defineTextComponent(this.text,this.successMessage,this.errorMessage)}ngAfterViewInit(){this.startEventListenersToSwipeButton()}get swipeActived(){return this._swipeActived}set swipeActived(e){this._swipeActived=e}get swipeBlocked(){return this._swipeBlocked}get defaultMessageVisible(){return this._defaultMessageVisible}get defaultExecutionVisible(){return this._executionMessageVisible}get errorMessageVisible(){return this._errorMessageVisible}get successMessageVisible(){return this._successMessageVisible}get swipeButtonText(){return this._swipeButtonText}get swipeButtonTextTip(){return this._swipeButtonTextTip}get swipeButtonExecutionText(){return this._swipeButtonExecutionText}get swipeButtonOperationSuccessText(){return this._swipeButtonOperationSuccessText}get swipeButtonOperationErrorText(){return this._swipeButtonOperationErrorText}onPan(e){e.preventDefault(),this.doSwipeAnimation(e)}onPanEnd(e){e.preventDefault(),this.swipeBlocked||(this.swipeActived=!1,this.resetSwipe())}onPress(e){e.preventDefault(),this.swipeActived=!0,this.onHold.emit()}onPressUp(e){e.preventDefault(),this.swipeBlocked||(this.swipeActived=!1,this.resetSwipe())}doAnimationSuccess(){this.swipeActived&&this.showSuccessMessage(),this.doAnimationReset()}doAnimationError(){this.swipeActived&&this.showErrorMessage(),this.doAnimationReset()}doAnimationReset(){setTimeout(e=>{this.blockSwipe(!1),this.resetSwipe()},3e3)}cancelExecution(){this.blockSwipe(!1),this.resetSwipe()}doAnimationExecution(){this.swipeActived&&(this.showExecutionMessage(),this.blockSwipe(!0))}swipeDone(){this.doAnimationExecution(),this.onSwipeDone.emit()}doSwipeAnimation(e){const t=M(".swipe-boundary");this.swipeActived&&!this.swipeBlocked&&(e.distance-this._lastMovement.distance>0?this.getBoundryPaddingValue()>0?t.css("padding","-="+(e.distance-this._lastMovement.distance)):this.swipeDone():e.distance-this._lastMovement.distance<0&&(this.getBoundryPaddingValue()<this._initialPaddingBoundarySwipeButton?t.css("padding","+="+-1*(e.distance-this._lastMovement.distance)):t.css("padding",this._initialPaddingBoundarySwipeButton))),this._lastMovement.deltaX=e.deltaX,this._lastMovement.deltaY=e.deltaY,this._lastMovement.distance=e.distance,this._lastMovement.direction=e.direction}getBoundryPaddingValue(){return Number(M(".swipe-boundary").css("padding").replace("px",""))}resetSwipe(){if(!this.swipeBlocked){const e=M(".swipe-boundary");e&&e.css("padding",this._initialPaddingBoundarySwipeButton),this.swipeActived=!1,this.showDefaultMessage()}}blockSwipe(e){this._swipeBlocked=e}defineTextComponent(e,t,i){this.appTranslateService.getI18n("l-hold-and-drag").then(e=>{e&&(this._swipeButtonTextTip=e)}),this.appTranslateService.getI18n("l-processing").then(e=>{e&&(this._swipeButtonExecutionText=e)}),e&&this.appTranslateService.getI18n(e).then(t=>{this._swipeButtonText=t||e}),t&&this.appTranslateService.getI18n(t).then(e=>{this._swipeButtonOperationSuccessText=e||t}),i&&this.appTranslateService.getI18n(i).then(e=>{this._swipeButtonOperationErrorText=e||i})}showSuccessMessage(){this._executionMessageVisible=!1,this._successMessageVisible=!0,this._errorMessageVisible=!1,this._defaultMessageVisible=!1}showErrorMessage(){this._executionMessageVisible=!1,this._successMessageVisible=!1,this._errorMessageVisible=!0,this._defaultMessageVisible=!1}showDefaultMessage(){this._executionMessageVisible=!1,this._successMessageVisible=!1,this._errorMessageVisible=!1,this._defaultMessageVisible=!0}showExecutionMessage(){this._successMessageVisible=!1,this._errorMessageVisible=!1,this._defaultMessageVisible=!1,this._executionMessageVisible=!0}startEventListenersToSwipeButton(){const e=new C(this.swipeButton.nativeElement);e.get("pan").set({direction:C.DIRECTION_ALL}),e.on("pan",e=>this.onPan(e)),e.on("panend",e=>this.onPanEnd(e)),e.on("press",e=>this.onPress(e)),e.on("pressup",e=>this.onPressUp(e))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(Z.g))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-swipe-button"]],viewQuery:function(e,t){if(1&e&&a.Gf(_,5),2&e){let e;a.iGM(e=a.CRH())&&(t.swipeButton=e.first)}},inputs:{text:"text",errorMessage:"errorMessage",successMessage:"successMessage"},outputs:{onHold:"onHold",onSwipeDone:"onSwipeDone"},decls:9,vars:14,consts:[[1,"po-row","po-sm-12","po-md-12","po-lg-12","po-xl-12","po-text-center"],[1,"container-swipe-button"],[1,"swipe-boundary",3,"ngClass"],[1,"swipe-button",3,"ngClass"],["divSwipeButton",""],["class","swipe-button-text",4,"ngIf"],[1,"swipe-button-text"],["id","div-swipeButtonText",1,"text"],["id","div-swipeButtonTextTip",1,"tip-text","highlight"],[1,"text"],["id","div-swipeButtonOperationSuccessText",1,"text"],[1,"glyphicon","glyphicon-ok"],["id","div-swipeButtonOperationErrorText",1,"text"],[1,"glyphicon","glyphicon-remove"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3,4),a.YNc(5,O,5,2,"div",5),a.YNc(6,y,3,1,"div",5),a.YNc(7,A,4,1,"div",5),a.YNc(8,P,4,1,"div",5),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngClass",a.WLB(6,T,t.swipeActived,t.swipeBlocked)),a.xp6(1),a.Q6J("ngClass",a.l5B(9,G,t.swipeActived,t.swipeActived,t.successMessageVisible,t.errorMessageVisible)),a.xp6(2),a.Q6J("ngIf",t.defaultMessageVisible),a.xp6(1),a.Q6J("ngIf",t.defaultExecutionVisible),a.xp6(1),a.Q6J("ngIf",t.successMessageVisible),a.xp6(1),a.Q6J("ngIf",t.errorMessageVisible))},directives:[o.mk,o.O5],styles:[".container-swipe-button[_ngcontent-%COMP%]{width:276px;display:inline-block;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-boundary[_ngcontent-%COMP%]{width:100%;border-radius:100%;padding:4em;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-boundary-actived[_ngcontent-%COMP%]{border:2px dotted #0c9abe;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-actived[_ngcontent-%COMP%]{background-color:#0b89a5!important}.swipe-button[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%;height:0;padding:50% 0;border-radius:50%;background:#0c9abe;color:#fff;text-align:center;transition:all .3s ease-in;-webkit-animation:pulse 2s infinite;animation:pulse 2s infinite;-webkit-user-select:none;-ms-user-select:none;user-select:none}.swipe-success[_ngcontent-%COMP%]{background-color:#05aa5d!important}.swipe-error[_ngcontent-%COMP%]{background-color:#b12a2a!important}.swipe-success[_ngcontent-%COMP%]   .swipe-button-text[_ngcontent-%COMP%], .swipe-error[_ngcontent-%COMP%]   .swipe-button-text[_ngcontent-%COMP%]{margin-top:-1em}.swipe-button-text[_ngcontent-%COMP%]{margin-top:-1.4em;position:relative}.swipe-button-text[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:1.4em;color:#fff}.swipe-button-text[_ngcontent-%COMP%]   .tip-text[_ngcontent-%COMP%]{color:#8ecff0;font-size:.8em}.no-animate[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important}.no-boundary[_ngcontent-%COMP%]{border:none!important}@media (max-width: 480px){.swipe-boundary[_ngcontent-%COMP%]{padding:4em}}@-webkit-keyframes pulse{0%{-webkit-box-shadow:0 0 0 0 rgba(11,154,188,.4)}70%{-webkit-box-shadow:0 0 0 50px rgba(11,154,188,0)}to{-webkit-box-shadow:0 0 0 0 rgba(11,154,188,0)}}@keyframes pulse{0%{box-shadow:0 0 rgba(11,154,188,.4)}70%{box-shadow:0 0 0 50px rgba(11,154,188,0)}to{box-shadow:0 0 rgba(11,154,188,0)}}.highlight[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}@-webkit-keyframes blinker{0%{opacity:.7;color:#fff}50%{opacity:.4;color:#fff}to{opacity:.7;color:#fff}}@keyframes blinker{0%{opacity:.7;color:#fff}50%{opacity:.4;color:#fff}to{opacity:.7;color:#fff}}"]}),e})();var I=i(68014),U=i(33224),D=i(84479),E=i(96054),S=i(29790),J=i(11530),V=i(37503),L=i(32268),B=i(18648);const N=["map"],Q=["swipeButtonClockingRegister"],z=["addressElement"];function R(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-swipe-button",12,13),a.NdJ("onSwipeDone",function(){return a.CHM(e),a.oxw().save()}),a.qZA()}}function Y(e,t){if(1&e&&(a.TgZ(0,"div",14),a.TgZ(1,"span",15),a._uU(2),a.qZA(),a.TgZ(3,"span",16),a._uU(4),a.ALo(5,"utcDate"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.clock),a.xp6(2),a.Oqu(a.xi3(5,2,e.date,"longDate"))}}function F(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",17),a._UZ(1,"div",18),a.TgZ(2,"div",19),a.TgZ(3,"strong",20),a._uU(4),a.qZA(),a.TgZ(5,"span",21),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"span",22),a.NdJ("click",function(){return a.CHM(e),a.oxw(),a.MAs(9).open()}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.lastClockingHour),a.xp6(2),a.Oqu(a.lcZ(7,2,e.lastClockingDirection))}}function H(e,t){1&e&&(a.TgZ(0,"div",29),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"l-location-near-address")," "))}function j(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"po-button",30),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).checkLocation()}),a.ALo(1,"translate"),a.qZA()}2&e&&a.s9C("p-label",a.lcZ(1,1,"l-reload"))}const $=function(e){return{"address-container-without-clocking":e}};function X(e,t){if(1&e&&(a.TgZ(0,"div",23,24),a._UZ(2,"img",25),a.YNc(3,H,3,3,"div",26),a.TgZ(4,"div",27),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.YNc(7,j,2,3,"po-button",28),a.qZA()),2&e){const e=a.oxw();a.Q6J("ngClass",a.VKq(8,$,!e.hasTodayClockings())),a.xp6(2),a.Q6J("src",e.getImagePointer(),a.LSH),a.xp6(1),a.Q6J("ngIf",e.geolocationIsAvailable),a.xp6(1),a.Q6J("ngClass",e.getClassMessage()),a.xp6(1),a.hij(" ",a.lcZ(6,6,e.message)," "),a.xp6(2),a.Q6J("ngIf",!e.geolocationIsAvailable)}}function K(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"div",31),a._UZ(2,"div",32),a.TgZ(3,"div",33),a.TgZ(4,"strong",20),a._uU(5),a.ALo(6,"formatMillisecondsAsHour"),a.qZA(),a.TgZ(7,"span",21),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit,i=a.oxw();a.xp6(5),a.Oqu(a.lcZ(6,2,e.hour)),a.xp6(3),a.Oqu(a.lcZ(9,4,i.getDirection(e)))}}let W=(()=>{class e extends k.R{constructor(e,t,i,o,n,s,c,l,a,r,p,d){super(),this.clockingGeoService=e,this.geolocationService=t,this.ionicUtilService=i,this.windowUtilService=o,this.notificationService=n,this.translateService=s,this.openStreetMapService=c,this.changeDetectRef=l,this.lastAccess=a,this.globals=r,this.ngZone=p,this.permissionSelector=d,this.showRegisterButton=!1,this.loadingClock=!0,this.setClockingGeolocationDefault()}ngOnInit(){super.ngOnInit(),this.checkLocation(),this.getTodayClockings(),this.setCountLastAccess()}ngAfterViewInit(){setTimeout(()=>{this.showRegisterButton=!0},5e3)}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}setCountLastAccess(){this.globals.getEmployeeSummary().then(e=>{this.lastAccess.setLastAccess(w.Ux,e.id)})}getTodayClockings(){return(0,u.mG)(this,void 0,void 0,function*(){this.clockingsDay=yield this.clockingGeoService.getTodayClockings(m.N.loggedUser,this.clockingGeolocation.latitude.toString(),this.clockingGeolocation.longitude.toString()),this.loadLastHourDirection()})}hasTodayClockings(){return!!(this.clockingsDay&&this.clockingsDay.length>0)}loadLastHourDirection(){this.clockingsDay&&this.clockingsDay.length?(this.lastClockingHour=x.Em.getHoursByMilliseconds(this.clockingsDay.slice(-1)[0].hour),this.lastClockingDirection=this.getDirection(this.clockingsDay.slice(-1)[0])):(this.lastClockingHour=void 0,this.lastClockingDirection=void 0)}getDirection(e){if(e){if(e.direction===f.DirectionEnum.Entry)return"l-entry";if(e.direction===f.DirectionEnum.Exit)return"l-output"}}setClock(e,t,i){let o,n,s,c=!0;this.loadingClock=!0,this.clockingGeoService.getCurrentTime(e,t,i).then(e=>{n=e.actualTime,this.date=new Date(e.actualDate),this.loadingClock=!1}),this.ngZone.runOutsideAngular(()=>{setInterval(()=>{this.ngZone.run(()=>{this.clock=x.Em.getHoursByMilliseconds(n),"00:00"===this.clock&&c&&(s=this.date.setDate(this.date.getDate()+1),o=new Date(s),o.getDay()===(new Date).getDay()&&(this.date=o),c=!1),n+=1e3})},1e3)})}checkLocation(){this.permissionSubscription=this.permissionSelector.permissions$.subscribe(e=>{var t;this.clockingLocalization=null===(t=null==e?void 0:e.clockingLocalization)||void 0===t||t,e&&(e.clockingLocalization||null==e.clockingLocalization)?this.windowUtilService.isWebView()?this.requestGeolocationPermission():this.findLocation():this.setClock("0","0",0)})}findLocation(){this.windowUtilService.isWebView()?this.requestGeolocationDevice():this.requestGeolocationLocal()}requestGeolocationDevice(){this.ionicUtilService.emit({args:{},type:b.g.RequestGelocationCoordinates})}requestGeolocationLocal(){this.geolocationService.getPosition(e=>{this.findLocationSuccess(e)},e=>{this.findLocationError(e)})}findLocationSuccess(e){this.geolocationIsAvailable=!0,this.setClockingGeolocation(e)}findLocationError(e){this.geolocationIsAvailable=!1,this.message="l-location-unavailable",this.setClockingGeolocationDefault(!0),this.showGeolocationError(e.message)}setClockingGeolocation(e){const t=new Date;this.clockingGeolocation={latitude:e.coords.latitude.toString(),longitude:e.coords.longitude.toString(),timezone:t.getTimezoneOffset()},this.setClock(this.clockingGeolocation.latitude,this.clockingGeolocation.longitude,this.clockingGeolocation.timezone),this.showUserPositionAddress(this.clockingGeolocation)}setClockingGeolocationDefault(e=!1){this.clockingGeolocation={date:new Date,hour:0,latitude:"0",longitude:"0",timezone:0},e&&this.setClock("0","0",0)}save(){this.clockingGeolocation.date=this.date,this.clockingGeolocation.hour=x.Em.getTotalMilliseconds(this.clock),this.clockingGeolocation.address=this.message,this.clockingGeoService.save(m.N.loggedUser,this.clockingGeolocation).then(()=>{this.swipeButtonClockingRegister.doAnimationSuccess(),this.getTodayClockings(),this.setClock(this.clockingGeolocation.latitude,this.clockingGeolocation.longitude,this.clockingGeolocation.timezone)}).catch(()=>{this.swipeButtonClockingRegister.doAnimationError()})}showUserPositionAddress(e){this.openStreetMapService.simpleReverseGeocoding(+e.longitude,+e.latitude).then(t=>{this.message=t,this.showRegisterButton=!0,this.map&&(this.map.resetMap(),this.map.loadMap(e.latitude,e.longitude,!1,.0015)),this.changeDetectRef.detectChanges()}).catch(e=>{this.showRegisterButton=!0,console.error("[openStreetMapService]",e)})}showGeolocationError(e){this.translateService.get(e).subscribe(e=>{this.notificationService.showNotification(e,h.ik9.Warning)})}requestGeolocationPermission(){this.ionicUtilService.emit({args:{},type:b.g.RequestGeolocationPermission})}getClassMessage(){return this.geolocationIsAvailable?"all-address":"no-address"}getImagePointer(){return this.geolocationIsAvailable?"assets/img/location-color.svg":"assets/img/location-gray.svg"}callbackIonicExternalEvent(e){if(e.detail.event.type===b.g.RequestGeolocationPermission&&(e.detail.success?(this.statusPermission=e.detail.returnObject.allow,this.statusPermission||this.setClock("0","0",0)):this.setClockingGeolocationDefault(!0),this.findLocation()),e.detail.event.type===b.g.RequestGelocationCoordinates)if(e.detail.success){const t=e;t.detail.returnObject.error?this.findLocationError(t.detail.returnObject.error):this.findLocationSuccess(t.detail.returnObject.position)}else this.setClockingGeolocationDefault(!0);else this.setClock("0","0",0)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p),a.Y36(U._),a.Y36(b.l),a.Y36(D.g),a.Y36(E.g),a.Y36(S.sK),a.Y36(J.H),a.Y36(a.sBO),a.Y36(w.Lx),a.Y36(V.O),a.Y36(a.R0b),a.Y36(I.eL))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-clocking-geo-register"]],viewQuery:function(e,t){if(1&e&&(a.Gf(N,5),a.Gf(Q,5),a.Gf(z,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.map=e.first),a.iGM(e=a.CRH())&&(t.swipeButtonClockingRegister=e.first),a.iGM(e=a.CRH())&&(t.addressElement=e.first)}},hostBindings:function(e,t){1&e&&a.NdJ("callbackIonicExternalEvent",function(e){return t.callbackIonicExternalEvent(e)},!1,a.evT)},features:[a.qOj],decls:13,vars:9,consts:[[1,"over-component","no-text-select"],[1,"map-finishing"],["id","btn-app-swipe-clocking-register","text","bt-clocking-register","errorMessage","l-message-register-clock-error","successMessage","l-message-register-clock-success",3,"onSwipeDone",4,"ngIf"],["class","div-clock po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],["class","clockings-container po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],["id","div-address","class","address-container",3,"ngClass",4,"ngIf"],[3,"hidden"],["map",""],["p-click-out","true","p-size","md",3,"p-title"],["modal",""],[1,"timeline"],[4,"ngFor","ngForOf"],["id","btn-app-swipe-clocking-register","text","bt-clocking-register","errorMessage","l-message-register-clock-error","successMessage","l-message-register-clock-success",3,"onSwipeDone"],["swipeButtonClockingRegister",""],[1,"div-clock","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"clock","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"long-date","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"clockings-container","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"indicator","timeline-status-none"],[1,"po-sm-6","po-md-6","po-lg-6","po-xl-6","clockings"],[1,"hour"],[1,"direction"],[1,"po-icon","po-icon-arrow-up","icn-clockings","pull-right",3,"click"],["id","div-address",1,"address-container",3,"ngClass"],["addressElement",""],["id","img-pointer",1,"appear-1",3,"src"],["class","near-location appear-2",4,"ngIf"],[1,"po-sm-5","po-md-5","po-lg-5","po-xl-5","message","appear-3",3,"ngClass"],["id","btn-reload","class","po-sm-6 po-md-6 po-lg-6 po-xl-5 reload",3,"p-label","click",4,"ngIf"],[1,"near-location","appear-2"],["id","btn-reload",1,"po-sm-6","po-md-6","po-lg-6","po-xl-5","reload",3,"p-label","click"],[1,"timeline-block"],[1,"timeline-status-indicator","timeline-status-none"],[1,"timeline-content"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a._UZ(1,"div",1),a.YNc(2,R,2,0,"app-swipe-button",2),a.YNc(3,Y,6,5,"div",3),a.YNc(4,F,9,4,"div",4),a.YNc(5,X,8,10,"div",5),a._UZ(6,"app-opens-street-map",6,7),a.TgZ(8,"po-modal",8,9),a.ALo(10,"translate"),a.TgZ(11,"div",10),a.YNc(12,K,10,6,"div",11),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",t.showRegisterButton),a.xp6(1),a.Q6J("ngIf",!t.loadingClock),a.xp6(1),a.Q6J("ngIf",t.hasTodayClockings()),a.xp6(1),a.Q6J("ngIf",t.clockingLocalization),a.xp6(1),a.Q6J("hidden",!t.geolocationIsAvailable),a.xp6(2),a.s9C("p-title",a.lcZ(10,7,"l-clockings-today")),a.xp6(4),a.Q6J("ngForOf",t.clockingsDay))},directives:[o.O5,v.Y,h.hmF,o.sg,q,o.mk,h.bOz],pipes:[S.X$,L.$,B.P],styles:['.over-component[_ngcontent-%COMP%]{margin-left:-16px;width:100%;height:calc(97vh - 108px);margin-top:-52px;position:absolute;margin-right:8px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0;position:absolute;z-index:10;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.near-location[_ngcontent-%COMP%]{font-weight:bold;text-transform:uppercase;font-size:.6em;font-family:NunitoSans-bold;margin-top:0}.timeline-block[_ngcontent-%COMP%]{position:relative}.timeline[_ngcontent-%COMP%]{position:relative;margin-top:1em;margin-bottom:2em;margin-left:10px!important}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:34px;height:100%;width:1.5px;background:#9de6f9}.timeline-content[_ngcontent-%COMP%]{position:relative;margin-left:60px;margin-bottom:10px}.timeline-content[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.timeline-block[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.timeline-block[_ngcontent-%COMP%]:first-child{margin-top:0}.timeline-block[_ngcontent-%COMP%]:last-child{margin-bottom:0;margin-left:-8px}.address-container[_ngcontent-%COMP%]{z-index:10;display:block;height:50px;width:100%;padding:10px 16px 12px;left:0px;background-color:#fff;text-align:left}.clockings-container[_ngcontent-%COMP%]{z-index:11;display:block;height:50px;width:100%;left:0px;background-color:#fff;text-align:left;box-shadow:0 -2px 8px #e3e6f1}.clockings[_ngcontent-%COMP%]{position:absolute;top:8px;left:50px}.icn-clockings[_ngcontent-%COMP%]{color:#0c9abe;font-size:38px;padding-top:4px}.timeline-status-indicator[_ngcontent-%COMP%]{position:absolute;top:10px;left:35px;width:15px;height:15px;border-radius:50%;border-width:2px;background:#1b92be;text-align:center;color:#fff}.indicator[_ngcontent-%COMP%]{position:absolute;top:20px;left:35px;width:15px;height:15px;border-radius:50%;border-width:2px;background:#1b92be;text-align:center;color:#fff}.timeline-status-none[_ngcontent-%COMP%]{width:10px;height:10px;left:38px}.open-clockings[_ngcontent-%COMP%]{color:#0c9abe;display:table-cell;width:50px}.hour[_ngcontent-%COMP%]{font-size:22px;margin-right:10px}.direction[_ngcontent-%COMP%]{font-size:18px;color:#9da7a9}@media only screen and (max-width: 960px){.address-container[_ngcontent-%COMP%]{bottom:110px;position:fixed}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:60px}.clockings-container[_ngcontent-%COMP%]{bottom:60px;position:fixed}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:8%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}@media only screen and (min-width: 961px) and (max-width: 1366px){.over-component[_ngcontent-%COMP%]{width:100vw;height:100vh;text-align:center;position:fixed;margin-left:-16px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}.address-container[_ngcontent-%COMP%]{bottom:50px;position:fixed}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:fixed}.po-menu-mobile[_ngcontent-%COMP%]{z-index:unset}.po-clickable[_ngcontent-%COMP%]{z-index:2!important}h2[_ngcontent-%COMP%]{padding-left:40px!important;z-index:2!important}.po-menu-mobile[_ngcontent-%COMP%]{z-index:2!important}.over-component[_ngcontent-%COMP%]{z-index:0!important}}@media only screen and (min-width: 1367px){.over-component[_ngcontent-%COMP%]{width:calc(100vw - 256px);height:100vh;text-align:center;position:fixed;margin-left:-15px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.address-container[_ngcontent-%COMP%]{bottom:50px;position:absolute}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:absolute}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}@media only screen and (min-width: 1201px) and (max-width: 1502px){.over-component[_ngcontent-%COMP%]{width:calc(100vw - 256px);text-align:center;position:fixed;margin-left:-15px}.over-component[_ngcontent-%COMP%]   app-swipe-button[_ngcontent-%COMP%]{margin:0}.address-container[_ngcontent-%COMP%]{bottom:50px;position:absolute}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:0px}.clockings-container[_ngcontent-%COMP%]{bottom:0px;position:absolute}.div-clock[_ngcontent-%COMP%]{z-index:4;position:absolute;top:20%;text-align:center}.clock[_ngcontent-%COMP%]{font-size:32px}.long-date[_ngcontent-%COMP%]{font-size:16px;color:gray}}.all-address[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:calc(100% - 32px);padding-right:15px}.reload[_ngcontent-%COMP%]{padding-right:40px;margin-top:-6px}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.reload[_ngcontent-%COMP%]{padding-right:15px;margin-top:-6px}}.message[_ngcontent-%COMP%]{padding:0}#img-pointer[_ngcontent-%COMP%]{float:left;width:20px;margin-right:5px;margin-top:0}.no-address[_ngcontent-%COMP%]{font-weight:bold}.map-finishing[_ngcontent-%COMP%]{height:50vh;width:100%;display:block;background:linear-gradient(to top,rgba(250,250,250,0) 0%,#fafafa 100%);z-index:1;position:absolute}@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3){.address-container[_ngcontent-%COMP%]{bottom:144px;padding:8px 16px}.address-container-without-clocking[_ngcontent-%COMP%]{bottom:94px}.clockings-container[_ngcontent-%COMP%]{bottom:94px;position:fixed}.over-component[_ngcontent-%COMP%]{height:calc(97vh - 142px)}}']}),e})();var ee=i(57706);function te(e,t){if(1&e&&(a.TgZ(0,"h2",3),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(e.selectedEmployee.name)}}function ie(e,t){1&e&&(a.TgZ(0,"div",4),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"l-clocking-no-employee"),"\n"))}function oe(e,t){1&e&&(a.TgZ(0,"div",4),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"l-clocking-select-employee"),"\n"))}function ne(e,t){1&e&&(a.TgZ(0,"div",28),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"l-disconsider")))}const se=function(e){return{optionsDropUpDisconsider:e}};function ce(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ul",29),a.TgZ(1,"li",30),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).openClockingGeoUpdate(t,!1)}),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(),t=e.last,i=e.index,o=a.oxw(2);a.Q6J("ngClass",a.VKq(4,se,o.isDropUp(t,i))),a.xp6(2),a.hij(" ",a.lcZ(3,2,"disconsider-the-clocking")," ")}}function le(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",33),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(2).$implicit;return a.oxw(2).openClockingGeoUpdate(t,!1)}),a._uU(1),a.ALo(2,"translate"),a.qZA()}2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"l-reconsider-the-clocking")," "))}const ae=function(e){return{optionsDropUpReconsider:e}};function re(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ul",31),a.YNc(1,le,3,3,"li",32),a.TgZ(2,"li",30),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).openClockingGeoUpdate(t,!0)}),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().last,t=a.oxw(2);a.Q6J("ngClass",a.VKq(5,ae,e)),a.xp6(1),a.Q6J("ngIf",t.reconsiderAllowed),a.xp6(2),a.hij(" ",a.lcZ(4,3,"view-justification")," ")}}const pe=function(e){return{selected:e}},de=function(e){return{disabled:e}};function ge(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr",14),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).showClockingOnMap(t)}),a.TgZ(1,"td",15),a._UZ(2,"img",16),a.TgZ(3,"span",17),a.TgZ(4,"span",18),a._uU(5),a.ALo(6,"utcDate"),a.qZA(),a.YNc(7,ne,3,3,"div",19),a.qZA(),a.qZA(),a.TgZ(8,"td",20),a.TgZ(9,"span",21),a._uU(10),a.qZA(),a.qZA(),a.TgZ(11,"td",22),a.TgZ(12,"div",23),a.TgZ(13,"div",24),a._UZ(14,"span",25),a.YNc(15,ce,4,6,"ul",26),a.YNc(16,re,5,7,"ul",27),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw(2);a.Q6J("ngClass",a.VKq(13,pe,i.isSelected(e))),a.xp6(2),a.Q6J("src",i.getImagePointer(e),a.LSH),a.xp6(2),a.Q6J("ngClass",i.diffClockings(e)),a.xp6(1),a.Oqu(a.xi3(6,10,e.date,"dd/MM")),a.xp6(2),a.Q6J("ngIf",e.disconsider),a.xp6(2),a.Q6J("ngClass",i.diffClockings(e)),a.xp6(1),a.Oqu(i.getHoursByMilliseconds(e.hour)),a.xp6(4),a.Q6J("ngClass",a.VKq(15,de,!e.disconsider&&!i.disconsiderAllowed)),a.xp6(1),a.Q6J("ngIf",i.disconsiderAllowed&&!e.disconsider),a.xp6(1),a.Q6J("ngIf",e.disconsider)}}function ue(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"table",5),a.TgZ(1,"thead",6),a.TgZ(2,"tr",7),a.TgZ(3,"th",8),a.TgZ(4,"strong"),a._uU(5),a.ALo(6,"uppercase"),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"th",9),a.TgZ(9,"strong"),a._uU(10),a.ALo(11,"uppercase"),a.ALo(12,"translate"),a.qZA(),a.qZA(),a.TgZ(13,"th",10),a.TgZ(14,"strong"),a._uU(15),a.ALo(16,"uppercase"),a.ALo(17,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"tbody"),a.YNc(19,ge,17,17,"tr",11),a.qZA(),a.TgZ(20,"tfoot"),a.TgZ(21,"td",12),a.TgZ(22,"po-button",13),a.NdJ("p-click",function(){return a.CHM(e),a.oxw().moreResults()}),a.ALo(23,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu(a.lcZ(6,6,a.lcZ(7,8,"l-date"))),a.xp6(5),a.Oqu(a.lcZ(11,10,a.lcZ(12,12,"l-hour"))),a.xp6(5),a.Oqu(a.lcZ(16,14,a.lcZ(17,16,"l-actions"))),a.xp6(4),a.Q6J("ngForOf",e.clockingsGeo),a.xp6(3),a.s9C("p-label",a.lcZ(23,18,"l-load-more")),a.Q6J("p-disabled",!e.hasNext)}}let he=(()=>{class e{constructor(e,t,i){this.clockingGeoService=e,this.changeDetectRef=t,this.permissionSelector=i,this.clockingsGeo=[],this.hasNext=!1,this.page=1,this.catchGeoLocation=new a.vpe,this.catchGeoUpdate=new a.vpe,this.catchGeoUpdateJustify=new a.vpe}ngOnInit(){this.getPermissions()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}moreResults(){this.page++,this.loadClockingsGeo()}getClockingsGeo(e,t){this.clockingsGeo=[],this.page=1,this.isMobile=t,this.selectedEmployee=e,this.changeDetectRef.detectChanges(),this.loadClockingsGeo()}getHoursByMilliseconds(e){return x.Em.getHoursByMilliseconds(e)}diffClockings(e){return e.disconsider?"disconsider":""}isSelected(e){return e===this.selectedClocking}showClockingOnMap(e){this.selectedClocking=e,this.catchGeoLocation.emit(e)}openClockingGeoUpdate(e,t){this.selectedClocking=e,t?this.catchGeoUpdateJustify.emit(e):this.catchGeoUpdate.emit(e)}getImagePointer(e){return e.isOutFence?"assets/img/pin-outfence.svg":"0"!==e.latitude||"0"!==e.longitude?"assets/img/pin-approved.svg":"assets/img/pin-gray.svg"}isDropUp(e,t){return e&&0!==t}loadClockingsGeo(){this.selectedEmployee&&this.selectedEmployee.id&&this.clockingGeoService.getClockingsGeo(this.selectedEmployee.id,this.page).then(e=>{this.clockingsGeo=this.clockingsGeo.concat(e.items),this.hasNext=e.hasNext})}getPermissions(){this.permissionSubscription=this.permissionSelector.permissions$.subscribe(e=>{this.disconsiderAllowed=e.clockingGeoDisconsider,this.reconsiderAllowed=e.clockingGeoReconsider})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p),a.Y36(a.sBO),a.Y36(I.eL))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-clocking-geo-list"]],inputs:{selectedEmployee:"selectedEmployee"},outputs:{catchGeoLocation:"catchGeoLocation",catchGeoUpdate:"catchGeoUpdate",catchGeoUpdateJustify:"catchGeoUpdateJustify"},decls:4,vars:4,consts:[["class","po-font-subtitle title-name",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12 text-center map-not-visible",4,"ngIf"],["id","table-timesheet","class","table table-timesheet po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],[1,"po-font-subtitle","title-name"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-center","map-not-visible"],["id","table-timesheet",1,"table","table-timesheet","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"column-header"],[1,"no-padding"],[1,"clocking-geo-view-label-column","label-day","text-left"],[1,"clocking-geo-view-label-column","clocking-header-column","label-hour","text-left"],[1,"lbl-see-more","clocking-geo-view-label-column","clocking-header-column","label-actions","text-right"],["class","line",3,"ngClass","click",4,"ngFor","ngForOf"],["colspan","3"],["p-type","primary","id","moreResultsId","name","moreResults",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"p-label","p-disabled","p-click"],[1,"line",3,"ngClass","click"],[1,"column-day"],["id","img-pointer",3,"src"],["name","clockings-list"],[3,"ngClass"],["class","text-disconsider",4,"ngIf"],[1,"column-hour","text-center"],[1,"po-sm-3","po-md-3","po-lg-3","po-xl-3",3,"ngClass"],[1,"column-actions","text-right","column-see"],[1,"icon","text-right"],[1,"dropdown","mouse-pointer"],["data-toggle","dropdown",1,"po-icon","po-icon-more","see-more",3,"ngClass"],["name","ul-dropdown-option-disconsider","class","dropdown-menu",3,"ngClass",4,"ngIf"],["name","ul-dropdown-option-reconsider","class","dropdown-menu",3,"ngClass",4,"ngIf"],[1,"text-disconsider"],["name","ul-dropdown-option-disconsider",1,"dropdown-menu",3,"ngClass"],[1,"dropdown-menu-itens",3,"click"],["name","ul-dropdown-option-reconsider",1,"dropdown-menu",3,"ngClass"],["name","li-dropdown-option-reconsider","class","dropdown-menu-itens",3,"click",4,"ngIf"],["name","li-dropdown-option-reconsider",1,"dropdown-menu-itens",3,"click"]],template:function(e,t){1&e&&(a.YNc(0,te,2,1,"h2",0),a.YNc(1,ie,3,3,"div",1),a.YNc(2,oe,3,3,"div",1),a.YNc(3,ue,24,20,"table",2)),2&e&&(a.Q6J("ngIf",t.selectedEmployee&&!t.isMobile),a.xp6(1),a.Q6J("ngIf",t.selectedEmployee&&0==t.clockingsGeo.length),a.xp6(1),a.Q6J("ngIf",!t.selectedEmployee&&0==t.clockingsGeo.length),a.xp6(1),a.Q6J("ngIf",t.clockingsGeo.length>0))},directives:[o.O5,o.sg,h.bOz,o.mk],pipes:[S.X$,o.gd,L.$],styles:[".clocking-geo[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;padding:16px 10px}.icon[_ngcontent-%COMP%]{padding-right:8px;color:#29b6c5}.optionsDropUpDisconsider[_ngcontent-%COMP%]{margin-top:-80px}.optionsDropUpReconsider[_ngcontent-%COMP%]{margin-top:-120px}@media (max-width: 480px){.optionsDropUpReconsider[_ngcontent-%COMP%]{margin-top:0;position:fixed;right:5px!important}}.dropdown-menu-itens[_ngcontent-%COMP%]{cursor:default;text-align:left;font-weight:400;background-color:#fff;line-height:44px;width:100%;padding-left:16px;margin-top:-4px;color:#000}.dropdown-menu-itens[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.text-disconsider[_ngcontent-%COMP%]{font-size:12px;color:red}.dropdown-menu[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 0 10px}.dropdown-menu[_ngcontent-%COMP%]{top:100%;min-width:175px;left:auto!important}.selected[_ngcontent-%COMP%]{background-color:#ceeaf2}hr[_ngcontent-%COMP%]{margin:0}.po-icon.po-icon-more[_ngcontent-%COMP%]:before{border:1px solid #808080;padding:5px 8px;font-size:23px;border-radius:3px}.title-name[_ngcontent-%COMP%]{margin-top:5px;text-align:center}#img-pointer[_ngcontent-%COMP%]{float:left;width:16px;margin-right:5px}.column-day[_ngcontent-%COMP%]{font-size:16px;color:#28303e;vertical-align:middle!important;font-weight:bold;padding-top:15px}.column-hour[_ngcontent-%COMP%]{font-size:16px;color:#28303e;font-weight:bold;padding-top:20px}.column-actions[_ngcontent-%COMP%]{font-size:22px;padding-top:15px}.clocking-geo-view-label-column[_ngcontent-%COMP%]{font-size:10px;text-transform:uppercase;border-bottom:2px solid rgba(0,154,192,.5)!important;color:#0c9abe;border:none}.label-day[_ngcontent-%COMP%]{padding-left:25px}.label-hour[_ngcontent-%COMP%]{padding-left:21px}.label-actions[_ngcontent-%COMP%]{padding-right:21px}.line[_ngcontent-%COMP%]{border-bottom:1px solid #eceeee}"]}),e})();var me=i(16898);class fe{constructor(){this.reason=new me.f,this.justify=new me.f}}var xe=i(3679);const be=["clockingGeoUpdateForm"],we=["addressElement"];function ke(e,t){1&e&&(a.TgZ(0,"div",12),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"l-location-near-address")," "))}function ve(e,t){if(1&e&&(a.TgZ(0,"div",7,8),a._UZ(2,"img",9),a.YNc(3,ke,3,3,"div",10),a.TgZ(4,"div",11),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("src",e.getImagePointer(),a.LSH),a.xp6(1),a.Q6J("ngIf",e.hasLocation),a.xp6(1),a.Q6J("ngClass",e.getClassMessage()),a.xp6(1),a.hij(" ",a.lcZ(6,4,e.message)," ")}}function Ce(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"po-select",21),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).clockingGeoUpdateView.reason.value=t}),a.ALo(1,"translate"),a.ALo(2,"translate"),a.qZA()}if(2&e){const e=a.oxw(2);a.s9C("p-label",a.lcZ(1,6,"l-reason")),a.s9C("p-placeholder",a.lcZ(2,8,"l-select-reason")),a.Q6J("ngModel",e.clockingGeoUpdateView.reason.value)("p-options",e.reasons)("p-required",e.clockingGeoUpdateView.reason.required)("p-disabled",!e.clockingGeoUpdateView.reason.editable)}}function Me(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",22),a.TgZ(1,"div",23),a.TgZ(2,"span",24),a._uU(3),a.ALo(4,"translate"),a.qZA(),a._UZ(5,"span",25),a.TgZ(6,"textarea",26),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).justify=t}),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(3),a.Oqu(a.lcZ(4,5,"l-justification")),a.xp6(3),a.s9C("placeholder",a.lcZ(7,7,"l-include-justify")),a.Q6J("ngModel",e.justify)("required",e.clockingGeoUpdateView.justify.required)("disabled",!e.clockingGeoUpdateView.justify.editable)}}function Ze(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"form",null,13),a.YNc(3,Ce,3,10,"po-select",14),a.YNc(4,Me,8,9,"div",15),a.qZA(),a.TgZ(5,"div",16),a._UZ(6,"div",17),a.TgZ(7,"span",18),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.qZA(),a.TgZ(10,"po-button",19),a.NdJ("click",function(){return a.CHM(e),a.oxw().close()}),a.ALo(11,"translate"),a.qZA(),a.TgZ(12,"po-button",20),a.NdJ("click",function(){return a.CHM(e),a.oxw().confirm(!0)}),a.ALo(13,"translate"),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(2),t=a.oxw();a.xp6(3),a.Q6J("ngIf",t.clockingGeoUpdateView.reason.visible),a.xp6(1),a.Q6J("ngIf",t.clockingGeoUpdateView.justify.visible),a.xp6(4),a.Oqu(a.lcZ(9,6,"text-warning-for-disconsider")),a.xp6(2),a.s9C("p-label",a.lcZ(11,8,"l-cancel")),a.xp6(2),a.s9C("p-label",a.lcZ(13,10,"disconsider-the-clocking")),a.Q6J("p-disabled",!e.form.valid)}}function _e(e,t){if(1&e&&(a.TgZ(0,"span",32),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Oqu(e.clockingGeo.justify)}}function Oe(e,t){if(1&e&&a._UZ(0,"textarea",33),2&e){const e=a.oxw(2);a.s9C("placeholder",e.clockingGeo.justify)}}function ye(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"po-button",19),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).closeReconsider()}),a.ALo(1,"translate"),a.qZA()}2&e&&a.s9C("p-label",a.lcZ(1,1,"l-cancel"))}function Ae(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"po-button",34),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).confirm(!1)}),a.ALo(1,"translate"),a.qZA()}2&e&&a.s9C("p-label",a.lcZ(1,1,"l-reconsider-the-clocking"))}function Pe(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"div",27),a.TgZ(2,"div",23),a.TgZ(3,"span",24),a._uU(4),a.ALo(5,"translate"),a.qZA(),a._UZ(6,"span",25),a.YNc(7,_e,2,1,"span",28),a.YNc(8,Oe,1,1,"textarea",29),a.qZA(),a.qZA(),a.YNc(9,ye,2,3,"po-button",30),a.YNc(10,Ae,2,3,"po-button",31),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Oqu(a.lcZ(5,5,"l-justification")),a.xp6(3),a.Q6J("ngIf",e.viewJustification),a.xp6(1),a.Q6J("ngIf",!e.viewJustification),a.xp6(1),a.Q6J("ngIf",!e.viewJustification),a.xp6(1),a.Q6J("ngIf",!e.viewJustification)}}let Te=(()=>{class e{constructor(e,t,i,o){this.clockingGeoService=e,this.appTranslateService=t,this.notificationService=i,this.openStreetMapService=o,this.reasons=[],this.clockingGeoUpdateView=new fe,this.closeEvent=new a.vpe}set fieldProperties(e){this.getFieldProps(e)}ngOnInit(){}getFieldProps(e){e&&(e.forEach(e=>{switch(e.field){case"justify":this.clockingGeoUpdateView.justify.editable=e.editable,this.clockingGeoUpdateView.justify.required=e.required,this.clockingGeoUpdateView.justify.visible=e.visible;break;case"reason":this.clockingGeoUpdateView.reason.editable=e.editable,this.clockingGeoUpdateView.reason.required=e.required,this.clockingGeoUpdateView.reason.visible=e.visible}}),this.clockingGeoUpdateView.reason.visible&&this.getClockingReasonTypes())}getClockingReasonTypes(){this.clockingGeoService.getDisconsiderReasons().then(e=>{this.clockingGeoUpdateView.reason.required||this.getLabelReasonForNotRequired(),this.resetFormStatus(),e.forEach(e=>{this.reasons.push({label:e.description,value:e.id})})})}getInformations(e,t){this.message=null,this.employee=t,this.clockingGeo=e,this.hasLocation="0"!==e.latitude&&"0"!==e.latitude,this.showUserPositionAddress()}getHoursByMilliseconds(e){return x.Em.getHoursByMilliseconds(e)}close(){this.resetFormStatus(),this.closeEvent.emit()}confirm(e){let t;t={id:this.clockingGeo.id,disconsider:e,justify:this.justify,reason:this.parseReasonViewToObject(this.clockingGeoUpdateView.reason.value)},e||(t.justify=""),this.clockingGeoService.update(this.employee.id,t).then(()=>{e?(this.callToastsManager("success-disconsider","success"),this.close()):(this.callToastsManager("success-reconsider","success"),this.closeReconsider())}).catch(e=>{this.callToastsManager(e.menssage,"error")})}callToastsManager(e,t){this.appTranslateService.getI18n(e).then(e=>{this.notificationService.showNotification(e,"success"===t?h.ik9.Success:h.ik9.Error)})}closeReconsider(){this.closeEvent.emit()}resetFormStatus(){this.clockingGeoUpdateForm&&this.clockingGeoUpdateForm.resetForm()}setViewJustification(e){this.viewJustification=e}getClassMessage(){return this.hasLocation?"all-address":"no-address"}getImagePointer(){return this.hasLocation?"assets/img/location-color.svg":"assets/img/location-gray.svg"}showUserPositionAddress(){this.openStreetMapService.simpleReverseGeocoding(+this.clockingGeo.longitude,+this.clockingGeo.latitude).then(e=>{e?(e=e.trim(),this.message=e||"l-location-unavailable"):this.message="l-location-unavailable"})}getLabelReasonForNotRequired(){this.appTranslateService.getI18n("l-select-reason").then(e=>{this.reasons.push({label:e,value:void 0})})}parseReasonViewToObject(e){const t=this.reasons.find(t=>t.value===e);if(t)return{id:e,description:t.label}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p),a.Y36(Z.g),a.Y36(E.g),a.Y36(J.H))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-clocking-geo-update"]],viewQuery:function(e,t){if(1&e&&(a.Gf(be,5),a.Gf(we,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.clockingGeoUpdateForm=e.first),a.iGM(e=a.CRH())&&(t.addressElement=e.first)}},inputs:{fieldProperties:"fieldProperties"},outputs:{closeEvent:"closeEvent"},decls:14,vars:13,consts:[["id","div-employee-name",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","clocking-geo-update"],[1,"date-and-hour","text-bold-default"],[1,"po-sm-2","po-md-2","po-lg-2","po-xl-2"],[1,"po-sm-10","po-md-10","po-lg-10","po-xl-10","text-right"],[1,"week-day"],["id","div-address","class","address-container",4,"ngIf"],[4,"ngIf"],["id","div-address",1,"address-container"],["addressElement",""],["id","img-pointer",3,"src"],["class","near-location",4,"ngIf"],[3,"ngClass"],[1,"near-location"],["clockingGeoUpdateForm","ngForm"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12","name","string",3,"ngModel","p-label","p-options","p-placeholder","p-required","p-disabled","ngModelChange",4,"ngIf"],["class","text-area po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-info"],[1,"po-sm-2","po-md-2","po-lg-2","po-xl-2","alert-image"],[1,"po-sm-10","po-md-10","po-lg-10","po-xl-10"],["id","btn-cancel",1,"po-sm-4","po-md-4","po-lg-4","po-xl-4",3,"p-label","click"],["id","btn-disconsider","p-primary","true",1,"text-right","po-sm-8","po-md-8","po-lg-8","po-xl-8",3,"p-disabled","p-label","click"],["name","string",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"ngModel","p-label","p-options","p-placeholder","p-required","p-disabled","ngModelChange"],[1,"text-area","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"po-field-flex-container","space","txtarea"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12","po-label","titleInput","space","text-bold-default"],[1,"po-label-help"],["rows","3","id","txt-justify","name","justify",1,"form-control","po-lg-12","po-md-12","po-sm-12",3,"ngModel","required","disabled","placeholder","ngModelChange"],[1,"text-area"],["class","po-lg-12 po-md-12 po-sm-12 po-label titleInput space",4,"ngIf"],["class","form-control txt-area-reconsider po-xl-12 po-lg-12 po-md-12 po-sm-12","rows","3","id","txt-justify","name","justify","readonly","",3,"placeholder",4,"ngIf"],["id","btn-cancel","class","po-sm-4 po-md-4 po-lg-4 po-xl-4",3,"p-label","click",4,"ngIf"],["id","btn-reconsider","p-primary","true","class","text-right po-sm-8 po-md-8 po-lg-8 po-xl-8",3,"p-label","click",4,"ngIf"],[1,"po-lg-12","po-md-12","po-sm-12","po-label","titleInput","space"],["rows","3","id","txt-justify","name","justify","readonly","",1,"form-control","txt-area-reconsider","po-xl-12","po-lg-12","po-md-12","po-sm-12",3,"placeholder"],["id","btn-reconsider","p-primary","true",1,"text-right","po-sm-8","po-md-8","po-lg-8","po-xl-8",3,"p-label","click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a._uU(1),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"span",2),a._uU(4),a.qZA(),a.TgZ(5,"span",3),a._uU(6),a.ALo(7,"utcDate"),a.TgZ(8,"span",4),a._uU(9),a.ALo(10,"utcDate"),a.qZA(),a.qZA(),a.qZA(),a.YNc(11,ve,7,6,"div",5),a.YNc(12,Ze,14,12,"div",6),a.YNc(13,Pe,11,7,"div",6)),2&e&&(a.xp6(1),a.Oqu(null==t.employee?null:t.employee.name),a.xp6(3),a.Oqu(t.getHoursByMilliseconds(null==t.clockingGeo?null:t.clockingGeo.hour)),a.xp6(2),a.hij(" ",a.xi3(7,7,null==t.clockingGeo?null:t.clockingGeo.date,"dd/MM/yyyy")," "),a.xp6(3),a.Oqu(a.xi3(10,10,null==t.clockingGeo?null:t.clockingGeo.date,"EEEE")),a.xp6(2),a.Q6J("ngIf",t.message),a.xp6(1),a.Q6J("ngIf",!(null!=t.clockingGeo&&t.clockingGeo.disconsider)),a.xp6(1),a.Q6J("ngIf",null==t.clockingGeo?null:t.clockingGeo.disconsider))},directives:[o.O5,o.mk,xe._Y,xe.JL,xe.F,h.bOz,h.C9q,xe.JJ,xe.On,xe.Fj,xe.Q7],pipes:[L.$,S.X$],styles:[".clocking-geo-update[_ngcontent-%COMP%]{font-weight:bold;font-size:20px}.date-and-hour[_ngcontent-%COMP%]{margin-top:50px;font-size:15px}.week-day[_ngcontent-%COMP%]{color:#9da7a9}.txtarea[_ngcontent-%COMP%]{margin-top:15px}.txt-area-reconsider[_ngcontent-%COMP%]{margin-bottom:20px}.text-area[_ngcontent-%COMP%]{margin-bottom:8px!important;margin-top:-10px}.titleInput[_ngcontent-%COMP%]{margin-top:10px}.text-info[_ngcontent-%COMP%]{padding:8px;color:#000;font-weight:bold;font-size:12px;margin-bottom:8px}.alert-image[_ngcontent-%COMP%]{background:url(alert-image.88aaab01378193383cb6.png) no-repeat center;width:40px;height:50px;float:left}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.alert-image[_ngcontent-%COMP%]{background:url(alert-image.88aaab01378193383cb6.png) no-repeat center;width:40px;height:50px;float:left}}.near-location[_ngcontent-%COMP%]{font-weight:bold;text-transform:uppercase;font-size:.8em}.address-container[_ngcontent-%COMP%]{padding:34px 16px 15px 10px;display:block;width:100%;border-bottom:1px solid #dddddd}.all-address[_ngcontent-%COMP%]{overflow:hidden;width:85%}#img-pointer[_ngcontent-%COMP%]{float:left;width:20px;margin-right:5px}.no-address[_ngcontent-%COMP%]{font-weight:bold;margin-top:10px;height:15px}"]}),e})();var Ge=i(36227),qe=i(36812),Ie=i(89019),Ue=i(82236),De=i(14323);class Ee{constructor(){this.filterButton=new me.f}}function Se(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",11),a.TgZ(1,"po-button",12),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFilterDialog()}),a.ALo(2,"translate"),a.qZA(),a.qZA()}2&e&&(a.xp6(1),a.s9C("p-label",a.lcZ(2,1,"l-filtrate")))}const Je=function(e){return{selected:e}};function Ve(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",13),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().showClockingOnMap(t)}),a.TgZ(2,"span",14),a._uU(3),a.qZA(),a._UZ(4,"hr"),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(1),a.Q6J("ngClass",a.VKq(2,Je,i.isSelected(e))),a.xp6(2),a.Oqu(e.name)}}function Le(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().viewMore()}),a._uU(1),a.ALo(2,"translate"),a.qZA()}2&e&&(a.xp6(1),a.hij("",a.lcZ(2,1,"l-load-more")," "))}function Be(e,t){1&e&&(a.TgZ(0,"span",16),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij("",a.lcZ(2,1,"l-no-more-records")," "))}let Ne=(()=>{class e{constructor(e){this.teamEmployeesService=e,this.filtering=new a.vpe,this.catchSelectedEmployee=new a.vpe,this.filterDirectSubordinates=!0,this.filterDialogIsVisible=!1,this.employees=[],this.viewMoreIsVisible=!1,this.teamEmployeesView=new Ee}set fieldProperties(e){this.getFieldProps(e)}ngOnInit(){this.getTeam(),this.switch=!1,this.labelPosition=h.fxz.Left}getFieldProps(e){e&&e.forEach(e=>{"filterButton"===e.field&&(this.teamEmployeesView.filterButton.editable=e.editable,this.teamEmployeesView.filterButton.required=e.required,this.teamEmployeesView.filterButton.visible=e.visible)})}getTeam(e){e||(e=new De.$),this.teamParams=e,this.teamEmployeesService.getEmployees(Ie.N.loggedUser,e,!0).then(e=>{0!==e.items.length&&e.items.forEach(e=>{this.employees.push(e)}),this.viewMoreIsVisible=e.hasNext})}showClockingOnMap(e){this.employeeSelected=e,this.catchSelectedEmployee.emit(e)}showFilterDialog(){this.filterDialogIsVisible=!0,this.switch=this.filterDirectSubordinates}closeDialog(){this.filterDialogIsVisible=!1}filter(){this.filterReset(),this.filtering.emit(),this.filterDirectSubordinates=this.switch,this.teamParams.hierarchicalLevel=this.filterDirectSubordinates?1:void 0,this.getTeam(this.teamParams),this.closeDialog()}filterReset(){this.teamParams.page=1,this.employees=[]}viewMore(){this.teamParams.page++,this.getTeam(this.teamParams)}isSelected(e){return e===this.employeeSelected}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(Ue.s))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-team-employees"]],inputs:{fieldProperties:"fieldProperties"},outputs:{filtering:"filtering",catchSelectedEmployee:"catchSelectedEmployee"},decls:15,vars:20,consts:[["class","text-center po-sm-12 po-md-12 po-lg-12 po-xl-12 button-filter",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"next-periods"],["id","link-more-records",3,"click",4,"ngIf"],["id","span-no-more-records",4,"ngIf"],["id","team-employees-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["id","div-dialog-content","dialog-content",""],["backIsVisible","true",3,"pageTitle","backFunction"],["name","po-switch","ngDefaultControl","",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","switch",3,"p-label-position","ngModel","p-label-on","p-label-off","ngModelChange"],[1,"text-center"],["id","btn-filter","p-primary","true",3,"p-label","click"],[1,"text-center","po-sm-12","po-md-12","po-lg-12","po-xl-12","button-filter"],["id","btn-filter","p-icon","po-icon po-icon-filter",3,"p-label","click"],[1,"team-employee","mouse-pointer",3,"ngClass","click"],["name","employee-name"],["id","link-more-records",3,"click"],["id","span-no-more-records"]],template:function(e,t){1&e&&(a.YNc(0,Se,3,3,"div",0),a.YNc(1,Ve,5,4,"div",1),a.TgZ(2,"div",2),a.YNc(3,Le,3,3,"a",3),a.YNc(4,Be,3,3,"span",4),a.qZA(),a.TgZ(5,"app-dialog",5),a.NdJ("closeDialogEvent",function(){return t.closeDialog()}),a.TgZ(6,"div",6),a.TgZ(7,"app-page-header",7),a.NdJ("backFunction",function(){return t.closeDialog()}),a.ALo(8,"translate"),a.qZA(),a.TgZ(9,"po-switch",8),a.NdJ("ngModelChange",function(e){return t.switch=e}),a.ALo(10,"translate"),a.ALo(11,"translate"),a.qZA(),a.TgZ(12,"div",9),a.TgZ(13,"po-button",10),a.NdJ("click",function(){return t.filter()}),a.ALo(14,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Q6J("ngIf",t.teamEmployeesView.filterButton.visible),a.xp6(1),a.Q6J("ngForOf",t.employees),a.xp6(2),a.Q6J("ngIf",t.viewMoreIsVisible),a.xp6(1),a.Q6J("ngIf",!t.viewMoreIsVisible),a.xp6(1),a.Q6J("isVisible",t.filterDialogIsVisible)("closeDialogButtonEnable",!1),a.xp6(2),a.s9C("pageTitle",a.lcZ(8,12,"l-filter")),a.xp6(2),a.s9C("p-label-on",a.lcZ(10,14,"l-direct-subordinates-only")),a.s9C("p-label-off",a.lcZ(11,16,"l-direct-subordinates-only")),a.Q6J("p-label-position",t.labelPosition)("ngModel",t.switch),a.xp6(4),a.s9C("p-label",a.lcZ(14,18,"l-filtrate")))},directives:[o.O5,o.sg,ee.a,qe.q,h.nrg,xe.Fj,xe.JJ,xe.On,h.bOz,o.mk],pipes:[S.X$],styles:[".team-employee[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:bold;padding-top:20px;padding-left:10px;padding-right:10px}.button-filter[_ngcontent-%COMP%]{margin-bottom:15px;padding:0}.switch[_ngcontent-%COMP%]{margin-top:-20px;padding-left:8px}.next-periods[_ngcontent-%COMP%]{background-color:transparent;text-align:center;font-size:16px;box-shadow:inset 0 1px #dbdedf;font-weight:bold;line-height:3;color:#0c9abe;padding-bottom:20px}@media (max-width: 768px){.next-periods[_ngcontent-%COMP%]{padding-bottom:60px}}#span-no-more-records[_ngcontent-%COMP%]{color:#aaa}.selected[_ngcontent-%COMP%]{background-color:#ceeaf2}hr[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})();const Qe=["map"],ze=["mapMobile"],Re=["clockingGeoUpdate"],Ye=["dialogComponent"],Fe=["clockingGeoListComponentDesktop"],He=["clockingGeoListComponentMobile"];function je(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"app-clocking-geo-list",26,27),a.NdJ("catchGeoLocation",function(t){return a.CHM(e),a.oxw().showClockingOnMap(t)})("catchGeoUpdate",function(t){return a.CHM(e),a.oxw().openClockingGeoUpdate(t,!1)})("catchGeoUpdateJustify",function(t){return a.CHM(e),a.oxw().openClockingGeoUpdate(t,!0)}),a.qZA(),a.qZA()}}function $e(e,t){if(1&e&&(a.TgZ(0,"div",28),a.TgZ(1,"div",11),a._UZ(2,"img",12),a.TgZ(3,"p",13),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.TgZ(6,"div",14),a._UZ(7,"img",15),a.TgZ(8,"p",13),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a._UZ(11,"app-opens-street-map",29,30),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("hidden",!e.mapIsDisabled),a.xp6(3),a.Oqu(a.lcZ(5,5,"l-locate-empty-in-clocking")),a.xp6(2),a.Q6J("hidden",e.mapIsDisabled||e.mapIsVisible),a.xp6(3),a.Oqu(a.lcZ(10,7,"l-select-one-clocking")),a.xp6(2),a.Q6J("hidden",!e.mapIsVisible)}}const Xe=[{path:"register",component:W,canActivate:[g.P]},{path:"view",component:(()=>{class e extends k.R{constructor(e,t,i,o){super(),this.changeDetectRef=e,this.lastAccess=t,this.globals=i,this.fieldPropertiesService=o,this.updateDialogIsVisible=!1,this.viewDialogIsVisible=!1,this.clockingsGeo=[],this.pageName="clockingGeoUpdate"}ngOnInit(){this.menuIsVisible=!0,this.mapIsVisible=!1,this.mapIsDisabled=!1,this.teamSelect=!1,super.ngOnInit(),this.getFieldProps(),this.setCountLastAccess()}setCountLastAccess(){this.globals.getEmployeeSummary().then(e=>{this.lastAccess.setLastAccess(w.jh,e.id)})}getClockingsGeo(e){this.selectedEmployee=e,this.teamSelect=!0,this.viewDialogIsVisible=this.viewIsMobile,this.changeDetectRef.detectChanges(),this.loadClockingsGeo()}loadClockingsGeo(){this.reloadMap(),this.mapIsVisible=!1,this.mapIsDisabled=!1,this.viewIsMobile?this.clockingGeoListComponentMobile.getClockingsGeo(this.selectedEmployee,this.viewIsMobile):(this.clockingGeoListComponentDesktop.getClockingsGeo(this.selectedEmployee,this.viewIsMobile),this.goTop())}showClockingOnMap(e){"0"!==e.latitude||"0"!==e.longitude?(this.mapIsDisabled=!1,this.selectedClocking=e,this.mapIsVisible=!0,this.changeDetectRef.detectChanges(),this.reloadMap(e)):(this.mapIsVisible=!1,this.mapIsDisabled=!0)}closeDialog(){this.mapIsVisible=!1,this.mapIsDisabled=!1,this.viewDialogIsVisible=!1,this.updateDialogIsVisible=!1,this.clockingsGeo=void 0}openClockingGeoUpdate(e,t){this.setTitleDialog(e,t),this.clockingGeoUpdate.getInformations(e,this.selectedEmployee),this.mapIsVisible=!1,this.mapIsDisabled=!1,this.dialogComponent.menuIsVisible=!1,this.dialogComponent.hideMenu(),this.updateDialogIsVisible=!0}setTitleDialog(e,t){t?(this.titleDialog="justification-of-the-clocking",this.clockingGeoUpdate.setViewJustification(!0),this.question=""):(this.clockingGeoUpdate.setViewJustification(!1),this.question="?",this.titleDialog=e.disconsider?"l-reconsider-the-clocking":"disconsider-the-clocking")}closeUpdateDialog(){this.updateDialogIsVisible=!1,this.dialogComponent.showMenu(),this.getClockingsGeo(this.selectedEmployee)}isSelected(e){return e===this.selectedClocking}goTop(){window.scrollTo(0,0)}hideClocking(){this.teamSelect=!1,this.clockingGeoListComponentDesktop.getClockingsGeo(void 0,this.viewIsMobile)}reloadMap(e){const t=this.viewIsMobile?this.mapMobile:this.map;t&&(t.resetMap(),e&&t.loadMap(e.latitude,e.longitude))}getFieldProps(){return(0,u.mG)(this,void 0,void 0,function*(){this.fieldProperties=yield this.fieldPropertiesService.getFieldProperties(this.pageName)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.sBO),a.Y36(w.Lx),a.Y36(V.O),a.Y36(Ge.c))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-clocking-geo-view"]],viewQuery:function(e,t){if(1&e&&(a.Gf(Qe,5),a.Gf(ze,5),a.Gf(Re,5),a.Gf(Ye,5),a.Gf(Fe,5),a.Gf(He,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.map=e.first),a.iGM(e=a.CRH())&&(t.mapMobile=e.first),a.iGM(e=a.CRH())&&(t.clockingGeoUpdate=e.first),a.iGM(e=a.CRH())&&(t.dialogComponent=e.first),a.iGM(e=a.CRH())&&(t.clockingGeoListComponentDesktop=e.first),a.iGM(e=a.CRH())&&(t.clockingGeoListComponentMobile=e.first)}},features:[a.qOj],decls:34,vars:27,consts:[["pageTitle","l-clockings-report",3,"backIsVisible"],[1,"po-row"],[1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"fieldProperties","filtering","catchSelectedEmployee"],["class","po-sm-12 po-md-12 po-lg-4 po-xl-4","id","div-desktop-clocking-list",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-4 po-xl-4","id","div-desktop-map",4,"ngIf"],["id","clocking-geo-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["dialog-content",""],["backIsVisible","true",3,"pageTitle","backFunction"],[1,"map-content",3,"hidden"],["mapMobile",""],[1,"text-center","map-not-visible",3,"hidden"],["src","./assets/img/pin-gray.svg","alt","",1,"none-item-selected-image"],[1,"none-item-selected-message"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","text-center","map-not-visible",3,"hidden"],["src","./assets/img/satellite.svg","alt","",1,"none-item-selected-image"],[1,"scrollable","po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding","scroll-panel"],[3,"catchGeoLocation","catchGeoUpdateJustify","catchGeoUpdate"],["clockingGeoListComponentMobile",""],["id","clocking-geo-update-dialog",3,"isVisible","closeDialogButtonEnable","menuIsVisible","closeDialogEvent"],["dialogComponent",""],["isDialog","true",3,"pageTitle","backFunction"],[1,"scrollable"],[3,"fieldProperties","closeEvent"],["clockingGeoUpdate",""],["id","div-desktop-clocking-list",1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"catchGeoLocation","catchGeoUpdate","catchGeoUpdateJustify"],["clockingGeoListComponentDesktop",""],["id","div-desktop-map",1,"po-sm-12","po-md-12","po-lg-4","po-xl-4"],[3,"hidden"],["map",""]],template:function(e,t){1&e&&(a._UZ(0,"app-page-header",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"app-team-employees",3),a.NdJ("filtering",function(){return t.hideClocking()})("catchSelectedEmployee",function(e){return t.getClockingsGeo(e)}),a.qZA(),a.qZA(),a.YNc(4,je,3,0,"div",4),a.YNc(5,$e,13,9,"div",5),a.qZA(),a.TgZ(6,"app-dialog",6),a.NdJ("closeDialogEvent",function(){return t.closeDialog()}),a.TgZ(7,"div",7),a.TgZ(8,"app-page-header",8),a.NdJ("backFunction",function(){return t.closeDialog()}),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"div",9),a._UZ(11,"app-opens-street-map",null,10),a.qZA(),a.TgZ(13,"div",11),a._UZ(14,"img",12),a.TgZ(15,"p",13),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.qZA(),a.TgZ(18,"div",14),a._UZ(19,"img",15),a.TgZ(20,"p",13),a._uU(21),a.ALo(22,"translate"),a.qZA(),a.qZA(),a.TgZ(23,"div",16),a.TgZ(24,"app-clocking-geo-list",17,18),a.NdJ("catchGeoLocation",function(e){return t.showClockingOnMap(e)})("catchGeoUpdateJustify",function(e){return t.openClockingGeoUpdate(e,!0)})("catchGeoUpdate",function(e){return t.openClockingGeoUpdate(e,!1)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"app-dialog",19,20),a.NdJ("closeDialogEvent",function(){return t.closeUpdateDialog()}),a.TgZ(28,"div",7),a.TgZ(29,"app-page-header",21),a.NdJ("backFunction",function(){return t.closeUpdateDialog()}),a.ALo(30,"translate"),a.qZA(),a.TgZ(31,"div",22),a.TgZ(32,"app-clocking-geo-update",23,24),a.NdJ("closeEvent",function(){return t.closeUpdateDialog()}),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Q6J("backIsVisible",!1),a.xp6(3),a.Q6J("fieldProperties",t.fieldProperties),a.xp6(1),a.Q6J("ngIf",!t.viewIsMobile),a.xp6(1),a.Q6J("ngIf",!t.viewIsMobile&&t.teamSelect),a.xp6(1),a.Q6J("isVisible",t.viewDialogIsVisible)("closeDialogButtonEnable",!1),a.xp6(2),a.s9C("pageTitle",a.xi3(9,18,"l-clockings",t.selectedEmployee)),a.xp6(2),a.Q6J("hidden",!t.mapIsVisible),a.xp6(3),a.Q6J("hidden",!t.mapIsDisabled),a.xp6(3),a.Oqu(a.lcZ(17,21,"l-locate-empty-in-clocking")),a.xp6(2),a.Q6J("hidden",t.mapIsDisabled||t.mapIsVisible),a.xp6(3),a.Oqu(a.lcZ(22,23,"l-select-one-clocking")),a.xp6(5),a.Q6J("isVisible",t.updateDialogIsVisible)("closeDialogButtonEnable",!t.viewIsMobile)("menuIsVisible",t.menuIsVisible),a.xp6(3),a.hYB("pageTitle","",a.lcZ(30,25,t.titleDialog),"",t.question,""),a.xp6(3),a.Q6J("fieldProperties",t.fieldProperties))},directives:[qe.q,Ne,o.O5,ee.a,v.Y,he,Te],pipes:[S.X$],styles:["@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (-webkit-min-device-pixel-ratio: 3),only screen and (min--moz-device-pixel-ratio: 3),only screen and (-o-min-device-pixel-ratio: 3/1){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 192px);overflow:auto;padding-bottom:15px}}.map-content[_ngcontent-%COMP%]{height:140px;margin:0 -15px 40px}.scrollable[_ngcontent-%COMP%]{height:calc(100% - 1px);overflow:auto;padding-bottom:15px}.page-title[_ngcontent-%COMP%]{text-overflow:ellipsis!important;white-space:nowrap;overflow:hidden;margin-top:-8px}.address[_ngcontent-%COMP%]{padding:20px}.none-item-selected-message[_ngcontent-%COMP%]{font-size:14px;color:#333}div#address.address[_ngcontent-%COMP%]{height:160px}.none-item-selected-image[_ngcontent-%COMP%]{width:96px;height:96px;margin-top:16px}.icon-side-spacing[_ngcontent-%COMP%]{padding-right:4px}.fixed-collumn-icon-more[_ngcontent-%COMP%]{width:32px}.clocking-geo-title[_ngcontent-%COMP%]{padding-left:40px}@media only screen and (min-width: 960px){.map-not-visible[_ngcontent-%COMP%]{height:100%;position:relative;top:calc(50vh - 96px)}.align-center[_ngcontent-%COMP%]{position:relative;top:calc(50% - 58px)}#div-desktop-clocking-list[_ngcontent-%COMP%]{height:100vh;border-left:1px solid #cccccc;border-right:1px solid #cccccc;box-shadow:none;z-index:2;overflow:auto}}@media only screen and (min-width: 1367px){.po-page-content[_ngcontent-%COMP%]{width:calc(100vw - 270px)!important;height:none!important}}@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 237px)}}@media only screen and (max-width: 844px){.scrollable[_ngcontent-%COMP%]{height:calc(100% - 203px)}}"]}),e})(),canActivate:[g.P]}];let Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[d.Bz.forChild(Xe)],d.Bz]}),e})(),We=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[p],imports:[[o.ez,Ke,n.q,s.t]]}),e})()}}]);