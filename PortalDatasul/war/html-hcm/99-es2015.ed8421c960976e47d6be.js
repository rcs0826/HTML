"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[99],{47099:function(t,e,i){i.r(e),i.d(e,{OvertimeModule:function(){return K}});var n=i(38583),o=i(90171),s=i(95987),r=i(3679),a=i(44956),l=i(29790),p=i(32114),c=i(43743),d=i(56365),g=i(91061),u=i(51110),h=i(44852),m=i(37716),v=i(84479),f=i(36812);let Z=(()=>{class t{constructor(t,e){this.navigationUtil=t,this.windowUtilService=e}ngOnInit(){}doNavigation(t){this.navigationUtil.doNavigation(t)}back(){this.windowUtilService.back()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(h._),m.Y36(v.g))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-overtime"]],decls:28,vars:13,consts:[[1,"container-fluid",3,"hidden"],["pageTitle","l-management-overtime",3,"backIsVisible","backFunction"],[1,"po-holder"],[1,"po-row"],[1,"po-sm-6","po-md-3","po-lg-3","po-xl-3"],[1,"card"],[1,"po-font-subtitle","text-number","text-negative-hour"],[1,"text-title"],[1,"divider"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","show-more","mouse-pointer",3,"click"],[1,"po-font-subtitle","text-number"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"app-page-header",1),m.NdJ("backFunction",function(){return e.back()}),m.qZA(),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"div",5),m.TgZ(6,"div"),m.TgZ(7,"span",6),m._uU(8,"19h"),m.qZA(),m.TgZ(9,"h4",7),m._uU(10),m.ALo(11,"translate"),m.qZA(),m.qZA(),m.TgZ(12,"div",8),m.TgZ(13,"a",9),m.NdJ("click",function(){return e.doNavigation("overtime/pending")}),m._uU(14),m.ALo(15,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"div",4),m.TgZ(17,"div",5),m.TgZ(18,"div"),m.TgZ(19,"span",10),m._uU(20,"200h"),m.qZA(),m.TgZ(21,"h4",7),m._uU(22),m.ALo(23,"translate"),m.qZA(),m.qZA(),m.TgZ(24,"div",8),m.TgZ(25,"a",9),m.NdJ("click",function(){return e.doNavigation("")}),m._uU(26),m.ALo(27,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(1),m.Q6J("backIsVisible",!1),m.xp6(9),m.Oqu(m.lcZ(11,5,"l-pending-overtime")),m.xp6(4),m.Oqu(m.lcZ(15,7,"l-view-more")),m.xp6(8),m.Oqu(m.lcZ(23,9,"l-total-overtime")),m.xp6(4),m.Oqu(m.lcZ(27,11,"l-view-more")))},directives:[f.q],pipes:[l.X$],styles:['.po-font-subtitle[_ngcontent-%COMP%]{margin:10px 10px 5px}.po-holder[_ngcontent-%COMP%]{margin:0}.divider[_ngcontent-%COMP%]{border-top:.5px solid #bbdefb;height:35px}.divider[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;padding:6px;font-family:"NunitoSans-Bold";color:#0c9abe}.divider[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{text-decoration:none}.text-title[_ngcontent-%COMP%]{left:10px;top:6px;margin:5px 0 10px;color:#676868;font-family:"NunitoSans";font-weight:300;font-size:1rem;text-align:left;position:absolute}.text-number[_ngcontent-%COMP%]{display:block;padding:20px 0;color:#2b3639;font-family:"NunitoSans-ExtraLight";font-size:3.2rem;font-weight:100}@media screen and (max-width: 576px){.text-number[_ngcontent-%COMP%]{text-align:left;font-weight:normal}}@media screen and (max-width: 320px){.text-number[_ngcontent-%COMP%]{margin:14px 10px 1px;font-size:1.4rem}}.text-negative-hour[_ngcontent-%COMP%]{color:#ba1a1a}[_nghost-%COMP%]     .card{position:relative;margin-bottom:8px;padding-top:22px;background:#ffffff;box-shadow:0 2px 8px #e3e6f1;border-radius:6px;text-align:center}']}),t})();var A=i(64762),x=i(92340),b=(()=>((b||(b={})).StatusEnum={Approved:"approved",Reproved:"reproved",Approving:"approving"},b))(),y=i(81483),M=i(33490),w=i(97983),q=i(36227),O=i(1927),T=i(81059),S=i(98348),L=i(32268),_=i(18648);function C(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",1),m.TgZ(1,"po-textarea",6),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().justification=e}),m.ALo(2,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.s9C("p-label",m.lcZ(2,2,"l-justification")),m.Q6J("ngModel",t.justification)}}function P(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",1),m.TgZ(1,"po-select",7),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().reasonId=e}),m.ALo(2,"translate"),m.ALo(3,"translate"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.s9C("p-label",m.lcZ(2,4,"l-reason")),m.s9C("p-placeholder",m.lcZ(3,6,"l-select-option")),m.Q6J("ngModel",t.reasonId)("p-options",t.reasonsOption)}}let H=(()=>{class t extends T.R{constructor(t){super(),this.overtimeService=t,this.reasonsOption=[],this.showReasons=!1,this.saveEvent=new m.vpe,this.closeDialogEvent=new m.vpe}ngOnInit(){super.ngOnInit()}closeDialog(){this.closeDialogEvent.emit()}save(){const t=y.Em.getTotalMilliseconds(this.init).toString(),e=y.Em.getTotalMilliseconds(this.end).toString(),i={date:this.overtime.date,employee:this.overtime.employee,init:t,end:e,id:this.overtime.id,status:b.StatusEnum.Approved,total:(Number(e)-Number(t)).toString(),type:this.overtime.type,justification:null};i.justification=this.showReasons?this.reasons.filter(t=>t.id===this.reasonId)[0]:{label:this.justification},this.saveEvent.emit(i),this.closeDialog()}initializeComponent(t){return(0,A.mG)(this,void 0,void 0,function*(){yield this.loadReasons(),this.overtime=t,this.init=y.Em.getHoursByMilliseconds(t.init),this.end=y.Em.getHoursByMilliseconds(t.end),this.showReasons?this.reasonId=t.justification.id:this.justification=t.justification.label})}loadReasons(){return(0,A.mG)(this,void 0,void 0,function*(){this.showReasons=S.ZP.isErpDatasul(),this.showReasons&&(this.reasons=(yield this.overtimeService.loadReasons()).items,this.reasonsOption=this.reasons.map(t=>({label:t.label,value:t.id})))})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(O.K))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-partial-hours"]],outputs:{saveEvent:"saveEvent",closeDialogEvent:"closeDialogEvent"},features:[m.qOj],decls:39,vars:34,consts:[["pageTitle","l-adjustment-overtime",3,"backIsVisible","backFunction"],[1,"po-row"],[1,"po-row","input-row"],["type","text",1,"input-edit","po-sm-3","po-md-3","po-lg-4","po-xl-6",3,"ngModel","ngModelChange"],["class","po-row",4,"ngIf"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"p-label","p-click"],["name","textarea",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"ngModel","p-label","ngModelChange"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding",3,"ngModel","p-label","p-options","p-placeholder","ngModelChange"]],template:function(t,e){1&t&&(m.TgZ(0,"app-page-header",0),m.NdJ("backFunction",function(){return e.closeDialog()}),m.qZA(),m.TgZ(1,"div",1),m.TgZ(2,"strong"),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.qZA(),m.TgZ(5,"div",1),m.TgZ(6,"p"),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.TgZ(9,"p"),m._uU(10),m.qZA(),m.qZA(),m.TgZ(11,"div",1),m.TgZ(12,"p"),m._uU(13),m.ALo(14,"translate"),m.qZA(),m.TgZ(15,"p"),m._uU(16),m.ALo(17,"utcDate"),m.qZA(),m.qZA(),m.TgZ(18,"div",1),m.TgZ(19,"p"),m._uU(20),m.ALo(21,"translate"),m.qZA(),m.TgZ(22,"p"),m._uU(23),m.ALo(24,"formatMillisecondsAsHour"),m.qZA(),m.qZA(),m.TgZ(25,"div",2),m.TgZ(26,"strong"),m._uU(27),m.ALo(28,"translate"),m.qZA(),m.TgZ(29,"input",3),m.NdJ("ngModelChange",function(t){return e.init=t}),m.qZA(),m.qZA(),m.TgZ(30,"div",2),m.TgZ(31,"strong"),m._uU(32),m.ALo(33,"translate"),m.qZA(),m.TgZ(34,"input",3),m.NdJ("ngModelChange",function(t){return e.end=t}),m.qZA(),m.qZA(),m.YNc(35,C,3,4,"div",4),m.YNc(36,P,4,8,"div",4),m.TgZ(37,"po-button",5),m.NdJ("p-click",function(){return e.save()}),m.ALo(38,"translate"),m.qZA()),2&t&&(m.Q6J("backIsVisible",e.viewIsMobile),m.xp6(3),m.Oqu(m.lcZ(4,15,"l-summary")),m.xp6(4),m.hij("",m.lcZ(8,17,"l-colaborator"),":"),m.xp6(3),m.Oqu(null==e.overtime||null==e.overtime.employee?null:e.overtime.employee.name),m.xp6(3),m.hij("",m.lcZ(14,19,"l-date"),":"),m.xp6(3),m.Oqu(m.xi3(17,21,null==e.overtime?null:e.overtime.date,"shortDate")),m.xp6(4),m.hij("",m.lcZ(21,24,"l-overtime-pay"),":"),m.xp6(3),m.Oqu(m.lcZ(24,26,null==e.overtime?null:e.overtime.total)),m.xp6(4),m.Oqu(m.lcZ(28,28,"l-initial")),m.xp6(2),m.Q6J("ngModel",e.init),m.xp6(3),m.Oqu(m.lcZ(33,30,"l-end")),m.xp6(2),m.Q6J("ngModel",e.end),m.xp6(1),m.Q6J("ngIf",!e.showReasons),m.xp6(1),m.Q6J("ngIf",e.showReasons),m.xp6(1),m.s9C("p-label",m.lcZ(38,32,"l-save")))},directives:[f.q,r.Fj,r.JJ,r.On,n.O5,a.bOz,a.gJm,a.C9q],pipes:[l.X$,L.$,_.P],styles:[".input-edit[_ngcontent-%COMP%]{position:absolute;right:5%}.input-row[_ngcontent-%COMP%]{margin-bottom:25px}"]}),t})();var N=(()=>{return(t=N||(N={}))[t.Approve=0]="Approve",t[t.Reprove=1]="Reprove",t[t.ApproveMany=2]="ApproveMany",t[t.ReproveMany=3]="ReproveMany",N;var t})(),U=i(61466),k=i(65241),E=i(39075),J=i(96054),D=i(57706),I=i(10690),V=i(70385),j=i(13235);function G(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",7),m.TgZ(1,"po-table",8),m.NdJ("p-all-selected",function(){return m.CHM(t),m.oxw().countSelected()})("p-all-unselected",function(){return m.CHM(t),m.oxw().countSelected()})("p-selected",function(){return m.CHM(t),m.oxw().countSelected()})("p-unselected",function(){return m.CHM(t),m.oxw().countSelected()})("p-show-more",function(){return m.CHM(t),m.oxw().showMore()}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("p-hide-select-all",!1)("p-sort",!0)("p-striped",!0)("p-columns",t.columns)("p-items",t.items)("p-actions",t.actions)("p-loading",t.loading)("p-show-more-disabled",t.showMoreDisable)("p-hide-text-overflow",!0)}}function R(t,e){if(1&t&&(m.TgZ(0,"div",19),m._UZ(1,"hr",20),m.TgZ(2,"label",21),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"strong",22),m._uU(6),m.ALo(7,"formatMillisecondsAsHour"),m.qZA(),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(3),m.Oqu(m.lcZ(4,2,"l-initial")),m.xp6(3),m.Oqu(m.lcZ(7,4,t.init))}}function B(t,e){if(1&t&&(m.TgZ(0,"div",19),m._UZ(1,"hr",20),m.TgZ(2,"label",21),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"strong",22),m._uU(6),m.ALo(7,"formatMillisecondsAsHour"),m.qZA(),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(3),m.Oqu(m.lcZ(4,2,"l-end-2")),m.xp6(3),m.Oqu(m.lcZ(7,4,t.end))}}function z(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",19),m._UZ(1,"hr",20),m.TgZ(2,"label",21),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"a",28),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openPartialHours(e)}),m._uU(6),m.ALo(7,"formatMillisecondsAsHour"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.xp6(3),m.Oqu(m.lcZ(4,2,"l-initial")),m.xp6(3),m.Oqu(m.lcZ(7,4,t.init))}}function F(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",19),m._UZ(1,"hr",20),m.TgZ(2,"label",21),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"a",28),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(2).openPartialHours(e)}),m._uU(6),m.ALo(7,"formatMillisecondsAsHour"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.xp6(3),m.Oqu(m.lcZ(4,2,"l-end-2")),m.xp6(3),m.Oqu(m.lcZ(7,4,t.end))}}function Q(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",11),m.TgZ(1,"app-expansion-card"),m.TgZ(2,"div",12),m.TgZ(3,"div",13),m.TgZ(4,"po-checkbox",14),m.NdJ("ngModelChange",function(e){return m.CHM(t).$implicit.checked=e})("p-change",function(){const e=m.CHM(t).$implicit;return m.oxw(2).selectMobile(e)}),m.qZA(),m.qZA(),m.TgZ(5,"div",15),m.TgZ(6,"div",16),m.TgZ(7,"strong"),m._uU(8),m.ALo(9,"titleCase"),m.qZA(),m.qZA(),m.TgZ(10,"div",17),m._uU(11),m.ALo(12,"titleCase"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",18),m.TgZ(14,"div",19),m._UZ(15,"hr",20),m.TgZ(16,"label",21),m._uU(17),m.ALo(18,"translate"),m.qZA(),m.TgZ(19,"strong",22),m._uU(20),m.ALo(21,"utcDate"),m.qZA(),m.qZA(),m.YNc(22,R,8,6,"div",23),m.YNc(23,B,8,6,"div",23),m.YNc(24,z,8,6,"div",23),m.YNc(25,F,8,6,"div",23),m.TgZ(26,"div",19),m._UZ(27,"hr",20),m.TgZ(28,"label",21),m._uU(29),m.ALo(30,"translate"),m.qZA(),m.TgZ(31,"strong",22),m._uU(32),m.ALo(33,"formatMillisecondsAsHour"),m.qZA(),m.qZA(),m.TgZ(34,"div",24),m._UZ(35,"hr",20),m.TgZ(36,"label",21),m._uU(37),m.ALo(38,"translate"),m.qZA(),m.TgZ(39,"strong",25),m._uU(40),m.qZA(),m.qZA(),m.TgZ(41,"div",19),m._UZ(42,"hr",20),m.TgZ(43,"label",21),m._uU(44),m.ALo(45,"translate"),m.qZA(),m.TgZ(46,"strong",26),m._uU(47),m.qZA(),m.qZA(),m.TgZ(48,"app-yes-or-no-buttons",27),m.NdJ("yes",function(){const e=m.CHM(t).$implicit;return m.oxw(2).approve(e)})("no",function(){const e=m.CHM(t).$implicit;return m.oxw(2).reprove(e)}),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,i=m.oxw(2);m.xp6(4),m.MGl("id","card-",i.i,""),m.Q6J("ngModel",t.checked),m.xp6(4),m.Oqu(m.lcZ(9,17,t.employee.name)),m.xp6(3),m.Oqu(m.lcZ(12,19,t.employee.roleDescription)),m.xp6(6),m.Oqu(m.lcZ(18,21,"l-date")),m.xp6(3),m.Oqu(m.xi3(21,23,t.date,"shortDate")),m.xp6(2),m.Q6J("ngIf",!(null!=i.partialHours&&i.partialHours.visible)),m.xp6(1),m.Q6J("ngIf",!(null!=i.partialHours&&i.partialHours.visible)),m.xp6(1),m.Q6J("ngIf",null==i.partialHours?null:i.partialHours.visible),m.xp6(1),m.Q6J("ngIf",null==i.partialHours?null:i.partialHours.visible),m.xp6(4),m.Oqu(m.lcZ(30,26,"l-total")),m.xp6(3),m.Oqu(m.lcZ(33,28,t.total)),m.xp6(5),m.Oqu(m.lcZ(38,30,"l-type")),m.xp6(3),m.Oqu(t.type.label),m.xp6(4),m.Oqu(m.lcZ(45,32,i.justificationLabelKey)),m.xp6(3),m.Oqu(t.justification.label),m.xp6(1),m.Q6J("id",t.id)}}function Y(t,e){if(1&t&&(m.TgZ(0,"div",9),m.YNc(1,Q,49,34,"div",10),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",null==t.pendingOvertimesListView?null:t.pendingOvertimesListView.records)("ngForTrackBy",t.trackByFunction)}}const $=[{path:"",component:Z,canActivate:[u.P]},{path:"pending",component:(()=>{class t extends T.R{constructor(t,e,i,n,o,s,r,a){super(),this.overtimeService=t,this.windowUtilService=e,this.appTranslateService=i,this.profileService=n,this.sanitizationService=o,this.fieldProperties=s,this.notificationService=r,this.notificationsPageStore=a,this.pendingOvertimesListView=new M.i([]),this.actions=[],this.items=[],this.avatar=[],this.pageActions=[],this.filters=[],this._selectedLines=[]}get selectedLines(){return this._selectedLines}set selectedLines(t){const e=t?t.length:0;this._selectedLines=t,this.getPageActions(e),this.isDisableActions=0===e}get justificationLabelKey(){return S.ZP.isErpDatasul()?"l-reason":"l-justification"}ngOnInit(){super.ngOnInit(),this.pendingOvertimesListView.actualPage=1,this.pendingOvertimesListView.pageSize=20,this.showMoreDisable=!1,this.loading=!1,this.isDisableActions=!0,this.partialHoursDialog=!1,this.initializeComponents()}getData(t,e=!1){return(0,A.mG)(this,void 0,void 0,function*(){yield this.getPendingOvertimesList(e,this.pendingOvertimesListView.actualPage,this.pendingOvertimesListView.pageSize,t,this.employeeName)})}approveDesk(t){this.approve(t.overtime)}reproveDesk(t){this.reprove(t.overtime)}approve(t){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=yield this.translateString("l-approve-notification"),this.currentModalAction={type:N.Approve,overtime:t},this.poModal.open()})}reprove(t){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=yield this.translateString("l-reprove-notification"),this.currentModalAction={type:N.Reprove,overtime:t},this.poModal.open()})}approveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=yield this.translateString("l-approve-notifications"),this.currentModalAction={type:N.ApproveMany},this.poModal.open()})}reproveMany(){return(0,A.mG)(this,void 0,void 0,function*(){this.modalText=yield this.translateString("l-reprove-notifications"),this.currentModalAction={type:N.ReproveMany},this.poModal.open()})}openPartialHours(t){this.partialHoursDialog=!0,this.partialHoursComponent.initializeComponent(t)}closePartialHours(){this.partialHoursDialog=!1}countSelected(){return(0,A.mG)(this,void 0,void 0,function*(){this.selectedLines=this.poTable.getSelectedRows()})}disableButtons(){return this.isDisableActions}showMore(){this.getPendingOvertimesList(!1,this.pendingOvertimesListView.getNextPage(),this.pendingOvertimesListView.pageSize,!1,this.employeeName)}searchByEmployeeName(t){return(0,A.mG)(this,void 0,void 0,function*(){this.employeeName=t,this.selectedLines=[],yield this.getData(!0)})}back(){this.windowUtilService.back()}translateString(t){return this.appTranslateService.getI18n(t)}onChangeDisclaimers(t){const e={};t.forEach(t=>{e[t.property]=t.value}),this.searchByEmployeeName(e.name)}onQuickSearch(t){this.searchByEmployeeName(t)}onAdvancedSearch(t){this.searchByEmployeeName(t.name)}selectMobile(t){const e=this.selectedLines.findIndex(e=>e.overtime.id===t.id);-1!==e?(this.selectedLines.splice(e,1),this.selectedLines=[...this.selectedLines],this.isDisableActions=0===this.selectedLines.length):(this.selectedLines=[...this.selectedLines,this.items.filter(e=>e.id===t.id)[0]],this.isDisableActions=!1)}initializeComponents(){return(0,A.mG)(this,void 0,void 0,function*(){yield this.getFieldProps(),this.getColumns(),this.getActions(),this.getData(!0,!0),this.getPageActions(),this.getModalActions(),this.getLabelsSearch()})}getFieldProps(){return(0,A.mG)(this,void 0,void 0,function*(){(yield this.fieldProperties.getFieldProperties("overtime")).forEach(t=>{this.partialHours=t})})}getColumns(){return(0,A.mG)(this,void 0,void 0,function*(){this.columns=[{property:"name",label:(yield this.translateString("l-name")).toString(),width:"20%"},{property:"type",label:(yield this.translateString("l-type")).toString(),width:"20%"},{property:"date",label:(yield this.translateString("l-date")).toString(),type:"date",width:"10%"},{property:"initHour",label:(yield this.translateString("l-initial")).toString(),width:"10%"},{property:"endHour",label:(yield this.translateString("l-end-2")).toString(),width:"10%"},{property:"total",label:(yield this.translateString("l-total")).toString(),width:"10%"},{property:"justification",label:yield this.translateString(this.justificationLabelKey),width:"20%"}]})}getActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.actions=[{action:this.approveDesk.bind(this),label:(yield this.translateString("l-approve")).toString()},{action:this.reproveDesk.bind(this),label:(yield this.translateString("l-decline")).toString()}],this.partialHours.visible&&this.actions.push({action:this.payPartialHours.bind(this),label:(yield this.translateString("l-pay-overtimes")).toString()})})}getPendingOvertimesList(t,e,i,n,o){return(0,A.mG)(this,void 0,void 0,function*(){try{let s;if(this.loading=!0,t?(this.notificationsPageStore.getOvertime({employeedId:x.N.loggedUser,page:e,pageSize:i,employee:o}),s=yield this.notificationsPageStore.nextOvertimeNotNull()):s=yield this.overtimeService.getPendingOvertimesList(x.N.loggedUser,e,i,o),s)return this.updateOvertimeItemsForTable(s,n)}catch(s){this.loading=!1}this.pendingOvertimesListView.hasMoreRecords=!1})}updateOvertimeItemsForTable(t,e){this.clearData(e),this.pendingOvertimesListView.records=this.pendingOvertimesListView.records.concat(t.items),this.pendingOvertimesListView.hasMoreRecords=t.hasNext;for(let i=0;i<this.pendingOvertimesListView.records.length;i++)this.items[i]={id:this.pendingOvertimesListView.records[i].id,avatar:this.getAvatar(this.pendingOvertimesListView.records[i].employee.id),name:this.pendingOvertimesListView.records[i].employee.name,date:y.Em.formatUTCDate(new Date(this.pendingOvertimesListView.records[i].date)),initHour:y.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[i].init),endHour:y.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[i].end),total:y.Em.getHoursByMilliseconds(this.pendingOvertimesListView.records[i].total),type:this.pendingOvertimesListView.records[i].type.label,status:this.pendingOvertimesListView.records[i].status,overtime:this.pendingOvertimesListView.records[i],justification:this.pendingOvertimesListView.records[i].justification.label};this.items.length<this.pendingOvertimesListView.actualPage*this.pendingOvertimesListView.pageSize&&(this.showMoreDisable=!0),this.loading=!1}clearData(t){(!this.pendingOvertimesListView.records||t)&&(this.pendingOvertimesListView.records=[],t&&(this.items=[]))}sendPut(t,e){return(0,A.mG)(this,void 0,void 0,function*(){try{yield this.overtimeService.putOvertime(t.items[0].employee.id,t);const i=yield this.appTranslateService.getI18n(e);this.notificationService.showNotification(i,a.ik9.Success)}catch(i){this.notificationService.showNotification(i.message,a.ik9.Error)}})}payPartialHours(t){this.openPartialHours(t.overtime)}getAvatar(t){return this.avatar[t]||(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle("url(./assets/img/empty_user.png)"),this.profileService.getImageBase64(t).then(e=>{e&&e.content&&(this.avatar[t]=this.sanitizationService.bypassSecurityTrustStyle(`url(${"data:image/"+(e.type||"png")+";base64,"+e.content})`))})),this.avatar[t]}getPageActions(t=0){return(0,A.mG)(this,void 0,void 0,function*(){this.pageActions=[{label:`${yield this.translateString("l-approve-selected")} (${t})`,action:this.approveMany.bind(this),disabled:this.disableButtons.bind(this)},{label:`${yield this.translateString("l-reprove-selected")} (${t})`,action:this.reproveMany.bind(this),disabled:this.disableButtons.bind(this)}]})}getModalActions(){return(0,A.mG)(this,void 0,void 0,function*(){this.closeAction={action:()=>{this.closeModal()},label:yield this.translateString("l-cancel-title"),danger:!0},this.confirmAction={action:()=>{this.confirmModal()},label:yield this.translateString("l-yes")}})}closeModal(){this.poModal.close(),this.currentModalAction=null}confirmModal(){return(0,A.mG)(this,void 0,void 0,function*(){this.poModal.close(),this.currentModalAction.type===N.Approve||this.currentModalAction.type===N.Reprove?yield this.confirmModalOne():yield this.confirmModalMany(),this.windowUtilService.reloadPage()})}confirmModalOne(){let t;const{overtime:e}=this.currentModalAction,i={hasNext:!1,items:[e]};let n;return this.currentModalAction.type===N.Approve?(n=b.StatusEnum.Approved,t="m-approved-request"):(n=b.StatusEnum.Reproved,t="m-reprove-request"),e.status=n,this.sendPut(i,t)}confirmModalMany(){let t;const e=this.selectedLines,i=[];return this.currentModalAction.type===N.ApproveMany?(t="m-approved-request",e.forEach(t=>{t.overtime.status=b.StatusEnum.Approved,i.push(t.overtime)})):(t="m-reprove-request",e.forEach(t=>{t.overtime.status=b.StatusEnum.Reproved,i.push(t.overtime)})),this.sendPut({hasNext:!1,items:i},t)}getLabelsSearch(){return(0,A.mG)(this,void 0,void 0,function*(){this.literals={disclaimerGroupTitle:(yield this.translateString("l-filter-applied")).toString(),filterTitle:(yield this.translateString("l-filter-title")).toString(),filterCancelLabel:(yield this.translateString("l-cancel-title")).toString(),filterConfirmLabel:(yield this.translateString("l-apply")).toString(),quickSearchLabel:(yield this.translateString("l-researched-value")).toString(),searchPlaceholder:(yield this.translateString("l-search-collaborator-placeholder")).toString()},this.filters=[{property:"name",label:(yield this.translateString("l-name-collaborator")).toString(),gridColumns:12}]})}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(O.K),m.Y36(v.g),m.Y36(k.g),m.Y36(w.H),m.Y36(E.H7),m.Y36(q.c),m.Y36(J.g),m.Y36(U.P))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-pending-overtimes"]],viewQuery:function(t,e){if(1&t&&(m.Gf(a._w3,5),m.Gf(H,5),m.Gf(a.hmF,7)),2&t){let t;m.iGM(t=m.CRH())&&(e.poTable=t.first),m.iGM(t=m.CRH())&&(e.partialHoursComponent=t.first),m.iGM(t=m.CRH())&&(e.poModal=t.first)}},features:[m.qOj],decls:9,vars:13,consts:[[3,"p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile po-mt-1",4,"ngIf"],["id","partial-hours-dialog","menuIsVisible","true",3,"isVisible","closeDialogButtonEnable","closeDialogEvent"],["dialog-content",""],[3,"closeDialogEvent","saveEvent"],["p-hide-close","true","p-size","md",3,"p-title","p-primary-action","p-secondary-action"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","","p-selectable","true",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-hide-text-overflow","p-all-selected","p-all-unselected","p-selected","p-unselected","p-show-more"],[1,"mobile","po-mt-1"],["class","margin-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left","checkbox-without-photo"],["name","select-line",1,"checkbox-list",3,"ngModel","id","ngModelChange","p-change"],[1,"aboutEmployee"],[1,"name"],[1,"office"],["card-body",""],[1,"card-line"],[1,"line"],["for","date",1,"po-sm-6","po-md-6"],[1,"pull-right"],["class","card-line",4,"ngIf"],[1,"card-line","clearfix"],[1,"po-sm-6","po-md-6"],[1,"po-sm-6","po-md-6","text-right","po-pr-0"],[1,"po-sm-12","po-md-12","buttons-mobile",3,"id","yes","no"],[1,"pull-right",3,"click"]],template:function(t,e){1&t&&(m.TgZ(0,"po-page-dynamic-search",0),m.NdJ("p-change-disclaimers",function(t){return e.onChangeDisclaimers(t)})("p-quick-search",function(t){return e.onQuickSearch(t)})("p-advanced-search",function(t){return e.onAdvancedSearch(t)}),m.YNc(1,G,2,9,"div",1),m.YNc(2,Y,2,2,"div",2),m.qZA(),m.TgZ(3,"app-dialog",3),m.NdJ("closeDialogEvent",function(){return e.closePartialHours()}),m.TgZ(4,"div",4),m.TgZ(5,"app-partial-hours",5),m.NdJ("closeDialogEvent",function(){return e.closePartialHours()})("saveEvent",function(t){return e.approve(t)}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(6,"po-modal",6),m.ALo(7,"translate"),m._uU(8),m.qZA()),2&t&&(m.Q6J("p-actions",e.pageActions)("p-filters",e.filters)("p-literals",e.literals),m.xp6(1),m.Q6J("ngIf",!e.viewIsMobile),m.xp6(1),m.Q6J("ngIf",e.viewIsMobile),m.xp6(1),m.Q6J("isVisible",e.partialHoursDialog)("closeDialogButtonEnable",!e.viewIsMobile),m.xp6(3),m.s9C("p-title",m.lcZ(7,11,"l-confirmation")),m.Q6J("p-primary-action",e.confirmAction)("p-secondary-action",e.closeAction),m.xp6(2),m.hij(" ",e.modalText,"\n"))},directives:[p.O6,n.O5,D.a,H,a.hmF,a._w3,n.sg,I.c,a.ejx,r.JJ,r.On,V.o],pipes:[l.X$,j.r,L.$,_.P],styles:[".qtd-selected[_ngcontent-%COMP%]{font-size:.8em;font-style:normal;font-weight:bold;position:absolute;margin-left:20px}.line-buttons[_ngcontent-%COMP%]{margin:20px 0 15px}.line-search[_ngcontent-%COMP%]{margin:12px 0 7px}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}a[_ngcontent-%COMP%]:hover{color:#0c9abe!important}a[_ngcontent-%COMP%]{color:#0c9abe!important}.checkbox-without-photo[_ngcontent-%COMP%]{margin-top:-5px}[_nghost-%COMP%]     .po-page-list-operations .po-button{margin-bottom:.25rem}@media screen and (min-width: 961px){[_nghost-%COMP%]     div.po-page{margin-left:0!important;height:auto!important}[_nghost-%COMP%]     div.po-page, [_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-header, [_nghost-%COMP%]     div.po-page div.po-page-content{padding-left:8px!important;padding-right:8px!important}}.card-line.clearfix[_ngcontent-%COMP%]{margin-bottom:-25px}.card-line.clearfix[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-align:right;padding:0}"]}),t})(),canActivate:[u.P]}];let X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.Bz.forChild($)],s.Bz]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[n.ez,X,d.q,l.aw,r.u5,a.JBz,s.Bz,o.To,c.Y,g.G,p.Pu]]}),t})()}}]);