"use strict";(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[566],{23831:function(t,e,n){n.d(e,{o:function(){return f}});var i=n(64762),o=n(92340),s=n(81483),a=n(81059),r=n(36227),l=n(97185),d=n(37716),c=n(38583),p=n(29790),m=n(32268);function u(t,e){if(1&t&&(d.TgZ(0,"div",15),d.TgZ(1,"div",5),d.TgZ(2,"span"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA(),d.TgZ(5,"div",13),d.TgZ(6,"span"),d._uU(7),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit,e=d.oxw(2);d.xp6(3),d.Oqu(d.lcZ(4,2,"l-total-hours")),d.xp6(4),d.Oqu(e.formatHours(t.total))}}function g(t,e){if(1&t&&(d.TgZ(0,"div",11),d.TgZ(1,"div",12),d.TgZ(2,"div",5),d.TgZ(3,"span"),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"div",13),d.TgZ(6,"span"),d._uU(7),d.qZA(),d.qZA(),d.qZA(),d.YNc(8,u,8,4,"div",14),d.qZA()),2&t){const t=e.$implicit,n=d.oxw(2);d.xp6(4),d.Oqu(t.description),d.xp6(3),d.Oqu(n.formatHours(t.initHour,t.endHour)),d.xp6(1),d.Q6J("ngIf",n.showTotal)}}function h(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",16),d.NdJ("click",function(){d.CHM(t);const e=d.oxw(2);return e.mobileShowDetails=!e.mobileShowDetails}),d.TgZ(1,"span"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(2),d.Oqu(d.lcZ(3,1,t.mobileShowDetails?"l-hide-details":"l-show-details-2"))}}function y(t,e){if(1&t&&(d.TgZ(0,"div",1),d.TgZ(1,"div",2),d.TgZ(2,"div",3),d.TgZ(3,"div",4),d.TgZ(4,"h2",5),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",3),d.TgZ(8,"div",6),d.TgZ(9,"span",7),d._uU(10),d.ALo(11,"utcDate"),d.qZA(),d.TgZ(12,"span",8),d._uU(13),d.ALo(14,"titlecase"),d.ALo(15,"utcDate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"div",3),d.YNc(17,g,9,3,"div",9),d.ALo(18,"slice"),d.YNc(19,h,4,3,"div",10),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(5),d.Oqu(d.lcZ(6,5,"l-dailySummary")),d.xp6(5),d.Oqu(d.xi3(11,7,t.date,"shortDate")),d.xp6(3),d.Oqu(d.lcZ(14,10,d.xi3(15,12,t.date,"EEEE"))),d.xp6(4),d.Q6J("ngForOf",d.Dn7(18,15,t.dailySummaryResponse.items,0,t.mobileShowDetails||!t.viewIsMobileOrTablet?t.dailySummaryResponse.items.length:1)),d.xp6(2),d.Q6J("ngIf",t.viewIsMobileOrTablet&&t.dailySummaryResponse.items.length>1)}}let f=(()=>{class t extends a.R{constructor(t,e){super(),this.occurrencesService=t,this.fieldPropertiesService=e,this.mobileShowDetails=!1,this.showTotal=!1}get hasDailySummary(){var t,e;return(null===(e=null===(t=this.dailySummaryResponse)||void 0===t?void 0:t.items)||void 0===e?void 0:e.length)>0}ngOnInit(){super.ngOnInit(),this.loadFieldProperties()}ngOnChanges(t){var e,n;const i=null===(e=t.employeeId)||void 0===e?void 0:e.currentValue;let o=null===(n=t.date)||void 0===n?void 0:n.currentValue;null!=o&&"string"==typeof o&&(o=new Date(o)),(this.lastDate!==o||this.lastEmployeeId!=i)&&this.getDailySummary(o),this.lastDate=o,this.lastEmployeeId=i}formatHours(t,e){if(t>=0){const n=s.Em.getHoursByMilliseconds(t);return null!=e&&e>=0?`${n} - ${s.Em.getHoursByMilliseconds(e)}`:n}}loadFieldProperties(){return(0,i.mG)(this,void 0,void 0,function*(){const t=yield this.fieldPropertiesService.getFieldProperties("dailySummary");null!=t&&t.forEach(t=>{"total"===t.field&&(this.showTotal=null!=t&&t.visible)})})}getDailySummary(t){var e;return(0,i.mG)(this,void 0,void 0,function*(){return this.dailySummaryResponse=null==t?null:yield this.occurrencesService.getOccurrencesOfDay(null!==(e=this.employeeId)&&void 0!==e?e:o.N.loggedUser,t),this.dailySummaryResponse})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.$),d.Y36(r.c))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daily-summary"]],inputs:{date:"date",employeeId:"employeeId"},features:[d.qOj,d.TTD],decls:1,vars:1,consts:[["class","daily-summary",4,"ngIf"],[1,"daily-summary"],[1,"header"],[1,"po-row"],[1,"po-sm-12"],[1,"title"],[1,"po-sm-12","date"],[1,"full","po-mr-lg-2","po-mr-xl-2"],[1,"day"],["class","po-sm-12 po-md-12 po-lg-6 po-xl-4 item",4,"ngFor","ngForOf"],["class","button-details",3,"click",4,"ngIf"],[1,"po-sm-12","po-md-12","po-lg-6","po-xl-4","item"],[1,"info","info-left"],[1,"value"],["class","info info-right",4,"ngIf"],[1,"info","info-right"],[1,"button-details",3,"click"]],template:function(t,e){1&t&&d.YNc(0,y,20,19,"div",0),2&t&&d.Q6J("ngIf",e.hasDailySummary)},directives:[c.O5,c.sg],pipes:[p.X$,m.$,c.rS,c.OU],styles:['.daily-summary[_ngcontent-%COMP%]{border-radius:3px;background-color:#fff;box-shadow:0 2px 8px #e3e6f1;margin-top:16px;padding:16px 8px 0}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]{padding-bottom:8px}}.daily-summary[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"NunitoSans-bold";font-weight:400;color:#0c9abe;font-size:18px}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;font-size:20px}}.daily-summary[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-bottom:14.5px;font-size:20px;display:flex}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:inherit;display:block}}.daily-summary[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{font-family:"NunitoSans-bold";font-weight:400;width:60%}.daily-summary[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{width:40%;color:#8e8e93;margin-left:40px}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{margin-left:0}}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:8.5px 0;display:flex}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:12px}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:inherit}}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] ~ .info[_ngcontent-%COMP%]{margin-left:40px}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.info-left[_ngcontent-%COMP%]{width:60%}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.info-right[_ngcontent-%COMP%]{width:40%}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{overflow:hidden;word-break:break-word}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-family:"NunitoSans-bold";font-weight:400}@media (min-width: 961px){.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.info-left[_ngcontent-%COMP%]{width:200px}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.info-right[_ngcontent-%COMP%]{width:110px}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"NunitoSans-bold";font-weight:400;color:#4a5c60}.daily-summary[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-family:"NunitoSans";font-weight:200}}.daily-summary[_ngcontent-%COMP%]   .button-details[_ngcontent-%COMP%]{position:relative;padding:8.5px 0;display:flex;width:100%;justify-content:center;color:#0c9abe;cursor:pointer}.daily-summary[_ngcontent-%COMP%]   .button-details[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:-8px;background:#eceded;height:1px;width:calc(100% + 16px)}']}),t})()},58566:function(t,e,n){n.r(e),n.d(e,{RequestOvertimeHoursModule:function(){return Z}});var i=n(38583),o=n(3679),s=n(29790),a=n(44956),r=n(56365),l=n(95987),d=n(51110),c=n(64762),p=n(81483),m=n(59708),u=n(37716);let g=(()=>{class t{constructor(t){this.genericService=t}getReasons(){return this.genericService.get("timesheet/overtimeHours/reason")}getOvertimeType(){return this.genericService.get("timesheet/overtimeHours/overtimeType")}getCompensation(t){const e=[];return this.genericService.parseParams(e,"overtimeType",t),this.genericService.search("timesheet/overtimeHours/compensation",e)}postOvertimeHours(t,e){return this.genericService.post(`timesheet/overtimeHours/${t}`,e,!1)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(m.M))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n(65241),y=n(96054),f=n(84479),v=n(36812),C=n(23831);let M=(()=>{class t{constructor(t,e,n,i,o,s){this.service=t,this.router=e,this.translateService=n,this.notificationService=i,this.route=o,this.windowUtilService=s,this.mask="99:99",this.pattern="^(2[0-3]|[01]*[0-9]):?([0-5][0-9])$",this.optionsCompensations=[],this.optionsOvertimeTypes=[],this.optionsReasons=[],this.paramsSubscription=this.route.params.subscribe(t=>{this.id=t.id})}ngOnInit(){this.loading=!1,this.dealWithQueryParams(),this.getReason(),this.getOvertimeType()}ngOnDestroy(){this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.queryParamsSubscription&&this.queryParamsSubscription.unsubscribe()}getCompensation(t){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.service.getCompensation(t),n=[];e.items.forEach(t=>{n.push({label:t.label,value:t.id})}),this.optionsCompensations=n})}isLoadingSelect(){return!(this.optionsCompensations.length>0)}save(){return(0,c.mG)(this,void 0,void 0,function*(){if(this.loading=!0,this.validadeHours()){const t=this.getGenericIdLabel(this.optionsOvertimeTypes,this.overtimeType),e=this.getGenericIdLabel(this.optionsReasons,this.reason),n=this.getGenericIdLabel(this.optionsCompensations,this.compensation),i={date:p.Em.getDateWithoutTimezone(new Date(this.date)),initHour:p.Em.getTotalMilliseconds(this.initHour),endHour:p.Em.getTotalMilliseconds(this.endHour),overtimeType:t,reason:e,compensation:n};this.post(i,this.id?this.id:"{current}")}else{this.loading=!1;const t=yield this.translateService.getI18n("m-initialHourBiggerThanEndHour");this.notificationService.showNotification(t,a.ik9.Error)}})}validateSaveButton(){return!(this.date&&this.initHour&&this.endHour&&this.overtimeType&&this.reason&&(this.isLoadingSelect()||this.compensation))}cancel(){this.usedQueryParam?this.windowUtilService.back():this.router.navigate(this.id?["timesheet/overtimeHours",this.id]:["timesheet/overtimeHours"])}getGenericIdLabel(t,e){if(t.length>0){const n=t.find(t=>t.value===e);return{id:n.value.toString(),label:n.label}}}dealWithQueryParams(){this.queryParamsSubscription=this.route.queryParams.subscribe(t=>{t.date&&(this.date=p.Em.getDateUTCFormat(new Date(Number(t.date))),isNaN(this.date.getTime())&&(this.date=null)),this.usedQueryParam=!0})}getReason(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.service.getReasons(),e=[];t.items.forEach(t=>{e.push({label:t.label,value:t.id})}),this.optionsReasons=e})}validadeHours(){return p.Em.getTotalMilliseconds(this.initHour)<p.Em.getTotalMilliseconds(this.endHour)}post(t,e){this.service.postOvertimeHours(e,t).then(()=>(0,c.mG)(this,void 0,void 0,function*(){this.loading=!1,this.usedQueryParam?this.windowUtilService.back():this.router.navigate("{current}"===e?["timesheet/overtimeHours"]:[`teamManagement/timesheet/overtimeHours/${e}`]);const t=yield this.translateService.getI18n("l-overtime-request-completed");this.notificationService.showNotification(t,a.ik9.Success)})).catch(()=>{this.loading=!1})}getOvertimeType(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.service.getOvertimeType(),e=[];t.items.forEach(t=>{e.push({label:t.label,value:t.id})}),this.optionsOvertimeTypes=e})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(g),u.Y36(l.F0),u.Y36(h.g),u.Y36(y.g),u.Y36(l.gz),u.Y36(f.g))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-request-overtime-hours"]],decls:28,vars:43,consts:[[1,"overtime-hours"],["pageTitle","l-request-overtime",3,"backIsVisible"],[3,"date","employeeId"],[1,"header-divider","clearfix"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","no-padding"],[1,"po-sm-6","po-md-6","po-lg-6","po-xl-6"],["name","datepicker",3,"p-label","ngModel","ngModelChange"],["p-maxlength","5","name","hourInputInit","p-required","true","p-mask-format-model","true",3,"p-mask","ngModel","p-pattern","p-label","ngModelChange"],["p-maxlength","5","name","hourInputEnd","p-required","true","p-mask-format-model","true",3,"p-mask","ngModel","p-pattern","p-label","ngModelChange"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],["name","select-justify-type",3,"p-label","p-options","ngModel","p-change","ngModelChange"],["name","select-reason",3,"p-label","p-options","ngModel","ngModelChange"],["name","select-compensation",3,"p-label","p-options","ngModel","p-disabled","ngModelChange"],[1,"buttons"],["p-type","default",1,"button",3,"p-label","p-click"],["name","save-overtime","p-type","primary",1,"button",3,"p-disabled","p-label","p-loading","p-click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"app-page-header",1),u._UZ(2,"app-daily-summary",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"span",5),u.TgZ(6,"po-datepicker",6),u.NdJ("ngModelChange",function(t){return e.date=t}),u.ALo(7,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"span",5),u.TgZ(9,"po-input",7),u.NdJ("ngModelChange",function(t){return e.initHour=t}),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.TgZ(11,"span",5),u.TgZ(12,"po-input",8),u.NdJ("ngModelChange",function(t){return e.endHour=t}),u.ALo(13,"translate"),u.qZA(),u.qZA(),u.TgZ(14,"span",9),u.TgZ(15,"po-select",10),u.NdJ("p-change",function(){return e.getCompensation(e.overtimeType)})("ngModelChange",function(t){return e.overtimeType=t}),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.TgZ(17,"span",9),u.TgZ(18,"po-select",11),u.NdJ("ngModelChange",function(t){return e.reason=t}),u.ALo(19,"translate"),u.qZA(),u.qZA(),u.TgZ(20,"span",9),u.TgZ(21,"po-select",12),u.NdJ("ngModelChange",function(t){return e.compensation=t}),u.ALo(22,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(23,"div",13),u.TgZ(24,"po-button",14),u.NdJ("p-click",function(){return e.cancel()}),u.ALo(25,"translate"),u.qZA(),u.TgZ(26,"po-button",15),u.NdJ("p-click",function(){return e.save()}),u.ALo(27,"translate"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("backIsVisible",!0),u.xp6(1),u.Q6J("date",e.date)("employeeId",e.id),u.xp6(4),u.s9C("p-label",u.lcZ(7,27,"l-authorization-date")),u.Q6J("ngModel",e.date),u.xp6(3),u.s9C("p-label",u.lcZ(10,29,"l-initial-hour")),u.Q6J("p-mask",e.mask)("ngModel",e.initHour)("p-pattern",e.pattern),u.xp6(3),u.s9C("p-label",u.lcZ(13,31,"l-final-hour")),u.Q6J("p-mask",e.mask)("ngModel",e.endHour)("p-pattern",e.pattern),u.xp6(3),u.s9C("p-label",u.lcZ(16,33,"l-justify-type")),u.Q6J("p-options",e.optionsOvertimeTypes)("ngModel",e.overtimeType),u.xp6(3),u.s9C("p-label",u.lcZ(19,35,"l-reason")),u.Q6J("p-options",e.optionsReasons)("ngModel",e.reason),u.xp6(3),u.s9C("p-label",u.lcZ(22,37,"l-compensation")),u.Q6J("p-options",e.optionsCompensations)("ngModel",e.compensation)("p-disabled",e.isLoadingSelect()),u.xp6(3),u.s9C("p-label",u.lcZ(25,39,"l-cancel")),u.xp6(2),u.s9C("p-label",u.lcZ(27,41,"l-request")),u.Q6J("p-disabled",e.validateSaveButton())("p-loading",e.loading))},directives:[v.q,C.o,a.GWy,o.JJ,o.On,a.xxV,a.C9q,a.bOz],pipes:[s.X$],styles:['.header-divider[_ngcontent-%COMP%]{padding:20px}@media (min-width: 768px){.header-divider[_ngcontent-%COMP%]{padding:2.4% 25%}}.clearfix[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.buttons[_ngcontent-%COMP%]{position:absolute;right:1%;margin-top:10px;margin-bottom:20px}@media (min-width: 768px){.buttons[_ngcontent-%COMP%]{position:absolute;right:44px;margin-top:10px}}.button[_ngcontent-%COMP%]{padding:10px}@media (min-width: 768px){.overtime-hours[_ngcontent-%COMP%]{padding:0 40px}}']}),t})();const O=[{path:"",component:M,canActivate:[d.P]},{path:":id",component:M,canActivate:[d.P]}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[l.Bz.forChild(O)],l.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,b,a.JBz,s.aw,o.u5,r.q]]}),t})()}}]);