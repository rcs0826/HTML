!function(){"use strict";function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,i,n){var a=t(e,i);if(a){var o=Object.getOwnPropertyDescriptor(a,i);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=o(e);if(t){var r=o(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return a(this,i)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkportal_meu_rh=self.webpackChunkportal_meu_rh||[]).push([[739],{57739:function(t,a,s){s.r(a),s.d(a,{WorkLeaveModule:function(){return fe}});var c,p=s(38583),u=s(3679),d=s(29790),h=s(32114),g=s(44956),m=s(95987),v=s(64762),f=s(59708),b=s(37716),w="team/workLeave",k=((c=function(){function e(t){r(this,e),this.serviceGeneric=t}return l(e,[{key:"getWorkLeaves",value:function(e,t,i,n,a,o){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var s,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s="".concat(w,"/").concat(e),l=[],this.serviceGeneric.parseParams(l,"reason",n),this.serviceGeneric.parseParams(l,"initDate",a),this.serviceGeneric.parseParams(l,"endDate",o),this.serviceGeneric.parseParams(l,"page",t),this.serviceGeneric.parseParams(l,"pageSize",i),r.next=8,this.serviceGeneric.search(s,l,!0);case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}},r,this)}))}},{key:"editWorkLeave",value:function(e,t){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="".concat(w,"/").concat(e),i.next=3,this.serviceGeneric.put(n,t,!0);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},i,this)}))}},{key:"requestWorkLeave",value:function(e,t){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="".concat(w,"/").concat(e),i.next=3,this.serviceGeneric.post(n,t,!1);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},i,this)}))}},{key:"deleteWorkLeave",value:function(e,t){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="".concat(w,"/").concat(e,"?id=").concat(t),i.next=3,this.serviceGeneric.delete(n,!0);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},i,this)}))}},{key:"getWorkLeavesReasons",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(w,"/reasons"),e.next=3,this.serviceGeneric.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(e){return new(e||c)(b.LFG(f.M))},c.\u0275prov=b.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c),y=s(44677),x=s(56365),D=s(43743),M=s(51110),L=s(88002),Z=s(92340),C=s(33490),A=s(81483),T=s(9789),H=s(68014),S=s(65241),q=function(){var e=function(){function e(t,i){var n=this;r(this,e),this.appTranslateService=t,this.workLeaveService=i,this.confirmAction={label:"l-delete",action:function(){return n.excludeWorkLeave()}},this.cancelAction={label:"l-cancel",action:function(){return n.excludeDialog.close()},danger:!0},this.deleted=new b.vpe}return l(e,[{key:"ngOnInit",value:function(){this.translateActionLabels()}},{key:"openDialog",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.excludeDialog.open();case 1:case"end":return e.stop()}},e,this)}))}},{key:"excludeWorkLeave",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=this.employeeId&&this.workLeaveId,!e.t0){e.next=6;break}return e.next=5,this.workLeaveService.deleteWorkLeave(this.employeeId,this.workLeaveId);case 5:this.deleted.emit();case 6:return e.prev=6,this.excludeDialog.close(),e.finish(6);case 9:case"end":return e.stop()}},e,this,[[0,,6,9]])}))}},{key:"translateActionLabels",value:function(){for(var e=this,t=function(){var t=n[i];e.appTranslateService.getI18n(t.label).then(function(e){t.label=e})},i=0,n=[this.confirmAction,this.cancelAction];i<n.length;i++)t()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(b.Y36(S.g),b.Y36(k))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-exclude-work-leave"]],viewQuery:function(e,t){var i;(1&e&&b.Gf(g.hmF,5),2&e)&&(b.iGM(i=b.CRH())&&(t.excludeDialog=i.first))},inputs:{workLeaveId:"workLeaveId",employeeId:"employeeId"},outputs:{deleted:"deleted"},decls:2,vars:5,consts:[["p-click-out","true","p-size","sm",1,"exclude-modal",3,"p-title","p-primary-action","p-secondary-action"]],template:function(e,t){1&e&&(b._UZ(0,"po-modal",0),b.ALo(1,"translate")),2&e&&(b.s9C("p-title",b.lcZ(1,3,"l-delete-work-leave-message")),b.Q6J("p-primary-action",t.confirmAction)("p-secondary-action",t.cancelAction))},directives:[g.hmF],pipes:[d.X$],styles:["[_nghost-%COMP%]     .po-modal-title{font-weight:bold;white-space:normal;font-size:16px}[_nghost-%COMP%]     .po-icon-close{display:none}@media only screen and (min-width: 768px){[_nghost-%COMP%]     .po-modal-title{font-size:24px}}.requested-value[_ngcontent-%COMP%]{font-weight:bold;margin-top:-4px}.requested-label[_ngcontent-%COMP%]{font-weight:bold;opacity:.7}"]}),e}(),E=s(36227),I=s(40469),O=s(64634),P=s(72212),_=s(81059),R=s(96054),J=s(36812),V=s(20307),F=s(24165);function U(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"app-page-header",20),b.NdJ("backFunction",function(){return b.CHM(i),b.oxw().back()}),b.qZA()}2&e&&b.Q6J("backIsVisible",!0)}function Y(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"app-page-header",21),b.NdJ("backFunction",function(){return b.CHM(i),b.oxw().back()}),b.qZA()}2&e&&b.Q6J("backIsVisible",!0)}function N(e,t){if(1&e&&b._UZ(0,"app-card-employee",22),2&e){var i=b.oxw();b.Q6J("image",i.imageAvatar)("name",null==i.employeeData?null:i.employeeData.name)("role",null==i.employeeData?null:i.employeeData.roleDescription)("status",null==i.employeeData?null:i.employeeData.employeeStatus)}}function Q(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-datepicker",23),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().editedInitDate=e})("p-change",function(){return b.CHM(i),b.oxw().changeInitDate()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,4,"l-initial")),b.Q6J("ngModel",n.editedInitDate)("p-iso-format",n.isoFormat)("p-disabled",!n.isEditable(n.reasonSelect,"initDate"))}}function G(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-datepicker",24),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().editedInitDate=e})("p-change",function(){return b.CHM(i),b.oxw().changeInitDate()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,5,"l-initial")),b.Q6J("ngModel",n.editedInitDate)("p-max-date",n.editedEndtDate)("p-iso-format",n.isoFormat)("p-disabled",!n.isEditable(n.reasonSelect,"initDate"))}}function W(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-datepicker",25),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().editedEndtDate=e})("p-change",function(){return b.CHM(i),b.oxw().updateDays()}),b.ALo(1,"translate"),b.ALo(2,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,6,"l-scheduler-messages.editor.end")),b.s9C("p-error-pattern",b.lcZ(2,8,"m-initialDateBiggerThanEndDate")),b.Q6J("p-min-date",n.editedInitDate)("ngModel",n.editedEndtDate)("p-iso-format",n.isoFormat)("p-disabled",!n.isEditable(n.reasonSelect,"endDate"))}}function z(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-number",26),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().days=e})("p-change-model",function(){return b.CHM(i),b.oxw().changeDaysDate()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,3,"l-days")),b.Q6J("ngModel",n.days)("p-disabled",!n.isEditable(n.reasonSelect,"days"))}}function j(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-input",27),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().initHour=e})("p-blur",function(){return b.CHM(i),b.oxw().changeInitHour()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,5,"l-initial-hour")),b.Q6J("ngModel",n.initHour)("p-mask",n.mask)("p-pattern",n.pattern)("p-disabled",!n.isEditable(n.reasonSelect,"initHour"))}}function B(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-input",28),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().endHour=e})("p-blur",function(){return b.CHM(i),b.oxw().changeEndHour()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,5,"l-final-hour")),b.Q6J("ngModel",n.endHour)("p-mask",n.mask)("p-pattern",n.pattern)("p-disabled",!n.isEditable(n.reasonSelect,"endHour"))}}function $(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"po-input",29),b.NdJ("ngModelChange",function(e){return b.CHM(i),b.oxw().hours=e})("p-blur",function(){return b.CHM(i),b.oxw().changeTotalHour()}),b.ALo(1,"translate"),b.qZA()}if(2&e){var n=b.oxw();b.s9C("p-label",b.lcZ(1,5,"l-total")),b.Q6J("ngModel",n.hours)("p-mask",n.mask)("p-pattern",n.patternMinutesOnly)("p-disabled",!n.isEditable(n.reasonSelect,"hours"))}}function X(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",30),b.TgZ(1,"po-button",31),b.NdJ("p-click",function(){return b.CHM(i),b.oxw().send()}),b.ALo(2,"translate"),b.qZA(),b.TgZ(3,"po-button",32),b.NdJ("p-click",function(){return b.CHM(i),b.oxw().back()}),b.ALo(4,"translate"),b.qZA(),b.qZA()}if(2&e){b.oxw();var n=b.MAs(5);b.xp6(1),b.s9C("p-label",b.lcZ(2,3,"l-save")),b.Q6J("p-disabled",!n.form.valid),b.xp6(2),b.s9C("p-label",b.lcZ(4,5,"l-cancel"))}}function K(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",33),b.TgZ(1,"po-button",34),b.NdJ("p-click",function(){return b.CHM(i),b.oxw().send()}),b.ALo(2,"translate"),b.qZA(),b.TgZ(3,"po-button",35),b.NdJ("p-click",function(){return b.CHM(i),b.oxw().back()}),b.ALo(4,"translate"),b.qZA(),b.qZA()}if(2&e){b.oxw();var n=b.MAs(5);b.xp6(1),b.s9C("p-label",b.lcZ(2,3,"l-save")),b.Q6J("p-disabled",!n.form.valid),b.xp6(2),b.s9C("p-label",b.lcZ(4,5,"l-cancel"))}}function ee(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"app-success-dialog",36),b.NdJ("closeDialogEvent",function(){return b.CHM(i),b.oxw().back()}),b.qZA()}}var te=function(){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,t);var a=n(s);function s(e,t,i,n,o,l,c){var p;return r(this,s),(p=a.call(this)).workLeaveService=e,p.notificationService=t,p.translateService=i,p.menuApplicationService=n,p.fieldPropertiesService=o,p.teamManagementService=l,p.activatedRoute=c,p.closeRequest=new b.vpe,p.id=null,p.reasons=[],p.employeeData=null,p.employeeId=null,p.viewIsTeamManagement=!1,p.mask="99:99",p.pattern="^(2[0-3]|[01]*[0-9]):?([0-5][0-9])$",p.patternMinutesOnly="^([0-9]*):?([0-5][0-9])$",p.reasonsObj=[],p.isEdit=!1,p.isoFormat=g.Iri.Extended,p}return l(s,[{key:"ngOnInit",value:function(){e(o(s.prototype),"ngOnInit",this).call(this),this.employeeData=this.teamManagementService.getEmployeeCard(),this.loadComponents(),this.clickEventControl=!1}},{key:"ngOnDestroy",value:function(){!0===this.viewIsTeamManagement&&this.teamManagementService.cleanEmployeeCard()}},{key:"loadComponents",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFieldProperties();case 2:return e.next=4,this.getReasons();case 4:this.teamManagementWorkLeave(),this.workLeaveEdit&&this.loadEdit();case 6:case"end":return e.stop()}},e,this)}))}},{key:"getURLParamId",value:function(){return this.activatedRoute.snapshot.paramMap.get("id")}},{key:"showMenu",value:function(){this.menuApplicationService.showMenu()}},{key:"changeInitDate",value:function(){this.editedInitDate&&(this.initDate=A.Em.formatUTCDate(new Date(this.editedInitDate)),this.days&&this.initDate&&(this.endDate||(this.endDate=this.initDate),this.changeDate()))}},{key:"isVisible",value:function(e,t){var i=!0;return e&&e.props&&e.props.length&&(i=P.Z.isVisible(e.props,t)),i&&P.Z.isVisible(this.fieldProperties,t)}},{key:"isEditable",value:function(e,t){var i=!0;return e&&e.props&&e.props.length&&(i=P.Z.isEditableStandardTrue(e.props,t)),i&&P.Z.isEditableStandardTrue(this.fieldProperties,t)}},{key:"changeDaysDate",value:function(){this.endDate=null,this.days&&this.initDate&&(this.endDate=this.initDate,this.changeDate())}},{key:"updateDays",value:function(){if(this.endDate=A.Em.formatUTCDate(new Date(this.editedEndtDate)),this.endDate&&this.initDate){var e=A.Em.getDateWithoutTimezone(new Date(this.endDate)),t=A.Em.getDateWithoutTimezone(new Date(this.initDate)),i=e.getTime()-t.getTime(),n=+A.Em.getHoursByMilliseconds(i,!1).split(":")[0],a=Number((.0417*n).toFixed());this.days=a+1}}},{key:"changeInitHour",value:function(){O.m.isEmpty(this.initHour)||(this.initHour=A.Em.changeHour(this.initHour),O.m.isEmpty(this.endHour)?O.m.isEmpty(this.hours)||(this.endHour=A.Em.getHoursByMilliseconds(this.convertHourToMilliseconds(this.initHour)+this.convertHourToMilliseconds(this.hours)).replace(":","")):this.setTotalHours())}},{key:"changeEndHour",value:function(){O.m.isEmpty(this.endHour)||(this.endHour=A.Em.changeHour(this.endHour),O.m.isEmpty(this.initHour)?O.m.isEmpty(this.hours)||(this.initHour=A.Em.getHoursByMilliseconds(this.convertHourToMilliseconds(this.endHour)-this.convertHourToMilliseconds(this.hours)).replace(":","")):this.setTotalHours())}},{key:"changeTotalHour",value:function(){O.m.isEmpty(this.hours)||(this.hours=A.Em.changeHour(this.hours),O.m.isEmpty(this.initHour)?O.m.isEmpty(this.endHour)||(this.initHour=A.Em.getHoursByMilliseconds(this.convertHourToMilliseconds(this.endHour)-this.convertHourToMilliseconds(this.hours)).replace(":","")):this.endHour=A.Em.getHoursByMilliseconds(this.convertHourToMilliseconds(this.initHour)+this.convertHourToMilliseconds(this.hours)).replace(":",""))}},{key:"changeReason",value:function(){var e=this;this.reasonSelect=this.reasonsObj.find(function(t){return t.id==e.reason})}},{key:"getReasons",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.workLeaveService.getWorkLeavesReasons().then(function(e){e&&(t.reasonsObj=e.items,t.reasons=e.items.map(function(e){return{label:e.name,value:e.id}}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"send",value:function(){this.informationIsValid()?this.callSaveService(this.createSendObject()):this.notifyMessageError()}},{key:"informationIsValid",value:function(){return!(!this.initDate||this.endDate&&!this.isValidPeriod())}},{key:"callSaveService",value:function(e){var t=this;this.isEdit?this.workLeaveService.editWorkLeave(this.employeeId,e).then(function(e){t.isDialogSuccessVisible=!0}):this.workLeaveService.requestWorkLeave(this.employeeId,e).then(function(e){t.isDialogSuccessVisible=!0})}},{key:"back",value:function(){this.viewIsTeamManagement=!1,this.closeRequest.emit()}},{key:"loadFieldProperties",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fieldPropertiesService.getFieldProperties("workLeave");case 2:this.fieldProperties=e.sent;case 3:case"end":return e.stop()}},e,this)}))}},{key:"loadEdit",value:function(){this.reason=this.workLeaveEdit.reason.id,this.editedInitDate=this.returnDateStringPODatepicker(this.workLeaveEdit.initDate),this.initDate=A.Em.formatUTCDate(new Date(this.editedInitDate)),this.editedEndtDate=this.returnDateStringPODatepicker(this.workLeaveEdit.endDate),this.endDate=A.Em.formatUTCDate(new Date(this.editedEndtDate)),this.initHour=A.Em.getHoursByMilliseconds(this.workLeaveEdit.initHour),this.endHour=A.Em.getHoursByMilliseconds(this.workLeaveEdit.endHour),this.hours=A.Em.getHoursByMilliseconds(this.workLeaveEdit.hours),this.id=this.workLeaveEdit.id,this.isEdit=!0,this.isDialogSuccessVisible=!1,this.updateDays(),this.changeReason()}},{key:"loadRequest",value:function(){this.reason="",this.editedInitDate=this.returnDateStringPODatepicker(new Date),this.initDate=A.Em.formatUTCDate(new Date(this.editedInitDate)),this.endDate=void 0,this.editedEndtDate=void 0,this.days=void 0,this.initHour="",this.endHour="",this.hours="",this.id="",this.isDialogSuccessVisible=!1,this.isEdit=!1,this.changeReason()}},{key:"setTotalHours",value:function(){var e,t=A.Em.getDateUTCFormat(new Date(this.initDate));t.setDate(t.getUTCDate()),this.endDate?(e=A.Em.getDateUTCFormat(new Date(this.endDate))).setDate(e.getUTCDate()):(e=A.Em.getDateUTCFormat(new Date(this.initDate))).setDate(e.getUTCDate()),t.setMilliseconds(this.convertHourToMilliseconds(this.initHour)),e.setMilliseconds(this.convertHourToMilliseconds(this.endHour)),this.hours=A.Em.getHoursByMilliseconds(e.getTime()-t.getTime(),!1).replace(":","")}},{key:"notifyMessageError",value:function(){var e=this;this.translateService.getI18n("m-initialDateBiggerThanEndDate").then(function(t){e.notificationService.showNotification(t,g.ik9.Error)})}},{key:"teamManagementWorkLeave",value:function(){this.viewIsTeamManagement=!0;var e=this.teamManagementService.getEmployeeCard(),t=e.employee,i=e.image;this.employeeData=t,this.imageAvatar=i,this.employeeData&&this.employeeData.id?this.employeeId=this.employeeData.id:this.back()}},{key:"changeDate",value:function(){if(this.days&&this.initDate){var e=Number(this.days)-1;if(e>0){var t=A.Em.getDateUTCFormat(new Date(this.initDate));t.setDate(t.getUTCDate()+e),this.endDate=t}}}},{key:"convertHourToMilliseconds",value:function(e){return""!==e?A.Em.getTotalMilliseconds(5==(t=e).length?t:t.substr(0,2).concat(":").concat(t.substr(2,3))):0;var t}},{key:"createSendObject",value:function(){var e={initDate:A.Em.getDateObject(this.initDate).toISOString(),endDate:this.endDate?A.Em.getDateObject(this.endDate).toISOString():A.Em.getDateObject(this.initDate).toISOString(),days:this.days,reason:this.reason,initHour:void 0,endHour:void 0,hours:void 0,id:void 0};return this.initHour&&(e.initHour=this.convertHourToMilliseconds(this.initHour)),this.endHour&&(e.endHour=this.convertHourToMilliseconds(this.endHour)),this.hours&&(e.hours=this.convertHourToMilliseconds(this.hours)),this.isEdit&&(e.id=this.id),e}},{key:"isValidPeriod",value:function(){if(!this.initDate||!this.endDate)return!1;var e=A.Em.getDateObject(this.initDate),t=A.Em.getDateObject(this.endDate);return t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),e.setHours(0,0,0,0),t>=e}},{key:"returnDateStringPODatepicker",value:function(e){var t=new Date(e),i=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+n+"-"+i+"T"+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":00-00:00"}}]),s}(_.R);return t.\u0275fac=function(e){return new(e||t)(b.Y36(k),b.Y36(R.g),b.Y36(S.g),b.Y36(I.Kv),b.Y36(E.c),b.Y36(T.C),b.Y36(m.gz))},t.\u0275cmp=b.Xpm({type:t,selectors:[["app-request-work-leave"]],inputs:{workLeaveEdit:"workLeaveEdit"},outputs:{closeRequest:"closeRequest"},features:[b.qOj],decls:24,vars:21,consts:[[1,"work-leave"],["pageTitle","l-edit-work-leave",3,"backIsVisible","backFunction",4,"ngIf"],["pageTitle","l-request-work-leave",3,"backIsVisible","backFunction",4,"ngIf"],[3,"image","name","role","status",4,"ngIf"],["workLeaveForm","ngForm"],[1,"po-row","header-divider","po-pt-2","panel-body","po-xs-hidden","po-sm-hidden","po-md-12","po-lg-12","po-xl-12"],[1,"center-block","po-xs-12","po-sm-12","po-md-12","po-lg-9","po-xl-9"],["name","reasonSelect","p-required","true",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"ngModel","p-label","p-options","p-placeholder","ngModelChange","p-change"],["name","initDatePicker","class","po-sm-12 po-md-12 po-lg-12 po-xl-12","p-clean","true","p-required","true",3,"ngModel","p-label","p-iso-format","p-disabled","ngModelChange","p-change",4,"ngIf"],["name","initDatePicker","class","po-sm-6 po-md-6 po-lg-4 po-xl-4","p-clean","true","p-required","true",3,"ngModel","p-max-date","p-label","p-iso-format","p-disabled","ngModelChange","p-change",4,"ngIf"],["name","endDatePicker","class","po-sm-6 po-md-6 po-lg-4 po-xl-4","p-clean","true",3,"p-min-date","ngModel","p-label","p-iso-format","p-error-pattern","p-disabled","ngModelChange","p-change",4,"ngIf"],["p-min","0","class","po-sm-12 po-md-12 po-lg-4 po-xl-4","p-clean","true","name","daysInput",3,"ngModel","p-label","p-disabled","ngModelChange","p-change-model",4,"ngIf"],[1,"po-xl-4","po-lg-4","po-md-6","po-sm-6"],["p-placeholder","00:00","id","initHour","name","initHour","p-maxlength","5","class","label-ellipsis",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur",4,"ngIf"],["p-placeholder","00:00","id","endHour","name","endHour","p-maxlength","5",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur",4,"ngIf"],[1,"po-xl-4","po-lg-4","po-md-12","po-sm-12"],["p-placeholder","00:00","id","totalHour","name","totalHour","class","label-justify",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur",4,"ngIf"],["class","po-sm-12 po-md-12 po-lg-12 po-xl-12",4,"ngIf"],["class","po-row",4,"ngIf"],["message","l-send-work-leave-success",3,"closeDialogEvent",4,"ngIf"],["pageTitle","l-edit-work-leave",3,"backIsVisible","backFunction"],["pageTitle","l-request-work-leave",3,"backIsVisible","backFunction"],[3,"image","name","role","status"],["name","initDatePicker","p-clean","true","p-required","true",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12",3,"ngModel","p-label","p-iso-format","p-disabled","ngModelChange","p-change"],["name","initDatePicker","p-clean","true","p-required","true",1,"po-sm-6","po-md-6","po-lg-4","po-xl-4",3,"ngModel","p-max-date","p-label","p-iso-format","p-disabled","ngModelChange","p-change"],["name","endDatePicker","p-clean","true",1,"po-sm-6","po-md-6","po-lg-4","po-xl-4",3,"p-min-date","ngModel","p-label","p-iso-format","p-error-pattern","p-disabled","ngModelChange","p-change"],["p-min","0","p-clean","true","name","daysInput",1,"po-sm-12","po-md-12","po-lg-4","po-xl-4",3,"ngModel","p-label","p-disabled","ngModelChange","p-change-model"],["p-placeholder","00:00","id","initHour","name","initHour","p-maxlength","5",1,"label-ellipsis",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur"],["p-placeholder","00:00","id","endHour","name","endHour","p-maxlength","5",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur"],["p-placeholder","00:00","id","totalHour","name","totalHour",1,"label-justify",3,"ngModel","p-label","p-mask","p-pattern","p-disabled","ngModelChange","p-blur"],[1,"po-sm-12","po-md-12","po-lg-12","po-xl-12"],["p-type","primary",1,"po-sm-3","po-md-2","po-lg-2","po-xl-2","send-button","float-right",3,"p-disabled","p-label","p-click"],[1,"po-sm-3","po-md-2","po-lg-2","po-xl-2","send-button","float-right",3,"p-label","p-click"],[1,"po-row"],["p-primary","true","p-type","primary",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mt-2","block",3,"p-label","p-disabled","p-click"],["p-primary","true",1,"po-sm-12","po-md-12","po-lg-12","po-xl-12","po-mt-2","block",3,"p-label","p-click"],["message","l-send-work-leave-success",3,"closeDialogEvent"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.YNc(1,U,1,1,"app-page-header",1),b.YNc(2,Y,1,1,"app-page-header",2),b.YNc(3,N,1,4,"app-card-employee",3),b.TgZ(4,"form",null,4),b.TgZ(6,"div",5),b.TgZ(7,"div",6),b.TgZ(8,"po-select",7),b.NdJ("ngModelChange",function(e){return t.reason=e})("p-change",function(){return t.changeReason()}),b.ALo(9,"translate"),b.ALo(10,"translate"),b.qZA(),b.YNc(11,Q,2,6,"po-datepicker",8),b.YNc(12,G,2,7,"po-datepicker",9),b.YNc(13,W,3,10,"po-datepicker",10),b.YNc(14,z,2,5,"po-number",11),b.TgZ(15,"div",12),b.YNc(16,j,2,7,"po-input",13),b.qZA(),b.TgZ(17,"div",12),b.YNc(18,B,2,7,"po-input",14),b.qZA(),b.TgZ(19,"div",15),b.YNc(20,$,2,7,"po-input",16),b.qZA(),b.YNc(21,X,5,7,"div",17),b.YNc(22,K,5,7,"div",18),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.YNc(23,ee,1,0,"app-success-dialog",19)),2&e&&(b.xp6(1),b.Q6J("ngIf",t.isEdit),b.xp6(1),b.Q6J("ngIf",!t.isEdit),b.xp6(1),b.Q6J("ngIf",t.employeeData),b.xp6(5),b.s9C("p-label",b.lcZ(9,17,"l-medical-certificate-reason")),b.s9C("p-placeholder",b.lcZ(10,19,"l-select-option")),b.Q6J("ngModel",t.reason)("p-options",t.reasons),b.xp6(3),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"initDate")&&!t.isVisible(t.reasonSelect,"endDate")),b.xp6(1),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"initDate")&&t.isVisible(t.reasonSelect,"endDate")),b.xp6(1),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"endDate")),b.xp6(1),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"days")),b.xp6(2),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"initHour")),b.xp6(2),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"endHour")),b.xp6(2),b.Q6J("ngIf",t.isVisible(t.reasonSelect,"hours")),b.xp6(1),b.Q6J("ngIf",!t.viewIsMobile),b.xp6(1),b.Q6J("ngIf",t.viewIsMobile),b.xp6(1),b.Q6J("ngIf",t.isDialogSuccessVisible))},directives:[p.O5,u._Y,u.JL,u.F,g.C9q,u.JJ,u.On,J.q,V.x,g.GWy,g.S5$,g.xxV,g.bOz,F.V],pipes:[d.X$],styles:[".send-button[_ngcontent-%COMP%]{margin-top:2%;padding-bottom:5px;padding-right:0}.attach-file-button[_ngcontent-%COMP%]{margin-top:1%;margin-bottom:1%}[_nghost-%COMP%]     .po-disclaimer-group{background-color:transparent;border:0px;padding:0;margin-top:1%;margin-bottom:6%}[_nghost-%COMP%]     .avatar-small{height:42px;width:42px}.aboutEmployee[_ngcontent-%COMP%]{padding-left:55px}@media only screen and (max-width: 480px){.send-button[_ngcontent-%COMP%]{margin-bottom:20px}}.center-block[_ngcontent-%COMP%]{margin:0 auto}.float-right[_ngcontent-%COMP%]{float:right}@media (min-width: 490px){.work-leave[_ngcontent-%COMP%]{margin:0 40px}}"]}),t}(),ie=s(14833),ne=s(64383),ae=s(84479),oe=s(37503),re=s(10690),se=s(32268);function le(e,t){if(1&e&&b._UZ(0,"app-card-employee",10),2&e){var i=b.oxw(2);b.Q6J("image",i.imageAvatar)("name",null==i.employeeData?null:i.employeeData.name)("role",null==i.employeeData?null:i.employeeData.roleDescription)("status",null==i.employeeData?null:i.employeeData.employeeStatus)}}function ce(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",11),b.TgZ(1,"po-table",12),b.NdJ("p-show-more",function(){return b.CHM(i),b.oxw(2).showMore()}),b.qZA(),b.qZA()}if(2&e){var n=b.oxw(2);b.xp6(1),b.Q6J("p-hide-select-all",!0)("p-sort",!0)("p-striped",!0)("p-columns",n.columns)("p-items",n.items)("p-actions",n.tableActions)("p-loading",n.loading)("p-show-more-disabled",n.showMoreDisable)}}function pe(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",27),b.TgZ(1,"po-button",28),b.NdJ("p-click",function(){b.CHM(i);var e=b.oxw().$implicit;return b.oxw(3).editWorkLeave(e)}),b.ALo(2,"translate"),b.qZA(),b.TgZ(3,"po-button",29),b.NdJ("p-click",function(){b.CHM(i);var e=b.oxw().$implicit;return b.oxw(3).removeWorkLeave(e)}),b.ALo(4,"translate"),b.qZA(),b.qZA()}if(2&e){var n=b.oxw().$implicit;b.xp6(1),b.s9C("p-label",b.lcZ(2,4,"l-edit")),b.Q6J("p-disabled",!n.canAlter),b.xp6(2),b.s9C("p-label",b.lcZ(4,6,"l-delete")),b.Q6J("p-disabled",!n.canAlter)}}function ue(e,t){if(1&e&&(b.TgZ(0,"div",17),b.TgZ(1,"app-expansion-card"),b.TgZ(2,"div",18),b._UZ(3,"div",19),b.TgZ(4,"div"),b.TgZ(5,"strong"),b._uU(6),b.ALo(7,"utcDate"),b.qZA(),b.qZA(),b.qZA(),b.TgZ(8,"div",20),b.TgZ(9,"div",21),b._UZ(10,"hr",22),b.TgZ(11,"label",23),b._uU(12),b.ALo(13,"translate"),b.qZA(),b.TgZ(14,"strong",24),b._uU(15),b.qZA(),b.qZA(),b.TgZ(16,"div",21),b._UZ(17,"hr",22),b.TgZ(18,"label",25),b._uU(19),b.ALo(20,"translate"),b.qZA(),b.TgZ(21,"strong",24),b._uU(22),b.ALo(23,"utcDate"),b.qZA(),b.qZA(),b.TgZ(24,"div",21),b._UZ(25,"hr",22),b.TgZ(26,"label",25),b._uU(27),b.ALo(28,"translate"),b.qZA(),b.TgZ(29,"strong",24),b._uU(30),b.ALo(31,"utcDate"),b.qZA(),b.qZA(),b.TgZ(32,"div",21),b._UZ(33,"hr",22),b.TgZ(34,"label",25),b._uU(35),b.ALo(36,"translate"),b.qZA(),b.TgZ(37,"strong",24),b._uU(38),b.qZA(),b.qZA(),b.TgZ(39,"div",21),b._UZ(40,"hr",22),b.TgZ(41,"label",25),b._uU(42),b.ALo(43,"translate"),b.qZA(),b.TgZ(44,"strong",24),b._uU(45),b.qZA(),b.qZA(),b.TgZ(46,"div",21),b._UZ(47,"hr",22),b.TgZ(48,"label",25),b._uU(49),b.ALo(50,"translate"),b.qZA(),b.TgZ(51,"strong",24),b._uU(52),b.qZA(),b.qZA(),b.TgZ(53,"div",21),b._UZ(54,"hr",22),b.TgZ(55,"label",25),b._uU(56),b.ALo(57,"translate"),b.qZA(),b.TgZ(58,"strong",24),b._uU(59),b.qZA(),b.qZA(),b.TgZ(60,"div",21),b._UZ(61,"hr",22),b.TgZ(62,"label",25),b._uU(63),b.ALo(64,"translate"),b.qZA(),b.TgZ(65,"strong",24),b._uU(66),b.qZA(),b.qZA(),b.YNc(67,pe,5,8,"div",26),b.qZA(),b.qZA(),b.qZA()),2&e){var i=t.$implicit,n=b.oxw(3);b.xp6(6),b.Oqu(b.xi3(7,18,i.initDate,"shortDate")),b.xp6(6),b.Oqu(b.lcZ(13,21,"l-reason")),b.xp6(3),b.Oqu(i.reason),b.xp6(4),b.Oqu(b.lcZ(20,23,"l-initial-date")),b.xp6(3),b.Oqu(b.xi3(23,25,i.initDate,"shortDate")),b.xp6(5),b.Oqu(b.lcZ(28,28,"l-end-date")),b.xp6(3),b.Oqu(b.xi3(31,30,i.endDate,"shortDate")),b.xp6(5),b.Oqu(b.lcZ(36,33,"l-days")),b.xp6(3),b.Oqu(i.days),b.xp6(4),b.Oqu(b.lcZ(43,35,"l-initial-hour")),b.xp6(3),b.Oqu(i.initHour),b.xp6(4),b.Oqu(b.lcZ(50,37,"l-final-hour")),b.xp6(3),b.Oqu(i.endHour),b.xp6(4),b.Oqu(b.lcZ(57,39,"l-hours")),b.xp6(3),b.Oqu(i.hours),b.xp6(4),b.Oqu(b.lcZ(64,41,"l-source")),b.xp6(3),b.Oqu(i.origin),b.xp6(1),b.Q6J("ngIf",n.showTableActions())}}function de(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",13),b.YNc(1,ue,68,43,"div",14),b.TgZ(2,"div",15),b.TgZ(3,"po-button",16),b.NdJ("p-click",function(){return b.CHM(i),b.oxw(2).showMore()}),b.ALo(4,"translate"),b.qZA(),b.qZA(),b.qZA()}if(2&e){var n=b.oxw(2);b.xp6(1),b.Q6J("ngForOf",n.items),b.xp6(2),b.s9C("p-label",b.lcZ(4,3,"l-load-more")),b.Q6J("p-disabled",n.showMoreDisable)}}function he(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",30),b._UZ(1,"img",31),b.TgZ(2,"div",32),b.TgZ(3,"p",33),b._uU(4),b.ALo(5,"translate"),b.qZA(),b.TgZ(6,"p",34),b._uU(7),b.ALo(8,"translate"),b.qZA(),b.TgZ(9,"po-button",35),b.NdJ("p-click",function(){return b.CHM(i),b.oxw(2).openModalFilter()}),b.ALo(10,"translate"),b.qZA(),b.qZA(),b.qZA()}2&e&&(b.xp6(4),b.Oqu(b.lcZ(5,3,"l-work-leave-not-found")),b.xp6(3),b.Oqu(b.lcZ(8,5,"l-request-new-period")),b.xp6(2),b.s9C("p-label",b.lcZ(10,7,"l-new-search")))}function ge(e,t){if(1&e){var i=b.EpF();b.TgZ(0,"div",3),b.TgZ(1,"app-page-header",4),b.NdJ("backFunction",function(){return b.CHM(i),b.oxw().back()}),b.qZA(),b.YNc(2,le,1,4,"app-card-employee",5),b.TgZ(3,"po-page-dynamic-search",6),b.NdJ("p-change-disclaimers",function(e){return b.CHM(i),b.oxw().onChangeDisclaimers(e)})("p-quick-search",function(e){return b.CHM(i),b.oxw().onQuickSearch(e)})("p-advanced-search",function(e){return b.CHM(i),b.oxw().onAdvancedSearch(e)}),b.qZA(),b.YNc(4,ce,2,8,"div",7),b.YNc(5,de,5,5,"div",8),b.YNc(6,he,11,9,"div",9),b.qZA()}if(2&e){var n=b.oxw();b.xp6(1),b.Q6J("backIsVisible",n.viewIsTeamManagement),b.xp6(1),b.Q6J("ngIf",n.employeeData),b.xp6(1),b.Q6J("ngClass",n.hasDisclaimers?"disclaimer":"")("p-actions",n.pageActions)("p-filters",n.filters)("p-literals",n.literals),b.xp6(1),b.Q6J("ngIf",!n.isMobile&&!n.workLeaveIsEmpty()),b.xp6(1),b.Q6J("ngIf",n.isMobile&&!n.workLeaveIsEmpty()),b.xp6(1),b.Q6J("ngIf",n.workLeaveIsEmpty())}}var me=[{path:"",component:function(){var e=function(){function e(t,i,n,a,o,s,l,c,p,u,d){r(this,e),this.appTranslateService=t,this.workLeaveService=i,this.windowUtilService=n,this.teamManagementService=a,this.activatedRoute=o,this.router=s,this.permissionSelector=l,this.fieldPropertiesService=c,this.lastAccessService=p,this.globals=u,this.moment=d,this.workLeaveListView=new C.i([]),this.pageActions=[],this.tableActions=[],this.items=[],this.loggedUser=Z.N.loggedUser,this.employeeId=Z.N.loggedUser,this.viewIsTeamManagement=!1,this.showRequest=!1,this.hasDisclaimers=!0,this.fieldPropertiesView={initHour:!0,endHour:!0,hours:!0,origin:!0},this.close=new b.vpe}return l(e,[{key:"ngOnInit",value:function(){this.workLeaveListView.actualPage=1,this.workLeaveListView.pageSize=10,this.showMoreDisable=!1,this.initializeComponent()}},{key:"ngOnDestroy",value:function(){this.permissionSubscription&&this.permissionSubscription.unsubscribe(),this.routeDataSubscription&&this.routeDataSubscription.unsubscribe(),this.viewIsTeamManagement&&!this.shouldKeepEmployee&&this.teamManagementService.cleanEmployeeCard()}},{key:"initializeComponent",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getPermissions(),this.getFieldProperties(),this.subscribeToActivatedRoute(),this.isMobileCheck(),this.getLabelsSearch(),this.getColumns(),this.getPageActions(),this.getTableActions(),this.setCountLastAccess(),this.viewIsTeamManagement||this.getData(!0);case 1:case"end":return e.stop()}},e,this)}))}},{key:"getPermissions",value:function(){var e=this;this.permissionSubscription=this.permissionSelector.permissions$.subscribe(function(t){e.permissions=t,e.canRequest=void 0!==e.permissions.teamManagementWorkLeaveRequest&&e.permissions.teamManagementWorkLeaveRequest,e.canEdit=void 0!==e.permissions.teamManagementWorkLeaveEdit&&e.permissions.teamManagementWorkLeaveEdit})}},{key:"getFieldProperties",value:function(){var e=this;this.fieldPropertiesService.getFieldProperties("workLeave").then(function(t){e.fieldProperties=t,e.fieldProperties.forEach(function(t){"initHour"===t.field?e.fieldPropertiesView.initHour=t.visible:"endHour"===t.field?e.fieldPropertiesView.endHour=t.visible:"hours"===t.field?e.fieldPropertiesView.hours=t.visible:"origin"===t.field&&(e.fieldPropertiesView.origin=t.visible)})})}},{key:"isMobileCheck",value:function(){this.isMobile=this.windowUtilService.isMobileDevice()}},{key:"translateString",value:function(e){return this.appTranslateService.getI18n(e)}},{key:"getData",value:function(e){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getWorkLeavesList(this.viewIsTeamManagement?this.employeeData.id:this.employeeId,this.workLeaveListView.actualPage,this.workLeaveListView.pageSize,e,this.initDateFilter,this.endDateFilter,this.reasonFilter);case 2:case"end":return t.stop()}},t,this)}))}},{key:"showMore",value:function(){this.getWorkLeavesList(this.viewIsTeamManagement?this.employeeData.id:this.employeeId,this.workLeaveListView.getNextPage(),this.workLeaveListView.pageSize,!1,this.initDateFilter,this.endDateFilter,this.reasonFilter)}},{key:"onAdvancedSearch",value:function(e){e?this.searchItems(e):this.resetFilters()}},{key:"onChangeDisclaimers",value:function(e){var t={};e.forEach(function(e){t[e.property]=e.value}),this.searchItems(t)}},{key:"onQuickSearch",value:function(e){e?this.searchItems({reason:e}):this.resetFilters()}},{key:"requestWorkLeave",value:function(){this.workLeaveEdit=void 0,this.shouldKeepEmployee=!0,this.request.loadRequest(),this.showRequest=!0}},{key:"editWorkLeave",value:function(e){this.request.workLeaveEdit=this.workLeaveListView.records.find(function(t){return t.id==e.id}),this.request.loadEdit(),this.showRequest=!0}},{key:"removeWorkLeave",value:function(e){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.employeeId=this.viewIsTeamManagement?this.employeeData.id:this.employeeId,this.workLeaveId=e.id,this.excludeDialog.openDialog();case 1:case"end":return t.stop()}},t,this)}))}},{key:"back",value:function(){this.windowUtilService.back()}},{key:"subscribeToActivatedRoute",value:function(){var e=this;this.routeDataSubscription=this.activatedRoute.data.pipe((0,L.U)(function(e){return e.management})).subscribe(function(t){if(e.viewIsTeamManagement=!!t,t){if(null==e.teamManagementService.getEmployeeCard().employee)return void e.router.navigateByUrl("teamManagement");e.teamManagementWorkLeave()}})}},{key:"teamManagementWorkLeave",value:function(){var e=this.teamManagementService.getEmployeeCard(),t=e.employee,i=e.image;this.items=[],this.employeeData=t,this.imageAvatar=i,this.getData(!0)}},{key:"showRequestButton",value:function(){return this.canRequest&&this.viewIsTeamManagement}},{key:"showTableActions",value:function(){return this.canEdit&&this.viewIsTeamManagement}},{key:"disableAction",value:function(e){return!e.canAlter}},{key:"onDeleteWorkLeave",value:function(){this.getData(!0)}},{key:"closeRequest",value:function(){this.getData(!0),this.showRequest=!1}},{key:"workLeaveIsEmpty",value:function(){return!(this.isLoading||this.items&&0!==this.items.length)}},{key:"openModalFilter",value:function(){this.poAdvancedFilter.onAdvancedAction()}},{key:"getPageActions",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.canRequest||!this.viewIsTeamManagement){e.next=9;break}return e.next=3,this.translateString("l-request-work-leave");case 3:e.t1=e.sent.toString(),e.t2=this.requestWorkLeave.bind(this),e.t3={label:e.t1,action:e.t2},e.t0=[e.t3],e.next=10;break;case 9:e.t0=[];case 10:this.pageActions=e.t0;case 11:case"end":return e.stop()}},e,this)}))}},{key:"getTableActions",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.editWorkLeave.bind(this),e.next=3,this.translateString("l-edit");case 3:return e.t1=e.sent.toString(),e.t2=this.disableAction.bind(this),e.t3=this.showTableActions(),e.t4={action:e.t0,label:e.t1,disabled:e.t2,visible:e.t3},e.t5=this.removeWorkLeave.bind(this),e.next=10,this.translateString("l-delete");case 10:e.t6=e.sent.toString(),e.t7=this.disableAction.bind(this),e.t8=this.showTableActions(),e.t9={action:e.t5,label:e.t6,disabled:e.t7,visible:e.t8},this.tableActions=[e.t4,e.t9];case 15:case"end":return e.stop()}},e,this)}))}},{key:"getLabelsSearch",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-filter-applied");case 2:return e.t0=e.sent.toString(),e.next=5,this.translateString("l-advanced-search");case 5:return e.t1=e.sent.toString(),e.next=8,this.translateString("l-cancel-title");case 8:return e.t2=e.sent.toString(),e.next=11,this.translateString("l-apply");case 11:return e.t3=e.sent.toString(),e.next=14,this.translateString("l-reason");case 14:return e.t4=e.sent.toString(),e.next=17,this.translateString("l-search-reason-placeholder");case 17:return e.t5=e.sent.toString(),this.literals={disclaimerGroupTitle:e.t0,filterTitle:e.t1,filterCancelLabel:e.t2,filterConfirmLabel:e.t3,quickSearchLabel:e.t4,searchPlaceholder:e.t5},t=new Date,i=new Date,t.setDate(t.getDate()-90),i.setDate(i.getDate()+365),e.next=24,this.translateString("l-initial-date");case 24:return e.t6=e.sent.toString(),e.t7=this.moment.getInstance(t).format("YYYY-MM-DD"),e.t8={property:"initDate",label:e.t6,type:"date",gridColumns:6,initValue:e.t7},e.next=29,this.translateString("l-end-date");case 29:return e.t9=e.sent.toString(),e.t10=this.moment.getInstance(i).format("YYYY-MM-DD"),e.t11={property:"endDate",label:e.t9,type:"date",gridColumns:6,initValue:e.t10},e.next=34,this.translateString("l-reason");case 34:e.t12=e.sent.toString(),e.t13={property:"reason",label:e.t12,gridColumns:12},this.filters=[e.t8,e.t11,e.t13];case 37:case"end":return e.stop()}},e,this)}))}},{key:"resetFilters",value:function(){this.workLeaveListView.actualPage>1&&(this.workLeaveListView.actualPage=1),this.getData(!0)}},{key:"searchItems",value:function(e){this.initDateFilter=e.initDate?new Date(e.initDate):void 0,this.endDateFilter=e.endDate?new Date(e.endDate):void 0,this.reasonFilter=e.reason?e.reason:void 0,this.hasDisclaimers=!!(this.initDateFilter||this.endDateFilter||this.reasonFilter),this.workLeaveListView.actualPage>1&&(this.workLeaveListView.actualPage=1),this.getData(!0)}},{key:"getColumns",value:function(){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.translateString("l-reason");case 2:return e.t0=e.sent.toString(),e.t1={property:"reason",label:e.t0,width:"30%"},e.next=6,this.translateString("l-initial-date");case 6:return e.t2=e.sent.toString(),e.t3={property:"initDate",label:e.t2,type:"date",width:"10%"},e.next=10,this.translateString("l-end-date");case 10:return e.t4=e.sent.toString(),e.t5={property:"endDate",label:e.t4,type:"date",width:"10%"},e.next=14,this.translateString("l-days");case 14:return e.t6=e.sent.toString(),e.t7={property:"days",label:e.t6,width:"8%"},e.next=18,this.translateString("l-initial-hour");case 18:return e.t8=e.sent.toString(),e.t9=this.fieldPropertiesView.initHour,e.t10={property:"initHour",label:e.t8,width:"10%",visible:e.t9},e.next=23,this.translateString("l-final-hour");case 23:return e.t11=e.sent.toString(),e.t12=this.fieldPropertiesView.endHour,e.t13={property:"endHour",label:e.t11,width:"10%",visible:e.t12},e.next=28,this.translateString("l-hours");case 28:return e.t14=e.sent.toString(),e.t15=this.fieldPropertiesView.hours,e.t16={property:"hours",label:e.t14,width:"8%",visible:e.t15},e.next=33,this.translateString("l-source");case 33:e.t17=e.sent.toString(),e.t18=this.fieldPropertiesView.origin,e.t19={property:"origin",label:e.t17,width:"14%",visible:e.t18},this.columns=[e.t1,e.t3,e.t5,e.t7,e.t10,e.t13,e.t16,e.t19];case 37:case"end":return e.stop()}},e,this)}))}},{key:"getWorkLeavesList",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var l;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.isLoading=!0,s.prev=1,s.next=4,this.workLeaveService.getWorkLeaves(e,t,i,r,a,o);case 4:if(!(l=s.sent)){s.next=7;break}return s.abrupt("return",void this.updateItemsForTable(l,n));case 7:s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),this.isLoading=!1;case 12:this.workLeaveListView.hasMoreRecords=!1;case 13:case"end":return s.stop()}},s,this,[[1,9]])}))}},{key:"updateItemsForTable",value:function(e,t){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:for(this.clearData(t),this.workLeaveListView.records=this.workLeaveListView.records.concat(e.items),this.workLeaveListView.hasMoreRecords=e.hasNext,this.isLoading=!1,n=0;n<this.workLeaveListView.records.length;n++)this.items[n]={id:this.workLeaveListView.records[n].id,canAlter:this.workLeaveListView.records[n].canAlter,reason:this.workLeaveListView.records[n].reason.name,initDate:A.Em.formatUTCDate(new Date(this.workLeaveListView.records[n].initDate)),endDate:A.Em.formatUTCDate(new Date(this.workLeaveListView.records[n].endDate)),days:this.workLeaveListView.records[n].days,initHour:A.Em.getHoursByMilliseconds(this.workLeaveListView.records[n].initHour),endHour:A.Em.getHoursByMilliseconds(this.workLeaveListView.records[n].endHour),hours:A.Em.getHoursByMilliseconds(this.workLeaveListView.records[n].hours),origin:this.workLeaveListView.records[n].origin};this.items.length<this.workLeaveListView.actualPage*this.workLeaveListView.pageSize&&(this.showMoreDisable=!0);case 3:case"end":return i.stop()}},i,this)}))}},{key:"clearData",value:function(e){(!this.workLeaveListView.records||e)&&(this.workLeaveListView.records=[],e&&(this.items=[]))}},{key:"setCountLastAccess",value:function(){var e=this;this.globals.getEmployeeSummary().then(function(t){e.lastAccessService.setLastAccess(ie.Ye,t.id)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(b.Y36(S.g),b.Y36(k),b.Y36(ae.g),b.Y36(T.C),b.Y36(m.gz),b.Y36(m.F0),b.Y36(H.eL),b.Y36(E.c),b.Y36(ie.Lx),b.Y36(oe.O),b.Y36(ne.z))},e.\u0275cmp=b.Xpm({type:e,selectors:[["workLeave"]],viewQuery:function(e,t){var i;(1&e&&(b.Gf(h.O6,5),b.Gf(q,5),b.Gf(te,5)),2&e)&&(b.iGM(i=b.CRH())&&(t.poAdvancedFilter=i.first),b.iGM(i=b.CRH())&&(t.excludeDialog=i.first),b.iGM(i=b.CRH())&&(t.request=i.first))},outputs:{close:"close"},decls:3,vars:5,consts:[["class","work-leave",4,"ngIf"],[3,"employeeId","workLeaveId","deleted"],[3,"hidden","workLeaveEdit","closeRequest"],[1,"work-leave"],["pageTitle","l-work-leaves",3,"backIsVisible","backFunction"],[3,"image","name","role","status",4,"ngIf"],["p-title"," ",3,"ngClass","p-actions","p-filters","p-literals","p-change-disclaimers","p-quick-search","p-advanced-search"],["class","desktop",4,"ngIf"],["class","mobile",4,"ngIf"],["class","empty-center",4,"ngIf"],[3,"image","name","role","status"],[1,"desktop"],["p-container","","p-hide-text-overflow","","p-selectable","false",3,"p-hide-select-all","p-sort","p-striped","p-columns","p-items","p-actions","p-loading","p-show-more-disabled","p-show-more"],[1,"mobile"],["class","margin-card",4,"ngFor","ngForOf"],[1,"alignCenter","load-container"],[1,"load-more",3,"p-disabled","p-label","p-click"],[1,"margin-card"],["card-header","",1,"mr-card-header","po-sm-12","po-md-12","po-lg-12","po-xl-12"],[1,"pull-left"],["card-body",""],[1,"card-line"],[1,"line"],["for","date",1,"po-sm-3","po-md-5"],[1,"pull-right"],["for","date",1,"po-sm-6","po-md-6"],["class","button-actions edit-button",4,"ngIf"],[1,"button-actions","edit-button"],[1,"po-sm-12","po-md-12","po-mb-sm-1","po-mb-md-1","edit-button",3,"p-disabled","p-label","p-click"],[1,"po-sm-12","po-md-12","delete-button",3,"p-disabled","p-label","p-click"],[1,"empty-center"],["src","assets/img/empty-state.svg",1,"img-empty"],[1,"po-xl-12","po-lg-12","po-md-12","po-sm-12"],[1,"label-empty"],[1,"text-filter"],["id","new-search","p-type","primary",3,"p-label","p-click"]],template:function(e,t){1&e&&(b.YNc(0,ge,7,9,"div",0),b.TgZ(1,"app-exclude-work-leave",1),b.NdJ("deleted",function(){return t.onDeleteWorkLeave()}),b.qZA(),b.TgZ(2,"app-request-work-leave",2),b.NdJ("closeRequest",function(){return t.closeRequest()}),b.qZA()),2&e&&(b.Q6J("ngIf",!t.showRequest),b.xp6(1),b.Q6J("employeeId",t.employeeId)("workLeaveId",t.workLeaveId),b.xp6(1),b.Q6J("hidden",!t.showRequest)("workLeaveEdit",t.workLeaveEdit))},directives:[p.O5,q,te,J.q,h.O6,p.mk,V.x,g._w3,p.sg,g.bOz,re.c],pipes:[d.X$,se.$],styles:["[_nghost-%COMP%]     div.po-page{margin-left:0!important;width:100%!important}[_nghost-%COMP%]     div.po-page div.po-page-content{width:100%!important;height:0px!important}[_nghost-%COMP%]     div.po-page div.po-page-header{padding-left:0;padding-right:0}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:block}}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page{display:block;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-bottom:0}}.card-line[_ngcontent-%COMP%]{font-size:14px}.line[_ngcontent-%COMP%]{margin:35px 0 10px}.buttons-mobile[_ngcontent-%COMP%]{padding-bottom:7px}.edit-button[_ngcontent-%COMP%]{float:left}.delete-button[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]     .button-actions{width:100%;padding-top:5px}.avatar-small[_ngcontent-%COMP%]{float:left;margin:5px 8px 0 0}.pull-right[_ngcontent-%COMP%]{padding:0 8px;float:right!important}.margin-card[_ngcontent-%COMP%]{margin-bottom:10px}.mobile[_ngcontent-%COMP%]{overflow-y:visible}.load-container[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:20px}@media (min-width: 490px){.work-leave[_ngcontent-%COMP%]{margin:0 40px}}.text-filter[_ngcontent-%COMP%]{margin-top:-1%!important;margin-bottom:3%;color:#8e8e93;font-size:19px}.label-empty[_ngcontent-%COMP%]{font-size:23px}.img-empty[_ngcontent-%COMP%]{width:100%;max-width:220px;padding-bottom:10px;margin-bottom:20px}@media only screen and (min-width: 481px) and (max-width: 960px){.img-empty[_ngcontent-%COMP%]{width:100%;max-width:365px;padding-bottom:10px;margin-bottom:20px}}.empty-center[_ngcontent-%COMP%]{text-align:center;margin-top:3%;margin-bottom:25%}@media only screen and (min-width: 320px) and (max-width: 768px){.empty-center[_ngcontent-%COMP%]{text-align:center;margin-top:3%;padding-bottom:25%;margin-bottom:57%!important}.text-filter[_ngcontent-%COMP%]{padding-bottom:4%!important}}[_nghost-%COMP%]     .po-table-header-block{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;float:left}[_nghost-%COMP%]     .po-table-header-icon-unselected:after{float:none}[_nghost-%COMP%]     .po-table-header-icon-descending:after{float:none}[_nghost-%COMP%]     .po-table-header-icon-ascending:after{float:none}[_nghost-%COMP%]     .po-table-column-manager-footer .po-button{border:none!important}[_nghost-%COMP%]     .po-page-header{padding:16px}[_nghost-%COMP%]     .po-page-list-filter-wrapper{margin-top:0!important;float:left}[_nghost-%COMP%]     .disclaimer{margin-top:100px}[_nghost-%COMP%]     .po-page-list-operations{display:flow-root}@media screen and (min-width: 490px){[_nghost-%COMP%]     .po-page-list-actions{float:right;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .po-page-list-actions .po-button{margin-right:0;height:44px;padding:10px}}@media screen and (max-width: 490px){[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-filter-content{width:calc(100% - 72px)}[_nghost-%COMP%]     .po-page-list-actions{margin-top:-18px;margin-bottom:28px}[_nghost-%COMP%]     .po-page-list-actions .po-button{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-input, [_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{height:44px}[_nghost-%COMP%]     .po-page-list-filter-wrapper .po-page-list-filter-search-link{font-size:12px}[_nghost-%COMP%]     .load-more .po-button{height:44px;width:100%;padding:0}}[_nghost-%COMP%]     #new-search .po-button{height:44px;padding:0 18px}"]}),e}(),canActivate:[M.P]},{path:"request",component:te,canActivate:[M.P]}],ve=function(){var e=l(function e(){r(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[m.Bz.forChild(me)],m.Bz]}),e}(),fe=function(){var e=l(function e(){r(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[k],imports:[[p.ez,u.u5,g.JBz,d.aw,y.d,x.q,h.Pu,D.Y,m.Bz,ve]]}),e}()}}])}();