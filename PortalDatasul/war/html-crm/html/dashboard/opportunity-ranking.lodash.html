<div ng-controller="crm.dashboard.opportunity-ranking.controller as controller">
	<totvs-widget>
		<crm-totvs-widget-header refresh="controller.refresh()"
								 settings="controller.showConfig()"
								 title="{{'l-opportunity-ranking' | i18n : [] : 'dts/crm/' }}">
			<i class="glyphicon glyphicon-info-sign hidden-xs"
			   tooltip-placement="bottom"
			   tooltip-html="controller.tooltipHelp">
			</i>
		</crm-totvs-widget-header>

		<totvs-widget-body>

			<div style="height: 300px;max-height: 300px;">

				<div style="height:100%">

					<crm-totvs-chart
						ng-if="controller.series && controller.series.length > 0"
						t-options="controller.options"
						t-type-chart="column"
						t-on-click="controller.onClick"
						t-series="controller.series">
					</crm-totvs-chart>

					<p ng-if="!controller.series || controller.series <= 0"
						class="text-center" style="vertical-align: middle">
						{{ 'l-no-data' | i18n : [] : 'dts/crm'}}
					</p>

				</div>

			</div>

		</totvs-widget-body>

		<totvs-widget-footer>
			<crm-totvs-widget-footer-actions>
				<action ng-click="controller.detailRanking(controller.series)">{{ 'l-detail' | i18n : [] : 'dts/crm/'}}</action>

				<% if ((!data["btn-new-opportunity"] || data["btn-new-opportunity"].log_visivel === true)) { %>
				<action ng-click="controller.openOpportunity()">{{ 'btn-new-opportunity' | i18n : [] : 'dts/crm/'}}</action>
				<% } %>

			</crm-totvs-widget-footer-actions>
			<div>
				<i class="glyphicon glyphicon-user hidden-xs pull-right"
				   style="padding:2px 6px;"
				   ng-if="controller.accountSelected"
				   tooltip-placement="bottom"
				   tooltip-html="controller.tooltip">
				</i>
			</div>
		</totvs-widget-footer>
	</totvs-widget>
</div>

