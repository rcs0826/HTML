<totvs-page-child type="list">

	<br/>

	<totvs-page-content class="crm-tab">

		<totvs-page-alert type="info"
						  message="{{ 'msg-not-found-strategy-goal' | i18n: []: 'dts/crm' }}"
						  ng-if="!controller.model.ttMeta || controller.model.ttMeta.length <= 0">
			<br>
			<button type="button"
					class="btn btn-primary"
					ng-click="controller.addEditStrategyGoal();">
				<span class="glyphicon glyphicon-plus"></span>
				&nbsp;&nbsp;{{ 'btn-add' | i18n: []: 'dts/crm' }}
			</button>
		</totvs-page-alert>

		<div ng-if="controller.model.ttMeta.length">

			<div class="col-xs-12 col-sm-4 col-md-3"
				 style="padding-left: 0;">

				<div class="crm-tab">

					<div class="row crm-tab-item clickable hover"
						 ng-click="controller.selectStrategyGoal(goal);"
						 ng-class="{ 'crm-selected' : goal.$selected }"
						 ng-repeat="goal in controller.model.ttMeta">

						<div class="col-xs-12 clickable overflow-ellipsis">
							{{ goal.des_meta }}
							<br/>
							<small>
								{{ goal.dat_inic | date : ('l-date-format' | i18n: []: 'dts/crm') }}
								 -
								{{ goal.dat_fim | date : ('l-date-format' | i18n: []: 'dts/crm') }}
							</small>
						</div>

					</div>

				</div>

				<br/>

				<button type="button"
						class="btn btn-primary col-xs-12"
						ng-click="controller.addEditStrategyGoal();">
					<span class="glyphicon glyphicon-plus"></span>
					{{ 'btn-add' | i18n: []: 'dts/crm' }}
				</button>
			</div>

			<div class="col-xs-12 col-sm-8 col-md-9"
				 style="padding-right: 0;">

				<div class="row">

					<div class="col-xs-8">
						<h3 style="margin-top: 0px;">
							{{ controller.selectedGoal.des_meta }}
						</h3>
					</div>

					<div class="col-xs-4">
						<div class="pull-right">

							<button type="button"
									class="btn btn-primary"
									ng-click="controller.addEditStrategyGoal(controller.selectedGoal);">
								<span class="glyphicon glyphicon-pencil"></span>
								<span class="hidden-xs">{{ 'btn-edit' | i18n: []: 'dts/crm' }}</span>
							</button>

							<button type="button"
									class="btn btn-default"
									ng-click="controller.removeStrategyGoal(controller.selectedGoal);">
								<span class="glyphicon glyphicon-trash"></span>
								<span class="hidden-xs">{{ 'btn-remove' | i18n: []: 'dts/crm' }}</span>
							</button>

						</div>
					</div>

					<totvs-tabset>

						<tabset>

							<tab heading="{{ 'nav-phase' | i18n: []: 'dts/crm' }} ({{ controller.selectedGoal.ttMetaFase.length || 0 }} / {{ controller.model.ttFase.length || 0 }})">
								<ng-include src="'/dts/crm/html/strategy/goal/phase/phase.tab.html'"></ng-include>
							</tab>

						</tabset>

					</totvs-tabset>

				</div>

			</div>
		</div>

	</totvs-page-content>

</totvs-page-child>
